# UserInteractionService - DocumentaciÃ³n\n\n## Â¿QuÃ© hace?\nRegistra automÃ¡ticamente las interacciones de usuarios autenticados para enriquecer el algoritmo de recomendaciones.\n\n## CaracterÃ­sticas\nâœ… **AutomÃ¡tico**: Solo registra para usuarios autenticados  \nâœ… **No bloqueante**: No afecta la UX si hay errores  \nâœ… **Optimizado**: Manejo eficiente de errores y logging  \nâœ… **Flexible**: MÃºltiples tipos de interacciones  \nâœ… **Preparado para futuro**: Soporte para batching  \n\n## Uso Simple con Hook\n\n### En componentes:\n```typescript\nimport useUserInteractions from '../hooks/useUserInteractions';\n\nconst MyComponent = () => {\n  const { trackAddToCart, trackProductView } = useUserInteractions('my_component');\n  \n  const handleAddToCart = (productId: number) => {\n    // Tu lÃ³gica de carrito\n    addProductToCart(productId);\n    \n    // Registro automÃ¡tico (solo usuarios autenticados)\n    trackAddToCart(productId, 1);\n  };\n  \n  return (\n    // Tu JSX\n  );\n};\n```\n\n## Uso Directo del Servicio\n\n### Importar:\n```typescript\nimport UserInteractionService from '../services/UserInteractionService';\n```\n\n### MÃ©todos disponibles:\n\n#### Productos\n- `trackProductView(productId, source?, metadata?)` - Vista de producto\n- `trackProductClick(productId, source?, metadata?)` - Click en producto  \n- `trackAddToCart(productId, quantity?, source?)` - AÃ±adir al carrito\n- `trackAddToWishlist(productId, source?)` - AÃ±adir a favoritos\n- `trackRemoveFromWishlist(productId, source?)` - Quitar de favoritos\n- `trackTimeOnProduct(productId, seconds, source?)` - Tiempo en pÃ¡gina\n- `trackRating(productId, rating, source?)` - ValoraciÃ³n\n\n#### NavegaciÃ³n\n- `trackSearch(term, resultsCount?, source?)` - BÃºsquedas\n- `trackCategoryView(categoryId, name, source?)` - Vista de categorÃ­a\n\n#### Compras\n- `trackPurchase(productIds[], totalAmount, orderId?)` - Compra completada\n\n### Ejemplos:\n\n```typescript\n// Vista de producto\nUserInteractionService.trackProductView(123, 'product_page');\n\n// BÃºsqueda\nUserInteractionService.trackSearch('smartphone', 45, 'search_bar');\n\n// Compra\nUserInteractionService.trackPurchase([1, 2, 3], 299.99, 'ORD-123');\n\n// Tiempo en pÃ¡gina (solo > 10 segundos)\nUserInteractionService.trackTimeOnProduct(123, 45, 'product_page');\n```\n\n## ConfiguraciÃ³n\n\n```typescript\n// Deshabilitar logging\nUserInteractionService.setLogging(false);\n\n// Ver configuraciÃ³n\nconst config = UserInteractionService.getConfig();\n\n// EstadÃ­sticas de cola\nconst stats = UserInteractionService.getQueueStats();\n```\n\n## ImplementaciÃ³n en Componentes Clave\n\n### ProductCarousel\n- âœ… `trackAddToCart` en botones de carrito\n- âœ… `trackAddToWishlist` en botones de favoritos  \n- ðŸ”„ TODO: `trackProductClick` en clicks de productos\n\n### ProductPage\n- ðŸ”„ TODO: `trackProductView` al montar componente\n- ðŸ”„ TODO: `trackTimeOnProduct` al desmontar\n- ðŸ”„ TODO: `trackRating` en valoraciones\n\n### SearchPage\n- ðŸ”„ TODO: `trackSearch` en bÃºsquedas\n\n### CategoryPage\n- ðŸ”„ TODO: `trackCategoryView` al navegar\n\n## Ventajas\n\n1. **Para usuarios NO autenticados**: No hace nada (no afecta rendimiento)\n2. **Para usuarios autenticados**: Enriquece progresivamente el perfil\n3. **Algoritmo inteligente**: MÃ¡s interacciones = mejores recomendaciones\n4. **No invasivo**: Funciona en background sin afectar UX\n\n## Flujo de Datos\n\n```\nUsuario interactÃºa â†’ Servicio verifica auth â†’ Si auth: registra â†’ Backend guarda â†’ Algoritmo mejora â†’ Mejores recomendaciones\n```\n\n---\n\n**Nota**: El servicio es \"fail-safe\" - si hay errores de red o backend, no afecta la experiencia del usuario.\n
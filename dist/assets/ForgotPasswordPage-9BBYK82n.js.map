{"version":3,"file":"ForgotPasswordPage-9BBYK82n.js","sources":["../../src/presentation/pages/ForgotPasswordPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axiosInstance from '../../infrastructure/api/axiosConfig';\r\nimport { API_ENDPOINTS } from '../../constants/apiEndpoints';\r\n\r\n/**\r\n * Página de recuperación de contraseña\r\n * Solo permite recuperación por correo electrónico\r\n */\r\nconst ForgotPasswordPage: React.FC = () => {\r\n  // Estados para el método de email\r\n  const [email, setEmail] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState<string | null>(null);\r\n\r\n  // Manejar la solicitud por correo electrónico\r\n  const handleEmailReset = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!email.trim() || !/\\S+@\\S+\\.\\S+/.test(email)) {\r\n      setError('Por favor ingresa un correo electrónico válido');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n    \r\n    try {\r\n      const response = await axiosInstance.post(API_ENDPOINTS.AUTH.FORGOT_PASSWORD_EMAIL, { email });\r\n      \r\n      // Verificar la respuesta correcta del backend\r\n      if (response.data?.status === 'success' && response.data?.email_sent) {\r\n        setSuccess(\r\n          'Se ha enviado un correo electrónico con instrucciones para recuperar tu contraseña. ' +\r\n          'Por favor revisa tu bandeja de entrada y carpeta de spam.'\r\n        );\r\n      } else if (response.data?.status === 'success') {\r\n        // Email no enviado pero proceso exitoso (modo desarrollo)\r\n        setSuccess(\r\n          'Solicitud procesada correctamente. Si el correo existe en nuestro sistema, recibirás un enlace de restablecimiento.'\r\n        );\r\n      } else {\r\n        setError('No se pudo procesar la solicitud. Inténtalo de nuevo.');\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Error al solicitar recuperación por email:', err);\r\n      \r\n      if (err.response?.status === 422) {\r\n        setError('Correo electrónico inválido o no registrado');\r\n      } else if (err.response?.data?.message) {\r\n        setError(err.response.data.message);\r\n      } else {\r\n        setError('Error al procesar la solicitud. Inténtalo de nuevo más tarde.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-[80vh] flex items-center justify-center py-12 px-4\">\r\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-3xl font-extrabold text-gray-900\">\r\n            ¿Olvidaste tu contraseña?\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            No te preocupes, te ayudamos a recuperarla\r\n          </p>\r\n        </div>\r\n        \r\n        {/* Mostrar mensajes de error/éxito */}\r\n        {error && (\r\n          <div className=\"bg-red-50 text-red-700 p-3 rounded-md text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        {success && (\r\n          <div className=\"bg-green-50 text-green-700 p-3 rounded-md text-sm\">\r\n            {success}\r\n          </div>\r\n        )}\r\n        \r\n        {/* Formulario para solicitar reset por email */}\r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleEmailReset}>\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n              Correo electrónico\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              name=\"email\"\r\n              type=\"email\"\r\n              autoComplete=\"email\"\r\n              required\r\n              className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"tu@email.com\"\r\n            />\r\n            <p className=\"mt-2 text-sm text-gray-500\">\r\n              Te enviaremos un enlace seguro para que puedas crear una nueva contraseña.\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-between\">\r\n            <Link\r\n              to=\"/login\"\r\n              className=\"text-sm font-medium text-primary-600 hover:text-primary-500\"\r\n            >\r\n              Volver al inicio de sesión\r\n            </Link>\r\n            \r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {loading ? 'Enviando...' : 'Enviar enlace'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Enlaces adicionales */}\r\n        <div className=\"text-center space-y-2\">\r\n          <div className=\"text-sm text-gray-500\">\r\n            ¿No tienes una cuenta?{' '}\r\n            <Link\r\n              to=\"/register\"\r\n              className=\"font-medium text-primary-600 hover:text-primary-500\"\r\n            >\r\n              Regístrate aquí\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ForgotPasswordPage;"],"names":["ForgotPasswordPage","email","setEmail","useState","loading","setLoading","error","setError","success","setSuccess","handleEmailReset","e","response","axiosInstance","API_ENDPOINTS","err","jsxs","jsx","Link"],"mappings":"uJASA,MAAMA,EAA+B,IAAM,CAEzC,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EACtC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAChD,CAACK,EAASC,CAAU,EAAIN,EAAAA,SAAwB,IAAI,EAGpDO,EAAmB,MAAOC,GAAuB,CAGjD,GAFJA,EAAE,eAAe,EAEb,CAACV,EAAM,KAAK,GAAK,CAAC,eAAe,KAAKA,CAAK,EAAG,CAChDM,EAAS,gDAAgD,EACzD,MAAA,CAGFF,EAAW,EAAI,EACfE,EAAS,IAAI,EACbE,EAAW,IAAI,EAEX,GAAA,CACI,MAAAG,EAAW,MAAMC,EAAc,KAAKC,EAAc,KAAK,sBAAuB,CAAE,MAAAb,EAAO,EAGzFW,EAAS,MAAM,SAAW,WAAaA,EAAS,MAAM,WACxDH,EACE,+IAEF,EACSG,EAAS,MAAM,SAAW,UAEnCH,EACE,qHACF,EAEAF,EAAS,uDAAuD,QAE3DQ,EAAU,CACT,QAAA,MAAM,6CAA8CA,CAAG,EAE3DA,EAAI,UAAU,SAAW,IAC3BR,EAAS,6CAA6C,EAC7CQ,EAAI,UAAU,MAAM,QACpBR,EAAAQ,EAAI,SAAS,KAAK,OAAO,EAElCR,EAAS,+DAA+D,CAC1E,QACA,CACAF,EAAW,EAAK,CAAA,CAEpB,EAEA,aACG,MAAI,CAAA,UAAU,2DACb,SAACW,EAAA,KAAA,MAAA,CAAI,UAAU,8DACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,cACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,4BAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,4CAAA,CAAA,CAAA,EACF,EAGCX,GACCW,EAAA,IAAC,MAAI,CAAA,UAAU,gDACZ,SACHX,EAAA,EAGDE,GACCS,EAAA,IAAC,MAAI,CAAA,UAAU,oDACZ,SACHT,EAAA,EAIDQ,EAAA,KAAA,OAAA,CAAK,UAAU,iBAAiB,SAAUN,EACzC,SAAA,CAAAM,OAAC,MACC,CAAA,SAAA,CAAAC,MAAC,QAAM,CAAA,QAAQ,QAAQ,UAAU,0CAA0C,SAE3E,qBAAA,EACAA,EAAA,IAAC,QAAA,CACC,GAAG,QACH,KAAK,QACL,KAAK,QACL,aAAa,QACb,SAAQ,GACR,UAAU,uIACV,MAAOhB,EACP,SAAWU,GAAMT,EAASS,EAAE,OAAO,KAAK,EACxC,YAAY,cAAA,CACd,EACCM,EAAA,IAAA,IAAA,CAAE,UAAU,6BAA6B,SAE1C,4EAAA,CAAA,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAAAC,EAAA,IAACC,EAAA,CACC,GAAG,SACH,UAAU,8DACX,SAAA,4BAAA,CAED,EAEAD,EAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAUb,EACV,UAAU,6MAET,WAAU,cAAgB,eAAA,CAAA,CAC7B,CACF,CAAA,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,wBACb,SAACY,EAAA,KAAA,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,yBACd,IACvBC,EAAA,IAACC,EAAA,CACC,GAAG,YACH,UAAU,sDACX,SAAA,iBAAA,CAAA,CAED,CAAA,CACF,CACF,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAEJ"}
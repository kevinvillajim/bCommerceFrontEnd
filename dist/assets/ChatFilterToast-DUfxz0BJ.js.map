{"version":3,"file":"ChatFilterToast-DUfxz0BJ.js","sources":["../../src/presentation/components/notifications/ChatFilterToast.tsx"],"sourcesContent":["// src/presentation/components/notifications/ChatFilterToast.tsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { X, AlertTriangle, Shield, Ban } from 'lucide-react';\r\n\r\ninterface ChatFilterToastProps {\r\n  isVisible: boolean;\r\n  onClose: () => void;\r\n  type: 'user_warning' | 'seller_strike' | 'seller_blocked';\r\n  message: string;\r\n  censoredContent?: string;\r\n  strikeCount?: number;\r\n  autoClose?: boolean;\r\n  autoCloseTime?: number;\r\n}\r\n\r\nconst ChatFilterToast: React.FC<ChatFilterToastProps> = ({\r\n  isVisible,\r\n  onClose,\r\n  type,\r\n  message,\r\n  censoredContent,\r\n  strikeCount,\r\n  autoClose = true,\r\n  autoCloseTime = 8000\r\n}) => {\r\n  const [progress, setProgress] = useState(100);\r\n\r\n  // Auto-cerrar y barra de progreso\r\n  useEffect(() => {\r\n    if (autoClose && isVisible) {\r\n      const progressInterval = setInterval(() => {\r\n        setProgress((prev) => {\r\n          const newProgress = prev - (100 / (autoCloseTime / 100));\r\n          if (newProgress <= 0) {\r\n            onClose();\r\n            return 0;\r\n          }\r\n          return newProgress;\r\n        });\r\n      }, 100);\r\n\r\n      return () => clearInterval(progressInterval);\r\n    }\r\n  }, [autoClose, autoCloseTime, isVisible, onClose]);\r\n\r\n  // Obtener configuración según el tipo\r\n  const getToastConfig = () => {\r\n    switch (type) {\r\n      case 'user_warning':\r\n        return {\r\n          icon: <AlertTriangle className=\"text-yellow-500\" size={24} />,\r\n          bgColor: 'bg-yellow-50',\r\n          borderColor: 'border-yellow-200',\r\n          titleColor: 'text-yellow-800',\r\n          textColor: 'text-yellow-700',\r\n          progressColor: 'bg-yellow-500',\r\n          title: 'Mensaje no permitido'\r\n        };\r\n      case 'seller_strike':\r\n        return {\r\n          icon: <Shield className=\"text-orange-500\" size={24} />,\r\n          bgColor: 'bg-orange-50',\r\n          borderColor: 'border-orange-200',\r\n          titleColor: 'text-orange-800',\r\n          textColor: 'text-orange-700',\r\n          progressColor: 'bg-orange-500',\r\n          title: 'Strike aplicado'\r\n        };\r\n      case 'seller_blocked':\r\n        return {\r\n          icon: <Ban className=\"text-red-500\" size={24} />,\r\n          bgColor: 'bg-red-50',\r\n          borderColor: 'border-red-200',\r\n          titleColor: 'text-red-800',\r\n          textColor: 'text-red-700',\r\n          progressColor: 'bg-red-500',\r\n          title: 'Cuenta bloqueada'\r\n        };\r\n      default:\r\n        return {\r\n          icon: <AlertTriangle className=\"text-gray-500\" size={24} />,\r\n          bgColor: 'bg-gray-50',\r\n          borderColor: 'border-gray-200',\r\n          titleColor: 'text-gray-800',\r\n          textColor: 'text-gray-700',\r\n          progressColor: 'bg-gray-500',\r\n          title: 'Notificación'\r\n        };\r\n    }\r\n  };\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const config = getToastConfig();\r\n\r\n  return (\r\n    <div className=\"fixed top-4 right-4 z-50 max-w-sm w-full\">\r\n      <div className={`\r\n        ${config.bgColor} ${config.borderColor} border rounded-lg shadow-lg\r\n        transform transition-all duration-300 animate-slide-in-right\r\n      `}>\r\n        {/* Barra de progreso */}\r\n        {autoClose && (\r\n          <div className=\"h-1 bg-gray-200 rounded-t-lg overflow-hidden\">\r\n            <div \r\n              className={`h-full ${config.progressColor} transition-all duration-100 ease-linear`}\r\n              style={{ width: `${progress}%` }}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"p-4\">\r\n          <div className=\"flex items-start\">\r\n            <div className=\"flex-shrink-0 mr-3\">\r\n              {config.icon}\r\n            </div>\r\n            \r\n            <div className=\"flex-1 min-w-0\">\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <h4 className={`text-sm font-medium ${config.titleColor} mb-1`}>\r\n                    {config.title}\r\n                  </h4>\r\n                  <p className={`text-sm ${config.textColor} mb-2`}>\r\n                    {message}\r\n                  </p>\r\n                  \r\n                  {/* Mostrar contenido censurado si existe */}\r\n                  {censoredContent && (\r\n                    <div className=\"mt-2 p-2 bg-white bg-opacity-50 rounded border\">\r\n                      <p className=\"text-xs text-gray-600 mb-1\">Mensaje filtrado:</p>\r\n                      <p className=\"text-sm font-mono text-gray-800\">{censoredContent}</p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {/* Mostrar contador de strikes */}\r\n                  {typeof strikeCount === 'number' && strikeCount > 0 && (\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <div className=\"flex space-x-1\">\r\n                          {[1, 2, 3].map((strike) => (\r\n                            <div\r\n                              key={strike}\r\n                              className={`w-3 h-3 rounded-full ${\r\n                                strike <= strikeCount \r\n                                  ? 'bg-red-500' \r\n                                  : 'bg-gray-300'\r\n                              }`}\r\n                            />\r\n                          ))}\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-600\">\r\n                          {strikeCount}/3 strikes\r\n                        </span>\r\n                      </div>\r\n                      {strikeCount >= 3 && (\r\n                        <p className=\"text-xs text-red-600 mt-1 font-medium\">\r\n                          Tu cuenta ha sido bloqueada por acumular 3 strikes.\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors\"\r\n                >\r\n                  <X size={16} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Hook para manejar notificaciones de filtro de chat\r\nexport const useChatFilterNotifications = () => {\r\n  const [notification, setNotification] = useState<{\r\n    isVisible: boolean;\r\n    type: 'user_warning' | 'seller_strike' | 'seller_blocked';\r\n    message: string;\r\n    censoredContent?: string;\r\n    strikeCount?: number;\r\n  } | null>(null);\r\n\r\n  const showNotification = (\r\n    type: 'user_warning' | 'seller_strike' | 'seller_blocked',\r\n    message: string,\r\n    censoredContent?: string,\r\n    strikeCount?: number\r\n  ) => {\r\n    setNotification({\r\n      isVisible: true,\r\n      type,\r\n      message,\r\n      censoredContent,\r\n      strikeCount\r\n    });\r\n  };\r\n\r\n  const hideNotification = () => {\r\n    setNotification(prev => prev ? { ...prev, isVisible: false } : null);\r\n    // Limpiar completamente después de la animación\r\n    setTimeout(() => setNotification(null), 300);\r\n  };\r\n\r\n  const showUserWarning = (message: string, censoredContent?: string) => {\r\n    showNotification('user_warning', message, censoredContent);\r\n  };\r\n\r\n  const showSellerStrike = (message: string, strikeCount: number, censoredContent?: string) => {\r\n    showNotification('seller_strike', message, censoredContent, strikeCount);\r\n  };\r\n\r\n  const showSellerBlocked = (message: string) => {\r\n    showNotification('seller_blocked', message);\r\n  };\r\n\r\n  const NotificationComponent = () => {\r\n    if (!notification) return null;\r\n\r\n    return (\r\n      <ChatFilterToast\r\n        isVisible={notification.isVisible}\r\n        onClose={hideNotification}\r\n        type={notification.type}\r\n        message={notification.message}\r\n        censoredContent={notification.censoredContent}\r\n        strikeCount={notification.strikeCount}\r\n      />\r\n    );\r\n  };\r\n\r\n  return {\r\n    showUserWarning,\r\n    showSellerStrike,\r\n    showSellerBlocked,\r\n    hideNotification,\r\n    NotificationComponent\r\n  };\r\n};\r\n\r\nexport default ChatFilterToast;"],"names":["ChatFilterToast","isVisible","onClose","type","message","censoredContent","strikeCount","autoClose","autoCloseTime","progress","setProgress","useState","useEffect","progressInterval","prev","newProgress","getToastConfig","jsx","AlertTriangle","Shield","Ban","config","jsxs","strike","X","useChatFilterNotifications","notification","setNotification","showNotification","hideNotification"],"mappings":"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"}
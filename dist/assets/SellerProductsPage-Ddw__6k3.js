import{c as L,d as D,r as a,j as e,L as f,w as $}from"./index-DmNDOrWy.js";import{u as F}from"./useSellerProducts-DEL8zFcQ.js";import{u as M}from"./useCategories-B5xz5QTT.js";import{f as q}from"./formatCurrency-CXuiUHwQ.js";import{S as B}from"./search-CbEKe7UQ.js";import{F as O}from"./funnel-CAFb7hhq.js";import{P as j}from"./package-CIRlwNqy.js";import{E as _}from"./eye-off-Dpcq62U7.js";import{E as R}from"./eye-CldZNoIz.js";import{S as G}from"./square-pen-CTS0gMbb.js";import{T as H}from"./trash-2-DifnXJFx.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],v=L("circle-plus",J),ae=()=>{const N=D(),{products:i,loading:w,error:x,fetchSellerProducts:b,deleteProduct:k,toggleProductStatus:S}=F(),{categories:m,fetchCategories:u}=M(),[l,C]=a.useState(""),[c,P]=a.useState("all"),[E,h]=a.useState([]),[n,p]=a.useState(null),[o,g]=a.useState(null);a.useEffect(()=>{u()},[u]),a.useEffect(()=>{if(i&&i.length>0){const s=new Map;m.forEach(t=>{t.id&&s.set(t.id,t.name)});const r=i.map(t=>{const d=t.categoryId||0,z=s.get(d)||`Categoría ${d}`;return{id:t.id||0,name:t.name,price:typeof t.price=="number"?t.price:parseFloat(String(t.price))||0,stock:typeof t.stock=="number"?t.stock:parseInt(String(t.stock))||0,categoryId:d,category:z,status:t.status||"inactive",createdAt:t.createdAt||new Date().toISOString().split("T")[0]}});h(r)}else h([])},[i,m]);const y=E.filter(s=>{const r=s.name.toLowerCase().includes(l.toLowerCase())||s.category.toLowerCase().includes(l.toLowerCase()),t=c==="all"||s.status===c;return r&&t}),I=async s=>{if(window.confirm("¿Estás seguro de que deseas eliminar este producto?"))try{p(s),await k(s)||alert("No se pudo eliminar el producto. Inténtalo de nuevo más tarde.")}finally{p(null)}},A=async(s,r)=>{try{g(s),await S(s,r)||alert("No se pudo cambiar el estado del producto. Inténtalo de nuevo más tarde.")}finally{g(null)}},T=s=>{N(`/seller/products/edit/${s}`)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Productos"}),e.jsxs(f,{to:"/seller/products/create",className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(v,{size:18,className:"mr-2"}),"Añadir Nuevo Producto"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:"Buscar productos...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:l,onChange:s=>C(s.target.value)}),e.jsx(B,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:c,onChange:s=>P(s.target.value),children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"inactive",children:"Inactivo"}),e.jsx("option",{value:"draft",children:"Borrador"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:w?e.jsx("div",{className:"p-8 flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):x?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx($,{className:"h-12 w-12 mx-auto text-red-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error al cargar productos"}),e.jsx("p",{className:"text-gray-500 mb-4",children:x}),e.jsx("button",{onClick:()=>b(),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Intentar de nuevo"})]}):y.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(j,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron productos"}),e.jsx("p",{className:"text-gray-500 mb-4",children:l||c!=="all"?"Intenta ajustar tu búsqueda o filtro para encontrar lo que buscas.":"Comienza agregando tu primer producto."}),e.jsxs(f,{to:"/seller/products/create",className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(v,{size:18,className:"mr-2"}),"Añadir Nuevo Producto"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creado"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-100 rounded-md flex items-center justify-center",children:e.jsx(j,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",s.id]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.category||"Sin categoría"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:q(s.price)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:`text-sm ${s.stock>0?"text-green-600":"text-red-600"}`,children:s.stock>0?s.stock:"Sin stock"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":s.status==="inactive"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[s.status==="active"&&"Activo",s.status==="inactive"&&"Inactivo",s.status==="draft"&&"Borrador"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.createdAt}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>A(s.id,s.status),disabled:o===s.id,className:`p-1 rounded-md ${o===s.id?"opacity-50 cursor-not-allowed":s.status==="active"?"text-yellow-600 hover:bg-yellow-100":"text-green-600 hover:bg-green-100"}`,title:s.status==="active"?"Desactivar":"Activar",children:o===s.id?e.jsx("div",{className:"animate-spin h-4 w-4"}):s.status==="active"?e.jsx(_,{size:18}):e.jsx(R,{size:18})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",title:"Editar producto",children:e.jsx(G,{size:18})}),e.jsx("button",{onClick:()=>I(s.id),disabled:n===s.id,className:`p-1 text-red-600 hover:bg-red-100 rounded-md ${n===s.id?"opacity-50 cursor-not-allowed":""}`,title:"Eliminar producto",children:n===s.id?e.jsx("div",{className:"animate-spin h-4 w-4"}):e.jsx(H,{size:18})})]})})]},s.id))})]})})})]})};export{ae as default};
//# sourceMappingURL=SellerProductsPage-Ddw__6k3.js.map

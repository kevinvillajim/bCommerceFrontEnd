import{c,r as p,j as e,L as S,k as o}from"./index-DmNDOrWy.js";import{R as L}from"./RatingStars-BDWJGfWO.js";import{u as P}from"./useCart-DylEmA2w.js";import{u as M}from"./useFavorites-T3Y-P3Fr.js";import{H as h}from"./heart-DBtNcst0.js";import{C as $}from"./check-CHNPnXXq.js";import{S as E}from"./shopping-cart-Ck1So-LU.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],Y=c("headphones",O);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]],Z=c("laptop",q);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ee=c("monitor",D);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],te=c("smartphone",U);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]],ae=c("tv",V),se=({id:a,name:x,price:i,discount:n,rating:R=0,reviews:z=0,image:T,category:u,isNew:_=!1,color:g=!0,stock:A=10,slug:y,onAddToCart:f,onAddToWishlist:v})=>{const[d,j]=p.useState(!1),[b,N]=p.useState(!1),[m,w]=p.useState(!1),{addToCart:F,showNotification:s}=P(),{toggleFavorite:H}=M(),I=n?i-i*(n/100):i,r=A>0,k=async l=>{if(l.preventDefault(),l.stopPropagation(),!r){s(o.ERROR,"Lo sentimos, este producto está agotado");return}j(!0);try{if(f)f(a);else if(await F({productId:a,quantity:1}))s(o.SUCCESS,`${x} ha sido agregado al carrito`);else throw new Error("No se pudo agregar el producto al carrito")}catch(t){console.error("Error al agregar al carrito:",t),s(o.ERROR,"Error al agregar producto al carrito. Inténtalo de nuevo.")}finally{setTimeout(()=>{j(!1)},1e3)}},C=async l=>{l.preventDefault(),l.stopPropagation(),N(!0);try{if(v)v(a),w(!m);else{const t=await H(a);w(t),t?s(o.SUCCESS,"Producto añadido a favoritos"):s(o.INFO,"Producto eliminado de favoritos")}}catch(t){console.error("Error al manejar favorito:",t),s(o.ERROR,"Error al gestionar favoritos. Inténtalo de nuevo.")}finally{setTimeout(()=>{N(!1)},1e3)}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden group product-card",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden",children:[e.jsx(S,{to:`/products/${y||a}`,children:e.jsx("img",{src:T,alt:x,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),n&&e.jsxs("div",{className:`absolute top-2 left-2 ${g?"bg-red-500":"bg-primary-600"} text-white text-xs font-bold py-1 px-2 rounded-md badge`,children:["-",n,"%"]}),_&&e.jsx("div",{className:`absolute top-2 right-2 ${g?"bg-green-500":"bg-primary-800"} text-white text-xs font-bold py-1 px-2 rounded-md badge`,children:"Nuevo"}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 transition-opacity duration-300 items-center justify-center gap-2 hidden md:flex",children:[e.jsx("button",{onClick:C,className:"cursor-pointer bg-white p-2 rounded-full hover:bg-primary-50 hover:text-primary-600 transition-colors","aria-label":"Añadir a favoritos",children:b||m?e.jsx(h,{size:18,className:"text-red-500 fill-current"}):e.jsx(h,{size:18})}),e.jsx("button",{onClick:k,disabled:d||!r,className:`cursor-pointer bg-white p-2 rounded-full hover:bg-primary-50 hover:text-primary-600 transition-colors ${r?"":"opacity-50 cursor-not-allowed"}`,"aria-label":"Añadir al carrito",children:d?e.jsx($,{size:18,className:"text-green-500"}):e.jsx(E,{size:18})})]})]}),e.jsxs("div",{className:"p-3",children:[u&&e.jsx("span",{className:"text-xs text-gray-500 uppercase mb-1 block",children:u}),e.jsx(S,{to:`/products/${y||a}`,children:e.jsx("h3",{className:"font-medium text-gray-800 mb-1 line-clamp-1 hover:text-primary-600 transition-colors",children:x})}),e.jsx("div",{className:"mb-2",children:e.jsx(L,{rating:R,size:14,showValue:!0,reviews:z})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-bold text-primary-600",children:["$",I.toFixed(2)]}),e.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["$",i.toFixed(2)]})]}):e.jsxs("span",{className:"font-bold text-primary-600 product-price",children:["$",i.toFixed(2)]})}),e.jsxs("div",{className:"flex lg:hidden gap-1",children:[e.jsx("button",{onClick:C,className:"text-gray-500 hover:text-primary-600 transition-colors","aria-label":"Añadir a favoritos",children:b||m?e.jsx(h,{size:16,className:"text-red-500 fill-current"}):e.jsx(h,{size:16})}),e.jsx("button",{onClick:k,disabled:d||!r,className:`text-gray-500 hover:text-primary-600 transition-colors ${r?"":"opacity-50 cursor-not-allowed"}`,"aria-label":"Añadir al carrito",children:d?e.jsx($,{size:16,className:"text-green-500"}):e.jsx(E,{size:16})})]})]}),!r&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Agotado"})]})]})};export{Y as H,Z as L,ee as M,se as P,te as S,ae as T};
//# sourceMappingURL=ProductCardCompact-WKBc3swN.js.map

{"version":3,"file":"AdminEditCategoryPage-CeYu1Uvn.js","sources":["../../src/presentation/pages/admin/AdminEditCategoryPage.tsx"],"sourcesContent":["// src/presentation/pages/admin/AdminEditCategoryPage.tsx - CORREGIDO (Bucle Infinito)\r\n\r\nimport React, {useState, useEffect, useCallback} from \"react\";\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport {\r\n\tArrowLeft,\r\n\tSave,\r\n\tX,\r\n\tFolder,\r\n\tTag,\r\n\tFileText,\r\n\tHash,\r\n\tStar,\r\n\tEye,\r\n\tArrowUpDown,\r\n\tLoader,\r\n} from \"lucide-react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n// Hooks personalizados\r\nimport {useAdminCategories} from \"../../hooks/useAdminCategories\";\r\n\r\n// Types\r\nimport type {CategoryUpdateData} from \"../../../core/domain/entities/Category\";\r\n\r\nconst AdminEditCategoryPage: React.FC = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst {id} = useParams<{id: string}>();\r\n\tconst categoryId = Number(id);\r\n\r\n\t// Hook de administraci√≥n de categor√≠as\r\n\tconst {\r\n\t\tloading,\r\n\t\terror,\r\n\t\tcategoryDetail,\r\n\t\tmainCategories,\r\n\t\tfetchCategoryById,\r\n\t\tfetchMainCategories,\r\n\t\tupdateCategory,\r\n\t\tsetError,\r\n\t} = useAdminCategories();\r\n\r\n\t// Estado del formulario - CORREGIDO: valores iniciales definidos\r\n\tconst [formData, setFormData] = useState<CategoryUpdateData>({\r\n\t\tid: categoryId,\r\n\t\tname: \"\", // CORREGIDO: siempre string\r\n\t\tslug: \"\", // CORREGIDO: siempre string\r\n\t\tdescription: \"\",\r\n\t\tparent_id: undefined,\r\n\t\ticon: \"\",\r\n\t\torder: 0,\r\n\t\tis_active: true,\r\n\t\tfeatured: false,\r\n\t});\r\n\r\n\t// Estado de validaci√≥n y carga\r\n\tconst [validationErrors, setValidationErrors] = useState<\r\n\t\tRecord<string, string>\r\n\t>({});\r\n\tconst [isSubmitting, setIsSubmitting] = useState(false);\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\tconst [originalSlug, setOriginalSlug] = useState(\"\");\r\n\tconst [dataLoaded, setDataLoaded] = useState(false); // NUEVO: Control de carga de datos\r\n\r\n\t/**\r\n\t * Carga los datos de la categor√≠a y las categor√≠as principales - CORREGIDO\r\n\t */\r\n\tconst loadData = useCallback(async () => {\r\n\t\tif (!categoryId || isNaN(categoryId)) {\r\n\t\t\tsetError(\"ID de categor√≠a inv√°lido\");\r\n\t\t\tnavigate(\"/admin/categories\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// CORREGIDO: Evitar m√∫ltiples llamadas pero permitir recarga si no hay datos\r\n\t\tif (dataLoaded && categoryDetail) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsLoading(true);\r\n\t\ttry {\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"üîÑ AdminEditCategoryPage: Cargando datos para categor√≠a\",\r\n\t\t\t\tcategoryId\r\n\t\t\t);\r\n\r\n\t\t\t// Cargar categor√≠a espec√≠fica y categor√≠as principales en paralelo\r\n\t\t\tconst [category] = await Promise.all([\r\n\t\t\t\tfetchCategoryById(categoryId),\r\n\t\t\t\tfetchMainCategories(true),\r\n\t\t\t]);\r\n\r\n\t\t\tif (!category) {\r\n\t\t\t\tsetError(\"Categor√≠a no encontrada\");\r\n\t\t\t\tnavigate(\"/admin/categories\");\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(\"üì• AdminEditCategoryPage: Categor√≠a cargada:\", category);\r\n\r\n\t\t\tsetDataLoaded(true); // NUEVO: Marcar datos como cargados aqu√≠\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al cargar datos de categor√≠a:\", error);\r\n\t\t\tsetError(\"Error al cargar los datos de la categor√≠a\");\r\n\t\t} finally {\r\n\t\t\tsetIsLoading(false);\r\n\t\t}\r\n\t}, [\r\n\t\tcategoryId,\r\n\t\tdataLoaded,\r\n\t\tcategoryDetail,\r\n\t\tfetchCategoryById,\r\n\t\tfetchMainCategories,\r\n\t\tnavigate,\r\n\t\tsetError,\r\n\t]);\r\n\r\n\t// CORREGIDO: useEffect con dependencias adecuadas para evitar bucle infinito\r\n\tuseEffect(() => {\r\n\t\t// Solo cargar datos una vez cuando cambie el categoryId y no est√©n cargados\r\n\t\tif (categoryId && !dataLoaded && !loading) {\r\n\t\t\tloadData();\r\n\t\t}\r\n\t}, [categoryId, dataLoaded, loading]); // CORREGIDO: dependencias espec√≠ficas\r\n\r\n\t// NUEVO: Efecto separado para resetear estado cuando cambie el ID\r\n\tuseEffect(() => {\r\n\t\tif (categoryId) {\r\n\t\t\tsetDataLoaded(false);\r\n\t\t\tsetIsLoading(true);\r\n\t\t\tsetFormData({\r\n\t\t\t\tid: categoryId,\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tslug: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tparent_id: undefined,\r\n\t\t\t\ticon: \"\",\r\n\t\t\t\torder: 0,\r\n\t\t\t\tis_active: true,\r\n\t\t\t\tfeatured: false,\r\n\t\t\t});\r\n\t\t}\r\n\t}, [categoryId]);\r\n\r\n\t// CORREGIDO: useEffect que depende del detalle de la categor√≠a para llenar el formulario\r\n\tuseEffect(() => {\r\n\t\tif (categoryDetail && categoryDetail.id === categoryId && !dataLoaded) {\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"üì• AdminEditCategoryPage: Llenando formulario con datos de categor√≠a:\",\r\n\t\t\t\tcategoryDetail\r\n\t\t\t);\r\n\r\n\t\t\tconst newFormData: CategoryUpdateData = {\r\n\t\t\t\tid: categoryDetail.id,\r\n\t\t\t\tname: categoryDetail.name || \"\",\r\n\t\t\t\tslug: categoryDetail.slug || \"\",\r\n\t\t\t\tdescription: categoryDetail.description || \"\",\r\n\t\t\t\tparent_id: categoryDetail.parent_id || undefined,\r\n\t\t\t\ticon: categoryDetail.icon || \"\",\r\n\t\t\t\torder: categoryDetail.order || 0,\r\n\t\t\t\tis_active: categoryDetail.is_active ?? true,\r\n\t\t\t\tfeatured: categoryDetail.featured ?? false,\r\n\t\t\t};\r\n\r\n\t\t\tsetFormData(newFormData);\r\n\t\t\tsetOriginalSlug(categoryDetail.slug || \"\");\r\n\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"‚úÖ AdminEditCategoryPage: Datos del formulario establecidos:\",\r\n\t\t\t\tnewFormData\r\n\t\t\t);\r\n\t\t}\r\n\t}, [categoryDetail, categoryId, dataLoaded]);\r\n\r\n\t/**\r\n\t * Genera el slug autom√°ticamente a partir del nombre\r\n\t */\r\n\tconst generateSlug = (name: string): string => {\r\n\t\treturn name\r\n\t\t\t.toLowerCase()\r\n\t\t\t.trim()\r\n\t\t\t.replace(/[√°√†√§√¢]/g, \"a\")\r\n\t\t\t.replace(/[√©√®√´√™]/g, \"e\")\r\n\t\t\t.replace(/[√≠√¨√Ø√Æ]/g, \"i\")\r\n\t\t\t.replace(/[√≥√≤√∂√¥]/g, \"o\")\r\n\t\t\t.replace(/[√∫√π√º√ª]/g, \"u\")\r\n\t\t\t.replace(/[√±]/g, \"n\")\r\n\t\t\t.replace(/[√ß]/g, \"c\")\r\n\t\t\t.replace(/[^a-z0-9\\s-]/g, \"\")\r\n\t\t\t.replace(/\\s+/g, \"-\")\r\n\t\t\t.replace(/-+/g, \"-\")\r\n\t\t\t.replace(/^-|-$/g, \"\");\r\n\t};\r\n\r\n\t/**\r\n\t * Maneja los cambios en los campos del formulario\r\n\t */\r\n\tconst handleInputChange = (\r\n\t\te: React.ChangeEvent<\r\n\t\t\tHTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\r\n\t\t>\r\n\t) => {\r\n\t\tconst {name, value, type} = e.target;\r\n\r\n\t\tlet processedValue: any = value;\r\n\r\n\t\t// Manejar checkboxes\r\n\t\tif (type === \"checkbox\") {\r\n\t\t\tprocessedValue = (e.target as HTMLInputElement).checked;\r\n\t\t}\r\n\r\n\t\t// Manejar n√∫meros\r\n\t\tif (name === \"order\" || name === \"parent_id\") {\r\n\t\t\tprocessedValue = value === \"\" ? 0 : Number(value);\r\n\t\t}\r\n\r\n\t\tsetFormData((prev) => ({\r\n\t\t\t...prev,\r\n\t\t\t[name]: processedValue,\r\n\t\t}));\r\n\r\n\t\t// Generar slug autom√°ticamente cuando cambie el nombre - CORREGIDO\r\n\t\tif (name === \"name\" && value && (formData.slug || \"\") === originalSlug) {\r\n\t\t\tconst autoSlug = generateSlug(value);\r\n\t\t\tsetFormData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\tslug: autoSlug,\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// Limpiar error de validaci√≥n\r\n\t\tif (validationErrors[name]) {\r\n\t\t\tsetValidationErrors((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\t[name]: \"\",\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Valida el formulario\r\n\t */\r\n\tconst validateForm = (): boolean => {\r\n\t\tconst errors: Record<string, string> = {};\r\n\r\n\t\t// Validar nombre - CORREGIDO: verificar que formData.name est√© definido\r\n\t\tconst name = formData.name || \"\";\r\n\t\tif (!name.trim()) {\r\n\t\t\terrors.name = \"El nombre es obligatorio\";\r\n\t\t} else if (name.length < 2) {\r\n\t\t\terrors.name = \"El nombre debe tener al menos 2 caracteres\";\r\n\t\t} else if (name.length > 100) {\r\n\t\t\terrors.name = \"El nombre no puede tener m√°s de 100 caracteres\";\r\n\t\t}\r\n\r\n\t\t// Validar slug - CORREGIDO: verificar que formData.slug est√© definido\r\n\t\tconst slug = formData.slug || \"\";\r\n\t\tif (!slug.trim()) {\r\n\t\t\terrors.slug = \"El slug es obligatorio\";\r\n\t\t} else if (!/^[a-z0-9-]+$/.test(slug)) {\r\n\t\t\terrors.slug =\r\n\t\t\t\t\"El slug solo puede contener letras min√∫sculas, n√∫meros y guiones\";\r\n\t\t} else if (slug.length > 150) {\r\n\t\t\terrors.slug = \"El slug no puede tener m√°s de 150 caracteres\";\r\n\t\t}\r\n\r\n\t\t// Validar descripci√≥n (opcional pero con l√≠mite)\r\n\t\tconst description = formData.description || \"\";\r\n\t\tif (description && description.length > 500) {\r\n\t\t\terrors.description =\r\n\t\t\t\t\"La descripci√≥n no puede tener m√°s de 500 caracteres\";\r\n\t\t}\r\n\r\n\t\t// Validar orden\r\n\t\tif (\r\n\t\t\tformData.order !== undefined &&\r\n\t\t\t(formData.order < 0 || formData.order > 999)\r\n\t\t) {\r\n\t\t\terrors.order = \"El orden debe estar entre 0 y 999\";\r\n\t\t}\r\n\r\n\t\t// Validar que no se asigne como padre de s√≠ misma\r\n\t\tif (formData.parent_id === categoryId) {\r\n\t\t\terrors.parent_id = \"Una categor√≠a no puede ser padre de s√≠ misma\";\r\n\t\t}\r\n\r\n\t\tsetValidationErrors(errors);\r\n\t\treturn Object.keys(errors).length === 0;\r\n\t};\r\n\r\n\t/**\r\n\t * Maneja el env√≠o del formulario\r\n\t */\r\n\tconst handleSubmit = async (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tif (!validateForm()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsSubmitting(true);\r\n\t\tsetError(null);\r\n\r\n\t\ttry {\r\n\t\t\t// Preparar datos para env√≠o - CORREGIDO: asegurar que los campos string no sean undefined\r\n\t\t\tconst dataToSubmit: CategoryUpdateData = {\r\n\t\t\t\t...formData,\r\n\t\t\t\t// Limpiar campos vac√≠os y asegurar tipos correctos\r\n\t\t\t\tname: (formData.name || \"\").trim(),\r\n\t\t\t\tslug: (formData.slug || \"\").trim(),\r\n\t\t\t\tdescription: (formData.description || \"\").trim() || undefined,\r\n\t\t\t\ticon: (formData.icon || \"\").trim() || undefined,\r\n\t\t\t\tparent_id: formData.parent_id === 0 ? undefined : formData.parent_id,\r\n\t\t\t};\r\n\r\n\t\t\tconsole.log(\"üì§ Enviando datos de categor√≠a:\", dataToSubmit);\r\n\r\n\t\t\tconst result = await updateCategory(dataToSubmit);\r\n\r\n\t\t\tif (result) {\r\n\t\t\t\tconsole.log(\"‚úÖ Categor√≠a actualizada exitosamente:\", result);\r\n\t\t\t\t// Redirigir a la lista de categor√≠as\r\n\t\t\t\tnavigate(\"/admin/categories\", {\r\n\t\t\t\t\tstate: {\r\n\t\t\t\t\t\tmessage: `Categor√≠a \"${result.name}\" actualizada exitosamente`,\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetError(\"Error al actualizar la categor√≠a. Int√©ntalo de nuevo.\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"‚ùå Error al actualizar categor√≠a:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\terror instanceof Error\r\n\t\t\t\t\t? error.message\r\n\t\t\t\t\t: \"Error inesperado al actualizar la categor√≠a\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetIsSubmitting(false);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Obtiene el nombre de la categor√≠a padre\r\n\t */\r\n\tconst getParentCategoryName = (parentId?: number): string => {\r\n\t\tif (!parentId) return \"Sin categor√≠a padre\";\r\n\t\tconst parent = mainCategories.find((c) => c.id === parentId);\r\n\t\treturn parent ? parent.name : \"Categor√≠a padre desconocida\";\r\n\t};\r\n\r\n\t// Filtrar categor√≠as principales (excluir la categor√≠a actual y sus hijas)\r\n\tconst availableParentCategories = mainCategories.filter(\r\n\t\t(category) => category.id !== categoryId\r\n\t);\r\n\r\n\t// Mostrar loading mientras carga\r\n\tif (isLoading) {\r\n\t\treturn (\r\n\t\t\t<div className=\"flex items-center justify-center min-h-64\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<Loader className=\"h-8 w-8 animate-spin text-primary-600 mx-auto mb-4\" />\r\n\t\t\t\t\t<p className=\"text-gray-600\">Cargando datos de la categor√≠a...</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t{/* Header */}\r\n\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t<div className=\"flex items-center space-x-4\">\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tto=\"/admin/categories\"\r\n\t\t\t\t\t\tclassName=\"p-2 text-gray-600 hover:bg-gray-100 rounded-md\"\r\n\t\t\t\t\t\ttitle=\"Volver a categor√≠as\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ArrowLeft size={20} />\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\t\t\tEditar Categor√≠a\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t{categoryDetail && (\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-600 mt-1\">\r\n\t\t\t\t\t\t\t\tEditando: {categoryDetail.name}\r\n\t\t\t\t\t\t\t\t{categoryDetail.parent_id && (\r\n\t\t\t\t\t\t\t\t\t<span className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t\t(Subcategor√≠a de:{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t{getParentCategoryName(categoryDetail.parent_id)})\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Mostrar errores */}\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n\t\t\t\t\t{error}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Formulario */}\r\n\t\t\t<form onSubmit={handleSubmit} className=\"space-y-6\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-6 flex items-center\">\r\n\t\t\t\t\t\t<Folder className=\"h-5 w-5 mr-2\" />\r\n\t\t\t\t\t\tInformaci√≥n B√°sica\r\n\t\t\t\t\t</h2>\r\n\r\n\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n\t\t\t\t\t\t{/* Nombre */}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"name\"\r\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tNombre *\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t<Tag className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"name\"\r\n\t\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\t\tvalue={formData.name || \"\"}\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\tclassName={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\r\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.name ? \"border-red-300\" : \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"Nombre de la categor√≠a\"\r\n\t\t\t\t\t\t\t\t\tmaxLength={100}\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{validationErrors.name && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\t{validationErrors.name}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Slug */}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"slug\"\r\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSlug *\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t<Hash className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\tid=\"slug\"\r\n\t\t\t\t\t\t\t\t\tname=\"slug\"\r\n\t\t\t\t\t\t\t\t\tvalue={formData.slug || \"\"}\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\tclassName={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\r\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.slug ? \"border-red-300\" : \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"slug-de-la-categoria\"\r\n\t\t\t\t\t\t\t\t\tmaxLength={150}\r\n\t\t\t\t\t\t\t\t\tpattern=\"[a-z0-9-]+\"\r\n\t\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{validationErrors.slug && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\t{validationErrors.slug}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<p className=\"mt-1 text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\tSolo letras min√∫sculas, n√∫meros y guiones. Cambiar el slug puede\r\n\t\t\t\t\t\t\t\tafectar URLs existentes.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Categor√≠a Padre */}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"parent_id\"\r\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCategor√≠a Padre\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tid=\"parent_id\"\r\n\t\t\t\t\t\t\t\tname=\"parent_id\"\r\n\t\t\t\t\t\t\t\tvalue={formData.parent_id || 0}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\tclassName={`block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\r\n\t\t\t\t\t\t\t\t\tvalidationErrors.parent_id\r\n\t\t\t\t\t\t\t\t\t\t? \"border-red-300\"\r\n\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value={0}>Sin categor√≠a padre (principal)</option>\r\n\t\t\t\t\t\t\t\t{availableParentCategories.map((category) => (\r\n\t\t\t\t\t\t\t\t\t<option key={category.id} value={category.id}>\r\n\t\t\t\t\t\t\t\t\t\t{category.name}\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t{validationErrors.parent_id && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\t{validationErrors.parent_id}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Orden */}\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"order\"\r\n\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tOrden\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t<ArrowUpDown className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tid=\"order\"\r\n\t\t\t\t\t\t\t\t\tname=\"order\"\r\n\t\t\t\t\t\t\t\t\tvalue={formData.order || 0}\r\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\t\tclassName={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\r\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.order\r\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-300\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"0\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"999\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{validationErrors.order && (\r\n\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t\t{validationErrors.order}\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<p className=\"mt-1 text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\tOrden de aparici√≥n (0 = primero)\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Descripci√≥n */}\r\n\t\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\thtmlFor=\"description\"\r\n\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tDescripci√≥n\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t<FileText className=\"absolute left-3 top-3 h-4 w-4 text-gray-400\" />\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tid=\"description\"\r\n\t\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\t\tvalue={formData.description || \"\"}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\trows={4}\r\n\t\t\t\t\t\t\t\tclassName={`block w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 ${\r\n\t\t\t\t\t\t\t\t\tvalidationErrors.description\r\n\t\t\t\t\t\t\t\t\t\t? \"border-red-300\"\r\n\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\r\n\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\tplaceholder=\"Descripci√≥n de la categor√≠a (opcional)\"\r\n\t\t\t\t\t\t\t\tmaxLength={500}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{validationErrors.description && (\r\n\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-600\">\r\n\t\t\t\t\t\t\t\t{validationErrors.description}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<p className=\"mt-1 text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t{(formData.description || \"\").length}/500 caracteres\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Icono */}\r\n\t\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\thtmlFor=\"icon\"\r\n\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-2\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tIcono (opcional)\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tid=\"icon\"\r\n\t\t\t\t\t\t\tname=\"icon\"\r\n\t\t\t\t\t\t\tvalue={formData.icon || \"\"}\r\n\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\tclassName=\"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t\tplaceholder=\"Ej: fas fa-laptop, lucide:computer, etc.\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"mt-1 text-xs text-gray-500\">\r\n\t\t\t\t\t\t\tClase CSS del icono o nombre del icono a mostrar\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Estados */}\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-6\">Estados</h2>\r\n\r\n\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t{/* Estado Activo */}\r\n\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"is_active\"\r\n\t\t\t\t\t\t\t\tname=\"is_active\"\r\n\t\t\t\t\t\t\t\tchecked={formData.is_active ?? true}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"is_active\"\r\n\t\t\t\t\t\t\t\tclassName=\"ml-2 text-sm text-gray-900 flex items-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Eye className=\"h-4 w-4 mr-1\" />\r\n\t\t\t\t\t\t\t\tCategor√≠a activa\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"text-xs text-gray-500 ml-6\">\r\n\t\t\t\t\t\t\tLas categor√≠as inactivas no aparecen en la tienda\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{/* Estado Destacado */}\r\n\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"featured\"\r\n\t\t\t\t\t\t\t\tname=\"featured\"\r\n\t\t\t\t\t\t\t\tchecked={formData.featured ?? false}\r\n\t\t\t\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\thtmlFor=\"featured\"\r\n\t\t\t\t\t\t\t\tclassName=\"ml-2 text-sm text-gray-900 flex items-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Star className=\"h-4 w-4 mr-1\" />\r\n\t\t\t\t\t\t\t\tCategor√≠a destacada\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p className=\"text-xs text-gray-500 ml-6\">\r\n\t\t\t\t\t\t\tLas categor√≠as destacadas aparecen en secciones especiales\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Botones de acci√≥n */}\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-4\">\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto=\"/admin/categories\"\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors flex items-center\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<X className=\"h-4 w-4 mr-2\" />\r\n\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={isSubmitting || loading}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Save className=\"h-4 w-4 mr-2\" />\r\n\t\t\t\t\t\t\t{isSubmitting ? \"Guardando...\" : \"Guardar Cambios\"}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AdminEditCategoryPage;"],"names":["AdminEditCategoryPage","navigate","useNavigate","id","useParams","categoryId","loading","error","categoryDetail","mainCategories","fetchCategoryById","fetchMainCategories","updateCategory","setError","useAdminCategories","formData","setFormData","useState","validationErrors","setValidationErrors","isSubmitting","setIsSubmitting","isLoading","setIsLoading","originalSlug","setOriginalSlug","dataLoaded","setDataLoaded","loadData","useCallback","category","useEffect","newFormData","generateSlug","name","handleInputChange","e","value","type","processedValue","prev","autoSlug","validateForm","errors","slug","description","handleSubmit","dataToSubmit","result","getParentCategoryName","parentId","parent","c","availableParentCategories","jsxs","jsx","Loader","Link","ArrowLeft","Folder","Tag","Hash","ArrowUpDown","FileText","Eye","Star","X","Save"],"mappings":"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"}
{"version":3,"file":"OrderDetailClientPage-c8GXY00d.js","sources":["../../src/presentation/components/orders/OrderPricingBreakdown.tsx","../../src/presentation/components/orders/OrderItemsList.tsx","../../src/presentation/pages/OrderDetailClientPage.tsx"],"sourcesContent":["import React from 'react';\r\nimport { formatCurrency } from '../../../utils/formatters/formatCurrency';\r\nimport { Tag, TrendingDown, Truck, Receipt } from 'lucide-react';\r\n\r\ninterface PricingBreakdownProps {\r\n  originalSubtotal: number;\r\n  sellerDiscounts: number;\r\n  volumeDiscounts: number;\r\n  couponDiscount: number;\r\n  couponCode?: string;\r\n  subtotalAfterDiscounts: number;\r\n  shipping: number;\r\n  freeShipping: boolean;\r\n  tax: number;\r\n  total: number;\r\n  isSellerView?: boolean; // Si es true, muestra vista del vendedor\r\n}\r\n\r\n/**\r\n * Componente para mostrar el desglose detallado de precios\r\n * Muestra diferente informaci√≥n seg√∫n si es para el usuario o el vendedor\r\n */\r\nconst OrderPricingBreakdown: React.FC<PricingBreakdownProps> = ({\r\n  originalSubtotal,\r\n  sellerDiscounts,\r\n  volumeDiscounts,\r\n  couponDiscount,\r\n  couponCode,\r\n  subtotalAfterDiscounts,\r\n  shipping,\r\n  freeShipping,\r\n  tax,\r\n  total,\r\n  isSellerView = false\r\n}) => {\r\n  const totalDiscounts = sellerDiscounts + volumeDiscounts + couponDiscount;\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6\">\r\n      <h3 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center\">\r\n        <Receipt className=\"w-5 h-5 mr-2\" />\r\n        {isSellerView ? 'Desglose de Ganancias' : 'Desglose de Precio'}\r\n      </h3>\r\n      \r\n      <div className=\"space-y-3\">\r\n        {/* Precio Original */}\r\n        <div className=\"flex justify-between text-sm\">\r\n          <span className=\"text-gray-600 dark:text-gray-400\">Subtotal original:</span>\r\n          <span className=\"text-gray-900 dark:text-white font-medium\">\r\n            {formatCurrency(originalSubtotal)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Descuentos */}\r\n        {totalDiscounts > 0 && (\r\n          <div className=\"border-t pt-3 space-y-2\">\r\n            <div className=\"flex items-center text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n              <TrendingDown className=\"w-4 h-4 mr-2 text-green-600\" />\r\n              Descuentos aplicados:</div>\r\n            \r\n            {sellerDiscounts > 0 && (\r\n              <div className=\"flex justify-between text-sm pl-6\">\r\n                <span className=\"text-gray-600 dark:text-gray-400\">\r\n                  Descuento del vendedor:\r\n                </span>\r\n                <span className=\"text-green-600 dark:text-green-400\">\r\n                  -{formatCurrency(sellerDiscounts)}\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            {volumeDiscounts > 0 && (\r\n              <div className=\"flex justify-between text-sm pl-6\">\r\n                <span className=\"text-gray-600 dark:text-gray-400\">\r\n                  Descuento por volumen:\r\n                </span>\r\n                <span className=\"text-green-600 dark:text-green-400\">\r\n                  -{formatCurrency(volumeDiscounts)}\r\n                </span>\r\n              </div>\r\n            )}\r\n            \r\n            {!isSellerView && couponDiscount > 0 && (\r\n              <div className=\"flex justify-between text-sm pl-6\">\r\n                <span className=\"text-gray-600 dark:text-gray-400 flex items-center\">\r\n                  <Tag className=\"w-3 h-3 mr-1\" />\r\n                  Cup√≥n {couponCode ? `(${couponCode})` : ''}:\r\n                </span>\r\n                <span className=\"text-green-600 dark:text-green-400\">\r\n                  -{formatCurrency(couponDiscount)}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Subtotal con descuentos */}\r\n        <div className=\"flex justify-between text-sm font-medium border-t pt-3\">\r\n          <span className=\"text-gray-700 dark:text-gray-300\">\r\n            {isSellerView ? 'Tu ganancia por productos:' : 'Subtotal con descuentos:'}\r\n          </span>\r\n          <span className=\"text-gray-900 dark:text-white\">\r\n            {formatCurrency(isSellerView ? subtotalAfterDiscounts : subtotalAfterDiscounts)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Solo mostrar env√≠o e IVA en vista de usuario */}\r\n        {!isSellerView && (\r\n          <>\r\n            {/* Env√≠o */}\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-600 dark:text-gray-400 flex items-center\">\r\n                <Truck className=\"w-4 h-4 mr-2\" />\r\n                Env√≠o {freeShipping && '(Gratis)'}:\r\n              </span>\r\n              <span className={freeShipping ? 'text-green-600' : 'text-gray-900 dark:text-white'}>\r\n                {freeShipping ? 'GRATIS' : formatCurrency(shipping)}\r\n              </span>\r\n            </div>\r\n\r\n            {/* IVA */}\r\n            <div className=\"flex justify-between text-sm\">\r\n              <span className=\"text-gray-600 dark:text-gray-400\">IVA (15%):</span>\r\n              <span className=\"text-gray-900 dark:text-white\">\r\n                {formatCurrency(tax)}\r\n              </span>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        {/* Total */}\r\n        <div className=\"flex justify-between text-base font-bold border-t pt-3 mt-3\">\r\n          <span className=\"text-gray-900 dark:text-white\">\r\n            {isSellerView ? 'Total a recibir:' : 'Total pagado:'}\r\n          </span>\r\n          <span className=\"text-xl text-gray-900 dark:text-white\">\r\n            {formatCurrency(isSellerView ? subtotalAfterDiscounts : total)}\r\n          </span>\r\n        </div>\r\n\r\n        {/* Mensaje de ahorro */}\r\n        {!isSellerView && totalDiscounts > 0 && (\r\n          <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 mt-3\">\r\n            <p className=\"text-sm text-green-700 dark:text-green-400 font-medium text-center\">\r\n              ¬°Has ahorrado {formatCurrency(totalDiscounts)} en esta compra!\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Nota para vendedor sobre cupones */}\r\n        {isSellerView && couponDiscount > 0 && (\r\n          <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3 mt-3\">\r\n            <p className=\"text-xs text-blue-700 dark:text-blue-400\">\r\n              <strong>Nota:</strong> El cup√≥n de descuento ({couponCode}) es asumido por la plataforma. \r\n              Recibir√°s el monto completo mostrado arriba.\r\n            </p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderPricingBreakdown;","// src/presentation/components/orders/OrderItemsList.tsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Package } from 'lucide-react';\r\nimport { formatCurrency } from '../../../utils/formatters/formatCurrency';\r\nimport { useImageCache } from '../../hooks/useImageCache';\r\nimport OrderBreakdownService, { type OrderItemBreakdown } from '../../../core/services/OrderBreakdownService';\r\nimport type { OrderUI } from '../../../core/adapters/OrderServiceAdapter';\r\n\r\ninterface OrderItemsListProps {\r\n  order: OrderUI;\r\n  viewType: 'customer' | 'seller';\r\n  sellerId?: number;\r\n}\r\n\r\n/**\r\n * ‚úÖ COMPONENTE: Lista de items con informaci√≥n de descuentos detallada\r\n * Muestra precios originales, descuentos aplicados y precios finales\r\n */\r\nconst OrderItemsList: React.FC<OrderItemsListProps> = ({ \r\n  order, \r\n  viewType, \r\n  sellerId \r\n}) => {\r\n  \r\n  // ‚úÖ HOOK PARA GESTI√ìN OPTIMIZADA DE IM√ÅGENES\r\n  const { getOptimizedImageUrl } = useImageCache();\r\n  \r\n  // Estado para el desglose de items\r\n  const [itemsBreakdown, setItemsBreakdown] = useState<OrderItemBreakdown[]>([]);\r\n  const [loadingBreakdown, setLoadingBreakdown] = useState(false);\r\n  \r\n  // Cargar desglose de items cuando se monta el componente\r\n  useEffect(() => {\r\n    const loadBreakdown = async () => {\r\n      if (order.id) {\r\n        setLoadingBreakdown(true);\r\n        try {\r\n          const breakdownService = OrderBreakdownService.getInstance();\r\n          // ‚úÖ PASAR EL viewType AL SERVICIO\r\n          const response = await breakdownService.getOrderItemsBreakdown(order.id, viewType);\r\n          console.log('üìä Desglose recibido en componente (viewType: ' + viewType + '):', response);\r\n          console.log('üì¶ Items del orden:', order.items);\r\n          setItemsBreakdown(response.items);\r\n        } catch (error) {\r\n          console.error('Error cargando desglose:', error);\r\n        } finally {\r\n          setLoadingBreakdown(false);\r\n        }\r\n      }\r\n    };\r\n    \r\n    loadBreakdown();\r\n  }, [order.id]);\r\n  \r\n  // ‚úÖ FILTRAR ITEMS RELEVANTES\r\n  const relevantItems = viewType === 'seller' && sellerId \r\n    ? order.items // Por ahora mostrar todos\r\n    : order.items;\r\n\r\n  if (!relevantItems || relevantItems.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"text-center text-gray-500\">\r\n          No hay productos en esta orden\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      <div className=\"flex items-center mb-4\">\r\n        <Package className=\"w-5 h-5 text-gray-600 mr-2\" />\r\n        <h3 className=\"text-lg font-semibold text-gray-900\">\r\n          Productos {viewType === 'seller' ? 'de tu Tienda' : 'Comprados'}\r\n        </h3>\r\n        <span className=\"ml-2 text-sm text-gray-500\">\r\n          ({relevantItems.length} {relevantItems.length === 1 ? 'producto' : 'productos'})\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {relevantItems.map((item, index) => {\r\n          // ‚úÖ OBTENER URL DE IMAGEN OPTIMIZADA\r\n          const imageUrl = getOptimizedImageUrl(\r\n            { \r\n              image: item.image,\r\n              main_image: item.image,\r\n            }, \r\n            \"thumbnail\"\r\n          );\r\n\r\n          return (\r\n          <div key={item.id || index} className=\"border border-gray-200 rounded-lg p-4\">\r\n            <div className=\"flex items-start space-x-4\">\r\n              {/* Imagen del Producto */}\r\n              <div className=\"flex-shrink-0\">\r\n                {item.image ? (\r\n                  <img \r\n                    src={imageUrl}\r\n                    alt={item.name}\r\n                    className=\"w-16 h-16 object-cover rounded-lg border border-gray-200\"\r\n                    onError={(e) => {\r\n                      // Fallback en caso de error\r\n                      const target = e.target as HTMLImageElement;\r\n                      target.style.display = 'none';\r\n                      target.parentElement?.querySelector('.fallback-icon')?.classList.remove('hidden');\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                    <Package className=\"w-8 h-8 text-gray-400\" />\r\n                  </div>\r\n                )}\r\n                {/* Fallback icon (hidden by default) */}\r\n                <div className=\"hidden fallback-icon w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center\">\r\n                  <Package className=\"w-8 h-8 text-gray-400\" />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Informaci√≥n del Producto */}\r\n              <div className=\"flex-1 min-w-0\">\r\n                <h4 className=\"text-lg font-medium text-gray-900 truncate\">\r\n                  {item.name}\r\n                </h4>\r\n                \r\n                {/* ‚úÖ DESGLOSE DETALLADO DE DESCUENTOS DESDE API */}\r\n                {(() => {\r\n                  // Buscar el breakdown correspondiente a este item\r\n                  // item.productId puede venir como productId o product_id seg√∫n la fuente\r\n                  const itemProductId = item.productId || (item as any).product_id;\r\n                  console.log('üîç Buscando breakdown para producto:', {\r\n                    itemProductId,\r\n                    item,\r\n                    itemsBreakdown,\r\n                    breakdownProductIds: itemsBreakdown.map(b => b.product_id)\r\n                  });\r\n                  const itemBreakdown = itemsBreakdown.find(b => b.product_id === itemProductId || b.product_id === Number(itemProductId));\r\n                  \r\n                  if (loadingBreakdown) {\r\n                    return (\r\n                      <div className=\"mt-4 bg-gray-50 p-4 rounded-lg\">\r\n                        <div className=\"animate-pulse\">\r\n                          <div className=\"h-4 bg-gray-200 rounded w-1/2 mb-2\"></div>\r\n                          <div className=\"h-3 bg-gray-200 rounded w-3/4\"></div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  }\r\n                  \r\n                  if (!itemBreakdown) {\r\n                    return null;\r\n                  }\r\n                  \r\n                  return (\r\n                    <div className=\"mt-4 bg-gray-50 p-4 rounded-lg\">\r\n                      <div className=\"space-y-3\">\r\n                        {/* ‚úÖ INFORMACI√ìN CR√çTICA PARA EL SELLER */}\r\n                        <div className=\"flex justify-between items-center border-b border-gray-200 pb-2\">\r\n                          <span className=\"text-sm font-semibold text-gray-700\"> Cantidad a enviar:</span>\r\n                          <span className=\"text-lg font-bold text-primary-600\">{itemBreakdown.quantity}</span>\r\n                        </div>\r\n                        \r\n                        {/* Precios */}\r\n                        <div className=\"space-y-1\">\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <span className=\"text-sm text-gray-600\">Precio unitario original:</span>\r\n                            <span className=\"text-sm text-gray-900\">{formatCurrency(itemBreakdown.original_price_per_unit)}</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <span className=\"text-sm text-gray-600\">Precio unitario final:</span>\r\n                            <span className=\"text-sm font-medium text-gray-900\">{formatCurrency(itemBreakdown.final_price_per_unit)}</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between items-center\">\r\n                            <span className=\"text-sm font-semibold text-gray-700\">Subtotal del producto:</span>\r\n                            <span className=\"text-sm font-bold text-gray-900\">{formatCurrency(itemBreakdown.subtotal)}</span>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Descuentos aplicados */}\r\n                        {itemBreakdown.breakdown_steps && itemBreakdown.breakdown_steps.length > 1 && (\r\n                          <div className=\"border-t border-gray-200 pt-2\">\r\n                            <span className=\"text-sm font-semibold text-gray-700 mb-2 block\">Descuentos aplicados:</span>\r\n                            {itemBreakdown.breakdown_steps\r\n                              .filter(step => step.is_discount)\r\n                              .map((step, stepIndex) => (\r\n                                <div key={stepIndex} className=\"flex justify-between items-center text-sm\">\r\n                                  <span className=\"text-green-600\">‚Ä¢ {step.label}</span>\r\n                                  <span className=\"text-green-600 font-medium\">-{step.percentage}%</span>\r\n                                </div>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Informaci√≥n espec√≠fica para Seller */}\r\n                        {viewType === 'seller' && (\r\n                          <div className=\"border-t border-gray-200 pt-2 bg-blue-50 p-3 rounded -m-3 mt-3\">\r\n                            <span className=\"text-sm font-semibold text-blue-800 mb-2 block\">üí∞ Informaci√≥n de ganancias:</span>\r\n                            <div className=\"space-y-1 text-sm\">\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-blue-700\">Comisi√≥n de plataforma:</span>\r\n                                <span className=\"text-blue-900 font-medium\">10%</span>\r\n                              </div>\r\n                              <div className=\"flex justify-between\">\r\n                                <span className=\"text-blue-700\">Tu ganancia (productos):</span>\r\n                                <span className=\"text-blue-900 font-bold\">{formatCurrency(itemBreakdown.subtotal * 0.9)}</span>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })()}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Resumen de Descuentos por Items */}\r\n      {relevantItems.some(item => item.hasVolumeDiscount) && (\r\n        <div className=\"mt-6 p-4 bg-green-50 rounded-lg border border-green-200\">\r\n          <h4 className=\"text-sm font-semibold text-green-800 mb-2\">\r\n            üéâ Descuentos por Volumen Aplicados\r\n          </h4>\r\n          <div className=\"text-sm text-green-700\">\r\n            {relevantItems.filter(item => item.hasVolumeDiscount).length} producto(s) \r\n            con descuentos autom√°ticos por cantidad comprada.\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Nota para Sellers */}\r\n      {viewType === 'seller' && (\r\n        <div className=\"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200\">\r\n          <p className=\"text-sm text-blue-800\">\r\n            <strong>Informaci√≥n del Vendedor:</strong> Los precios mostrados son los finales \r\n            que se usaron para calcular tu comisi√≥n. Los descuentos ya est√°n aplicados.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderItemsList;","import React, {useState, useEffect, useMemo} from \"react\";\r\nimport {useParams, useNavigate, Link} from \"react-router-dom\";\r\nimport {ArrowLeft, FileText, Truck, Package} from \"lucide-react\";\r\nimport {formatDate} from \"../../utils/formatters/formatDate\";\r\nimport OrderStatusBadge from \"../components/orders/OrderStatusBadge\";\r\nimport OrderServiceAdapter from \"../../core/adapters/OrderServiceAdapter\";\r\nimport OrderPricingBreakdown from \"../components/orders/OrderPricingBreakdown\";\r\nimport OrderItemsList from \"../components/orders/OrderItemsList\";\r\nimport type {OrderDetail} from \"../../core/domain/entities/Order\";\r\nimport type {OrderUI} from \"../../core/adapters/OrderServiceAdapter\";\r\n\r\nconst OrderDetailClientPage: React.FC = () => {\r\n\tconst {id} = useParams<{id: string}>();\r\n\tconst navigate = useNavigate();\r\n\tconst [order, setOrder] = useState<OrderDetail | null>(null);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\r\n\tconst orderAdapter = new OrderServiceAdapter();\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchOrderDetails();\r\n\t}, [id]);\r\n\r\n\tconst fetchOrderDetails = async () => {\r\n\t\tif (!id) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst orderDetail = await orderAdapter.getOrderDetails(id);\r\n\t\t\tconsole.log(\"üõçÔ∏è Detalles de la orden recibidos:\", orderDetail);\r\n\t\t\tconsole.log(\"üì¶ Items de la orden:\", orderDetail?.items);\r\n\t\t\tconsole.log(\"üî¢ Cantidad de items:\", orderDetail?.items?.length);\r\n\t\t\t\r\n\t\t\t// Debuggear cada item individualmente\r\n\t\t\torderDetail?.items?.forEach((item, index) => {\r\n\t\t\t\tconsole.log(`üìã Item ${index + 1}:`, {\r\n\t\t\t\t\tid: item.id,\r\n\t\t\t\t\tproduct_name: item.product_name,\r\n\t\t\t\t\tproduct_image: item.product_image,\r\n\t\t\t\t\tprice: item.price,\r\n\t\t\t\t\tquantity: item.quantity,\r\n\t\t\t\t\tproductId: item.productId,\r\n\t\t\t\t\tcompleteItem: item\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tsetOrder(orderDetail);\r\n\t\t\tsetError(null);\r\n\t\t} catch (err) {\r\n\t\t\tsetError(\"No se pudo cargar el detalle de la orden\");\r\n\t\t\tconsole.error(\"Error al cargar detalles de orden:\", err);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// ‚úÖ CORREGIDO: Priorizar pricing_breakdown si est√° disponible\r\n\tconst orderTotals = useMemo(() => {\r\n\t\tif (!order) return null;\r\n\t\t\r\n\t\tconsole.log(\"üîç OrderDetailClientPage - Analizando totales:\");\r\n\t\tconsole.log(\"üìä order.pricing_breakdown:\", order.pricing_breakdown);\r\n\t\tconsole.log(\"üìä order.original_total (directo):\", order.original_total);\r\n\t\tconsole.log(\"üìä order.total_discounts (directo):\", order.total_discounts);\r\n\t\tconsole.log(\"üìä order.volume_discount_savings (directo):\", order.volume_discount_savings);\r\n\t\t\r\n\t\t// Priorizar datos del pricing_breakdown si est√°n disponibles\r\n\t\t// üîß CORREGIDO: Parsear JSON si pricing_breakdown es string\r\n\t\tlet pricingData: any = {};\r\n\t\tif (order.pricing_breakdown) {\r\n\t\t\ttry {\r\n\t\t\t\tpricingData = typeof order.pricing_breakdown === 'string' \r\n\t\t\t\t\t? JSON.parse(order.pricing_breakdown) \r\n\t\t\t\t\t: order.pricing_breakdown;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.warn(\"‚ö†Ô∏è Error parsing pricing_breakdown:\", e);\r\n\t\t\t\tpricingData = {};\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tconst totals = {\r\n\t\t\t// ‚úÖ Usar subtotal_with_discounts del pricing_breakdown\r\n\t\t\tsubtotal_products: pricingData.subtotal_with_discounts ?? order.subtotal_products ?? 0,\r\n\t\t\t// ‚úÖ Usar subtotal_original del pricing_breakdown para el precio original\r\n\t\t\toriginal_total: pricingData.subtotal_original ?? order.original_total ?? 0,\r\n\t\t\t// ‚úÖ Usar valores del pricing_breakdown\r\n\t\t\tiva_amount: pricingData.iva_amount ?? order.iva_amount ?? 0,\r\n\t\t\tshipping_cost: pricingData.shipping_cost ?? order.shipping_cost ?? 0,\r\n\t\t\t// ‚úÖ Usar final_total del pricing_breakdown\r\n\t\t\ttotal: pricingData.final_total ?? order.total ?? 0,\r\n\t\t\t// ‚úÖ Descuentos del pricing_breakdown\r\n\t\t\tseller_discount_savings: pricingData.seller_discounts ?? order.volume_discount_savings ?? 0,\r\n\t\t\tvolume_discount_savings: pricingData.volume_discounts ?? order.volume_discount_savings ?? 0,\r\n\t\t\tfeedback_discount_amount: 0, // Esta propiedad no existe en OrderDetail\r\n\t\t\ttotal_discounts: pricingData.total_discounts ?? order.total_discounts ?? 0,\r\n\t\t\t// C√≥digos y flags\r\n\t\t\tfeedback_discount_code: null, // Esta propiedad no existe en OrderDetail\r\n\t\t\tvolume_discounts_applied: order.volume_discounts_applied || false,\r\n\t\t\tfree_shipping: pricingData.free_shipping ?? order.free_shipping ?? false\r\n\t\t};\r\n\t\t\r\n\t\tconsole.log(\"üéØ Totales finales calculados:\", totals);\r\n\t\treturn totals;\r\n\t}, [order]);\r\n\r\n\t// ‚úÖ NUEVO: Convertir OrderDetail a OrderUI para compatibilidad con componentes\r\n\tconst orderForComponents: OrderUI | null = useMemo(() => {\r\n\t\tif (!order || !orderTotals) return null;\r\n\r\n\t\treturn {\r\n\t\t\tid: String(order.id),\r\n\t\t\torderNumber: order.orderNumber || String(order.id),\r\n\t\t\tdate: order.created_at || new Date().toISOString(),\r\n\t\t\tcustomer: {\r\n\t\t\t\tid: order.userId || 0,\r\n\t\t\t\tname: order.user_name || \"Cliente\",\r\n\t\t\t\temail: order.user_email || \"email@example.com\",\r\n\t\t\t},\r\n\t\t\tsubtotal: orderTotals.subtotal_products,\r\n\t\t\ttaxAmount: orderTotals.iva_amount,\r\n\t\t\ttotal: orderTotals.total,\r\n\t\t\titems: (order.items || []).map((item) => ({\r\n\t\t\t\tid: item.id || 0,\r\n\t\t\t\tproductId: (item as any).product_id || item.productId || 0,\r\n\t\t\t\tname: item.product_name || \"Producto\",\r\n\t\t\t\tquantity: item.quantity || 1,\r\n\t\t\t\tprice: item.price || 0, // Este es el precio total del item (quantity * precio_por_unidad)\r\n\t\t\t\tsubtotal: item.price || 0, // CORREGIDO: item.price ya es el subtotal correcto\r\n\t\t\t\timage: item.product_image,\r\n\t\t\t\toriginalPrice: item.original_price || item.price,\r\n\t\t\t\tvolumeDiscountPercentage: item.volume_discount_percentage || 0,\r\n\t\t\t\tvolumeSavings: item.volume_savings || 0,\r\n\t\t\t\tdiscountLabel: item.discount_label || null,\r\n\t\t\t\thasVolumeDiscount: (item.volume_discount_percentage || 0) > 0\r\n\t\t\t})),\r\n\t\t\tstatus: order.status || \"pending\",\r\n\t\t\tpaymentStatus: (order.payment_status as any) || \"pending\",\r\n\t\t\tshippingAddress: order.shippingData ? \r\n\t\t\t\t`${order.shippingData.address}, ${order.shippingData.city}, ${order.shippingData.state}` : \r\n\t\t\t\tundefined,\r\n\t\t\tnotes: order.shippingData?.notes,\r\n\t\t\titemCount: order.items?.length,\r\n\t\t\toriginalTotal: orderTotals.original_total,\r\n\t\t\tvolumeDiscountSavings: orderTotals.volume_discount_savings,\r\n\t\t\tvolumeDiscountsApplied: orderTotals.volume_discounts_applied,\r\n\t\t\tshippingCost: orderTotals.shipping_cost,\r\n\t\t\tfreeShipping: orderTotals.free_shipping,\r\n\t\t\ttotalDiscounts: orderTotals.total_discounts,\r\n\t\t\tpricingBreakdown: order.pricing_breakdown\r\n\t\t};\r\n\t}, [order, orderTotals]);\r\n\r\n\tif (loading) {\r\n\t\treturn (\r\n\t\t\t<div className=\"flex flex-col items-center justify-center min-h-screen p-4\">\r\n\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500\"></div>\r\n\t\t\t\t<p className=\"mt-4 text-gray-700\">\r\n\t\t\t\t\tCargando detalles del pedido...\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error || !order) {\r\n\t\treturn (\r\n\t\t\t<div className=\"bg-white rounded-lg shadow p-6 max-w-4xl mx-auto my-8\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<div className=\"text-red-500 text-5xl mb-4\">‚ùå</div>\r\n\t\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n\t\t\t\t\t\tError al cargar el pedido\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p className=\"text-gray-700 mb-6\">\r\n\t\t\t\t\t\t{error || \"No se pudo encontrar el pedido solicitado\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => navigate(\"/orders\")}\r\n\t\t\t\t\t\tclassName=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tVolver a mis pedidos\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n    <div className=\"py-8 px-4 md:px-8 max-w-7xl mx-auto\">\r\n      <div className=\"space-y-6\">\r\n        {/* Encabezado */}\r\n        <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n          <div>\r\n            <button\r\n              onClick={() => navigate(\"/orders\")}\r\n              className=\"cursor-pointer flex items-center text-gray-600 hover:text-primary-600 mb-2\"\r\n            >\r\n              <ArrowLeft\r\n                size={16}\r\n                className=\"mr-1\"\r\n              />\r\n              <span>Volver a mis pedidos</span>\r\n            </button>\r\n            <h1 className=\"text-2xl font-bold text-gray-800\">\r\n              Pedido #{order.orderNumber || order.id}\r\n            </h1>\r\n          </div>\r\n\r\n          <div className=\"flex space-x-3\">\r\n            {/* Botones de acci√≥n seg√∫n el estado */}\r\n            {[\"completed\", \"delivered\"].includes(order.status) && (\r\n              <Link\r\n                to={`/invoices/${order.id}`}\r\n                className=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2\"\r\n              >\r\n                <FileText size={18} />\r\n                <span>Ver factura</span>\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Contenido principal */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          {/* Informaci√≥n general y estado */}\r\n          <div className=\"col-span-3 md:col-span-1 space-y-6\">\r\n            {/* Tarjeta de estado */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                Estado del pedido\r\n              </h2>\r\n              <div className=\"space-y-3\">\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-600\">Estado:</span>\r\n                  <OrderStatusBadge status={order.status} />\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-600\">Pago:</span>\r\n                  <OrderStatusBadge\r\n                    status={order.payment_status}\r\n                    type=\"payment\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-600\">M√©todo de pago:</span>\r\n                  <span className=\"text-gray-900\">\r\n                    {order.payment_method === \"credit_card\" &&\r\n                      \"Tarjeta de cr√©dito\"}\r\n                    {order.payment_method === \"datafast\" && \"Datafast\"}\r\n                    {order.payment_method === \"deuna\" && \"DeUna\"}\r\n                    {order.payment_method === \"transfer\" && \"Transferencia\"}\r\n                    {order.payment_method === \"other\" && \"Otro\"}\r\n                    {!order.payment_method && \"No especificado\"}\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex justify-between items-center\">\r\n                  <span className=\"text-gray-600\">Fecha:</span>\r\n                  <span className=\"text-gray-900\">\r\n                    {order.created_at\r\n                      ? formatDate(order.created_at)\r\n                      : \"Sin fecha\"}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Informaci√≥n de env√≠o */}\r\n            <div className=\"bg-white rounded-lg shadow p-6\">\r\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n                Informaci√≥n de env√≠o\r\n              </h2>\r\n              <div className=\"space-y-3\">\r\n                {order.shippingData ? (\r\n                  <>\r\n                    <div>\r\n                      <span className=\"block text-sm font-medium text-gray-600 mb-1\">\r\n                        Direcci√≥n de env√≠o:\r\n                      </span>\r\n                      <p className=\"text-gray-900\">\r\n                        {order.shippingData.address}\r\n                      </p>\r\n                      <p className=\"text-gray-900\">\r\n                        {order.shippingData.city}, {order.shippingData.state}\r\n                      </p>\r\n                      <p className=\"text-gray-900\">\r\n                        {order.shippingData.country},{\" \"}\r\n                        {order.shippingData.postalCode}\r\n                      </p>\r\n                    </div>\r\n                    {order.shippingData.phone && (\r\n                      <div>\r\n                        <span className=\"block text-sm font-medium text-gray-600\">\r\n                          Tel√©fono:\r\n                        </span>\r\n                        <p className=\"text-gray-900\">\r\n                          {order.shippingData.phone}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {order.shippingData.tracking_number && (\r\n                      <div>\r\n                        <span className=\"block text-sm font-medium text-gray-600\">\r\n                          N√∫mero de seguimiento:\r\n                        </span>\r\n                        <p className=\"text-primary-600 font-medium\">\r\n                          {order.shippingData.tracking_number}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {order.shippingData.shipping_company && (\r\n                      <div>\r\n                        <span className=\"block text-sm font-medium text-gray-600\">\r\n                          Empresa de transporte:\r\n                        </span>\r\n                        <p className=\"text-gray-900\">\r\n                          {order.shippingData.shipping_company}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                    {order.shippingData.estimated_delivery && (\r\n                      <div>\r\n                        <span className=\"block text-sm font-medium text-gray-600\">\r\n                          Entrega estimada:\r\n                        </span>\r\n                        <p className=\"text-gray-900\">\r\n                          {formatDate(order.shippingData.estimated_delivery)}\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <p className=\"text-gray-600\">\r\n                    No hay informaci√≥n de env√≠o disponible\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Mostrar iconos de estado seg√∫n la fase de env√≠o */}\r\n              <div className=\"mt-6\">\r\n                <div className=\"relative\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div\r\n                        className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                          order.status !== \"pending\"\r\n                            ? \"bg-green-100 text-green-600\"\r\n                            : \"bg-gray-100 text-gray-400\"\r\n                        }`}\r\n                      >\r\n                        <Package size={20} />\r\n                      </div>\r\n                      <span className=\"text-xs mt-1\">\r\n                        {order.status !== \"pending\"\r\n                          ? \"Procesando\"\r\n                          : \"Pendiente\"}\r\n                      </span>\r\n                    </div>\r\n                    <div className=\"flex-1 h-1 mx-2 bg-gray-200\"></div>\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div\r\n                        className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                          order.status === \"shipped\" ||\r\n                          order.status === \"delivered\" ||\r\n                          order.status === \"completed\"\r\n                            ? \"bg-green-100 text-green-600\"\r\n                            : \"bg-gray-100 text-gray-400\"\r\n                        }`}\r\n                      >\r\n                        <Truck size={20} />\r\n                      </div>\r\n                      <span className=\"text-xs mt-1\">Enviado</span>\r\n                    </div>\r\n                    <div className=\"flex-1 h-1 mx-2 bg-gray-200\"></div>\r\n                    <div className=\"flex flex-col items-center\">\r\n                      <div\r\n                        className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                          order.status === \"delivered\" ||\r\n                          order.status === \"completed\"\r\n                            ? \"bg-green-100 text-green-600\"\r\n                            : \"bg-gray-100 text-gray-400\"\r\n                        }`}\r\n                      >\r\n                        <Package size={20} />\r\n                      </div>\r\n                      <span className=\"text-xs mt-1\">Entregado</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Productos y resumen */}\r\n          <div className=\"col-span-3 md:col-span-2 space-y-6\">\r\n            {/* ‚úÖ NUEVOS COMPONENTES: Lista de productos con descuentos detallados */}\r\n            {orderForComponents && (\r\n              <OrderItemsList \r\n                order={orderForComponents} \r\n                viewType=\"customer\" \r\n              />\r\n            )}\r\n\r\n            {/* ‚úÖ NUEVO: Desglose detallado de precios */}\r\n            {orderTotals && (\r\n              <OrderPricingBreakdown\r\n                originalSubtotal={orderTotals.original_total}\r\n                sellerDiscounts={orderTotals.seller_discount_savings}\r\n                volumeDiscounts={orderTotals.volume_discount_savings}\r\n                couponDiscount={orderTotals.feedback_discount_amount}\r\n                couponCode={orderTotals.feedback_discount_code || undefined}\r\n                subtotalAfterDiscounts={orderTotals.subtotal_products}\r\n                shipping={orderTotals.shipping_cost}\r\n                freeShipping={orderTotals.free_shipping}\r\n                tax={orderTotals.iva_amount}\r\n                total={orderTotals.total}\r\n                isSellerView={false}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetailClientPage;"],"names":["OrderPricingBreakdown","originalSubtotal","sellerDiscounts","volumeDiscounts","couponDiscount","couponCode","subtotalAfterDiscounts","shipping","freeShipping","tax","total","isSellerView","totalDiscounts","jsxs","jsx","Receipt","formatCurrency","TrendingDown","Tag","Fragment","Truck","OrderItemsList","order","viewType","sellerId","getOptimizedImageUrl","useImageCache","itemsBreakdown","setItemsBreakdown","useState","loadingBreakdown","setLoadingBreakdown","useEffect","response","OrderBreakdownService","error","relevantItems","Package","item","index","imageUrl","e","target","itemProductId","b","itemBreakdown","step","stepIndex","OrderDetailClientPage","id","useParams","navigate","useNavigate","setOrder","loading","setLoading","setError","orderAdapter","OrderServiceAdapter","fetchOrderDetails","orderDetail","err","orderTotals","useMemo","pricingData","totals","orderForComponents","ArrowLeft","Link","FileText","OrderStatusBadge","formatDate"],"mappings":"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"}
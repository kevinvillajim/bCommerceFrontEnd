{"version":3,"file":"MainLayout-D_ek_5ac.js","sources":["../../src/presentation/components/common/SearchAutocomplete.tsx","../../src/presentation/components/common/Header.tsx","../../src/presentation/components/common/Footer.tsx","../../src/presentation/layouts/MainLayout.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback, memo } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { Search, X } from \"lucide-react\";\r\nimport { ProductService } from \"../../../core/services/ProductService\";\r\nimport { formatCurrency } from \"../../../utils/formatters/formatCurrency\";\r\nimport { getImageUrl } from \"../../../utils/imageManager\";\r\nimport type { Product, ProductImage } from \"../../../core/domain/entities/Product\";\r\nimport type { ExtendedProductFilterParams } from \"../../types/ProductFilterParams\";\r\n\r\n// Instancia del servicio de productos\r\nconst productService = new ProductService();\r\n\r\n// Interface para las sugerencias\r\ninterface SearchSuggestion {\r\n\tid: number;\r\n\tname: string;\r\n\tprice: number;\r\n\tfinalPrice?: number;\r\n\timage?: string;\r\n\tstock: number;\r\n}\r\n\r\ninterface SearchAutocompleteProps {\r\n\tplaceholder?: string;\r\n\tclassName?: string;\r\n\tonNavigate?: () => void; // Callback para cuando navega a resultados\r\n}\r\n\r\nconst SearchAutocomplete: React.FC<SearchAutocompleteProps> = memo(({\r\n\tplaceholder = \"Buscar productos...\",\r\n\tclassName = \"\",\r\n\tonNavigate, // Recibir el callback\r\n}) => {\r\n\t// Estados\r\n\tconst [searchTerm, setSearchTerm] = useState(\"\");\r\n\tconst [suggestions, setSuggestions] = useState<SearchSuggestion[]>([]);\r\n\tconst [showDropdown, setShowDropdown] = useState(false);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [selectedIndex, setSelectedIndex] = useState(-1);\r\n\r\n\t// Referencias\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\tconst dropdownRef = useRef<HTMLDivElement>(null);\r\n\tconst debounceRef = useRef<NodeJS.Timeout>(null);\r\n\r\n\t// Hooks\r\n\tconst navigate = useNavigate();\r\n\r\n\t// Funci√≥n helper para extraer URL de imagen\r\n\tconst getProductImageUrl = useCallback((imageData: string | ProductImage | undefined): string | undefined => {\r\n\t\tif (!imageData) return undefined;\r\n\t\t\r\n\t\t// Si es string, retornarlo directamente\r\n\t\tif (typeof imageData === 'string') {\r\n\t\t\treturn imageData;\r\n\t\t}\r\n\t\t\r\n\t\t// Si es objeto ProductImage, extraer la URL\r\n\t\tif (typeof imageData === 'object') {\r\n\t\t\treturn imageData.url || imageData.original || imageData.medium || imageData.thumbnail;\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}, []);\r\n\r\n\t// Funci√≥n para adaptar productos a sugerencias\r\n\tconst adaptProductToSuggestion = useCallback((product: Product): SearchSuggestion => {\r\n\t\t// Obtener la primera imagen disponible\r\n\t\tlet imageUrl: string | undefined = undefined;\r\n\t\t\r\n\t\t// Prioridad: main_image > image > primera imagen del array\r\n\t\tif (product.main_image) {\r\n\t\t\timageUrl = getProductImageUrl(product.main_image);\r\n\t\t} else if (product.image) {\r\n\t\t\timageUrl = getProductImageUrl(product.image);\r\n\t\t} else if (Array.isArray(product.images) && product.images.length > 0) {\r\n\t\t\timageUrl = getProductImageUrl(product.images[0]);\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tid: product.id || 0,\r\n\t\t\tname: product.name,\r\n\t\t\tprice: product.price,\r\n\t\t\tfinalPrice: product.finalPrice || product.final_price,\r\n\t\t\timage: imageUrl,\r\n\t\t\tstock: product.stock,\r\n\t\t};\r\n\t}, [getProductImageUrl]);\r\n\r\n\t// Funci√≥n para buscar productos\r\n\tconst searchProducts = useCallback(async (term: string) => {\r\n\t\tif (term.length < 2) {\r\n\t\t\tsetSuggestions([]);\r\n\t\t\tsetShowDropdown(false);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst filterParams: ExtendedProductFilterParams = {\r\n\t\t\t\tterm: term.trim(),\r\n\t\t\t\tlimit: 7, // M√°ximo 7 sugerencias\r\n\t\t\t\toffset: 0,\r\n\t\t\t\tpublished: true, // Solo productos publicados\r\n\t\t\t\tinStock: true, // Solo productos en stock\r\n\t\t\t};\r\n\r\n\t\t\tconst response = await productService.getProducts(filterParams);\r\n\t\t\t\r\n\t\t\tif (response && response.data) {\r\n\t\t\t\tconst adaptedSuggestions = response.data.map(adaptProductToSuggestion);\r\n\t\t\t\tsetSuggestions(adaptedSuggestions);\r\n\t\t\t\tsetShowDropdown(adaptedSuggestions.length > 0);\r\n\t\t\t} else {\r\n\t\t\t\tsetSuggestions([]);\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al buscar productos:\", error);\r\n\t\t\tsetSuggestions([]);\r\n\t\t\tsetShowDropdown(false);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t}, [adaptProductToSuggestion]);\r\n\r\n\t// Debounce para la b√∫squeda\r\n\tconst debouncedSearch = useCallback((term: string) => {\r\n\t\tif (debounceRef.current) {\r\n\t\t\tclearTimeout(debounceRef.current);\r\n\t\t}\r\n\r\n\t\tdebounceRef.current = setTimeout(() => {\r\n\t\t\tsearchProducts(term);\r\n\t\t}, 300);\r\n\t}, [searchProducts]);\r\n\r\n\t// Manejar cambios en el input\r\n\tconst handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tconst value = e.target.value;\r\n\t\tsetSearchTerm(value);\r\n\t\tsetSelectedIndex(-1);\r\n\t\t\r\n\t\tif (value.trim()) {\r\n\t\t\tdebouncedSearch(value);\r\n\t\t} else {\r\n\t\t\tsetSuggestions([]);\r\n\t\t\tsetShowDropdown(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Manejar env√≠o del formulario\r\n\tconst handleSubmit = (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tif (searchTerm.trim()) {\r\n\t\t\tnavigateToResults(searchTerm.trim());\r\n\t\t}\r\n\t};\r\n\r\n\t// Navegar a la p√°gina de resultados\r\n\tconst navigateToResults = (term: string) => {\r\n\t\tnavigate(`/products?search=${encodeURIComponent(term)}`);\r\n\t\tsetShowDropdown(false);\r\n\t\tif (inputRef.current) {\r\n\t\t\tinputRef.current.blur();\r\n\t\t}\r\n\t\t// Llamar al callback si existe (para cerrar men√∫ m√≥vil)\r\n\t\tif (onNavigate) {\r\n\t\t\tonNavigate();\r\n\t\t}\r\n\t};\r\n\r\n\t// Manejar selecci√≥n de sugerencia\r\n\tconst handleSuggestionClick = (suggestion: SearchSuggestion) => {\r\n\t\tsetSearchTerm(suggestion.name);\r\n\t\tnavigateToResults(suggestion.name);\r\n\t};\r\n\r\n\t// Limpiar b√∫squeda\r\n\tconst clearSearch = () => {\r\n\t\tsetSearchTerm(\"\");\r\n\t\tsetSuggestions([]);\r\n\t\tsetShowDropdown(false);\r\n\t\tsetSelectedIndex(-1);\r\n\t\tif (inputRef.current) {\r\n\t\t\tinputRef.current.focus();\r\n\t\t}\r\n\t};\r\n\r\n\t// Manejar navegaci√≥n por teclado\r\n\tconst handleKeyDown = (e: React.KeyboardEvent) => {\r\n\t\tif (!showDropdown || suggestions.length === 0) return;\r\n\r\n\t\tswitch (e.key) {\r\n\t\t\tcase \"ArrowDown\":\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsetSelectedIndex(prev => \r\n\t\t\t\t\tprev < suggestions.length - 1 ? prev + 1 : prev\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"ArrowUp\":\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tsetSelectedIndex(prev => prev > 0 ? prev - 1 : -1);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Enter\":\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif (selectedIndex >= 0 && selectedIndex < suggestions.length) {\r\n\t\t\t\t\thandleSuggestionClick(suggestions[selectedIndex]);\r\n\t\t\t\t} else if (searchTerm.trim()) {\r\n\t\t\t\t\tnavigateToResults(searchTerm.trim());\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Escape\":\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedIndex(-1);\r\n\t\t\t\tif (inputRef.current) {\r\n\t\t\t\t\tinputRef.current.blur();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\r\n\t// Cerrar dropdown al hacer clic fuera\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (event: MouseEvent) => {\r\n\t\t\tif (\r\n\t\t\t\tdropdownRef.current &&\r\n\t\t\t\t!dropdownRef.current.contains(event.target as Node) &&\r\n\t\t\t\tinputRef.current &&\r\n\t\t\t\t!inputRef.current.contains(event.target as Node)\r\n\t\t\t) {\r\n\t\t\t\tsetShowDropdown(false);\r\n\t\t\t\tsetSelectedIndex(-1);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, []);\r\n\r\n\t// Limpiar timeout al desmontar\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tif (debounceRef.current) {\r\n\t\t\t\tclearTimeout(debounceRef.current);\r\n\t\t\t}\r\n\t\t};\r\n\t}, []);\r\n\r\n\t// Resaltar texto coincidente\r\n\tconst highlightMatch = (text: string, term: string) => {\r\n\t\tif (!term) return text;\r\n\t\t\r\n\t\tconst regex = new RegExp(`(${term})`, \"gi\");\r\n\t\tconst parts = text.split(regex);\r\n\t\t\r\n\t\treturn parts.map((part, index) => \r\n\t\t\tregex.test(part) ? (\r\n\t\t\t\t<span key={index} className=\"font-semibold text-primary-600\">\r\n\t\t\t\t\t{part}\r\n\t\t\t\t</span>\r\n\t\t\t) : (\r\n\t\t\t\tpart\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`relative ${className}`}>\r\n\t\t\t<form onSubmit={handleSubmit} className=\"relative\">\r\n\t\t\t\t<input\r\n\t\t\t\t\tref={inputRef}\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\tonChange={handleInputChange}\r\n\t\t\t\t\tonKeyDown={handleKeyDown}\r\n\t\t\t\t\tclassName=\"w-full py-2 px-4 pr-20 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-transparent\"\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t{/* Botones de acci√≥n */}\r\n\t\t\t\t<div className=\"absolute right-3 top-2 flex items-center space-x-1\">\r\n\t\t\t\t\t{searchTerm && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={clearSearch}\r\n\t\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-600 p-1\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<X size={16} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-primary-600 p-1\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Search size={16} />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Indicador de carga */}\r\n\t\t\t\t{loading && (\r\n\t\t\t\t\t<div className=\"absolute right-12 top-3\">\r\n\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\t\t\t</form>\r\n\r\n\t\t\t{/* Dropdown de sugerencias */}\r\n\t\t\t{showDropdown && suggestions.length > 0 && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={dropdownRef}\r\n\t\t\t\t\tclassName=\"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{suggestions.map((suggestion, index) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={suggestion.id}\r\n\t\t\t\t\t\t\tonClick={() => handleSuggestionClick(suggestion)}\r\n\t\t\t\t\t\t\tclassName={`px-4 py-3 cursor-pointer border-b border-gray-100 last:border-b-0 hover:bg-gray-50 ${\r\n\t\t\t\t\t\t\t\tindex === selectedIndex ? \"bg-primary-50\" : \"\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3\">\r\n\t\t\t\t\t\t\t\t{/* Imagen del producto */}\r\n\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 w-12 h-12 bg-gray-100 rounded-md overflow-hidden\">\r\n\t\t\t\t\t\t\t\t\t{suggestion.image ? (\r\n\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\tsrc={getImageUrl(suggestion.image)}\r\n\t\t\t\t\t\t\t\t\t\t\talt={suggestion.name}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-full object-cover\"\r\n\t\t\t\t\t\t\t\t\t\t\tonError={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst target = e.target as HTMLImageElement;\r\n\t\t\t\t\t\t\t\t\t\t\t\ttarget.style.display = \"none\";\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full h-full flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<Search className=\"w-6 h-6 text-gray-400\" />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{/* Informaci√≥n del producto */}\r\n\t\t\t\t\t\t\t\t<div className=\"flex-1 min-w-0\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900 truncate\">\r\n\t\t\t\t\t\t\t\t\t\t{highlightMatch(suggestion.name, searchTerm)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2 mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm font-semibold text-primary-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(suggestion.finalPrice || suggestion.price)}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t{suggestion.finalPrice && suggestion.finalPrice < suggestion.price && (\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs text-gray-500 line-through\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(suggestion.price)}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t{/* Stock */}\r\n\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0\">\r\n\t\t\t\t\t\t\t\t\t<span className={`text-xs px-2 py-1 rounded-full ${\r\n\t\t\t\t\t\t\t\t\t\tsuggestion.stock > 0 \r\n\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-800\" \r\n\t\t\t\t\t\t\t\t\t\t\t: \"bg-red-100 text-red-800\"\r\n\t\t\t\t\t\t\t\t\t}`}>\r\n\t\t\t\t\t\t\t\t\t\t{suggestion.stock > 0 ? \"En stock\" : \"Agotado\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t{/* Opci√≥n para ver todos los resultados */}\r\n\t\t\t\t\t{searchTerm.trim() && (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tonClick={() => navigateToResults(searchTerm.trim())}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-3 text-center cursor-pointer hover:bg-gray-50 border-t border-gray-200\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<span className=\"text-sm text-primary-600 font-medium\">\r\n\t\t\t\t\t\t\t\tVer todos los resultados para \"{searchTerm}\"\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default SearchAutocomplete;","import React, {useState, useEffect, useRef, useMemo, memo} from \"react\";\r\nimport {\r\n\tShoppingCart,\r\n\tUser,\r\n\tMenu,\r\n\tX,\r\n\tHeart,\r\n\tBell,\r\n\tLogOut,\r\n\tShoppingBag,\r\n} from \"lucide-react\";\r\nimport {useAuth} from \"../../hooks/useAuth\";\r\nimport {useHeaderCounters} from \"../../hooks/useHeaderCounters\";\r\nimport { useShippingConfig } from \"../../hooks/useUnifiedConfig\";\r\nimport ThemeToggle from \"./ThemeToggle\";\r\nimport SearchAutocomplete from \"./SearchAutocomplete\";\r\nimport { useTheme } from '../../hooks/useTheme';\r\n\r\n// Interfaz para el logo\r\ninterface Logo {\r\n\timg?: string;\r\n\timgdark?: string;\r\n\tname: string;\r\n}\r\n\r\ninterface HeaderProps {\r\n\tlogo?: Logo;\r\n\tnavLinks?: Array<{\r\n\t\ttext: string;\r\n\t\tto: string;\r\n\t}>;\r\n}\r\n\r\nconst Header: React.FC<HeaderProps> = memo(({\r\n\tlogo = {\r\n\t\timg: \"/logo.png\",\r\n\t\timgdark: \"/logowhite.png\",\r\n\t\tname: \"Comersia\",\r\n\t},\r\n\tnavLinks = [\r\n\t\t{text: \"Inicio\", to: \"/\"},\r\n\t\t{text: \"Productos\", to: \"/products\"},\r\n\t\t{text: \"Categor√≠as\", to: \"/categories\"},\r\n\t\t{text: \"Nosotros\", to: \"/about\"},\r\n\t\t{text: \"Contacto\", to: \"/contact\"},\r\n\t],\r\n}) => {\r\n\tconst [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n\tconst [userMenuOpen, setUserMenuOpen] = useState(false);\r\n\tconst [sellerMenuOpen, setSellerMenuOpen] = useState(false); // üéÜ NUEVO: Menu dropdown para seller/admin\r\n\tconst userMenuRef = useRef<HTMLDivElement>(null);\r\n\tconst sellerMenuRef = useRef<HTMLDivElement>(null); // üéÜ NUEVO: Ref para seller menu\r\n\tconst { theme } = useTheme();\r\n\r\n\t// Obtener informaci√≥n del usuario y estado de autenticaci√≥n\r\n\tconst {user, isAuthenticated, logout} = useAuth();\r\n\r\n\tconst logoSrc = useMemo(() => {\r\n\t\treturn theme === 'dark'\r\n\t\t\t? logo.imgdark || logo.img || null\r\n\t\t\t: logo.img || null;\r\n\t}, [theme, logo.imgdark, logo.img]);\r\n\r\n\t// ‚úÖ USAR EL HOOK UNIFICADO OPTIMIZADO\r\n\tconst {\r\n\t\tcounters,\r\n\t\terror: countersError,\r\n\t} = useHeaderCounters();\r\n\r\n\t// ‚úÖ OBTENER CONFIGURACI√ìN DIN√ÅMICA DE ENV√çO (Sistema Unificado)\r\n\tconst { config: shippingConfig, loading: shippingLoading } = useShippingConfig();\r\n\tconst freeThreshold = shippingConfig?.free_threshold ?? 50;\r\n\tconst shippingEnabled = shippingConfig?.enabled ?? true;\r\n\r\n\tconst {cartItemCount, favoriteCount, notificationCount} = counters;\r\n\r\n\t// Cerrar los men√∫s al hacer clic fuera de ellos y prevenir scroll de fondo\r\n\tuseEffect(() => {\r\n\t\tconst handleClickOutside = (event: MouseEvent) => {\r\n\t\t\tif (\r\n\t\t\t\tuserMenuRef.current &&\r\n\t\t\t\t!userMenuRef.current.contains(event.target as Node)\r\n\t\t\t) {\r\n\t\t\t\tsetUserMenuOpen(false);\r\n\t\t\t}\r\n\t\t\t// üéÜ NUEVO: Cerrar menu seller\r\n\t\t\tif (\r\n\t\t\t\tsellerMenuRef.current &&\r\n\t\t\t\t!sellerMenuRef.current.contains(event.target as Node)\r\n\t\t\t) {\r\n\t\t\t\tsetSellerMenuOpen(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener(\"mousedown\", handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener(\"mousedown\", handleClickOutside);\r\n\t\t};\r\n\t}, []);\r\n\r\n\t// Prevenir scroll de fondo cuando el men√∫ m√≥vil est√° abierto\r\n\tuseEffect(() => {\r\n\t\tif (mobileMenuOpen) {\r\n\t\t\tdocument.body.style.overflow = 'hidden';\r\n\t\t} else {\r\n\t\t\tdocument.body.style.overflow = 'unset';\r\n\t\t}\r\n\r\n\t\t// Cleanup al desmontar\r\n\t\treturn () => {\r\n\t\t\tdocument.body.style.overflow = 'unset';\r\n\t\t};\r\n\t}, [mobileMenuOpen]);\r\n\r\n\tconst toggleMobileMenu = () => {\r\n\t\tsetMobileMenuOpen(!mobileMenuOpen);\r\n\t};\r\n\r\n\tconst toggleUserMenu = () => {\r\n\t\tsetUserMenuOpen(!userMenuOpen);\r\n\t};\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tawait logout();\r\n\t\tsetUserMenuOpen(false);\r\n\t};\r\n\r\n\t// Componente interno Link para simular react-router-dom\r\n\tconst Link = ({\r\n\t\tto,\r\n\t\tclassName,\r\n\t\tchildren,\r\n\t\tonClick,\r\n\t\t...props\r\n\t}: {\r\n\t\tto: string;\r\n\t\tclassName?: string;\r\n\t\tchildren: React.ReactNode;\r\n\t\tonClick?: () => void;\r\n\t\t[key: string]: any; // Para permitir data-* attributes\r\n\t}) => (\r\n\t\t<a href={to} className={className} onClick={onClick} {...props}>\r\n\t\t\t{children}\r\n\t\t</a>\r\n\t);\r\n\r\n\t// Obtener la inicial del usuario para el avatar\r\n\tconst getUserInitial = () => {\r\n\t\tif (user?.name) {\r\n\t\t\treturn user.name.charAt(0).toUpperCase();\r\n\t\t}\r\n\t\treturn \"U\";\r\n\t};\r\n\r\n\tconst notificationCountSanitized =\r\n\t\tnotificationCount > 99 ? \"99\" : notificationCount;\r\n\r\n\treturn (\r\n\t\t<header className=\"bg-white shadow-md sticky top-0 z-50\">\r\n\t\t\t{/* Top Bar */}\r\n\t\t\t<div className=\"bg-gray-900 text-white text-sm py-2 top-bar\">\r\n\t\t\t\t<div className=\"container mx-auto px-4\">\r\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t<div className=\"text-center w-full md:text-left md:w-auto\">\r\n\t\t\t\t\t\t\t{!shippingLoading && (\r\n\t\t\t\t\t\t\t\tshippingEnabled ? (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-sm md:text-base\">Env√≠o gratis en pedidos superiores a ${freeThreshold}</span>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-yellow-300 font-semibold text-sm md:text-base\">üéâ ¬°Env√≠o GRATIS por tiempo limitado!</span>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"flex space-x-4 text-xs md:text-sm\">\r\n\t\t\t\t\t\t\t<a href=\"faq\" className=\"hover:underline\">\r\n\t\t\t\t\t\t\t\tAyuda\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Main Header */}\r\n\t\t\t<div className=\"container mx-auto px-4 py-4\">\r\n\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t{/* Logo */}\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t<Link to=\"/\" className=\"flex items-center\">\r\n\t\t\t\t\t\t\t{logoSrc ? (\r\n  <img src={logoSrc} alt={logo.name} className=\"h-6 lg:h-8 w-auto\" />\r\n) : (\r\n  <span className=\"text-2xl font-bold text-gray-800\">\r\n    <span className=\"text-primary-600\">\r\n      {logo.name.charAt(0)}\r\n    </span>\r\n    {logo.name.slice(1)}\r\n  </span>\r\n)}\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Search Bar - Only on desktop */}\r\n\t\t\t\t\t<div className=\"hidden md:flex flex-1 mx-16\">\r\n\t\t\t\t\t\t<SearchAutocomplete \r\n\t\t\t\t\t\t\tplaceholder=\"Buscar productos...\"\r\n\t\t\t\t\t\t\tclassName=\"w-full\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Icons - Desktop */}\r\n\t\t\t\t\t<div className=\"hidden sm:flex items-center space-x-6\">\r\n\t\t\t\t\t\t<ThemeToggle />\r\n\r\n\t\t\t\t\t\t{/* üéÜ BOT√ìN CONDICIONAL SELLER/ADMIN */}\r\n\t\t\t\t\t\t{isAuthenticated && (user?.role === 'seller' || user?.role === 'admin' || user?.role === 'payment') && (\r\n\t\t\t\t\t\t <div className=\"flex items-center space-x-4\">\r\n\t\t\t\t\t\t {/* Bot√≥n ir a Dashboard */}\r\n\t\t\t\t\t\t <Link\r\n\t\t\t\t\t\t   to={\r\n\t\t\t\t\t\t   \tuser?.role === 'admin' ? '/admin/dashboard' :\r\n\t\t\t\t\t\t   \tuser?.role === 'seller' ? '/seller/dashboard' :\r\n\t\t\t\t\t\t   \tuser?.role === 'payment' ? '/payment/dashboard' : '/seller/dashboard'\r\n\t\t\t\t\t\t   }\r\n\t\t\t\t\t\t  className=\"px-3 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors text-sm font-medium shadow-sm\"\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t\t Ir a Dashboard\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t {/* Dropdown con accesos adicionales */}\r\n\t\t\t\t\t\t <div className=\"relative\" ref={sellerMenuRef}>\r\n\t\t\t\t\t\t <button\r\n\t\t\t\t\t\t onClick={() => setSellerMenuOpen(!sellerMenuOpen)}\r\n\t\t\t\t\t\t className=\"p-2 text-gray-600 hover:text-primary-600 rounded-lg hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t title=\"M√°s opciones\"\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t\t <Menu size={20} />\r\n\t\t\t\t\t\t </button>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t {sellerMenuOpen && (\r\n\t\t\t\t\t\t <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100\">\r\n\t\t\t\t\t\t <div className=\"px-4 py-2 border-b border-gray-100\">\r\n\t\t\t\t\t\t <p className=\"text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t {user?.role === 'admin' ? 'Panel Admin' : 'Panel Vendedor'}\r\n\t\t\t\t\t\t </p>\r\n\t\t\t\t\t\t </div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t {/* Accesos r√°pidos como comprador */}\r\n\t\t\t\t\t\t <div className=\"px-3 py-1\">\r\n\t\t\t\t\t\t <p className=\"text-xs text-gray-400 uppercase tracking-wider mb-1\">Como Comprador</p>\r\n\t\t\t\t\t\t </div>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t <Link\r\n\t\t\t\t\t\t to=\"/favorites\"\r\n\t\t\t\t\t\t className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n\t\t\t\t\t\t onClick={() => setSellerMenuOpen(false)}\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t\t <Heart size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t Favoritos\r\n\t\t\t\t\t\t {favoriteCount > 0 && (\r\n\t\t\t\t\t\t <span className=\"ml-auto bg-gray-200 text-gray-600 text-xs rounded-full px-2 py-0.5\">\r\n\t\t\t\t\t\t {favoriteCount}\r\n\t\t\t\t\t\t </span>\r\n\t\t\t\t\t\t )}\r\n\t\t\t\t\t\t </Link>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t <Link\r\n\t\t\t\t\t\t to=\"/cart\"\r\n\t\t\t\t\t\t className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n\t\t\t\t\t\t onClick={() => setSellerMenuOpen(false)}\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t\t <ShoppingCart size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t Carrito\r\n\t\t\t\t\t\t {cartItemCount > 0 && (\r\n\t\t\t\t\t\t <span className=\"ml-auto bg-gray-200 text-gray-600 text-xs rounded-full px-2 py-0.5\">\r\n\t\t\t\t\t\t {cartItemCount}\r\n\t\t\t\t\t\t </span>\r\n\t\t\t\t\t\t )}\r\n\t\t\t\t\t\t </Link>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t <Link\r\n\t\t\t\t\t\t to=\"/notifications\"\r\n\t\t\t\t\t\t className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\r\n\t\t\t\t\t\t onClick={() => setSellerMenuOpen(false)}\r\n\t\t\t\t\t\t >\r\n\t\t\t\t\t\t <Bell size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t Notificaciones\r\n\t\t\t\t\t\t {notificationCount > 0 && (\r\n\t\t\t\t\t\t <span className=\"ml-auto bg-red-100 text-red-600 text-xs rounded-full px-2 py-0.5\">\r\n\t\t\t\t\t\t {notificationCountSanitized}\r\n\t\t\t\t\t\t </span>\r\n\t\t\t\t\t\t )}\r\n\t\t\t\t\t\t </Link>\r\n\t\t\t\t\t\t </div>\r\n\t\t\t\t\t\t )}\r\n\t\t\t\t\t\t </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t\r\n\t\t\t\t\t{/* üì± CONTADORES NORMALES - Solo si NO es seller/admin */}\r\n\t\t\t\t\t{!(user?.role === 'seller' || user?.role === 'admin') && (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t{/* Favorites Icon */}\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto=\"/favorites\"\r\n\t\t\t\t\t\t\t\tclassName=\"text-gray-700 hover:text-primary-600 transition-colors relative\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Heart size={22} />\r\n\t\t\t\t\t\t\t\t{favoriteCount > 0 && (\r\n\t\t\t\t\t\t\t\t\t<span className=\"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t{favoriteCount}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t\t{/* Cart Icon */}\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto=\"/cart\"\r\n\t\t\t\t\t\t\t\tclassName=\"text-gray-700 hover:text-primary-600 transition-colors relative\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<ShoppingCart size={22} />\r\n\t\t\t\t\t\t\t\t{cartItemCount > 0 && (\r\n\t\t\t\t\t\t\t\t\t<span className=\"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t{cartItemCount}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{isAuthenticated ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{/* ‚úÖ BOT√ìN DE NOTIFICACIONES CORREGIDO - Con atributo necesario */}\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/notifications\"\r\n\t\t\t\t\t\t\t\t\tdata-notification-button=\"true\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"text-gray-700 hover:text-primary-600 transition-colors relative\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Bell size={22} />\r\n\t\t\t\t\t\t\t\t\t{notificationCount > 0 && (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t{notificationCountSanitized}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t\t\t\t{/* User Menu */}\r\n\t\t\t\t\t\t\t\t<div className=\"relative\" ref={userMenuRef}>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\tonClick={toggleUserMenu}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center space-x-2 text-gray-700 hover:text-primary-600 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"h-8 w-8 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t{getUserInitial()}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t{user?.name?.split(\" \")[0]}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* User Dropdown Menu */}\r\n\t\t\t\t\t\t\t\t\t{userMenuOpen && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-10 border border-gray-100 dropdown-menu\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"px-4 py-2 border-b border-gray-100\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm font-medium\">{user?.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 truncate\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{user?.email}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 dropdown-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<User size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\tMi perfil\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"/orders\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 dropdown-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ShoppingBag size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\tMis pedidos\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\tto=\"/favorites\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 dropdown-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Heart size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\tMis favoritos\r\n\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={handleLogout}\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<LogOut size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\tCerrar sesi√≥n\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{/* Login and Register buttons when not authenticated */}\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"text-gray-700 hover:text-primary-600 transition-colors font-medium\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tIniciar sesi√≥n\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors font-medium shadow-sm hover:shadow\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tRegistrarse\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Mobile Menu Button */}\r\n\t\t\t\t\t<div className=\"sm:hidden flex items-center space-x-4\">\r\n\t\t\t\t\t{/* üéÜ BOT√ìN DASHBOARD M√ìVIL - Solo para seller/admin */}\r\n\t\t\t\t\t{isAuthenticated && (user?.role === 'seller' || user?.role === 'admin' || user?.role === 'payment') && (\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\tto={\r\n\t\t\t\t\t\tuser?.role === 'admin' ? '/admin/dashboard' :\r\n\t\t\t\t\t\tuser?.role === 'seller' ? '/seller/dashboard' :\r\n\t\t\t\t\t\tuser?.role === 'payment' ? '/payment/dashboard' : '/seller/dashboard'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tclassName=\"px-2 py-1 bg-primary-600 text-white rounded text-xs font-medium\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t Dashboard\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\t{/* üé® THEME TOGGLE M√ìVIL - Solo cuando NO hay sesi√≥n iniciada */}\r\n\t\t\t\t\t{!isAuthenticated && (\r\n\t\t\t\t\t\t<ThemeToggle />\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Cart Icon for Mobile */}\r\n\t\t\t\t\t<Link to=\"/cart\" className=\"text-gray-700 relative\">\r\n\t\t\t\t\t<ShoppingCart size={22} />\r\n\t\t\t\t\t{cartItemCount > 0 && (\r\n\t\t\t\t\t  <span className=\"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\">\r\n\t\t\t\t\t  {cartItemCount}\r\n\t\t\t\t\t </span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{/* üì± FAVORITOS M√ìVIL - Solo si NO es seller/admin */}\r\n\t\t\t\t\t{!(user?.role === 'seller' || user?.role === 'admin') && (\r\n\t\t\t\t\t <Link\r\n\t\t\t\t\t  to=\"/favorites\"\r\n\t\t\t\t\t  className=\"text-gray-700 hover:text-primary-600 transition-colors relative\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<Heart size={22} />\r\n\t\t\t\t\t {favoriteCount > 0 && (\r\n\t\t\t\t\t   <span className=\"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center\">\r\n\t\t\t\t\t\t\t\t\t{favoriteCount}\r\n\t\t\t\t\t   </span>\r\n\t\t\t\t\t  )}\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t \r\n\t\t\t\t\t{/* User Icon for Mobile (only when authenticated) */}\r\n\t\t\t\t\t{isAuthenticated && (\r\n\t\t\t\t\t\t<div className=\"h-8 w-8 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center font-medium\">\r\n\t\t\t\t\t\t\t{getUserInitial()}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Menu Toggle Button */}\r\n\t\t\t\t\t<button onClick={toggleMobileMenu} className=\"text-gray-700\">\r\n\t\t\t\t\t\t{mobileMenuOpen ? <X size={24} /> : <Menu size={24} />}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Navigation - Desktop and Tablet */}\r\n\t\t\t<nav className=\"hidden sm:block border-t border-gray-100\">\r\n\t\t\t\t<div className=\"container mx-auto px-4\">\r\n\t\t\t\t\t<div className=\"flex justify-center items-center py-1\">\r\n\t\t\t\t\t\t<ul className=\"flex space-x-8\">\r\n\t\t\t\t\t\t\t{navLinks.map((link, index) => (\r\n\t\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tto={link.to}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-gray-700 font-medium hover:text-primary-600 py-2 block transition-colors\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{link.text}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</nav>\r\n\r\n\t\t\t{/* Mobile Menu - Pantalla completa con estructura fija y scroll solo en navegaci√≥n */}\r\n\t\t\t{mobileMenuOpen && (\r\n\t\t\t\t<div className=\"sm:hidden fixed inset-0 top-[105px] bg-white z-50 flex flex-col h-[calc(100vh-105px)] overflow-hidden\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t{/* SECCI√ìN FIJA: B√∫squeda */}\r\n\t\t\t\t\t<div className=\"flex-shrink-0 px-6 py-4 border-b border-gray-100\">\r\n\t\t\t\t\t\t<SearchAutocomplete \r\n\t\t\t\t\t\t\tplaceholder=\"Buscar productos...\"\r\n\t\t\t\t\t\t\tclassName=\"w-full\"\r\n\t\t\t\t\t\t\tonNavigate={() => setMobileMenuOpen(false)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* SECCI√ìN FIJA: Informaci√≥n del usuario y accesos r√°pidos */}\r\n\t\t\t\t\t{isAuthenticated && (\r\n\t\t\t\t\t\t<div className=\"flex-shrink-0 px-6 py-5 border-b border-gray-200\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-center space-x-3 mb-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"h-10 w-10 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center font-medium\">\r\n\t\t\t\t\t\t\t\t\t{getUserInitial()}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium\">{user?.name}</p>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 truncate\">\r\n\t\t\t\t\t\t\t\t\t\t{user?.email}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t{/* INDICADOR DE ROL */}\r\n\t\t\t\t\t\t\t\t\t{(user?.role === 'seller' || user?.role === 'admin') && (\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"inline-block px-2 py-1 bg-primary-100 text-primary-700 text-xs rounded-full mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t{user?.role === 'admin' ? 'Administrador' : 'Vendedor'}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{/* ACCESOS R√ÅPIDOS EN GRID */}\r\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-2\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/profile\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-col items-center p-2 rounded-lg hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<User size={20} className=\"mb-1 text-gray-700\" />\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs\">Perfil</span>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/orders\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-col items-center p-2 rounded-lg hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ShoppingBag size={20} className=\"mb-1 text-gray-700\" />\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs\">Pedidos</span>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/favorites\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"flex flex-col items-center p-2 rounded-lg hover:bg-gray-50\"\r\n\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<Heart size={20} className=\"mb-1 text-gray-700\" />\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs\">Favoritos</span>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{/* Theme Toggle */}\r\n\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center p-2 rounded-lg hover:bg-gray-50\">\r\n\t\t\t\t\t\t\t\t\t<ThemeToggle />\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-xs mt-1\">Tema</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* SECCI√ìN CON SCROLL: Solo la navegaci√≥n */}\r\n\t\t\t\t\t<div className=\"flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 px-6 py-4\">\r\n\t\t\t\t\t\t<ul className=\"space-y-2\">\r\n\t\t\t\t\t\t\t{navLinks.map((link, index) => (\r\n\t\t\t\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tto={link.to}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"block text-gray-700 font-medium hover:text-primary-600 hover:bg-gray-50 py-1 px-4 rounded-lg transition-colors text-md\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{link.text}\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* SECCI√ìN FIJA: Botones de autenticaci√≥n o logout */}\r\n\t\t\t\t\t<div className=\"flex-shrink-0 px-3 py-3 border-t border-gray-200 bg-gray-50\">\r\n\t\t\t\t\t\t{isAuthenticated ? (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\thandleLogout();\r\n\t\t\t\t\t\t\t\t\ttoggleMobileMenu();\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\tclassName=\"w-full flex items-center justify-center py-2 text-red-600 font-medium border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-md bg-white shadow-sm\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<LogOut size={20} className=\"mr-3\" />\r\n\t\t\t\t\t\t\t\tCerrar sesi√≥n\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/login\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"block text-center py-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium text-lg bg-white shadow-sm\"\r\n\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tIniciar sesi√≥n\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\tto=\"/register\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"block text-center py-4 bg-primary-600 rounded-lg text-white hover:bg-primary-700 transition-colors font-medium text-lg shadow-sm\"\r\n\t\t\t\t\t\t\t\t\tonClick={toggleMobileMenu}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tRegistrarse\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* ‚úÖ MOSTRAR ERROR DE CONTADORES SI EXISTE */}\r\n\t\t\t{countersError && (\r\n\t\t\t\t<div className=\"bg-yellow-50 border-l-4 border-yellow-400 p-2 text-sm text-yellow-700\">\r\n\t\t\t\t\tError cargando contadores: {countersError}\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</header>\r\n\t);\r\n});\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Facebook, Instagram, Twitter, Send, MapPin, Phone, Mail, Heart } from 'lucide-react';\r\n\r\ninterface Logo {\r\n  img?: string;\r\n  name: string;\r\n}\r\n\r\ninterface FooterProps {\r\n  logo?: Logo;\r\n  quickLinks?: Array<{\r\n    text: string;\r\n    to: string;\r\n  }>;\r\n  customerLinks?: Array<{\r\n    text: string;\r\n    to: string;\r\n  }>;\r\n}\r\n\r\nconst Footer: React.FC<FooterProps> = ({\r\n  logo = {\r\n    img: \"/logowhite.png\",\r\n    name: \"Comersia\"\r\n  },\r\n  quickLinks = [\r\n    { text: \"Inicio\", to: \"/\" },\r\n    { text: \"Productos\", to: \"/products\" },\r\n    { text: \"Categor√≠as\", to: \"/categories\" },\r\n    { text: \"Nosotros\", to: \"/about\" }\r\n  ],\r\n  customerLinks = [\r\n    { text: \"Cont√°ctanos\", to: \"/contact\" },\r\n    { text: \"Preguntas Frecuentes\", to: \"/faq\" },\r\n    { text: \"Pol√≠tica de Env√≠o\", to: \"/shipping\" },\r\n    { text: \"Devoluciones y Reembolsos\", to: \"/returns\" }\r\n  ]\r\n}) => {\r\n  // Componente interno Link para simular react-router-dom\r\n  const Link = ({ to, className, children }: { to: string, className?: string, children: React.ReactNode }) => (\r\n    <a href={to} className={className}>\r\n      {children}\r\n    </a>\r\n  );\r\n  \r\n\r\n  return (\r\n    <footer className=\"relative overflow-hidden footer\">\r\n      {/* Wave SVG en la parte superior */}\r\n      <div className=\"absolute top-0 left-0 w-full overflow-hidden\">\r\n        <svg \r\n          data-name=\"Layer 1\" \r\n          xmlns=\"http://www.w3.org/2000/svg\" \r\n          viewBox=\"0 0 1200 120\" \r\n          preserveAspectRatio=\"none\"\r\n          className=\"w-full h-12 text-gray-100\"\r\n        >\r\n          <path \r\n            d=\"M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z\" \r\n            fill=\"currentColor\"\r\n          ></path>\r\n        </svg>\r\n      </div>\r\n\r\n      {/* Contenido principal del footer */}\r\n      <div className=\"bg-gray-900 text-white pt-16 pb-8\">\r\n        <div className=\"container mx-auto px-4\">\r\n          {/* Secci√≥n superior con columnas */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12\">\r\n            \r\n            {/* Columna 1: Informaci√≥n de la tienda */}\r\n            <div className=\"lg:pr-8\">\r\n              <div className=\"mb-6\">\r\n                {logo.img ? (\r\n                  <img \r\n                    src={logo.img} \r\n                    alt={logo.name} \r\n                    className=\"h-12 w-auto\" \r\n                  />\r\n                ) : (\r\n                  <span className=\"text-2xl font-bold text-white\">\r\n                    <span className=\"text-primary-500\">{logo.name.charAt(0)}</span>\r\n                    {logo.name.slice(1)}\r\n                  </span>\r\n                )}\r\n              </div>\r\n              <p className=\"text-gray-400 mb-6\">Tu soluci√≥n integral de comercio electr√≥nico para todas tus necesidades de compra.</p>\r\n              \r\n              {/* Newsletter */}\r\n              <div>\r\n                <h4 className=\"text-white font-semibold mb-3\">Suscr√≠bete a nuestro bolet√≠n</h4>\r\n                <div className=\"flex\">\r\n                  <input\r\n                    type=\"email\"\r\n                    placeholder=\"Tu email\"\r\n                    className=\"bg-gray-800 text-white px-4 py-2 rounded-l-lg w-full focus:outline-none focus:ring-1 focus:ring-primary-500\"\r\n                  />\r\n                  <button className=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-r-lg transition-colors\">\r\n                    <Send size={18} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Columna 2: Enlaces r√°pidos */}\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold mb-6 border-l-4 border-primary-500 pl-3\">Enlaces R√°pidos</h3>\r\n              <ul className=\"space-y-3\">\r\n                {quickLinks.map((link, index) => (\r\n                  <li key={index}>\r\n                    <Link to={link.to} className=\"text-gray-400 hover:text-white transition-colors flex items-center\">\r\n                      <span className=\"w-2 h-2 bg-primary-500 rounded-full mr-2\"></span>\r\n                      {link.text}\r\n                    </Link>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n            \r\n            {/* Columna 3: Atenci√≥n al cliente */}\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold mb-6 border-l-4 border-primary-500 pl-3\">Atenci√≥n al Cliente</h3>\r\n              <ul className=\"space-y-3\">\r\n                {customerLinks.map((link, index) => (\r\n                  <li key={index}>\r\n                    <Link to={link.to} className=\"text-gray-400 hover:text-white transition-colors flex items-center\">\r\n                      <span className=\"w-2 h-2 bg-primary-500 rounded-full mr-2\"></span>\r\n                      {link.text}\r\n                    </Link>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n            \r\n            {/* Columna 4: Cont√°ctanos */}\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold mb-6 border-l-4 border-primary-500 pl-3\">Cont√°ctanos</h3>\r\n              <ul className=\"space-y-4\">\r\n                <li className=\"flex items-start\">\r\n                  <MapPin size={20} className=\"text-primary-500 mr-3 mt-1 flex-shrink-0\" />\r\n                  <span className=\"text-gray-400\">Gil R. D√°valos y Av. Amazonas - Edificio Centro Amazonas - #402 Quito, Ecuador</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <Phone size={20} className=\"text-primary-500 mr-3 flex-shrink-0\" />\r\n                  <span className=\"text-gray-400\">+593 96 296 6301</span>\r\n                </li>\r\n                <li className=\"flex items-center\">\r\n                  <Mail size={20} className=\"text-primary-500 mr-3 flex-shrink-0\" />\r\n                  <span className=\"text-gray-400\">info@comersia.app</span>\r\n                </li>\r\n              </ul>\r\n              \r\n              {/* Redes Sociales */}\r\n              <div className=\"mt-6\">\r\n                <h4 className=\"text-white font-semibold mb-4\">S√≠guenos</h4>\r\n                <div className=\"flex space-x-3\">\r\n                  <a href=\"#\" className=\"w-10 h-10 rounded-full bg-gray-800 hover:bg-primary-600 flex items-center justify-center transition-colors\">\r\n                    <Facebook size={18} className=\"text-white\" />\r\n                  </a>\r\n                  <a href=\"#\" className=\"w-10 h-10 rounded-full bg-gray-800 hover:bg-primary-600 flex items-center justify-center transition-colors\">\r\n                    <Instagram size={18} className=\"text-white\" />\r\n                  </a>\r\n                  <a href=\"#\" className=\"w-10 h-10 rounded-full bg-gray-800 hover:bg-primary-600 flex items-center justify-center transition-colors\">\r\n                    <Twitter size={18} className=\"text-white\" />\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* L√≠nea separadora con gradiente */}\r\n          <div className=\"h-px bg-gradient-to-r from-gray-900 via-gray-600 to-gray-900 mb-8\"></div>\r\n          \r\n          {/* Copyright y cr√©ditos */}\r\n          <div className=\"flex flex-col md:flex-row justify-between items-center text-gray-400 text-sm\">\r\n            <p>&copy; {new Date().getFullYear()} {logo.name}. Todos los derechos reservados.</p>\r\n            <div className=\"mt-3 md:mt-0 flex items-center\">\r\n              <span>Hecho con</span>\r\n              <Heart size={14} className=\"mx-1 text-red-500\" />\r\n              <span>por <a href='https://kevinvillajim.github.io/Portfolio/'><span className=\"text-primary-500 font-medium\">kevinvillajim</span></a></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;","import React from 'react';\r\nimport { Outlet } from 'react-router-dom';\r\nimport Header from '../components/common/Header.jsx'\r\nimport Footer from '../components/common/Footer.jsx'\r\n\r\n/**\r\n * Main Layout Component\r\n * Main layout for the public-facing parts of the application\r\n */\r\nconst MainLayout: React.FC = () => {\r\n\r\n  const logo = {\r\n    img: \"./logo.png\", // Path to the logo image\r\n    imgdark: \"./logowhite.png\", // Path to the dark mode logo image\r\n    name: \"Comersia\"\r\n  }\r\n  const navLinks = [\r\n    { text: \"Inicio\", to: \"/\" },\r\n    { text: \"Productos\", to: \"/products\" },\r\n    { text: \"Categor√≠as\", to: \"/categories\" },\r\n    { text: \"Nosotros\", to: \"/about\" },\r\n    { text: \"Contacto\", to: \"/contact\" },\r\n  ]\r\n\r\n  const quickLinks = [\r\n    { text: \"Inicio\", to: \"/\" },\r\n    { text: \"Productos\", to: \"/products\" },\r\n    { text: \"Categor√≠as\", to: \"/categories\" },\r\n    { text: \"Nosotros\", to: \"/about\" }\r\n  ]\r\n\r\n  const customerLinks = [\r\n    { text: \"Cont√°ctanos\", to: \"/contact\" },\r\n    { text: \"Preguntas Frecuentes\", to: \"/faq\" },\r\n    { text: \"Pol√≠tica de Env√≠o\", to: \"/shipping\" },\r\n    { text: \"Devoluciones y Reembolsos\", to: \"/returns\" }\r\n  ]\r\n\r\n  return (\r\n    <div className=\"flex flex-col min-h-screen\">\r\n      {/* Header */}\r\n      <Header logo={logo} navLinks={navLinks}/>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"flex-grow\">\r\n        <Outlet />\r\n      </main>\r\n\r\n      {/* Footer */}\r\n      <Footer quickLinks={quickLinks} customerLinks={customerLinks}/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MainLayout;"],"names":["productService","ProductService","SearchAutocomplete","memo","placeholder","className","onNavigate","searchTerm","setSearchTerm","useState","suggestions","setSuggestions","showDropdown","setShowDropdown","loading","setLoading","selectedIndex","setSelectedIndex","inputRef","useRef","dropdownRef","debounceRef","navigate","useNavigate","getProductImageUrl","useCallback","imageData","adaptProductToSuggestion","product","imageUrl","searchProducts","term","filterParams","response","adaptedSuggestions","error","debouncedSearch","handleInputChange","e","value","handleSubmit","navigateToResults","handleSuggestionClick","suggestion","clearSearch","handleKeyDown","prev","useEffect","handleClickOutside","event","highlightMatch","text","regex","part","index","jsx","jsxs","X","Search","getImageUrl","target","formatCurrency","Header","logo","navLinks","mobileMenuOpen","setMobileMenuOpen","userMenuOpen","setUserMenuOpen","sellerMenuOpen","setSellerMenuOpen","userMenuRef","sellerMenuRef","theme","useTheme","user","isAuthenticated","logout","useAuth","logoSrc","useMemo","counters","countersError","useHeaderCounters","shippingConfig","shippingLoading","useShippingConfig","freeThreshold","shippingEnabled","cartItemCount","favoriteCount","notificationCount","toggleMobileMenu","toggleUserMenu","handleLogout","Link","to","children","onClick","props","getUserInitial","notificationCountSanitized","ThemeToggle","Menu","Heart","ShoppingCart","Bell","Fragment","User","ShoppingBag","LogOut","link","Footer","quickLinks","customerLinks","Send","MapPin","Phone","Mail","Facebook","Instagram","Twitter","MainLayout","Outlet"],"mappings":"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"}
{"version":3,"file":"OrderDetailPage-DdoIAvmH.js","sources":["../../src/presentation/pages/seller/OrderDetailPage.tsx"],"sourcesContent":["// src/presentation/pages/seller/OrderDetailPage.tsx - versión actualizada\r\nimport React, {useState, useEffect} from \"react\";\r\nimport {useParams, useNavigate, Link} from \"react-router-dom\";\r\nimport {ArrowLeft, Truck, Package, Check, X, FileText} from \"lucide-react\";\r\nimport {formatCurrency} from \"../../../utils/formatters/formatCurrency\";\r\nimport {formatDate} from \"../../../utils/formatters/formatDate\";\r\n// Importar el adaptador específico para vendedores\r\nimport SellerOrderServiceAdapter from \"../../../core/adapters/SellerOrderServiceAdapter\";\r\n// Importar el adaptador y modal de envío\r\nimport ShippingServiceAdapter from \"../../../core/adapters/ShippingServiceAdapter\";\r\nimport ShippingFormModal from \"../../components/shipping/ShippingFormModal\";\r\nimport type {ShippingFormData} from \"../../components/shipping/ShippingFormModal\";\r\nimport {\r\n\tcanTransitionTo,\r\n\tisValidOrderStatus,\r\n\ttype OrderDetail,\r\n\ttype OrderStatus,\r\n} from \"../../../core/domain/entities/Order\";\r\n\r\nconst OrderDetailPage: React.FC = () => {\r\n\tconst {id} = useParams<{id: string}>();\r\n\tconst navigate = useNavigate();\r\n\tconst [order, setOrder] = useState<OrderDetail | null>(null);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\tconst [isUpdating, setIsUpdating] = useState(false);\r\n\tconst [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n\t// Estado para controlar la visibilidad del modal de envío\r\n\tconst [isShippingModalOpen, setIsShippingModalOpen] = useState(false);\r\n\r\n\t// Utilizar los adaptadores\r\n\tconst sellerOrderAdapter = new SellerOrderServiceAdapter();\r\n\tconst shippingAdapter = new ShippingServiceAdapter();\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchOrderDetails();\r\n\t}, [id]);\r\n\r\n\tconst fetchOrderDetails = async () => {\r\n\t\tif (!id) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\t// Utilizar el método getOrderDetails del adaptador de vendedores\r\n\t\t\tconst orderDetail = await sellerOrderAdapter.getOrderDetails(id);\r\n\t\t\tsetOrder(orderDetail);\r\n\t\t\tsetError(null);\r\n\t\t} catch (err) {\r\n\t\t\tsetError(\"No se pudo cargar el detalle de la orden\");\r\n\t\t\tconsole.error(\"Error al cargar detalles de orden:\", err);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleStatusChange = async (newStatus: OrderStatus) => {\r\n\t\tif (!id || !order) return;\r\n\r\n\t\t// ✅ VALIDACIÓN DE TRANSICIÓN AGREGADA\r\n\t\tif (!canTransitionTo(order.status, newStatus)) {\r\n\t\t\tsetError(`No se puede cambiar de \"${order.status}\" a \"${newStatus}\"`);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Si el nuevo estado es \"shipped\", abrir el modal de envío en lugar de procesar directamente\r\n\t\tif (newStatus === \"shipped\") {\r\n\t\t\tsetIsShippingModalOpen(true);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsUpdating(true);\r\n\t\tsetSuccessMessage(null);\r\n\t\tsetError(null);\r\n\r\n\t\ttry {\r\n\t\t\t// ✅ VERIFICACIÓN DE TIPO ANTES DE LLAMAR AL ADAPTADOR\r\n\t\t\tif (!isValidOrderStatus(newStatus)) {\r\n\t\t\t\tthrow new Error(`Estado inválido: ${newStatus}`);\r\n\t\t\t}\r\n\r\n\t\t\t// Usar el método updateOrderStatus del adaptador de vendedores\r\n\t\t\tconst success = await sellerOrderAdapter.updateOrderStatus(id, newStatus);\r\n\r\n\t\t\tif (success) {\r\n\t\t\t\t// Actualizar el estado de la orden localmente\r\n\t\t\t\tsetOrder((prev) => (prev ? {...prev, status: newStatus} : null));\r\n\t\t\t\tsetSuccessMessage(\r\n\t\t\t\t\t`El estado del pedido ha sido actualizado a ${getStatusText(newStatus)}`\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Si se completa o cancela, esperar 2 segundos y recargar para mostrar datos actualizados\r\n\t\t\t\tif (newStatus === \"completed\" || newStatus === \"cancelled\") {\r\n\t\t\t\t\tsetTimeout(() => fetchOrderDetails(), 2000);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"No se pudo actualizar el estado\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tsetError(\"Error al actualizar el estado del pedido\");\r\n\t\t\tconsole.error(\"Error al actualizar estado:\", err);\r\n\t\t} finally {\r\n\t\t\tsetIsUpdating(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Nueva función para procesar el envío con datos adicionales\r\n\tconst handleShippingSubmit = async (shippingData: ShippingFormData) => {\r\n\t\tif (!id || !order) return;\r\n\r\n\t\tsetIsUpdating(true);\r\n\t\tsetSuccessMessage(null);\r\n\t\tsetError(null);\r\n\r\n\t\ttry {\r\n\t\t\t// Usar el adaptador de envío para marcar como enviado y actualizar la información\r\n\t\t\tconst success = await shippingAdapter.markAsShipped(id, shippingData);\r\n\r\n\t\t\tif (success) {\r\n\t\t\t\t// Cerrar el modal\r\n\t\t\t\tsetIsShippingModalOpen(false);\r\n\r\n\t\t\t\t// Actualizar el estado de la orden localmente\r\n\t\t\t\tsetOrder((prev) => {\r\n\t\t\t\t\tif (!prev) return null;\r\n\r\n\t\t\t\t\t// Asegurarse de mantener los campos obligatorios de shippingData\r\n\t\t\t\t\tconst updatedShippingData = {\r\n\t\t\t\t\t\t// Conservar valores obligatorios existentes\r\n\t\t\t\t\t\taddress: prev.shippingData?.address || \"\",\r\n\t\t\t\t\t\tcity: prev.shippingData?.city || \"\",\r\n\t\t\t\t\t\tstate: prev.shippingData?.state || \"\",\r\n\t\t\t\t\t\tcountry: prev.shippingData?.country || \"\",\r\n\t\t\t\t\t\tpostalCode: prev.shippingData?.postalCode || \"\",\r\n\t\t\t\t\t\t// Agregar nuevos valores del formulario\r\n\t\t\t\t\t\ttracking_number: shippingData.tracking_number,\r\n\t\t\t\t\t\tshipping_company: shippingData.shipping_company,\r\n\t\t\t\t\t\testimated_delivery: shippingData.estimated_delivery,\r\n\t\t\t\t\t\tnotes: shippingData.notes,\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tstatus: \"shipped\",\r\n\t\t\t\t\t\tshippingData: updatedShippingData,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsetSuccessMessage(\r\n\t\t\t\t\t`El pedido ha sido marcado como enviado y se ha registrado la información de envío`\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Recargar los detalles después de un breve delay\r\n\t\t\t\tsetTimeout(() => fetchOrderDetails(), 2000);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"No se pudo procesar el envío\");\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tsetError(\"Error al procesar el envío. Por favor, inténtelo de nuevo.\");\r\n\t\t\tconsole.error(\"Error al procesar envío:\", err);\r\n\t\t} finally {\r\n\t\t\tsetIsUpdating(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getStatusClass = (status: string) => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"bg-yellow-100 text-yellow-800\";\r\n\t\t\tcase \"processing\":\r\n\t\t\t\treturn \"bg-blue-100 text-blue-800\";\r\n\t\t\tcase \"paid\":\r\n\t\t\t\treturn \"bg-cyan-100 text-cyan-800\";\r\n\t\t\tcase \"shipped\":\r\n\t\t\t\treturn \"bg-indigo-100 text-indigo-800\";\r\n\t\t\tcase \"delivered\":\r\n\t\t\t\treturn \"bg-purple-100 text-purple-800\";\r\n\t\t\tcase \"completed\":\r\n\t\t\t\treturn \"bg-green-100 text-green-800\";\r\n\t\t\tcase \"cancelled\":\r\n\t\t\t\treturn \"bg-red-100 text-red-800\";\r\n\t\t\tcase \"rejected\": // ✅ CASO AGREGADO\r\n\t\t\t\treturn \"bg-red-200 text-red-900\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"bg-gray-100 text-gray-800\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst getStatusText = (status: string) => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"Pendiente\";\r\n\t\t\tcase \"processing\":\r\n\t\t\t\treturn \"En proceso\";\r\n\t\t\tcase \"paid\":\r\n\t\t\t\treturn \"Pagado\";\r\n\t\t\tcase \"shipped\":\r\n\t\t\t\treturn \"Enviado\";\r\n\t\t\tcase \"delivered\":\r\n\t\t\t\treturn \"Entregado\";\r\n\t\t\tcase \"completed\":\r\n\t\t\t\treturn \"Completado\";\r\n\t\t\tcase \"cancelled\":\r\n\t\t\t\treturn \"Cancelado\";\r\n\t\t\tcase \"rejected\": // ✅ CASO AGREGADO\r\n\t\t\t\treturn \"Rechazado\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"Desconocido\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst getPaymentStatusClass = (status: string | null | undefined) => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"bg-yellow-100 text-yellow-800\";\r\n\t\t\tcase \"completed\":\r\n\t\t\tcase \"paid\":\r\n\t\t\t\treturn \"bg-green-100 text-green-800\";\r\n\t\t\tcase \"failed\":\r\n\t\t\tcase \"rejected\":\r\n\t\t\t\treturn \"bg-red-100 text-red-800\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"bg-gray-100 text-gray-800\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst getPaymentStatusText = (status: string | null | undefined) => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"Pendiente\";\r\n\t\t\tcase \"completed\":\r\n\t\t\tcase \"paid\":\r\n\t\t\t\treturn \"Completado\";\r\n\t\t\tcase \"failed\":\r\n\t\t\tcase \"rejected\":\r\n\t\t\t\treturn \"Fallido\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"Desconocido\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst canUpdateToStatus = (\r\n\t\tcurrentStatus: string,\r\n\t\tnewStatus: string\r\n\t): boolean => {\r\n\t\t// ✅ USAR LA FUNCIÓN HELPER IMPORTADA\r\n\t\tif (!isValidOrderStatus(currentStatus) || !isValidOrderStatus(newStatus)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn canTransitionTo(\r\n\t\t\tcurrentStatus as OrderStatus,\r\n\t\t\tnewStatus as OrderStatus\r\n\t\t);\r\n\t};\r\n\r\n\t// Función para calcular subtotal\r\n\tconst calculateSubtotal = () => {\r\n\t\tif (!order || !order.items || order.items.length === 0) return 0;\r\n\t\treturn order.items.reduce(\r\n\t\t\t(sum, item) => sum + item.price * item.quantity,\r\n\t\t\t0\r\n\t\t);\r\n\t};\r\n\r\n\t// Función para calcular IVA (15%)\r\n\tconst calculateTax = () => {\r\n\t\treturn calculateSubtotal() * 0.15;\r\n\t};\r\n\r\n\t// Función para calcular total con IVA\r\n\tconst calculateTotal = () => {\r\n\t\treturn calculateSubtotal() + calculateTax();\r\n\t};\r\n\r\n\tif (loading) {\r\n\t\treturn (\r\n\t\t\t<div className=\"flex flex-col items-center justify-center min-h-screen p-4\">\r\n\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500\"></div>\r\n\t\t\t\t<p className=\"mt-4 text-gray-700\">\r\n\t\t\t\t\tCargando detalles del pedido...\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error || !order) {\r\n\t\treturn (\r\n\t\t\t<div className=\"bg-white rounded-lg shadow p-6 max-w-4xl mx-auto my-8\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<div className=\"text-red-500 text-5xl mb-4\">\r\n\t\t\t\t\t\t<X className=\"h-16 w-16 mx-auto\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n\t\t\t\t\t\tError al cargar el pedido\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p className=\"text-gray-600 mb-6\">\r\n\t\t\t\t\t\t{error || \"No se pudo encontrar el pedido solicitado\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => navigate(-1)}\r\n\t\t\t\t\t\tclassName=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tVolver\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t{/* Modal de envío */}\r\n\t\t\t<ShippingFormModal\r\n\t\t\t\torderId={id || \"\"}\r\n\t\t\t\tisOpen={isShippingModalOpen}\r\n\t\t\t\tonClose={() => setIsShippingModalOpen(false)}\r\n\t\t\t\tonSubmit={handleShippingSubmit}\r\n\t\t\t\tisLoading={isUpdating}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Encabezado y acciones */}\r\n\t\t\t<div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => navigate(-1)}\r\n\t\t\t\t\t\tclassName=\"flex items-center text-gray-600 hover:text-primary-600 mb-2\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ArrowLeft size={16} className=\"mr-1\" />\r\n\t\t\t\t\t\t<span>Volver a pedidos</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\t\tPedido #{order.orderNumber}\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"flex flex-wrap gap-2\">\r\n\t\t\t\t\t{/* Botones de acción según el estado actual */}\r\n\t\t\t\t\t{canUpdateToStatus(order.status, \"processing\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleStatusChange(\"processing\")}\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\tclassName=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 disabled:opacity-50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Package size={18} />\r\n\t\t\t\t\t\t\t<span>Preparar pedido</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{canUpdateToStatus(order.status, \"shipped\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleStatusChange(\"shipped\")}\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\tclassName=\"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Truck size={18} />\r\n\t\t\t\t\t\t\t<span>Marcar como enviado</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{canUpdateToStatus(order.status, \"delivered\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleStatusChange(\"delivered\")}\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\tclassName=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2 disabled:opacity-50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Check size={18} />\r\n\t\t\t\t\t\t\t<span>Marcar como entregado</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{canUpdateToStatus(order.status, \"completed\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleStatusChange(\"completed\")}\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\tclassName=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2 disabled:opacity-50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Check size={18} />\r\n\t\t\t\t\t\t\t<span>Completar pedido</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{canUpdateToStatus(order.status, \"cancelled\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => handleStatusChange(\"cancelled\")}\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\tclassName=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2 disabled:opacity-50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<X size={18} />\r\n\t\t\t\t\t\t\t<span>Cancelar pedido</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Generar factura */}\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tto={`/seller/invoices/generate/${order.id}`}\r\n\t\t\t\t\t\tclassName=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FileText size={18} />\r\n\t\t\t\t\t\t<span>Generar factura</span>\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Mensajes de éxito/error */}\r\n\t\t\t{successMessage && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"block sm:inline\">{successMessage}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{error && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"block sm:inline\">{error}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{isUpdating && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-blue-100 border border-blue-400 text-blue-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t<div className=\"animate-spin mr-2 h-4 w-4 border-t-2 border-blue-500\"></div>\r\n\t\t\t\t\t\t<span className=\"block sm:inline\">\r\n\t\t\t\t\t\t\tActualizando estado del pedido...\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Contenido principal */}\r\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n\t\t\t\t{/* Información general y estado */}\r\n\t\t\t\t<div className=\"col-span-3 md:col-span-1 space-y-6\">\r\n\t\t\t\t\t{/* Tarjeta de estado */}\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\tEstado del pedido\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tEstado:\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName={`px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusClass(order.status)}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{getStatusText(order.status)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Pago:</span>\r\n\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\tclassName={`px-2.5 py-0.5 rounded-full text-xs font-medium ${getPaymentStatusClass(order.paymentStatus)}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{getPaymentStatusText(order.paymentStatus)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tMétodo de pago:\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"credit_card\" &&\r\n\t\t\t\t\t\t\t\t\t\t\"Tarjeta de crédito\"}\r\n\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"paypal\" && \"PayPal\"}\r\n\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"transfer\" && \"Transferencia\"}\r\n\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"other\" && \"Otro\"}\r\n\t\t\t\t\t\t\t\t\t{!order.paymentMethod && \"No especificado\"}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Fecha:</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{order.createdAt ? formatDate(order.createdAt) : \"Sin fecha\"}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Información del cliente */}\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t<div className=\"flex justify-between items-center mb-4\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\tCliente\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tNombre:\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-1 text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{order.user_name || \"No disponible\"}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tEmail:\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-1 text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{order.user_email || \"No disponible\"}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tDirección de envío:\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t<div className=\"mt-1 text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{order.shippingData ? (\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>{order.shippingData.address}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.city}, {order.shippingData.state}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.country},{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.postalCode}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t{(order.shippingData.phone ||\r\n\t\t\t\t\t\t\t\t\t\t\t\torder.shippingData.phone) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>Tel: {order.shippingData.phone}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t<p>No disponible</p>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Productos y resumen */}\r\n\t\t\t\t<div className=\"col-span-3 md:col-span-2 space-y-6\">\r\n\t\t\t\t\t{/* Productos */}\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 p-6 pb-3\">\r\n\t\t\t\t\t\t\tProductos\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\r\n\t\t\t\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tProducto\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tSKU\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tPrecio\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCantidad\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tSubtotal\r\n\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t\t{order.items.map((item) => (\r\n\t\t\t\t\t\t\t\t\t\t<tr key={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{(item.product?.image || item.product_image) && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 mr-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 rounded-md object-cover\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item.product?.image || item.product_image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product?.name ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product_name ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Producto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.product?.name ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem.product_name ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Producto\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Link al producto si es necesario */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.product?.slug && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/products/${item.product.slug}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-primary-600 hover:underline\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tVer producto\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.product?.sku || item.product_sku || \"N/A\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(item.price)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{item.quantity}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(item.price * item.quantity)}\r\n\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Resumen de precios */}\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\tResumen\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pb-2\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tSubtotal:\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{formatCurrency(calculateSubtotal())}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t{/* Añadir impuestos u otros cargos si es necesario */}\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pb-2\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\tIVA (15%):\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{formatCurrency(calculateTax())}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pt-3 border-t border-gray-200 font-medium\">\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">Total:</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-lg text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t{formatCurrency(calculateTotal())}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Notas y seguimiento */}\r\n\t\t\t\t\t{order.shippingData?.tracking_number && (\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\t\tInformación de envío\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\tNúmero de seguimiento:\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-primary-600 font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingData.tracking_number}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{order.shippingData.shipping_company && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\tTransportista:\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.shipping_company}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{order.shippingData.estimated_delivery && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\tEntrega estimada:\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t{formatDate(order.shippingData.estimated_delivery)}\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t<div className=\"mt-3\">\r\n\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\tto={`/seller/shipping/${order.id}`}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg hover:bg-indigo-200 inline-flex items-center mt-2\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Truck size={16} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t<span>Gestionar envío</span>\r\n\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Mostrar notas si existen */}\r\n\t\t\t\t\t{order.shippingData?.notes && (\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\t\tNotas\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<p className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t{order.shippingData.notes}\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OrderDetailPage;\r\n"],"names":["OrderDetailPage","id","useParams","navigate","useNavigate","order","setOrder","useState","loading","setLoading","error","setError","isUpdating","setIsUpdating","successMessage","setSuccessMessage","isShippingModalOpen","setIsShippingModalOpen","sellerOrderAdapter","SellerOrderServiceAdapter","shippingAdapter","ShippingServiceAdapter","useEffect","fetchOrderDetails","orderDetail","err","handleStatusChange","newStatus","canTransitionTo","isValidOrderStatus","prev","getStatusText","handleShippingSubmit","shippingData","updatedShippingData","getStatusClass","status","getPaymentStatusClass","getPaymentStatusText","canUpdateToStatus","currentStatus","calculateSubtotal","sum","item","calculateTax","calculateTotal","jsxs","jsx","X","ShippingFormModal","ArrowLeft","Package","Truck","Check","Link","FileText","formatDate","formatCurrency"],"mappings":"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"}
{"version":3,"file":"ProductCardCompact-aPFBDh3y.js","sources":["../../src/presentation/components/product/ProductCardCompact.tsx"],"sourcesContent":["import React, {useState, memo} from \"react\";\r\nimport {Heart, ShoppingCart, Check} from \"lucide-react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport RatingStars from \"../common/RatingStars\";\r\nimport {useCart} from \"../../hooks/useCart\";\r\nimport {useFavorites} from \"../../hooks/useFavorites\";\r\nimport {useInvalidateCounters} from \"../../hooks/useHeaderCounters\";\r\nimport {NotificationType} from \"../../contexts/CartContext\";\r\nimport CacheService from \"../../../infrastructure/services/CacheService\";\r\n\r\ninterface ProductCardProps {\r\n\tid: number;\r\n\tname: string;\r\n\tprice: number | string; // âœ… Aceptar tanto nÃºmero como string\r\n\tdiscount?: number | string; // âœ… Aceptar tanto nÃºmero como string\r\n\trating?: number | string | null;\r\n\treviews?: number | string | null;\r\n\timage: string;\r\n\tcategory?: string;\r\n\tisNew?: boolean;\r\n\tcolor?: boolean;\r\n\tstock?: number | string;\r\n\tslug?: string;\r\n\t// Props opcionales para funciones externas - pueden ser async\r\n\tonAddToCart?: (id: number) => void | Promise<void>;\r\n\tonAddToWishlist?: (id: number) => void | Promise<void>;\r\n}\r\n\r\nconst ProductCardCompact: React.FC<ProductCardProps> = memo(({\r\n\tid,\r\n\tname,\r\n\tprice,\r\n\tdiscount,\r\n\trating = null,\r\n\treviews = null,\r\n\timage,\r\n\tcategory,\r\n\tisNew = false,\r\n\tcolor = true,\r\n\tstock = 10,\r\n\t// Funciones externas opcionales\r\n\tonAddToCart,\r\n\tonAddToWishlist,\r\n}) => {\r\n\t// âœ… FUNCIONES HELPER PARA CONVERSIÃ“N SEGURA DE TIPOS\r\n\tconst safeNumber = (value: number | string | null | undefined, defaultValue: number = 0): number => {\r\n\t\tif (typeof value === 'number') return value;\r\n\t\tif (typeof value === 'string') {\r\n\t\t\tconst parsed = parseFloat(value);\r\n\t\t\treturn isNaN(parsed) ? defaultValue : parsed;\r\n\t\t}\r\n\t\treturn defaultValue;\r\n\t};\r\n\r\n\tconst safeInteger = (value: number | string | null | undefined, defaultValue: number = 0): number => {\r\n\t\tif (typeof value === 'number') return Math.floor(value);\r\n\t\tif (typeof value === 'string') {\r\n\t\t\tconst parsed = parseInt(value, 10);\r\n\t\t\treturn isNaN(parsed) ? defaultValue : parsed;\r\n\t\t}\r\n\t\treturn defaultValue;\r\n\t};\r\n\r\n\t// Convertir props a nÃºmeros seguros\r\n\tconst safePrice = safeNumber(price);\r\n\tconst safeDiscount = safeNumber(discount);\r\n\tconst safeStock = safeInteger(stock, 10);\r\n\tconst safeRating = safeNumber(rating);\r\n\tconst safeReviews = safeInteger(reviews);\r\n\r\n\t// Estados para controlar las animaciones y feedback visual\r\n\tconst [isAddingToCart, setIsAddingToCart] = useState(false);\r\n\tconst [isAddingToWishlist, setIsAddingToWishlist] = useState(false);\r\n\tconst [isFavorite, setIsFavorite] = useState(false);\r\n\tconst [isInCart, setIsInCart] = useState(false); // âœ… NUEVO: estado para carrito\r\n\r\n\t// Hooks para carrito y favoritos\r\n\tconst {addToCart, showNotification} = useCart();\r\n\tconst {toggleFavorite, checkIsFavorite} = useFavorites();\r\n\t\r\n\t// âœ… Hook para actualizaciones optimistas\r\n\tconst {\r\n\t\toptimisticCartAdd,\r\n\t\toptimisticFavoriteAdd,\r\n\t\toptimisticFavoriteRemove\r\n\t} = useInvalidateCounters();\r\n\r\n\t// âœ… FUNCIÃ“N PARA INVALIDAR CACHE DE PÃGINAS ESPECÃFICAS\r\n\tconst invalidateRelatedPages = () => {\r\n\t\tCacheService.removeItem(\"cart_user_data\");\r\n\t\tCacheService.removeItem(\"cart_guest_data\");\r\n\t\tCacheService.removeItem(\"header_counters\");\r\n\t\t\r\n\t\t// Invalidar cache de favoritos\r\n\t\tfor (let page = 1; page <= 10; page++) {\r\n\t\t\tCacheService.removeItem(`user_favorites_${page}_10`);\r\n\t\t}\r\n\t\t\r\n\t\tconsole.log(\"ðŸ”„ Cache invalidado desde ProductCardCompact\");\r\n\t};\r\n\r\n\t// âœ… INICIALIZAR ESTADOS AL MONTAR + MEJORAR INDICADORES VISUALES\r\n\tReact.useEffect(() => {\r\n\t\tconst isFav = checkIsFavorite(id);\r\n\t\tsetIsFavorite(isFav);\r\n\t\t\r\n\t\t// Verificar si el producto ya estÃ¡ en carrito y mostrar indicador visual\r\n\t\t// Esta es una mejora opcional que no requiere demasiada capacidad\r\n\t\tconst checkIfInCart = () => {\r\n\t\t\t// Verificar localStorage o estado global del carrito\r\n\t\t\ttry {\r\n\t\t\t\tconst cartData = localStorage.getItem('cart_items') || localStorage.getItem('cart_data');\r\n\t\t\t\tif (cartData) {\r\n\t\t\t\t\tconst cart = JSON.parse(cartData);\r\n\t\t\t\t\tconst isInCart = cart.items?.some((item: any) => \r\n\t\t\t\t\t\titem.product_id === id || item.productId === id || item.id === id\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (isInCart) {\r\n\t\t\t\t\t\tsetIsInCart(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// No hacer nada si hay error, es mejora opcional\r\n\t\t\t\tconsole.log('ðŸ“ VerificaciÃ³n opcional de carrito:', error);\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\tcheckIfInCart();\r\n\t}, [id, checkIsFavorite]);\r\n\r\n\t// Calculate discounted price using safe values\r\n\tconst discountedPrice = safeDiscount ? safePrice - safePrice * (safeDiscount / 100) : safePrice;\r\n\r\n\t// Verificar si hay stock usando valor seguro\r\n\tconst hasStock = safeStock > 0;\r\n\r\n\t// âœ… FUNCIÃ“N PRINCIPAL PARA CARRITO - Reutilizada en todos los botones\r\n\tconst executeAddToCart = async () => {\r\n\t\tconsole.log(\"ðŸš€ ProductCardCompact.executeAddToCart INICIADO\", {\r\n\t\t\tproductId: id,\r\n\t\t\thasExternalFunction: !!onAddToCart,\r\n\t\t\tisAddingToCart,\r\n\t\t\thasStock\r\n\t\t});\r\n\r\n\t\tif (isAddingToCart || !hasStock) {\r\n\t\t\tif (!hasStock) {\r\n\t\t\t\tshowNotification(\r\n\t\t\t\t\tNotificationType.ERROR,\r\n\t\t\t\t\t\"Lo sentimos, este producto estÃ¡ agotado\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tconsole.log(\"âŒ AcciÃ³n bloqueada - isAddingToCart:\", isAddingToCart, \"hasStock:\", hasStock);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsAddingToCart(true);\r\n\r\n\t\ttry {\r\n\t\t\tif (onAddToCart) {\r\n\t\t\t\t// âœ… HAY FUNCIÃ“N EXTERNA - NO optimizar aquÃ­, dejar que ella lo haga\r\n\t\t\t\tconsole.log(\"ðŸ”„ Ejecutando SOLO funciÃ³n externa (NO optimizaciÃ³n aquÃ­)\");\r\n\t\t\t\tconst result = onAddToCart(id);\r\n\t\t\t\tif (result && typeof result.then === 'function') {\r\n\t\t\t\t\tconsole.log(\"â³ Esperando funciÃ³n externa async...\");\r\n\t\t\t\t\tawait result;\r\n\t\t\t\t\tconsole.log(\"âœ… FunciÃ³n externa completada\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"âœ… FunciÃ³n externa sync completada\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// âœ… NO HAY FUNCIÃ“N EXTERNA - optimizar + API\r\n\t\t\t\tconsole.log(\"ðŸ”„ NO hay funciÃ³n externa - aplicando optimizaciÃ³n + API\");\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"ðŸ“ˆ Aplicando optimisticCartAdd...\");\r\n\t\t\t\toptimisticCartAdd();\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"ðŸ“ž Llamando addToCart API...\");\r\n\t\t\t\tconst success = await addToCart({\r\n\t\t\t\t\tproductId: id,\r\n\t\t\t\t\tquantity: 1,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (!success) {\r\n\t\t\t\t\tconsole.log(\"âŒ API fallÃ³\");\r\n\t\t\t\t\tthrow new Error(\"No se pudo agregar el producto al carrito\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"âœ… API exitosa\");\r\n\t\t\t\tshowNotification(\r\n\t\t\t\t\tNotificationType.SUCCESS,\r\n\t\t\t\t\t`${name} ha sido agregado al carrito`\r\n\t\t\t\t);\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"ðŸ”„ Invalidando cache...\");\r\n\t\t\t\tinvalidateRelatedPages();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// âœ… FEEDBACK VISUAL - Marcar como agregado al carrito\r\n\t\t\tsetIsInCart(true);\r\n\t\t\t\r\n\t\t\t// âœ… RESETEAR FEEDBACK VISUAL DESPUÃ‰S DE 3 SEGUNDOS\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetIsInCart(false);\r\n\t\t\t}, 3000);\r\n\t\t\t\r\n\t\t\tconsole.log(\"ðŸŽ‰ ProductCardCompact.executeAddToCart COMPLETADO\");\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"âŒ Error en ProductCardCompact.executeAddToCart:\", error);\r\n\t\t\tshowNotification(\r\n\t\t\t\tNotificationType.ERROR,\r\n\t\t\t\t\"Error al agregar producto al carrito. IntÃ©ntalo de nuevo.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tconsole.log(\"ðŸ”š Limpiando estado isAddingToCart...\");\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetIsAddingToCart(false);\r\n\t\t\t\tconsole.log(\"âœ… Estado limpio\");\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t};\r\n\r\n\t// âœ… FUNCIÃ“N PRINCIPAL PARA FAVORITOS - Reutilizada en todos los botones\r\n\tconst executeAddToWishlist = async () => {\r\n\t\tconst isCurrentlyFavorite = checkIsFavorite(id);\r\n\t\t\r\n\t\tconsole.log(\"ðŸ’– ProductCardCompact.executeAddToWishlist INICIADO\", {\r\n\t\t\tproductId: id,\r\n\t\t\tisCurrentlyFavorite,\r\n\t\t\thasExternalFunction: !!onAddToWishlist,\r\n\t\t\tisAddingToWishlist\r\n\t\t});\r\n\r\n\t\tif (isAddingToWishlist) {\r\n\t\t\tconsole.log(\"âŒ Click ignorado - ya se estÃ¡ procesando\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetIsAddingToWishlist(true);\r\n\r\n\t\ttry {\r\n\t\t\tif (onAddToWishlist) {\r\n\t\t\t\t// âœ… HAY FUNCIÃ“N EXTERNA - NO optimizar aquÃ­, dejar que ella lo haga\r\n\t\t\t\tconsole.log(\"ðŸ”„ Ejecutando SOLO funciÃ³n externa (NO optimizaciÃ³n aquÃ­)\");\r\n\t\t\t\tconst result = onAddToWishlist(id);\r\n\t\t\t\tif (result && typeof result.then === 'function') {\r\n\t\t\t\t\tconsole.log(\"â³ Esperando funciÃ³n externa async...\");\r\n\t\t\t\t\tawait result;\r\n\t\t\t\t\tconsole.log(\"âœ… FunciÃ³n externa completada\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconsole.log(\"âœ… FunciÃ³n externa sync completada\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetIsFavorite(!isFavorite);\r\n\t\t\t} else {\r\n\t\t\t\t// âœ… NO HAY FUNCIÃ“N EXTERNA - optimizar + API\r\n\t\t\t\tconsole.log(\"ðŸ”„ NO hay funciÃ³n externa - aplicando optimizaciÃ³n + API\");\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(`ðŸ“ˆ Aplicando optimistic${isCurrentlyFavorite ? 'Remove' : 'Add'}...`);\r\n\t\t\t\tif (isCurrentlyFavorite) {\r\n\t\t\t\t\toptimisticFavoriteRemove();\r\n\t\t\t\t} else {\r\n\t\t\t\t\toptimisticFavoriteAdd();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"ðŸ“ž Llamando toggleFavorite API...\");\r\n\t\t\t\tconst result = await toggleFavorite(id);\r\n\t\t\t\t\r\n\t\t\t\tif (result === undefined) {\r\n\t\t\t\t\tconsole.log(\"âŒ API fallÃ³\");\r\n\t\t\t\t\tthrow new Error(\"No se pudo gestionar el favorito\");\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"âœ… API exitosa, resultado:\", result);\r\n\t\t\t\tsetIsFavorite(result);\r\n\r\n\t\t\t\tif (result) {\r\n\t\t\t\t\tshowNotification(\r\n\t\t\t\t\t\tNotificationType.SUCCESS,\r\n\t\t\t\t\t\t\"Producto aÃ±adido a favoritos\"\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshowNotification(\r\n\t\t\t\t\t\tNotificationType.INFO,\r\n\t\t\t\t\t\t\"Producto eliminado de favoritos\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"ðŸ”„ Invalidando cache...\");\r\n\t\t\t\tinvalidateRelatedPages();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconsole.log(\"ðŸŽ‰ ProductCardCompact.executeAddToWishlist COMPLETADO\");\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"âŒ Error en ProductCardCompact.executeAddToWishlist:\", error);\r\n\t\t\tshowNotification(\r\n\t\t\t\tNotificationType.ERROR,\r\n\t\t\t\t\"Error al gestionar favoritos. IntÃ©ntalo de nuevo.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tconsole.log(\"ðŸ”š Limpiando estado isAddingToWishlist...\");\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetIsAddingToWishlist(false);\r\n\t\t\t\tconsole.log(\"âœ… Estado limpio\");\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t};\r\n\r\n\t// âœ… HANDLERS SIMPLIFICADOS - Solo llaman a las funciones principales\r\n\tconst handleAddToCart = async (e: React.MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tawait executeAddToCart();\r\n\t};\r\n\r\n\tconst handleAddToWishlist = async (e: React.MouseEvent) => {\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\tawait executeAddToWishlist();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-300 overflow-hidden group product-card\">\r\n\t\t\t{/* Product Image with Overlay */}\r\n\t\t\t<div className=\"relative h-48 overflow-hidden\">\r\n\t\t\t\t<Link to={`/products/${id}`}>\r\n\t\t\t\t\t<img\r\n\t\t\t\t\t\tsrc={image}\r\n\t\t\t\t\t\talt={name}\r\n\t\t\t\t\t\tclassName=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{/* Discount Tag - Solo si hay descuento vÃ¡lido */}\r\n\t\t\t\t{(safeDiscount > 0) && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`absolute top-2 left-2 ${color ? \"bg-red-500\" : \"bg-primary-600\"} text-white text-xs font-bold py-1 px-2 rounded-md badge`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t-{safeDiscount}%\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{/* New Product Tag */}\r\n\t\t\t\t{isNew && (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName={`absolute top-2 right-2 ${color ? \"bg-green-500\" : \"bg-primary-800\"} text-white text-xs font-bold py-1 px-2 rounded-md badge`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNuevo\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{/* âœ… BOTONES HOVER MEJORADOS - Exactamente la misma lÃ³gica */}\r\n\t\t\t\t<div className=\"absolute inset-0 bg-black bg-opacity-30 opacity-0 group-hover:opacity-100 hover:opacity-100 transition-opacity duration-300 items-center justify-center gap-3 hidden sm:flex\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleAddToWishlist}\r\n\t\t\t\t\t\tdisabled={isAddingToWishlist}\r\n\t\t\t\t\t\tclassName=\"cursor-pointer bg-white p-3 rounded-full hover:bg-primary-50 hover:text-primary-600 transition-all duration-200 disabled:opacity-50 shadow-lg hover:shadow-xl transform hover:scale-105\"\r\n\t\t\t\t\t\taria-label=\"AÃ±adir a favoritos\"\r\n\t\t\t\t\t\ttitle=\"AÃ±adir a favoritos\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isAddingToWishlist ? (\r\n\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-5 w-5 border-2 border-red-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t) : isFavorite ? (\r\n\t\t\t\t\t\t\t<Heart size={20} className=\"text-red-500 fill-current\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Heart size={20} className=\"text-gray-600\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleAddToCart}\r\n\t\t\t\t\t\tdisabled={isAddingToCart || !hasStock}\r\n\t\t\t\t\t\tclassName={`cursor-pointer bg-white p-3 rounded-full hover:bg-primary-50 hover:text-primary-600 transition-all duration-200 disabled:opacity-50 shadow-lg hover:shadow-xl transform hover:scale-105 ${!hasStock ? \"cursor-not-allowed\" : \"\"}`}\r\n\t\t\t\t\t\taria-label=\"AÃ±adir al carrito\"\r\n\t\t\t\t\t\ttitle={hasStock ? \"AÃ±adir al carrito\" : \"Sin stock\"}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isAddingToCart ? (\r\n\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-5 w-5 border-2 border-green-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t) : isInCart ? (\r\n\t\t\t\t\t\t\t<Check size={20} className=\"text-green-500\" />\r\n\t\t\t\t\t\t) : !hasStock ? (\r\n\t\t\t\t\t\t\t<ShoppingCart size={20} className=\"text-gray-400\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ShoppingCart size={20} className=\"text-gray-600\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* âœ… BOTONES MÃ“VILES/TABLET - Exactamente la misma lÃ³gica */}\r\n\t\t\t\t<div className=\"absolute bottom-2 right-2 flex gap-2 sm:hidden\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleAddToWishlist}\r\n\t\t\t\t\t\tdisabled={isAddingToWishlist}\r\n\t\t\t\t\t\tclassName=\"bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all duration-200 disabled:opacity-50 shadow-md\"\r\n\t\t\t\t\t\taria-label=\"AÃ±adir a favoritos\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isAddingToWishlist ? (\r\n\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-2 border-red-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t) : isFavorite ? (\r\n\t\t\t\t\t\t\t<Heart size={16} className=\"text-red-500 fill-current\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Heart size={16} className=\"text-gray-600\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={handleAddToCart}\r\n\t\t\t\t\t\tdisabled={isAddingToCart || !hasStock}\r\n\t\t\t\t\t\tclassName={`bg-white/90 backdrop-blur-sm p-2 rounded-full hover:bg-white transition-all duration-200 disabled:opacity-50 shadow-md ${!hasStock ? \"cursor-not-allowed\" : \"\"}`}\r\n\t\t\t\t\t\taria-label=\"AÃ±adir al carrito\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isAddingToCart ? (\r\n\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-2 border-green-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t) : isInCart ? (\r\n\t\t\t\t\t\t\t<Check size={16} className=\"text-green-500\" />\r\n\t\t\t\t\t\t) : !hasStock ? (\r\n\t\t\t\t\t\t\t<ShoppingCart size={16} className=\"text-gray-400\" />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<ShoppingCart size={16} className=\"text-gray-600\" />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Product Info */}\r\n\t\t\t<div className=\"p-3\">\r\n\t\t\t\t{/* Category */}\r\n\t\t\t\t{category && (\r\n\t\t\t\t\t<span className=\"text-xs text-gray-500 uppercase mb-1 block\">\r\n\t\t\t\t\t\t{category}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{/* Product Name */}\r\n\t\t\t\t<Link to={`/products/${id}`}>\r\n\t\t\t\t\t<h3 className=\"font-medium text-gray-800 mb-1 line-clamp-1 hover:text-primary-600 transition-colors\">\r\n\t\t\t\t\t\t{name}\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t{/* Rating - âœ… CORREGIDO: Mostrar solo si hay rating vÃ¡lido */}\r\n\t\t\t\t{(safeRating > 0) && (\r\n\t\t\t\t\t<div className=\"mb-2\">\r\n\t\t\t\t\t\t<RatingStars\r\n\t\t\t\t\t\t\trating={safeRating}\r\n\t\t\t\t\t\t\tsize={14}\r\n\t\t\t\t\t\t\tshowValue={true}\r\n\t\t\t\t\t\t\treviews={safeReviews}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{/* Price */}\r\n\t\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t\t<div className=\"flex items-center flex-wrap\">\r\n\t\t\t\t\t\t{(safeDiscount > 0) ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<span className=\"font-bold text-primary-600 text-lg\">\r\n\t\t\t\t\t\t\t\t\t${discountedPrice.toFixed(2)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span className=\"text-sm text-gray-500 line-through ml-2\">\r\n\t\t\t\t\t\t\t\t\t${safePrice.toFixed(2)}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span className=\"font-bold text-primary-600 product-price text-lg\">\r\n\t\t\t\t\t\t\t\t${safePrice.toFixed(2)}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* âœ… BOTÃ“N SECUNDARIO MEJORADO - Exactamente la misma lÃ³gica */}\r\n\t\t\t\t\t<div className=\"hidden xs:flex sm:hidden md:flex lg:hidden xl:flex gap-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={handleAddToWishlist}\r\n\t\t\t\t\t\t\tdisabled={isAddingToWishlist}\r\n\t\t\t\t\t\t\tclassName=\"text-gray-500 hover:text-red-500 transition-colors disabled:opacity-50 p-1 rounded-full hover:bg-gray-100\"\r\n\t\t\t\t\t\t\taria-label=\"AÃ±adir a favoritos\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isAddingToWishlist ? (\r\n\t\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-2 border-red-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t\t) : isFavorite ? (\r\n\t\t\t\t\t\t\t\t<Heart size={18} className=\"text-red-500 fill-current\" />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Heart size={18} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={handleAddToCart}\r\n\t\t\t\t\t\t\tdisabled={isAddingToCart || !hasStock}\r\n\t\t\t\t\t\t\tclassName={`text-gray-500 hover:text-primary-600 transition-colors disabled:opacity-50 p-1 rounded-full hover:bg-gray-100 ${!hasStock ? \"cursor-not-allowed\" : \"\"}`}\r\n\t\t\t\t\t\t\taria-label=\"AÃ±adir al carrito\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{isAddingToCart ? (\r\n\t\t\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-4 w-4 border-2 border-green-500 border-t-transparent\"></div>\r\n\t\t\t\t\t\t\t) : isInCart ? (\r\n\t\t\t\t\t\t\t\t<Check size={18} className=\"text-green-500\" />\r\n\t\t\t\t\t\t\t) : !hasStock ? (\r\n\t\t\t\t\t\t\t\t<ShoppingCart size={18} className=\"text-gray-400\" />\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<ShoppingCart size={18} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Stock Availability */}\r\n\t\t\t\t<div className=\"mt-2 flex items-center justify-between\">\r\n\t\t\t\t\t{!hasStock && (\r\n\t\t\t\t\t\t<p className=\"text-xs text-red-500 font-medium\">Agotado</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{hasStock && safeStock <= 5 && (\r\n\t\t\t\t\t\t<p className=\"text-xs text-amber-600 font-medium\">\r\n\t\t\t\t\t\t\tSolo quedan {safeStock}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ProductCardCompact;"],"names":["ProductCardCompact","memo","id","name","price","discount","rating","reviews","image","category","isNew","color","stock","onAddToCart","onAddToWishlist","safeNumber","value","defaultValue","parsed","safeInteger","safePrice","safeDiscount","safeStock","safeRating","safeReviews","isAddingToCart","setIsAddingToCart","useState","isAddingToWishlist","setIsAddingToWishlist","isFavorite","setIsFavorite","isInCart","setIsInCart","addToCart","showNotification","useCart","toggleFavorite","checkIsFavorite","useFavorites","optimisticCartAdd","optimisticFavoriteAdd","optimisticFavoriteRemove","useInvalidateCounters","invalidateRelatedPages","CacheService","page","React","isFav","cartData","item","error","discountedPrice","hasStock","executeAddToCart","NotificationType","result","executeAddToWishlist","isCurrentlyFavorite","handleAddToCart","e","handleAddToWishlist","jsxs","jsx","Link","Heart","Check","ShoppingCart","RatingStars","Fragment"],"mappings":"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"}
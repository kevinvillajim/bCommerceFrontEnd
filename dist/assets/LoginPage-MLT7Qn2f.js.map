{"version":3,"mappings":"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","names":["LoginPage","email","setEmail","useState","password","setPassword","rememberMe","setRememberMe","showPassword","setShowPassword","isProcessing","setIsProcessing","navigate","useNavigate","location","useLocation","login","loading","error","useAuth","from","handleSubmit","e","roleData","__vitePreload","__vite_default__","n","targetRoute","togglePasswordVisibility","handleGoogleLogin","handleFacebookLogin","jsxs","jsx","Link"],"ignoreList":[],"sources":["../../src/presentation/pages/LoginPage.tsx"],"sourcesContent":["// ===================================\r\n// LoginPage.tsx - SOLUCI√ìN SIMPLE Y DIRECTA\r\n// ===================================\r\n\r\nimport React, { useState } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport type { UserLoginData } from '../../core/domain/entities/User';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  // Usar el hook de autenticaci√≥n\r\n  const { login, loading, error } = useAuth();\r\n\r\n  // Obtener ruta de redirecci√≥n si existe\r\n  const from = (location.state as any)?.from?.pathname;\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (isProcessing) return; // Prevenir m√∫ltiples submits\r\n    \r\n    setIsProcessing(true);\r\n    \r\n    console.log('üîê Iniciando proceso de login con:', email);\r\n    \r\n    try {\r\n      // Preparar las credenciales\r\n      const credentials: UserLoginData = {\r\n        email,\r\n        password\r\n      };\r\n      \r\n      // Intentar iniciar sesi√≥n\r\n      const result = await login(credentials);\r\n      \r\n      // Si el inicio de sesi√≥n fue exitoso\r\n      if (result) {\r\n        console.log('‚úÖ Login exitoso, obteniendo informaci√≥n de rol...');\r\n        \r\n        // Usar el servicio directamente para obtener rol inmediatamente\r\n        const RoleService = (await import('../../infrastructure/services/RoleService')).default;\r\n        const roleData = await RoleService.checkUserRole(true);\r\n        \r\n        console.log('üéØ Informaci√≥n de rol obtenida:', roleData);\r\n        \r\n        if (roleData && roleData.success) {\r\n          let targetRoute = from || '/';\r\n          \r\n          // Determinar ruta basada en rol\r\n          if (roleData.data.is_admin) {\r\n            targetRoute = '/admin/dashboard';\r\n            console.log('üëë Usuario es admin, redirigiendo a:', targetRoute);\r\n          } else if (roleData.data.is_seller) {\r\n            targetRoute = '/seller/dashboard';\r\n            console.log('üè™ Usuario es seller, redirigiendo a:', targetRoute);\r\n          } else {\r\n            targetRoute = from || '/';\r\n            console.log('üë§ Usuario normal, redirigiendo a:', targetRoute);\r\n          }\r\n          \r\n          console.log('üöÄ Redirigiendo inmediatamente a:', targetRoute);\r\n          \r\n          // Redirigir inmediatamente sin setTimeout\r\n          navigate(targetRoute, { replace: true });\r\n        } else {\r\n          console.error('‚ùå No se pudo obtener informaci√≥n de rol');\r\n          // Si no podemos obtener el rol, ir al home por defecto\r\n          navigate(from || '/', { replace: true });\r\n        }\r\n      } else {\r\n        console.error('‚ùå Fallo en el login');\r\n      }\r\n    } catch (error) {\r\n      console.error('‚ùå Error durante el proceso de login:', error);\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n\r\n  const handleGoogleLogin = () => {\r\n    console.log('Iniciar sesi√≥n con Google');\r\n  };\r\n\r\n  const handleFacebookLogin = () => {\r\n    console.log('Iniciar sesi√≥n con Facebook');\r\n  };\r\n\r\n  // Mostrar loading durante el procesamiento\r\n  if (isProcessing) {\r\n    return (\r\n      <div className=\"min-h-[80vh] flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">Iniciando sesi√≥n...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-[80vh] flex items-center justify-center py-12 px-4\">\r\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-3xl font-extrabold text-gray-900\">\r\n            Inicia sesi√≥n en tu cuenta\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-gray-600\">\r\n            O{' '}\r\n            <Link to=\"/register\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n              crea una nueva cuenta\r\n            </Link>\r\n          </p>\r\n        </div>\r\n        \r\n        {error && (\r\n          <div className=\"bg-red-50 text-red-700 p-3 rounded-md text-sm\">\r\n            {error}\r\n          </div>\r\n        )}\r\n        \r\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">\r\n                Correo electr√≥nico\r\n              </label>\r\n              <input\r\n                id=\"email\"\r\n                name=\"email\"\r\n                type=\"email\"\r\n                autoComplete=\"email\"\r\n                required\r\n                className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\r\n                Contrase√±a\r\n              </label>\r\n              <div className=\"relative\">\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type={showPassword ? \"text\" : \"password\"}\r\n                  autoComplete=\"current-password\"\r\n                  required\r\n                  className=\"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={togglePasswordVisibility}\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-600\"\r\n                >\r\n                  {showPassword ? (\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                id=\"remember_me\"\r\n                name=\"remember_me\"\r\n                type=\"checkbox\"\r\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                checked={rememberMe}\r\n                onChange={(e) => setRememberMe(e.target.checked)}\r\n              />\r\n              <label htmlFor=\"remember_me\" className=\"ml-2 block text-sm text-gray-700\">\r\n                Recordarme\r\n              </label>\r\n            </div>\r\n            \r\n            <div className=\"text-sm\">\r\n              <Link to=\"/forgot-password\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n                ¬øOlvidaste tu contrase√±a?\r\n              </Link>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading || isProcessing}\r\n              className=\"group relative w-full flex justify-center py-3 px-4 border border-transparent rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {(loading || isProcessing) ? (\r\n                <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\r\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                  </svg>\r\n                </span>\r\n              ) : null}\r\n              Iniciar sesi√≥n\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        <div className=\"mt-6\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-0 flex items-center\">\r\n              <div className=\"w-full border-t border-gray-300\"></div>\r\n            </div>\r\n            <div className=\"relative flex justify-center text-sm\">\r\n              <span className=\"px-4 bg-white text-gray-500\">O continuar con</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"mt-6 grid grid-cols-2 gap-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleGoogleLogin}\r\n              className=\"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n            >\r\n              {/* Google Icon */}\r\n              <svg className=\"w-5 h-5 mr-2\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <g transform=\"matrix(1, 0, 0, 1, 27.009001, -39.238998)\">\r\n                  <path fill=\"#4285F4\" d=\"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z\"/>\r\n                  <path fill=\"#34A853\" d=\"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z\"/>\r\n                  <path fill=\"#FBBC05\" d=\"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z\"/>\r\n                  <path fill=\"#EA4335\" d=\"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z\"/>\r\n                </g>\r\n              </svg>\r\n              Google\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleFacebookLogin}\r\n              className=\"w-full inline-flex justify-center items-center py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50\"\r\n            >\r\n              {/* Facebook Icon */}\r\n              <svg className=\"w-5 h-5 mr-2\" fill=\"#1877F2\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M12,2C6.477,2,2,6.477,2,12c0,4.991,3.657,9.128,8.438,9.879V14.89h-2.54V12h2.54V9.797c0-2.506,1.492-3.89,3.777-3.89c1.094,0,2.238,0.195,2.238,0.195v2.46h-1.26c-1.243,0-1.63,0.771-1.63,1.562V12h2.773l-0.443,2.89h-2.33v6.989C18.343,21.129,22,16.99,22,12C22,6.477,17.523,2,12,2z\"/>\r\n              </svg>\r\n              Facebook\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"file":"assets/LoginPage-MLT7Qn2f.js"}
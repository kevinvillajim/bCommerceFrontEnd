{"version":3,"file":"SellerShippingPage-DmA6M_Pa.js","sources":["../../node_modules/lucide-react/dist/esm/icons/clipboard-list.js","../../src/presentation/pages/seller/SellerShippingPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.484.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"8\", height: \"4\", x: \"8\", y: \"2\", rx: \"1\", ry: \"1\", key: \"tgr4d6\" }],\n  [\n    \"path\",\n    {\n      d: \"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2\",\n      key: \"116196\"\n    }\n  ],\n  [\"path\", { d: \"M12 11h4\", key: \"1jrz19\" }],\n  [\"path\", { d: \"M12 16h4\", key: \"n85exb\" }],\n  [\"path\", { d: \"M8 11h.01\", key: \"1dfujw\" }],\n  [\"path\", { d: \"M8 16h.01\", key: \"18s6g9\" }]\n];\nconst ClipboardList = createLucideIcon(\"clipboard-list\", __iconNode);\n\nexport { __iconNode, ClipboardList as default };\n//# sourceMappingURL=clipboard-list.js.map\n","import React, {useState, useEffect} from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {\r\n\tTruck,\r\n\tSearch,\r\n\tFilter,\r\n\tRefreshCw,\r\n\tExternalLink,\r\n\tPackageCheck,\r\n\tPrinter,\r\n\tAlertTriangle,\r\n\tPackage,\r\n\tMapPin,\r\n\tClipboardList,\r\n\tBarChart2,\r\n} from \"lucide-react\";\r\nimport Table from \"../../components/dashboard/Table\";\r\nimport {formatCurrency} from \"../../../utils/formatters/formatCurrency\";\r\nimport {SellerStatCardList} from \"../../components/dashboard/SellerStatCardList\";\r\nimport ShippingServiceAdapter from \"../../../core/adapters/ShippingServiceAdapter\";\r\nimport type {ShippingItem} from \"../../../core/adapters/ShippingServiceAdapter\";\r\nimport ShippingFormModal from \"../../components/shipping/ShippingFormModal\";\r\nimport type {ShippingFormData} from \"../../components/shipping/ShippingFormModal\";\r\n\r\nconst SellerShippingPage: React.FC = () => {\r\n\t// Instanciar el adaptador de servicio\r\n\tconst shippingAdapter = new ShippingServiceAdapter();\r\n\r\n\t// Estados\r\n\tconst [shippingItems, setShippingItems] = useState<ShippingItem[]>([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\tconst [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\tconst [carrierFilter, setCarrierFilter] = useState<string>(\"all\");\r\n\tconst [dateFilter, setDateFilter] = useState<string>(\"all\");\r\n\tconst [searchTerm, setSearchTerm] = useState<string>(\"\");\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tcurrentPage: 1,\r\n\t\ttotalPages: 1,\r\n\t\ttotalItems: 0,\r\n\t\titemsPerPage: 10,\r\n\t});\r\n\tconst [dateRange, setDateRange] = useState({\r\n\t\tfrom: \"\",\r\n\t\tto: \"\",\r\n\t});\r\n\tconst [isUpdateSuccess, setIsUpdateSuccess] = useState<boolean | null>(null);\r\n\tconst [updateMessage, setUpdateMessage] = useState<string>(\"\");\r\n\tconst [isUpdating, setIsUpdating] = useState(false);\r\n\r\n\t// Estado para controlar el modal de asignación de tracking\r\n\tconst [isShippingModalOpen, setIsShippingModalOpen] = useState(false);\r\n\tconst [selectedOrderId, setSelectedOrderId] = useState<string | null>(null);\r\n\r\n\t// Cargar datos de envíos\r\n\tuseEffect(() => {\r\n\t\tfetchShippingItems();\r\n\t}, [\r\n\t\tstatusFilter,\r\n\t\tcarrierFilter,\r\n\t\tsearchTerm,\r\n\t\tpagination.currentPage,\r\n\t\tdateFilter,\r\n\t\tdateRange,\r\n\t]);\r\n\r\n\t// Función para obtener envíos usando el adaptador\r\n\tconst fetchShippingItems = async () => {\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\t// Preparar filtros para la API\r\n\t\t\tconst filters: any = {\r\n\t\t\t\tpage: pagination.currentPage,\r\n\t\t\t\tlimit: pagination.itemsPerPage,\r\n\t\t\t};\r\n\r\n\t\t\tif (statusFilter !== \"all\") {\r\n\t\t\t\tfilters.status = statusFilter;\r\n\t\t\t}\r\n\r\n\t\t\tif (carrierFilter !== \"all\") {\r\n\t\t\t\tfilters.carrier = carrierFilter;\r\n\t\t\t}\r\n\r\n\t\t\tif (searchTerm) {\r\n\t\t\t\tfilters.search = searchTerm;\r\n\t\t\t}\r\n\r\n\t\t\t// Añadir filtros de fecha según la selección\r\n\t\t\tif (dateFilter === \"today\") {\r\n\t\t\t\tconst today = new Date().toISOString().split(\"T\")[0];\r\n\t\t\t\tfilters.dateFrom = today;\r\n\t\t\t\tfilters.dateTo = today;\r\n\t\t\t} else if (dateFilter === \"week\") {\r\n\t\t\t\tconst today = new Date();\r\n\t\t\t\tconst firstDay = new Date(\r\n\t\t\t\t\ttoday.setDate(today.getDate() - today.getDay())\r\n\t\t\t\t);\r\n\t\t\t\tfilters.dateFrom = firstDay.toISOString().split(\"T\")[0];\r\n\t\t\t\tfilters.dateTo = new Date().toISOString().split(\"T\")[0];\r\n\t\t\t} else if (dateFilter === \"month\") {\r\n\t\t\t\tconst today = new Date();\r\n\t\t\t\tconst firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\r\n\t\t\t\tfilters.dateFrom = firstDay.toISOString().split(\"T\")[0];\r\n\t\t\t\tfilters.dateTo = new Date().toISOString().split(\"T\")[0];\r\n\t\t\t} else if (dateFilter === \"custom\" && dateRange.from && dateRange.to) {\r\n\t\t\t\tfilters.dateFrom = dateRange.from;\r\n\t\t\t\tfilters.dateTo = dateRange.to;\r\n\t\t\t}\r\n\r\n\t\t\t// Obtener envíos del adaptador\r\n\t\t\tconst result = await shippingAdapter.getShippingsList(filters);\r\n\r\n\t\t\tconsole.log(\"Datos de envío obtenidos:\", result);\r\n\r\n\t\t\t// Establecer envíos y datos de paginación\r\n\t\t\tsetShippingItems(result.items);\r\n\t\t\tsetPagination(result.pagination);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al cargar envíos:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\t\"No se pudieron cargar los datos de envíos. Intenta de nuevo más tarde.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Manejar asignación de número de seguimiento\r\n\tconst openShippingModal = (orderId: string) => {\r\n\t\tsetSelectedOrderId(orderId);\r\n\t\tsetIsShippingModalOpen(true);\r\n\t};\r\n\r\n\t// Procesar envío con datos del formulario\r\n\tconst handleShippingSubmit = async (shippingData: ShippingFormData) => {\r\n\t\tif (!selectedOrderId) return;\r\n\r\n\t\tsetIsUpdating(true);\r\n\t\tsetIsUpdateSuccess(null);\r\n\t\tsetUpdateMessage(\"\");\r\n\r\n\t\ttry {\r\n\t\t\tconst success = await shippingAdapter.markAsShipped(\r\n\t\t\t\tselectedOrderId,\r\n\t\t\t\tshippingData\r\n\t\t\t);\r\n\r\n\t\t\tif (success) {\r\n\t\t\t\tsetIsUpdateSuccess(true);\r\n\t\t\t\tsetUpdateMessage(\"Envío procesado correctamente\");\r\n\r\n\t\t\t\t// Actualizar el estado del envío en la lista local\r\n\t\t\t\tsetShippingItems((prevItems) =>\r\n\t\t\t\t\tprevItems.map((item) => {\r\n\t\t\t\t\t\tif (item.id === selectedOrderId) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tstatus: \"shipped\", // Ajustado según el nuevo estado\r\n\t\t\t\t\t\t\t\ttrackingNumber: shippingData.tracking_number,\r\n\t\t\t\t\t\t\t\tcarrier: shippingData.shipping_company,\r\n\t\t\t\t\t\t\t\testimatedDelivery: shippingData.estimated_delivery,\r\n\t\t\t\t\t\t\t\tlastUpdate: new Date().toISOString(),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Cerrar el modal\r\n\t\t\t\tsetIsShippingModalOpen(false);\r\n\r\n\t\t\t\t// Recargar los datos después de un breve retraso\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tfetchShippingItems();\r\n\t\t\t\t\tsetIsUpdateSuccess(null);\r\n\t\t\t\t}, 3000);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"No se pudo procesar el envío\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al procesar envío:\", error);\r\n\t\t\tsetIsUpdateSuccess(false);\r\n\t\t\tsetUpdateMessage(\"Error al procesar el envío. Intenta de nuevo.\");\r\n\t\t} finally {\r\n\t\t\tsetIsUpdating(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Función para actualizar estado de envío\r\n\tconst updateShippingStatus = async (\r\n\t\tshippingId: string,\r\n\t\tnewStatus: ShippingItem[\"status\"]\r\n\t) => {\r\n\t\tsetIsUpdating(true);\r\n\t\tsetIsUpdateSuccess(null);\r\n\t\tsetUpdateMessage(\"\");\r\n\r\n\t\ttry {\r\n\t\t\tconst success = await shippingAdapter.updateShippingStatus(\r\n\t\t\t\tshippingId,\r\n\t\t\t\tnewStatus\r\n\t\t\t);\r\n\r\n\t\t\tif (success) {\r\n\t\t\t\tsetIsUpdateSuccess(true);\r\n\t\t\t\tsetUpdateMessage(`Estado actualizado a ${getStatusText(newStatus)}`);\r\n\r\n\t\t\t\t// Actualizar el estado en la lista local\r\n\t\t\t\tsetShippingItems((prevItems) =>\r\n\t\t\t\t\tprevItems.map((item) => {\r\n\t\t\t\t\t\tif (item.id === shippingId) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tstatus: newStatus,\r\n\t\t\t\t\t\t\t\tlastUpdate: new Date().toISOString(),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Recargar los datos después de un breve retraso\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tfetchShippingItems();\r\n\t\t\t\t\tsetIsUpdateSuccess(null);\r\n\t\t\t\t}, 3000);\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"No se pudo actualizar el estado\");\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(`Error al actualizar estado a ${newStatus}:`, error);\r\n\t\t\tsetIsUpdateSuccess(false);\r\n\t\t\tsetUpdateMessage(\"Error al actualizar estado. Intenta de nuevo.\");\r\n\t\t} finally {\r\n\t\t\tsetIsUpdating(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Función para asignar número de seguimiento\r\n\tconst assignTrackingNumber = async (orderId: string) => {\r\n\t\t// Abrir el modal para capturar los datos de seguimiento\r\n\t\topenShippingModal(orderId);\r\n\t};\r\n\r\n\t// Manejar cambio de página\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tsetPagination((prev) => ({...prev, currentPage: page}));\r\n\t};\r\n\r\n\t// Refrescar datos\r\n\tconst refreshData = () => {\r\n\t\tsetLoading(true);\r\n\t\tfetchShippingItems();\r\n\t};\r\n\r\n\t// Obtener texto según el estado\r\n\tconst getStatusText = (status: ShippingItem[\"status\"]): string => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"Pendiente\";\r\n\t\t\tcase \"ready_to_ship\":\r\n\t\t\t\treturn \"Listo para enviar\";\r\n\t\t\tcase \"in_transit\":\r\n\t\t\tcase \"shipped\": // Añadido para manejar el nuevo estado\r\n\t\t\t\treturn \"En tránsito\";\r\n\t\t\tcase \"delivered\":\r\n\t\t\t\treturn \"Entregado\";\r\n\t\t\tcase \"failed\":\r\n\t\t\t\treturn \"Fallido\";\r\n\t\t\tcase \"returned\":\r\n\t\t\t\treturn \"Devuelto\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"Desconocido\";\r\n\t\t}\r\n\t};\r\n\r\n\t// Obtener clase CSS según el estado\r\n\tconst getStatusClass = (status: ShippingItem[\"status\"]): string => {\r\n\t\tswitch (status) {\r\n\t\t\tcase \"pending\":\r\n\t\t\t\treturn \"bg-yellow-100 text-yellow-800\";\r\n\t\t\tcase \"ready_to_ship\":\r\n\t\t\t\treturn \"bg-blue-100 text-blue-800\";\r\n\t\t\tcase \"in_transit\":\r\n\t\t\tcase \"shipped\": // Añadido para manejar el nuevo estado\r\n\t\t\t\treturn \"bg-indigo-100 text-indigo-800\";\r\n\t\t\tcase \"delivered\":\r\n\t\t\t\treturn \"bg-green-100 text-green-800\";\r\n\t\t\tcase \"failed\":\r\n\t\t\t\treturn \"bg-red-100 text-red-800\";\r\n\t\t\tcase \"returned\":\r\n\t\t\t\treturn \"bg-orange-100 text-orange-800\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"bg-gray-100 text-gray-800\";\r\n\t\t}\r\n\t};\r\n\r\n\t// Definir las columnas de la tabla\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tkey: \"orderNumber\",\r\n\t\t\theader: \"Nº Pedido\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<Link\r\n\t\t\t\t\tto={`/seller/orders/${item.orderId}`}\r\n\t\t\t\t\tclassName=\"font-medium text-primary-600 hover:underline\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{item.orderNumber}\r\n\t\t\t\t</Link>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"trackingNumber\",\r\n\t\t\theader: \"Nº Seguimiento\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{item.trackingNumber ? (\r\n\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t<span className=\"font-mono text-sm\">{item.trackingNumber}</span>\r\n\t\t\t\t\t\t\t{item.carrier && (\r\n\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"ml-2 text-blue-600 hover:text-blue-800\"\r\n\t\t\t\t\t\t\t\t\ttitle={`Rastrear con ${item.carrier}`}\r\n\t\t\t\t\t\t\t\t\tonClick={(e) => {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t// Aquí se podría abrir una ventana de rastreo del transportista\r\n\t\t\t\t\t\t\t\t\t\talert(\r\n\t\t\t\t\t\t\t\t\t\t\t`Redirigiendo al sitio de ${item.carrier} para rastrear ${item.trackingNumber}`\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<ExternalLink size={14} />\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span className=\"text-gray-500 text-sm\">\r\n\t\t\t\t\t\t\tNo asignado\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"date\",\r\n\t\t\theader: \"Fecha de Pedido\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => {\r\n\t\t\t\tconst date = new Date(item.date);\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span className=\"text-sm\">{date.toLocaleDateString(\"es-ES\")}</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"customer\",\r\n\t\t\theader: \"Cliente\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"font-medium text-sm\">{item.customer.name}</div>\r\n\t\t\t\t\t<div className=\"text-xs text-gray-500 truncate max-w-[150px]\">\r\n\t\t\t\t\t\t{item.shippingAddress}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"status\",\r\n\t\t\theader: \"Estado\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusClass(item.status)}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{getStatusText(item.status)}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"carrier\",\r\n\t\t\theader: \"Transportista\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<span>{item.carrier || \"No asignado\"}</span>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"estimatedDelivery\",\r\n\t\t\theader: \"Entrega Estimada\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<span>\r\n\t\t\t\t\t{item.estimatedDelivery\r\n\t\t\t\t\t\t? new Date(item.estimatedDelivery).toLocaleDateString(\"es-ES\")\r\n\t\t\t\t\t\t: \"No disponible\"}\r\n\t\t\t\t</span>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"actions\",\r\n\t\t\theader: \"Acciones\",\r\n\t\t\trender: (item: ShippingItem) => (\r\n\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t{/* Ver detalles del envío */}\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tto={`/seller/shipping/${item.id}`}\r\n\t\t\t\t\t\tclassName=\"p-1 text-blue-600 hover:bg-blue-100 rounded-md\"\r\n\t\t\t\t\t\ttitle=\"Ver detalles\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<ClipboardList size={18} />\r\n\t\t\t\t\t</Link>\r\n\r\n\t\t\t\t\t{/* Asignar número de seguimiento - solo para pendientes */}\r\n\t\t\t\t\t{(item.status === \"pending\" || item.status === \"ready_to_ship\") &&\r\n\t\t\t\t\t\t!item.trackingNumber && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => assignTrackingNumber(item.id)}\r\n\t\t\t\t\t\t\t\tclassName=\"p-1 text-green-600 hover:bg-green-100 rounded-md\"\r\n\t\t\t\t\t\t\t\ttitle=\"Asignar número de seguimiento\"\r\n\t\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Package size={18} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Marcar como enviado - solo para listos para enviar con tracking */}\r\n\t\t\t\t\t{(item.status === \"ready_to_ship\" || item.status === \"pending\") &&\r\n\t\t\t\t\t\titem.trackingNumber && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => updateShippingStatus(item.id, \"shipped\")}\r\n\t\t\t\t\t\t\t\tclassName=\"p-1 text-indigo-600 hover:bg-indigo-100 rounded-md\"\r\n\t\t\t\t\t\t\t\ttitle=\"Marcar como enviado\"\r\n\t\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Truck size={18} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Imprimir etiqueta - solo para pedidos con número de seguimiento */}\r\n\t\t\t\t\t{item.trackingNumber &&\r\n\t\t\t\t\t\t(item.status === \"shipped\" || item.status === \"in_transit\") && (\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\talert(`Imprimiendo etiqueta para ${item.trackingNumber}`)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tclassName=\"p-1 text-gray-600 hover:bg-gray-100 rounded-md\"\r\n\t\t\t\t\t\t\t\ttitle=\"Imprimir etiqueta\"\r\n\t\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Printer size={18} />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Marcar como entregado - solo para envíos en tránsito */}\r\n\t\t\t\t\t{(item.status === \"in_transit\" || item.status === \"shipped\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => updateShippingStatus(item.id, \"delivered\")}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-green-600 hover:bg-green-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Marcar como entregado\"\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<PackageCheck size={18} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Marcar como fallido - para envíos pendientes, listos o en tránsito */}\r\n\t\t\t\t\t{(item.status === \"ready_to_ship\" ||\r\n\t\t\t\t\t\titem.status === \"in_transit\" ||\r\n\t\t\t\t\t\titem.status === \"shipped\" ||\r\n\t\t\t\t\t\titem.status === \"pending\") && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => updateShippingStatus(item.id, \"failed\")}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-red-600 hover:bg-red-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Marcar como fallido\"\r\n\t\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<AlertTriangle size={18} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\t// Calcular estadísticas de envíos\r\n\tconst calculateShippingStats = () => {\r\n\t\tconst stats = {\r\n\t\t\tpending: shippingItems.filter((item) => item.status === \"pending\").length,\r\n\t\t\treadyToShip: shippingItems.filter(\r\n\t\t\t\t(item) => item.status === \"ready_to_ship\"\r\n\t\t\t).length,\r\n\t\t\tinTransit: shippingItems.filter(\r\n\t\t\t\t(item) => item.status === \"in_transit\" || item.status === \"shipped\"\r\n\t\t\t).length,\r\n\t\t\tdelivered: shippingItems.filter((item) => item.status === \"delivered\")\r\n\t\t\t\t.length,\r\n\t\t\tfailed: shippingItems.filter((item) => item.status === \"failed\").length,\r\n\t\t\treturned: shippingItems.filter((item) => item.status === \"returned\")\r\n\t\t\t\t.length,\r\n\t\t\t// Calcular costo de envío total (si está disponible)\r\n\t\t\ttotalShippingCost: shippingItems.reduce(\r\n\t\t\t\t(sum, item) => sum + (item.shippingCost || 0),\r\n\t\t\t\t0\r\n\t\t\t),\r\n\t\t};\r\n\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Pendientes\",\r\n\t\t\t\tvalue: stats.pending,\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<Package className=\"h-5 w-5 text-yellow-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"yellow\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Listos\",\r\n\t\t\t\tvalue: stats.readyToShip,\r\n\t\t\t\ticon: <Package className=\"h-5 w-5 text-blue-600\" />,\r\n\t\t\t\tcolor: \"blue\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"En Tránsito\",\r\n\t\t\t\tvalue: stats.inTransit,\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<Truck className=\"h-5 w-5 text-indigo-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"indigo\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Entregados\",\r\n\t\t\t\tvalue: stats.delivered,\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<PackageCheck className=\"h-5 w-5 text-green-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"green\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Fallidos\",\r\n\t\t\t\tvalue: stats.failed,\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<AlertTriangle className=\"h-5 w-5 text-red-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"red\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Devueltos\",\r\n\t\t\t\tvalue: stats.returned,\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<MapPin className=\"h-5 w-5 text-orange-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"orange\",\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tlabel: \"Coste Envíos\",\r\n\t\t\t\tvalue: formatCurrency(stats.totalShippingCost),\r\n\t\t\t\ticon: (\r\n\t\t\t\t\t<BarChart2 className=\"h-5 w-5 text-primary-600\" />\r\n\t\t\t\t),\r\n\t\t\t\tcolor: \"primary\",\r\n\t\t\t},\r\n\t\t];\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t{/* Modal para asignación de número de seguimiento */}\r\n\t\t\t<ShippingFormModal\r\n\t\t\t\torderId={selectedOrderId || \"\"}\r\n\t\t\t\tisOpen={isShippingModalOpen}\r\n\t\t\t\tonClose={() => setIsShippingModalOpen(false)}\r\n\t\t\t\tonSubmit={handleShippingSubmit}\r\n\t\t\t\tisLoading={isUpdating}\r\n\t\t\t/>\r\n\r\n\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\tGestión de Envíos\r\n\t\t\t\t</h1>\r\n\t\t\t\t<div className=\"flex space-x-2\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={refreshData}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t\tdisabled={isUpdating}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<RefreshCw size={18} className=\"inline mr-2\" />\r\n\t\t\t\t\t\tActualizar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Mensajes de éxito/error */}\r\n\t\t\t{isUpdateSuccess === true && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"block sm:inline\">{updateMessage}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{isUpdateSuccess === false && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"block sm:inline\">{updateMessage}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{error && (\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\"\r\n\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span className=\"block sm:inline\">{error}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Panel de filtros */}\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-4\">\r\n\t\t\t\t<div className=\"flex flex-col md:flex-row gap-4\">\r\n\t\t\t\t\t{/* Buscador */}\r\n\t\t\t\t\t<div className=\"relative flex-grow\">\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tplaceholder=\"Buscar por número de pedido, seguimiento, cliente...\"\r\n\t\t\t\t\t\t\tclassName=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t\tvalue={searchTerm}\r\n\t\t\t\t\t\t\tonChange={(e) => setSearchTerm(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Search className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\" />\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Estado */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Filter className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={statusFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setStatusFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los estados</option>\r\n\t\t\t\t\t\t\t<option value=\"pending\">Pendientes</option>\r\n\t\t\t\t\t\t\t<option value=\"ready_to_ship\">Listos para enviar</option>\r\n\t\t\t\t\t\t\t<option value=\"shipped\">En tránsito</option>\r\n\t\t\t\t\t\t\t<option value=\"delivered\">Entregados</option>\r\n\t\t\t\t\t\t\t<option value=\"failed\">Fallidos</option>\r\n\t\t\t\t\t\t\t<option value=\"returned\">Devueltos</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Transportista */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={carrierFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setCarrierFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los transportistas</option>\r\n\t\t\t\t\t\t\t<option value=\"Correos Express\">Correos Express</option>\r\n\t\t\t\t\t\t\t<option value=\"SEUR\">SEUR</option>\r\n\t\t\t\t\t\t\t<option value=\"MRW\">MRW</option>\r\n\t\t\t\t\t\t\t<option value=\"DHL\">DHL</option>\r\n\t\t\t\t\t\t\t<option value=\"FedEx\">FedEx</option>\r\n\t\t\t\t\t\t\t<option value=\"UPS\">UPS</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Fecha */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={dateFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setDateFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todas las fechas</option>\r\n\t\t\t\t\t\t\t<option value=\"today\">Hoy</option>\r\n\t\t\t\t\t\t\t<option value=\"week\">Esta semana</option>\r\n\t\t\t\t\t\t\t<option value=\"month\">Este mes</option>\r\n\t\t\t\t\t\t\t<option value=\"custom\">Personalizado</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t{dateFilter === \"custom\" && (\r\n\t\t\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\tvalue={dateRange.from}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetDateRange({...dateRange, from: e.target.value})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<span className=\"text-gray-500\">a</span>\r\n\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\tvalue={dateRange.to}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\tsetDateRange({...dateRange, to: e.target.value})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Botón para limpiar filtros */}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetStatusFilter(\"all\");\r\n\t\t\t\t\t\t\tsetCarrierFilter(\"all\");\r\n\t\t\t\t\t\t\tsetDateFilter(\"all\");\r\n\t\t\t\t\t\t\tsetSearchTerm(\"\");\r\n\t\t\t\t\t\t\tsetDateRange({from: \"\", to: \"\"});\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tclassName=\"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tLimpiar filtros\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Estadísticas resumidas */}\r\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-7 gap-4\">\r\n\t\t\t\t<SellerStatCardList items={calculateShippingStats()} />\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Tabla de Envíos */}\r\n\t\t\t<Table\r\n\t\t\t\tdata={shippingItems}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsearchFields={[\r\n\t\t\t\t\t\"orderNumber\",\r\n\t\t\t\t\t\"trackingNumber\",\r\n\t\t\t\t\t\"customer\",\r\n\t\t\t\t\t\"shippingAddress\",\r\n\t\t\t\t]}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\temptyMessage=\"No se encontraron envíos\"\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tcurrentPage: pagination.currentPage,\r\n\t\t\t\t\ttotalPages: pagination.totalPages,\r\n\t\t\t\t\ttotalItems: pagination.totalItems,\r\n\t\t\t\t\titemsPerPage: pagination.itemsPerPage,\r\n\t\t\t\t\tonPageChange: handlePageChange,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SellerShippingPage;\r\n"],"names":["__iconNode","ClipboardList","createLucideIcon","SellerShippingPage","shippingAdapter","ShippingServiceAdapter","shippingItems","setShippingItems","useState","loading","setLoading","error","setError","statusFilter","setStatusFilter","carrierFilter","setCarrierFilter","dateFilter","setDateFilter","searchTerm","setSearchTerm","pagination","setPagination","dateRange","setDateRange","isUpdateSuccess","setIsUpdateSuccess","updateMessage","setUpdateMessage","isUpdating","setIsUpdating","isShippingModalOpen","setIsShippingModalOpen","selectedOrderId","setSelectedOrderId","useEffect","fetchShippingItems","filters","today","firstDay","result","openShippingModal","orderId","handleShippingSubmit","shippingData","prevItems","item","updateShippingStatus","shippingId","newStatus","getStatusText","assignTrackingNumber","handlePageChange","page","prev","refreshData","status","getStatusClass","columns","jsx","Link","jsxs","e","ExternalLink","date","Package","Truck","Printer","PackageCheck","AlertTriangle","calculateShippingStats","stats","sum","MapPin","formatCurrency","BarChart2","ShippingFormModal","RefreshCw","Search","Filter","SellerStatCardList","Table"],"mappings":"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","x_google_ignoreList":[0]}
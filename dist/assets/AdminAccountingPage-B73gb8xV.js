import{r as i,j as e,X as L}from"./index-DmNDOrWy.js";import{T as V}from"./Table-BdEePeKQ.js";import{D as ce}from"./DashboardCardList-DWHZauSR.js";import{D as F}from"./dollar-sign-BrNRCHtI.js";import{C as le}from"./chart-no-axes-column-C4ngQd1-.js";import{F as me}from"./funnel-CAFb7hhq.js";import{P as xe}from"./plus--kIPDPVf.js";import{S as z}from"./save-Dhxxo4vd.js";import{A as O}from"./archive-kwnQLKWh.js";import{E as B}from"./eye-CldZNoIz.js";import"./chevron-left-Dl3DF2OO.js";import"./search-CbEKe7UQ.js";import"./arrow-up-DQySjn32.js";const k=({isOpen:l,onClose:x,title:y,children:f,size:j="md"})=>{if(!l)return null;const T={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:x}),e.jsx("div",{className:`inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ${T[j]} w-full`,children:e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title",children:y}),e.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",onClick:x,children:[e.jsx("span",{className:"sr-only",children:"Cerrar"}),e.jsx(L,{className:"h-6 w-6"})]})]}),e.jsx("div",{className:"mt-2",children:f})]})})]})})},Te=()=>{const[l,x]=i.useState("transactions"),[y,f]=i.useState(!0),[j,T]=i.useState([]),[N,q]=i.useState([]),[X,v]=i.useState(!1),[H,w]=i.useState(!1),[U,I]=i.useState(!1),[_,D]=i.useState(!1),[a,J]=i.useState(null),[o,K]=i.useState(null),[n,u]=i.useState({referenceNumber:"",transactionDate:new Date().toISOString().split("T")[0],description:"",type:"Venta",entries:[{accountId:0,debitAmount:0,creditAmount:0,notes:""},{accountId:0,debitAmount:0,creditAmount:0,notes:""}]}),[m,E]=i.useState({code:"",name:"",type:"Activo",description:"",isActive:!0}),P=new Date;P.setMonth(P.getMonth()-1);const Q=new Date,[p,G]=i.useState({from:P.toISOString().split("T")[0],to:Q.toISOString().split("T")[0]}),[S,$]=i.useState(1),[M,W]=i.useState(1),[R,Y]=i.useState("all");i.useEffect(()=>{f(!0),setTimeout(()=>{const t=[{id:1,referenceNumber:"TRANS-001",transactionDate:"2025-04-01",description:"Venta de productos",type:"Venta",orderId:1001,isPosted:!0,entries:[{id:1,transactionId:1,accountId:1001,debitAmount:0,creditAmount:1500,notes:"Venta de productos"},{id:2,transactionId:1,accountId:5001,debitAmount:1500,creditAmount:0,notes:"Efectivo recibido"}],balance:0,isBalanced:!0},{id:2,referenceNumber:"TRANS-002",transactionDate:"2025-04-02",description:"Pago a proveedor",type:"Compra",isPosted:!0,entries:[{id:3,transactionId:2,accountId:2001,debitAmount:750,creditAmount:0,notes:"Compra de inventario"},{id:4,transactionId:2,accountId:5001,debitAmount:0,creditAmount:750,notes:"Pago efectuado"}],balance:0,isBalanced:!0},{id:3,referenceNumber:"TRANS-003",transactionDate:"2025-04-03",description:"Pago de impuestos",type:"Gasto",isPosted:!0,entries:[{id:5,transactionId:3,accountId:3001,debitAmount:350,creditAmount:0,notes:"Impuestos mensuales"},{id:6,transactionId:3,accountId:5001,debitAmount:0,creditAmount:350,notes:"Pago de impuestos"}],balance:0,isBalanced:!0},{id:4,referenceNumber:"TRANS-004",transactionDate:"2025-04-04",description:"Devolución de producto",type:"Devolución",orderId:1002,isPosted:!1,entries:[{id:7,transactionId:4,accountId:1001,debitAmount:200,creditAmount:0,notes:"Devolución de venta"},{id:8,transactionId:4,accountId:5001,debitAmount:0,creditAmount:200,notes:"Reembolso efectuado"}],balance:0,isBalanced:!0},{id:5,referenceNumber:"TRANS-005",transactionDate:"2025-04-05",description:"Pago de comisiones",type:"Gasto",isPosted:!0,entries:[{id:9,transactionId:5,accountId:3002,debitAmount:300,creditAmount:0,notes:"Comisiones a vendedores"},{id:10,transactionId:5,accountId:5001,debitAmount:0,creditAmount:300,notes:"Pago de comisiones"}],balance:0,isBalanced:!0}],s=[{id:1001,code:"4000",name:"Ventas",type:"Ingreso",description:"Ingresos por ventas de productos",isActive:!0,balance:15e3},{id:2001,code:"5000",name:"Costo de Ventas",type:"Costo",description:"Costos asociados a ventas",isActive:!0,balance:7500},{id:3001,code:"6000",name:"Gastos Impuestos",type:"Gasto",description:"Pagos de impuestos",isActive:!0,balance:1250},{id:3002,code:"6100",name:"Comisiones",type:"Gasto",description:"Comisiones a vendedores",isActive:!0,balance:950},{id:5001,code:"1000",name:"Efectivo",type:"Activo",description:"Cuenta de efectivo",isActive:!0,balance:25e3},{id:5002,code:"1100",name:"Cuentas por Cobrar",type:"Activo",description:"Cuentas pendientes de cobro",isActive:!0,balance:3500},{id:5003,code:"2000",name:"Cuentas por Pagar",type:"Pasivo",description:"Cuentas pendientes de pago",isActive:!0,balance:2300}];T(t),q(s),W(3),f(!1)},1e3)},[S,R,p]);const Z=t=>{J(t),I(!0)},ee=t=>{K(t),D(!0)},C=t=>{const{name:s,value:r}=t.target;u({...n,[s]:r})},A=(t,s,r)=>{const d=[...n.entries];d[t]={...d[t],[s]:s==="accountId"?Number(r):parseFloat(r)||0},u({...n,entries:d})},te=()=>{u({...n,entries:[...n.entries,{accountId:0,debitAmount:0,creditAmount:0,notes:""}]})},se=t=>{if(n.entries.length<=2){alert("Una transacción debe tener al menos dos entradas");return}const s=n.entries.filter((r,d)=>d!==t);u({...n,entries:s})},h=t=>{const{name:s,value:r,type:d}=t.target,de=d==="checkbox"?t.target.checked:r;E({...m,[s]:de})},re=()=>{console.log("Guardando transacción:",n);const t=n.entries.reduce((r,d)=>r+d.debitAmount,0),s=n.entries.reduce((r,d)=>r+d.creditAmount,0);if(t!==s){alert(`Los totales de débito (${t}) y crédito (${s}) deben ser iguales`);return}v(!1),u({referenceNumber:"",transactionDate:new Date().toISOString().split("T")[0],description:"",type:"Venta",entries:[{accountId:0,debitAmount:0,creditAmount:0,notes:""},{accountId:0,debitAmount:0,creditAmount:0,notes:""}]})},ae=()=>{console.log("Guardando cuenta:",m),w(!1),E({code:"",name:"",type:"Activo",description:"",isActive:!0})},ne=[{key:"referenceNumber",header:"Referencia",render:t=>e.jsx("span",{className:"font-medium text-primary-600",children:t.referenceNumber}),sortable:!0},{key:"transactionDate",header:"Fecha",render:t=>e.jsx("span",{children:new Date(t.transactionDate).toLocaleDateString("es-ES")}),sortable:!0},{key:"description",header:"Descripción",sortable:!0},{key:"type",header:"Tipo",render:t=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
          ${t.type==="Venta"?"bg-green-100 text-green-800":t.type==="Compra"?"bg-blue-100 text-blue-800":t.type==="Gasto"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.type}),sortable:!0},{key:"isPosted",header:"Estado",render:t=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
          ${t.isPosted?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.isPosted?"Contabilizado":"Pendiente"}),sortable:!0},{key:"actions",header:"Acciones",render:t=>e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Z(t),className:"text-primary-600 hover:text-primary-900",title:"Ver detalles",children:e.jsx(B,{size:16})}),!t.isPosted&&e.jsx("button",{className:"text-green-600 hover:text-green-900",title:"Contabilizar",children:e.jsx(O,{size:16})})]})}],oe=[{key:"code",header:"Código",render:t=>e.jsx("span",{className:"font-medium text-primary-600",children:t.code}),sortable:!0},{key:"name",header:"Nombre",sortable:!0},{key:"type",header:"Tipo",render:t=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
          ${t.type==="Activo"?"bg-blue-100 text-blue-800":t.type==="Pasivo"?"bg-yellow-100 text-yellow-800":t.type==="Ingreso"?"bg-green-100 text-green-800":t.type==="Gasto"?"bg-red-100 text-red-800":t.type==="Costo"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:t.type}),sortable:!0},{key:"balance",header:"Saldo",render:t=>{const s=t.balance??0;return e.jsx("span",{className:`font-medium ${s>=0?"text-green-600":"text-red-600"}`,children:c(s)})},sortable:!0},{key:"isActive",header:"Estado",render:t=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
          ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"Activa":"Inactiva"}),sortable:!0},{key:"actions",header:"Acciones",render:t=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>ee(t),className:"text-primary-600 hover:text-primary-900",title:"Ver detalles",children:e.jsx(B,{size:16})})})}],c=t=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t),b={income:15e3,expenses:2200,balance:12800,netProfit:7500,netProfitPercentage:50},g=(()=>{const t=n.entries.reduce((r,d)=>r+d.debitAmount,0),s=n.entries.reduce((r,d)=>r+d.creditAmount,0);return{totalDebit:t,totalCredit:s,difference:t-s}})(),ie=[{title:"Ingresos Totales",value:c(b.income),change:0,icon:F,iconBgColor:"bg-green-50",iconColor:"text-green-600"},{title:"Gastos Totales",value:c(b.expenses),change:0,icon:F,iconBgColor:"bg-red-50",iconColor:"text-red-600"},{title:"Balance",value:c(b.balance),change:0,icon:le,iconBgColor:"bg-blue-50",iconColor:"text-blue-600"},{title:"Beneficio Neto",value:c(b.netProfit),change:b.netProfitPercentage,icon:F,iconBgColor:"bg-purple-50",iconColor:"text-purple-600"}];return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Gestión Contable"}),e.jsx("div",{className:"mb-5",children:e.jsx(ce,{cards:ie})}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsx("button",{onClick:()=>x("transactions"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="transactions"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Transacciones"}),e.jsx("button",{onClick:()=>x("accounts"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="accounts"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Plan Contable"}),e.jsx("button",{onClick:()=>x("reports"),className:`py-4 px-1 border-b-2 font-medium text-sm ${l==="reports"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Reportes"})]})})}),l==="transactions"&&e.jsx("div",{className:"mb-6 p-4 bg-white rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(me,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-700",children:"Filtrar:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha desde"}),e.jsx("input",{type:"date",id:"dateFrom",value:p.from,onChange:t=>G({...p,from:t.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha hasta"}),e.jsx("input",{type:"date",id:"dateTo",value:p.to,onChange:t=>G({...p,to:t.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),e.jsxs("select",{id:"type",value:R,onChange:t=>Y(t.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"venta",children:"Venta"}),e.jsx("option",{value:"compra",children:"Compra"}),e.jsx("option",{value:"gasto",children:"Gasto"}),e.jsx("option",{value:"devolucion",children:"Devolución"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),e.jsxs("select",{id:"status",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm",children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"posted",children:"Contabilizados"}),e.jsx("option",{value:"pending",children:"Pendientes"})]})]})]}),e.jsx("div",{className:"ml-auto",children:e.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700",children:"Nueva Transacción"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[l==="transactions"&&e.jsx(V,{data:j,columns:ne,loading:y,searchFields:["referenceNumber","description","type"],emptyMessage:"No hay transacciones disponibles para los filtros aplicados",pagination:{currentPage:S,totalPages:M,totalItems:j.length,itemsPerPage:10,onPageChange:$}}),l==="accounts"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Plan de Cuentas"}),e.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700",children:"Nueva Cuenta"})]}),e.jsx(V,{data:N,columns:oe,loading:y,searchFields:["code","name","type"],emptyMessage:"No hay cuentas disponibles",pagination:{currentPage:S,totalPages:M,totalItems:N.length,itemsPerPage:10,onPageChange:$}})]}),l==="reports"&&e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informes Financieros"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Balance General"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Resumen de activos, pasivos y patrimonio de la empresa."}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700 w-full",children:"Ver Balance General"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Resultados"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Informe detallado de ingresos, gastos y beneficios."}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700 w-full",children:"Ver Estado de Resultados"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Libro Mayor"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Registro detallado de movimientos por cuenta."}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700 w-full",children:"Ver Libro Mayor"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generar Informes Personalizados"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Informe"}),e.jsxs("select",{id:"reportType",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm",children:[e.jsx("option",{value:"balance",children:"Balance General"}),e.jsx("option",{value:"income",children:"Estado de Resultados"}),e.jsx("option",{value:"ledger",children:"Libro Mayor"}),e.jsx("option",{value:"tax",children:"Informe de Impuestos"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportDateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha desde"}),e.jsx("input",{type:"date",id:"reportDateFrom",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportDateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha hasta"}),e.jsx("input",{type:"date",id:"reportDateTo",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reportFormat",className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato"}),e.jsxs("select",{id:"reportFormat",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm",children:[e.jsx("option",{value:"pdf",children:"PDF"}),e.jsx("option",{value:"excel",children:"Excel"}),e.jsx("option",{value:"csv",children:"CSV"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",className:"px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700",children:"Generar Informe"})})]})]})]})]}),e.jsx(k,{isOpen:X,onClose:()=>v(!1),title:"Nueva Transacción Contable",size:"lg",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"referenceNumber",className:"block text-sm font-medium text-gray-700",children:"Número de Referencia"}),e.jsx("input",{type:"text",id:"referenceNumber",name:"referenceNumber",value:n.referenceNumber,onChange:C,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"TRANS-XXX",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"transactionDate",className:"block text-sm font-medium text-gray-700",children:"Fecha de Transacción"}),e.jsx("input",{type:"date",id:"transactionDate",name:"transactionDate",value:n.transactionDate,onChange:C,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-gray-700",children:"Tipo de Transacción"}),e.jsxs("select",{id:"type",name:"type",value:n.type,onChange:C,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[e.jsx("option",{value:"Venta",children:"Venta"}),e.jsx("option",{value:"Compra",children:"Compra"}),e.jsx("option",{value:"Gasto",children:"Gasto"}),e.jsx("option",{value:"Devolución",children:"Devolución"}),e.jsx("option",{value:"Ajuste",children:"Ajuste"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("input",{type:"text",id:"description",name:"description",value:n.description,onChange:C,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Descripción de la transacción",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Entradas Contables"}),e.jsxs("button",{type:"button",onClick:te,className:"text-primary-600 hover:text-primary-700 flex items-center text-sm font-medium",children:[e.jsx(xe,{size:16,className:"mr-1"})," ","Añadir entrada"]})]}),e.jsx("div",{className:"overflow-x-auto border border-gray-300 rounded-md shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cuenta"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debe"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Haber"}),e.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notas"}),e.jsx("th",{className:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acción"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.entries.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsxs("select",{value:t.accountId,onChange:r=>A(s,"accountId",r.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[e.jsx("option",{value:"",children:"Seleccionar cuenta"}),N.map(r=>e.jsxs("option",{value:r.id,children:[r.code," - ",r.name]},r.id))]})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"number",value:t.debitAmount,onChange:r=>A(s,"debitAmount",r.target.value),step:"0.01",min:"0",className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"number",value:t.creditAmount,onChange:r=>A(s,"creditAmount",r.target.value),step:"0.01",min:"0",className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap",children:e.jsx("input",{type:"text",value:t.notes||"",onChange:r=>A(s,"notes",r.target.value),className:"block w-full border border-gray-300 rounded-md shadow-sm py-1 px-2 text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Notas"})}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:e.jsx("button",{type:"button",onClick:()=>se(s),className:"text-red-600 hover:text-red-900",children:e.jsx(L,{size:16})})})]},s)),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:"Totales"}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:c(g.totalDebit)}),e.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:c(g.totalCredit)}),e.jsx("td",{colSpan:2,className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:e.jsx("span",{className:`${g.difference===0?"text-green-600":"text-red-600"}`,children:g.difference===0?"Transacción balanceada":`Diferencia: ${c(Math.abs(g.difference))}`})})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:re,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 flex items-center",children:[e.jsx(z,{size:16,className:"mr-2"})," ","Guardar Transacción"]})]})]})}),e.jsx(k,{isOpen:H,onClose:()=>w(!1),title:"Nueva Cuenta Contable",children:e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700",children:"Código de Cuenta"}),e.jsx("input",{type:"text",id:"code",name:"code",value:m.code,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Ej. 1000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nombre de Cuenta"}),e.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Ej. Efectivo",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accountType",className:"block text-sm font-medium text-gray-700",children:"Tipo de Cuenta"}),e.jsxs("select",{id:"accountType",name:"type",value:m.type,onChange:h,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",required:!0,children:[e.jsx("option",{value:"Activo",children:"Activo"}),e.jsx("option",{value:"Pasivo",children:"Pasivo"}),e.jsx("option",{value:"Patrimonio",children:"Patrimonio"}),e.jsx("option",{value:"Ingreso",children:"Ingreso"}),e.jsx("option",{value:"Gasto",children:"Gasto"}),e.jsx("option",{value:"Costo",children:"Costo"})]})]}),e.jsx("div",{children:e.jsxs("label",{htmlFor:"isActive",className:"flex items-center text-sm font-medium text-gray-700 mt-6",children:[e.jsx("input",{type:"checkbox",id:"isActive",name:"isActive",checked:m.isActive,onChange:h,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("span",{className:"ml-2",children:"Cuenta Activa"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Descripción"}),e.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:h,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",placeholder:"Descripción detallada de la cuenta"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cancelar"}),e.jsxs("button",{type:"button",onClick:ae,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 flex items-center",children:[e.jsx(z,{size:16,className:"mr-2"})," ","Guardar Cuenta"]})]})]})}),e.jsx(k,{isOpen:U,onClose:()=>I(!1),title:`Detalles de Transacción: ${a?.referenceNumber}`,size:"lg",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:a.referenceNumber})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(a.transactionDate).toLocaleDateString("es-ES")})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                      ${a.type==="Venta"?"bg-green-100 text-green-800":a.type==="Compra"?"bg-blue-100 text-blue-800":a.type==="Gasto"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:a.type})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Descripción"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:a.description})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                    ${a.isPosted?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:a.isPosted?"Contabilizado":"Pendiente"})})]}),a.orderId&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Orden relacionada"}),e.jsxs("p",{className:"mt-1 text-sm text-primary-600 font-medium",children:["#",a.orderId]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Entradas Contables"}),e.jsx("div",{className:"overflow-x-auto border border-gray-300 rounded-md shadow-sm",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cuenta"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Debe"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Haber"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notas"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[a.entries.map(t=>{const s=N.find(r=>r.id===t.accountId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:s?`${s.code} - ${s.name}`:`Cuenta ID: ${t.accountId}`}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.debitAmount>0?c(t.debitAmount):""}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.creditAmount>0?c(t.creditAmount):""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:t.notes})]},t.id)}),e.jsxs("tr",{className:"bg-gray-50 font-medium",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:"Totales"}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:c(a.entries.reduce((t,s)=>t+s.debitAmount,0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:c(a.entries.reduce((t,s)=>t+s.creditAmount,0))}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.isBalanced?e.jsx("span",{className:"text-green-600",children:"Transacción balanceada"}):e.jsx("span",{className:"text-red-600",children:"Transacción no balanceada"})})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[!a.isPosted&&e.jsxs("button",{type:"button",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 flex items-center",children:[e.jsx(O,{size:16,className:"mr-2"})," ","Contabilizar"]}),e.jsx("button",{type:"button",onClick:()=>I(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Cerrar"})]})]})}),e.jsx(k,{isOpen:_,onClose:()=>D(!1),title:`Detalles de Cuenta: ${o?.code} - ${o?.name}`,children:o&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Código"}),e.jsx("p",{className:"mt-1 text-sm font-medium text-gray-900",children:o.code})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.name})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                      ${o.type==="Activo"?"bg-blue-100 text-blue-800":o.type==="Pasivo"?"bg-yellow-100 text-yellow-800":o.type==="Ingreso"?"bg-green-100 text-green-800":o.type==="Gasto"?"bg-red-100 text-red-800":o.type==="Costo"?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"}`,children:o.type})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Saldo"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.jsx("span",{className:`font-medium ${o.balance&&o.balance>=0?"text-green-600":"text-red-600"}`,children:c(o.balance||0)})})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                    ${o.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:o.isActive?"Activa":"Inactiva"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase",children:"Descripción"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.description||"Sin descripción"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-3",children:"Movimientos Recientes"}),e.jsxs("div",{className:"border border-gray-300 rounded-md shadow-sm p-4 text-center text-gray-500",children:[e.jsx("p",{children:"Para ver los movimientos detallados de esta cuenta, genere un informe de Libro Mayor."}),e.jsx("button",{type:"button",className:"mt-3 px-4 py-2 bg-primary-600 border border-transparent rounded-md font-medium text-white shadow-sm hover:bg-primary-700",children:"Ver Libro Mayor"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",onClick:()=>D(!1),children:"Cerrar"}),e.jsx("button",{type:"button",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 flex items-center",children:"Editar Cuenta"})]})]})})]})};export{Te as default};
//# sourceMappingURL=AdminAccountingPage-B73gb8xV.js.map

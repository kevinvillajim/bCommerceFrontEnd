import{r,p as j,q as L,j as e,X as Q,L as f}from"./index-DmNDOrWy.js";import{T as Y}from"./Table-BdEePeKQ.js";import{S as ee}from"./StatCardList-BKb18NhN.js";import{F as u}from"./file-text-DT6_O-Nw.js";import{T as b}from"./triangle-alert-B75WTV0P.js";import{R as te}from"./refresh-cw-BOPCg90x.js";import{F as se}from"./funnel-CAFb7hhq.js";import{C as ae}from"./calendar-COADRkv0.js";import{D as re}from"./dollar-sign-BrNRCHtI.js";import{U as z}from"./user-nLts-VnI.js";import{S as F}from"./store-BV-a-_hn.js";import{C as v}from"./circle-x-BwsT4AZ5.js";import{D as Z}from"./download-BLI8iYU4.js";import{S as le}from"./send-BCk3tQWd.js";import{S as ie}from"./shopping-bag-BMmsUIy8.js";import{E as oe}from"./eye-CldZNoIz.js";import"./chevron-left-Dl3DF2OO.js";import"./search-CbEKe7UQ.js";import"./arrow-up-DQySjn32.js";const U=[{id:1,invoiceNumber:"INV-001-2023",orderId:1001,userId:101,sellerId:201,issueDate:"2023-11-01T10:30:00Z",subtotal:125.4,taxAmount:15.05,totalAmount:140.45,status:"AUTHORIZED",sriAuthorizationNumber:"2311202301179123400110010010000000011234567816",sriAccessKey:"2311202301179123400110010010000000011234567816",items:[{id:1,productId:501,description:"Smartphone Samsung Galaxy A53",quantity:1,unitPrice:120.99,discount:0,taxRate:12,taxAmount:14.52,total:135.51,product:{name:"Smartphone Samsung Galaxy A53",image:"samsung-a53.jpg"}},{id:2,productId:502,description:"Protector de pantalla",quantity:1,unitPrice:4.41,discount:0,taxRate:12,taxAmount:.53,total:4.94,product:{name:"Protector de pantalla para Samsung Galaxy A53",image:"screen-protector.jpg"}}],order:{orderNumber:"ORD-001-2023",createdAt:"2023-11-01T09:15:00Z"},user:{name:"Juan Pérez",email:"juan.perez@example.com"},seller:{storeName:"ElectroStore"}},{id:2,invoiceNumber:"INV-002-2023",orderId:1002,userId:102,sellerId:202,issueDate:"2023-11-02T15:45:00Z",subtotal:350,taxAmount:42,totalAmount:392,status:"ISSUED",items:[{id:3,productId:601,description:"Laptop HP Pavilion",quantity:1,unitPrice:350,discount:0,taxRate:12,taxAmount:42,total:392,product:{name:"Laptop HP Pavilion 15-eg2xxx",image:"hp-pavilion.jpg"}}],order:{orderNumber:"ORD-002-2023",createdAt:"2023-11-02T14:30:00Z"},user:{name:"María Rodríguez",email:"maria.rodriguez@example.com"},seller:{storeName:"TechWorld"}},{id:3,invoiceNumber:"INV-003-2023",orderId:1003,userId:103,sellerId:203,issueDate:"2023-11-03T09:20:00Z",subtotal:75,taxAmount:9,totalAmount:84,status:"AUTHORIZED",sriAuthorizationNumber:"2311202301179123400110010010000000031234567811",sriAccessKey:"2311202301179123400110010010000000031234567811",items:[{id:4,productId:701,description:"Zapatillas deportivas Nike Air",quantity:1,unitPrice:75,discount:0,taxRate:12,taxAmount:9,total:84,product:{name:"Zapatillas Nike Air Max",image:"nike-air.jpg"}}],order:{orderNumber:"ORD-003-2023",createdAt:"2023-11-03T08:45:00Z"},user:{name:"Carlos Sánchez",email:"carlos.sanchez@example.com"},seller:{storeName:"SportFashion"}},{id:4,invoiceNumber:"INV-004-2023",orderId:1004,userId:104,sellerId:204,issueDate:"2023-11-04T16:30:00Z",subtotal:220,taxAmount:26.4,totalAmount:246.4,status:"CANCELLED",sriAuthorizationNumber:"2311202301179123400110010010000000041234567817",sriAccessKey:"2311202301179123400110010010000000041234567817",cancellationReason:"Producto agotado",cancelledAt:"2023-11-05T10:15:00Z",items:[{id:5,productId:801,description:"Smartwatch Apple Watch Series 7",quantity:1,unitPrice:220,discount:0,taxRate:12,taxAmount:26.4,total:246.4,product:{name:"Apple Watch Series 7",image:"apple-watch.jpg"}}],order:{orderNumber:"ORD-004-2023",createdAt:"2023-11-04T15:00:00Z"},user:{name:"Ana Martínez",email:"ana.martinez@example.com"},seller:{storeName:"iPlace"}},{id:5,invoiceNumber:"INV-005-2023",orderId:1005,userId:105,sellerId:205,issueDate:"2023-11-05T11:20:00Z",subtotal:150,taxAmount:18,totalAmount:168,status:"REJECTED",sriResponse:{errors:["Datos de identificación incorrectos"],status:"REJECTED",timestamp:"2023-11-05T11:25:00Z"},items:[{id:6,productId:901,description:"Auriculares Sony WH-1000XM4",quantity:1,unitPrice:150,discount:0,taxRate:12,taxAmount:18,total:168,product:{name:"Sony WH-1000XM4",image:"sony-headphones.jpg"}}],order:{orderNumber:"ORD-005-2023",createdAt:"2023-11-05T10:45:00Z"},user:{name:"Javier García",email:"javier.garcia@example.com"},seller:{storeName:"AudioWorld"}},{id:6,invoiceNumber:"INV-006-2023",orderId:1006,userId:106,sellerId:206,issueDate:"2023-11-06T13:40:00Z",subtotal:89.99,taxAmount:10.8,totalAmount:100.79,status:"AUTHORIZED",sriAuthorizationNumber:"2311202301179123400110010010000000061234567813",sriAccessKey:"2311202301179123400110010010000000061234567813",items:[{id:7,productId:1001,description:"Cafetera Nespresso Essenza Mini",quantity:1,unitPrice:89.99,discount:0,taxRate:12,taxAmount:10.8,total:100.79,product:{name:"Nespresso Essenza Mini",image:"nespresso.jpg"}}],order:{orderNumber:"ORD-006-2023",createdAt:"2023-11-06T12:30:00Z"},user:{name:"Lucía Fernández",email:"lucia.fernandez@example.com"},seller:{storeName:"HomeAppliances"}},{id:7,invoiceNumber:"INV-007-2023",orderId:1007,userId:107,sellerId:207,issueDate:"2023-11-07T09:50:00Z",subtotal:45.5,taxAmount:5.46,totalAmount:50.96,status:"DRAFT",items:[{id:8,productId:1101,description:"Libro 'El Señor de los Anillos'",quantity:1,unitPrice:25,discount:0,taxRate:12,taxAmount:3,total:28,product:{name:"El Señor de los Anillos - Edición Especial",image:"lotr-book.jpg"}},{id:9,productId:1102,description:"Libro 'Harry Potter y la Piedra Filosofal'",quantity:1,unitPrice:20.5,discount:0,taxRate:12,taxAmount:2.46,total:22.96,product:{name:"Harry Potter y la Piedra Filosofal",image:"harry-potter.jpg"}}],order:{orderNumber:"ORD-007-2023",createdAt:"2023-11-07T09:30:00Z"},user:{name:"David López",email:"david.lopez@example.com"},seller:{storeName:"BookWorld"}}],y={DRAFT:{label:"Borrador",color:"bg-gray-100 text-gray-800",icon:e.jsx(L,{className:"w-3 h-3 mr-1"})},ISSUED:{label:"Emitida",color:"bg-blue-100 text-blue-800",icon:e.jsx(u,{className:"w-3 h-3 mr-1"})},AUTHORIZED:{label:"Autorizada",color:"bg-green-100 text-green-800",icon:e.jsx(j,{className:"w-3 h-3 mr-1"})},CANCELLED:{label:"Anulada",color:"bg-orange-100 text-orange-800",icon:e.jsx(v,{className:"w-3 h-3 mr-1"})},REJECTED:{label:"Rechazada",color:"bg-red-100 text-red-800",icon:e.jsx(b,{className:"w-3 h-3 mr-1"})}},Ee=()=>{const[m,A]=r.useState([]),[O,p]=r.useState(!0),[w,$]=r.useState("all"),[o,E]=r.useState({from:"",to:""}),[n,S]=r.useState({min:"",max:""}),[h,R]=r.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[s,P]=r.useState(null),[M,T]=r.useState(!1),[g,x]=r.useState(!1),[ne,H]=r.useState(!1);r.useEffect(()=>{(()=>{p(!0),setTimeout(()=>{A(U),R({currentPage:1,totalPages:1,totalItems:U.length,itemsPerPage:10}),p(!1)},500)})()},[]);const V=m.filter(t=>{const a=w==="all"||t.status===w;let l=!0;if(o.from){const d=new Date(t.issueDate),N=new Date(o.from);l=d>=N}if(o.to&&l){const d=new Date(t.issueDate),N=new Date(o.to);N.setHours(23,59,59,999),l=d<=N}let c=!0;if(n.min){const d=parseFloat(n.min);c=t.totalAmount>=d}if(n.max&&c){const d=parseFloat(n.max);c=t.totalAmount<=d}return a&&l&&c}),q=t=>{P(t),T(!0),x(!1)},I=()=>{T(!1),P(null),x(!1),H(!1)},D=t=>{if(!t)return"N/A";const a=new Date(t);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},i=t=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t),C=(t,a)=>{alert(`Descargando factura #${t} en formato ${a.toUpperCase()}`),g&&x(!1)},J=t=>{alert(`Enviando factura #${t} por correo electrónico al cliente`),g&&x(!1)},k=t=>{const a=prompt("¿Cuál es el motivo de la anulación?");a&&(A(l=>l.map(c=>c.id===t?{...c,status:"CANCELLED",cancellationReason:a,cancelledAt:new Date().toISOString()}:c)),alert(`Factura #${t} anulada con éxito.`),I())},W=t=>{A(a=>a.map(l=>l.id===t?{...l,status:"AUTHORIZED",sriAuthorizationNumber:`23112023011791234001100100100000000${t}1234567813`,sriAccessKey:`23112023011791234001100100100000000${t}1234567813`}:l)),alert(`Factura #${t} autorizada con éxito.`),I()},B=t=>{R(a=>({...a,currentPage:t}))},G=()=>{p(!0),setTimeout(()=>{p(!1)},500)},K=[{key:"invoice",header:"Factura",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.invoiceNumber}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Pedido: ",t.order?.orderNumber||`#${t.orderId}`]})]})]})},{key:"client",header:"Cliente",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(z,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.user?.name||`Usuario #${t.userId}`}),e.jsx("div",{className:"text-xs text-gray-500",children:t.user?.email})]})]})},{key:"seller",header:"Vendedor",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(F,{className:"h-4 w-4 text-gray-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.seller?.storeName||`Vendedor #${t.sellerId}`})})]})},{key:"amount",header:"Monto",sortable:!0,render:t=>e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[i(t.totalAmount),e.jsxs("div",{className:"text-xs text-gray-500",children:["Subtotal: ",i(t.subtotal)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["IVA: ",i(t.taxAmount)]})]})},{key:"date",header:"Fecha",sortable:!0,render:t=>e.jsx("div",{className:"text-sm text-gray-500",children:D(t.issueDate)})},{key:"status",header:"Estado",sortable:!0,render:t=>{const a=y[t.status]||{label:t.status,color:"bg-gray-100 text-gray-800",icon:e.jsx(b,{className:"w-3 h-3 mr-1"})};return e.jsxs("div",{children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.color}`,children:[a.icon,a.label]}),t.cancellationReason&&e.jsxs("div",{className:"text-xs text-red-500 mt-1",children:["Motivo: ",t.cancellationReason]})]})}},{key:"actions",header:"Acciones",render:t=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>q(t),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",title:"Ver detalles",children:e.jsx(oe,{size:18})}),e.jsx("button",{onClick:()=>C(t.id||0,"pdf"),className:"p-1 text-green-600 hover:bg-green-100 rounded-md",title:"Descargar",children:e.jsx(Z,{size:18})}),(t.status==="ISSUED"||t.status==="AUTHORIZED")&&e.jsx("button",{onClick:()=>k(t.id||0),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",title:"Anular factura",children:e.jsx(v,{size:18})})]})}],X=V.map(t=>({...t,userName:t.user?.name||"",sellerStoreName:t.seller?.storeName||""})),_=[{title:"Total",value:m.length,description:"Facturas",icon:u,bgColor:"bg-blue-50/20",textColor:"text-blue-800",valueColor:"text-blue-900",descriptionColor:"text-blue-700",iconColor:"text-blue-600"},{title:"Autorizadas",value:m.filter(t=>t.status==="AUTHORIZED").length,description:"En regla",icon:j,bgColor:"bg-green-50/20",textColor:"text-green-800",valueColor:"text-green-900",descriptionColor:"text-green-700",iconColor:"text-green-600"},{title:"Pendientes",value:m.filter(t=>t.status==="DRAFT"||t.status==="ISSUED").length,description:"Requieren atención",icon:L,bgColor:"bg-yellow-50",textColor:"text-yellow-800",valueColor:"text-yellow-900",descriptionColor:"text-yellow-700",iconColor:"text-yellow-600"},{title:"Problemas",value:m.filter(t=>t.status==="REJECTED"||t.status==="CANCELLED").length,description:"Anuladas o rechazadas",icon:b,bgColor:"bg-red-50/20",textColor:"text-red-800",valueColor:"text-red-900",descriptionColor:"text-red-700",iconColor:"text-red-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Facturas"}),e.jsx("div",{className:"flex space-x-2",children:e.jsxs("button",{onClick:G,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(te,{size:18,className:"inline mr-2"}),"Actualizar"]})})]}),e.jsx(ee,{items:_}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:w,onChange:t=>$(t.target.value),children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"DRAFT",children:"Borrador"}),e.jsx("option",{value:"ISSUED",children:"Emitida"}),e.jsx("option",{value:"AUTHORIZED",children:"Autorizada"}),e.jsx("option",{value:"CANCELLED",children:"Anulada"}),e.jsx("option",{value:"REJECTED",children:"Rechazada"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.from,onChange:t=>E({...o,from:t.target.value}),placeholder:"Desde"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.to,onChange:t=>E({...o,to:t.target.value}),placeholder:"Hasta"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"number",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 w-24",value:n.min,onChange:t=>S({...n,min:t.target.value}),placeholder:"Min $",min:"0",step:"0.01"}),e.jsx("input",{type:"number",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 w-24",value:n.max,onChange:t=>S({...n,max:t.target.value}),placeholder:"Max $",min:"0",step:"0.01"})]})]})}),e.jsx(Y,{data:X,columns:K,searchFields:["invoiceNumber","userName","sellerStoreName"],loading:O,emptyMessage:"No se encontraron facturas",pagination:{currentPage:h.currentPage,totalPages:h.totalPages,totalItems:h.totalItems,itemsPerPage:h.itemsPerPage,onPageChange:B}}),M&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Detalle de Factura ",s.invoiceNumber]}),e.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-500",children:e.jsx(Q,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información General"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Número:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.invoiceNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pedido:"}),e.jsx(f,{to:`/admin/orders/${s.orderId}`,className:"font-medium text-primary-600 hover:text-primary-700",children:s.order?.orderNumber||`#${s.orderId}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha emisión:"}),e.jsx("span",{className:"font-medium text-gray-900",children:D(s.issueDate)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y[s.status]?.color}`,children:[y[s.status]?.icon,y[s.status]?.label]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Cliente"}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(z,{className:"h-4 w-4 text-gray-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx(f,{to:`/admin/users/${s.userId}`,className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:s.user?.name||`Usuario #${s.userId}`})})]}),e.jsx("div",{className:"space-y-1 text-sm pl-11",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"ml-1 text-gray-900",children:s.user?.email})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Vendedor"}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(F,{className:"h-4 w-4 text-gray-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx(f,{to:`/admin/sellers/${s.sellerId}`,className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:s.seller?.storeName||`Vendedor #${s.sellerId}`})})]})]})]}),s.status==="AUTHORIZED"&&s.sriAuthorizationNumber&&e.jsxs("div",{className:"bg-green-50/20 p-4 rounded-lg mb-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-green-800 mb-2 flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Información de Autorización SRI"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-green-700",children:"Número de Autorización:"}),e.jsx("p",{className:"text-sm text-green-900 font-mono break-all mt-1",children:s.sriAuthorizationNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-green-700",children:"Clave de Acceso:"}),e.jsx("p",{className:"text-sm text-green-900 font-mono break-all mt-1",children:s.sriAccessKey})]})]})]}),s.status==="REJECTED"&&s.sriResponse&&e.jsxs("div",{className:"bg-red-50/20 p-4 rounded-lg mb-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-red-800 mb-2 flex items-center",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),"Motivo de Rechazo"]}),e.jsx("div",{children:e.jsx("ul",{className:"list-disc list-inside text-sm text-red-700 space-y-1",children:Array.isArray(s.sriResponse.errors)?s.sriResponse.errors.map((t,a)=>e.jsx("li",{children:t},a)):e.jsx("li",{children:"Error desconocido"})})})]}),s.status==="CANCELLED"&&s.cancellationReason&&e.jsxs("div",{className:"bg-orange-50/20 p-4 rounded-lg mb-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-orange-800 mb-2 flex items-center",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),"Información de Anulación"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-orange-700",children:"Motivo:"}),e.jsx("p",{className:"text-sm text-orange-900 mt-1",children:s.cancellationReason}),s.cancelledAt&&e.jsxs("div",{className:"mt-2 text-xs text-orange-700",children:["Fecha de anulación:"," ",D(s.cancelledAt)]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Artículos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cantidad"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Precio Unit."}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IVA"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.items.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.description}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i(t.unitPrice)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:i(t.taxAmount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i(t.total)})]},t.id))}),e.jsxs("tfoot",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"Subtotal:"}),e.jsx("td",{colSpan:2,className:"px-6 py-4 text-sm text-gray-900",children:i(s.subtotal)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"IVA (12%):"}),e.jsx("td",{colSpan:2,className:"px-6 py-4 text-sm text-gray-900",children:i(s.taxAmount)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"Total:"}),e.jsx("td",{colSpan:2,className:"px-6 py-4 text-sm font-bold text-gray-900",children:i(s.totalAmount)})]})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-2 mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>x(!g),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"Descargar/Imprimir"]}),g&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:e.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:[e.jsxs("button",{onClick:()=>C(s.id||0,"pdf"),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-gray-500"}),"Descargar PDF"]}),e.jsxs("button",{onClick:()=>C(s.id||0,"xml"),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",children:[e.jsx(u,{className:"h-4 w-4 mr-2 text-gray-500"}),"Descargar XML"]}),e.jsxs("button",{onClick:()=>J(s.id||0),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",role:"menuitem",children:[e.jsx(le,{className:"h-4 w-4 mr-2 text-gray-500"}),"Enviar por email"]})]})})]}),(s.status==="ISSUED"||s.status==="AUTHORIZED")&&e.jsxs("button",{onClick:()=>k(s.id||0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Anular Factura"]}),s.status==="ISSUED"&&e.jsxs("button",{onClick:()=>W(s.id||0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Autorizar SRI"]}),e.jsxs(f,{to:`/admin/orders/${s.orderId}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Ver Orden"]})]})]})]})})]})};export{Ee as default};
//# sourceMappingURL=AdminInvoicesPage-CAMx-jXt.js.map

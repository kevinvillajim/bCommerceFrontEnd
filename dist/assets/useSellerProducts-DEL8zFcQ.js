import{x as I,r as i,i as T,l as h,t as m}from"./index-DmNDOrWy.js";const y=new T,M=()=>{const{user:a}=I(),[v,n]=i.useState(!1),[b,c]=i.useState(null),[E,d]=i.useState([]),[P,w]=i.useState(null),[_,f]=i.useState(0),[l,S]=i.useState(1),[p,D]=i.useState(10),u=i.useCallback(async(e=1,r=10)=>{n(!0),c(null);try{console.log("Usuario actual:",a);const s=a?.id;if(!s)throw new Error("No se pudo obtener el ID del vendedor");const t={limit:r,offset:(e-1)*r,page:e,sellerId:s,sortBy:"created_at",sortDir:"desc",featured:void 0,status:void 0},o=await y.getProducts(t);o?Array.isArray(o.data)?(d(o.data),f(o.meta?.total||o.data.length)):(d([]),f(0)):(d([]),f(0))}catch(s){const t=s instanceof Error?s.message:"Error al obtener productos del vendedor";c(t),console.error("Error al obtener productos del vendedor:",s),d([]),f(0)}finally{n(!1)}},[a]),k=i.useCallback(async e=>{n(!0),c(null);try{const r=await y.getProductById(e);return w(r),r}catch(r){const s=r instanceof Error?r.message:"Error al obtener los detalles del producto";return c(s),console.error("Error al obtener detalles del producto:",r),null}finally{n(!1)}},[]),z=i.useCallback(async e=>{n(!0),c(null);try{const r=new FormData;if(r.append("name",e.name),r.append("description",e.description),e.shortDescription&&r.append("short_description",e.shortDescription),r.append("price",String(e.price)),r.append("stock",String(e.stock)),e.weight!==void 0&&r.append("weight",String(e.weight)),e.width!==void 0&&r.append("width",String(e.width)),e.height!==void 0&&r.append("height",String(e.height)),e.depth!==void 0&&r.append("depth",String(e.depth)),e.dimensions&&r.append("dimensions",e.dimensions),r.append("category_id",String(e.category_id)),e.sku&&r.append("sku",e.sku),e.status!==void 0&&r.append("status",e.status),e.featured!==void 0&&r.append("featured",String(e.featured)),e.published!==void 0&&r.append("published",String(e.published)),e.discount_percentage!==void 0&&r.append("discount_percentage",String(e.discount_percentage)),e.colors){const o=typeof e.colors=="string"?e.colors:JSON.stringify(e.colors);r.append("colors",o)}if(e.sizes){const o=typeof e.sizes=="string"?e.sizes:JSON.stringify(e.sizes);r.append("sizes",o)}if(e.tags){const o=typeof e.tags=="string"?e.tags:JSON.stringify(e.tags);r.append("tags",o)}e.attributes&&Object.keys(e.attributes).length>0&&r.append("attributes",JSON.stringify(e.attributes)),e.images&&e.images.length>0&&e.images.forEach((o,g)=>{r.append(`images[${g}]`,o)}),console.log("Enviando datos de producto para creaci칩n:");for(const[o,g]of r.entries())o.startsWith("images[")?console.log(`${o}: (archivo binario)`):console.log(`${o}: ${g}`);const s=await h.uploadFile(m.PRODUCTS.CREATE,r);let t=null;if(s&&typeof s=="object"&&(t=s),t)console.log("Producto creado exitosamente:",t),u(l,p);else throw console.error("Respuesta de creaci칩n de producto no v치lida:",s),new Error("No se pudo crear el producto. La respuesta del servidor no es v치lida.");return t}catch(r){const s=r instanceof Error?`Error al crear producto: ${r.message}`:"Error desconocido al crear producto";return c(s),console.error("Error al crear producto:",r),null}finally{n(!1)}},[u,l,p]),O=i.useCallback(async e=>{n(!0),c(null);try{console.log("Actualizando producto con datos:",e);const r=new FormData;if(e.name&&r.append("name",e.name),e.description&&r.append("description",e.description),e.shortDescription&&r.append("short_description",e.shortDescription),e.price!==void 0&&r.append("price",String(e.price)),e.stock!==void 0&&r.append("stock",String(e.stock)),e.weight!==void 0&&r.append("weight",String(e.weight)),e.width!==void 0&&r.append("width",String(e.width)),e.height!==void 0&&r.append("height",String(e.height)),e.depth!==void 0&&r.append("depth",String(e.depth)),e.dimensions&&r.append("dimensions",e.dimensions),e.category_id&&r.append("category_id",String(e.category_id)),e.status&&r.append("status",e.status),e.featured!==void 0&&r.append("featured",String(e.featured)),e.published!==void 0&&r.append("published",String(e.published)),e.discount_percentage!==void 0&&r.append("discount_percentage",String(e.discount_percentage)),e.colors){const o=typeof e.colors=="string"?e.colors:JSON.stringify(e.colors);r.append("colors",o)}if(e.sizes){const o=typeof e.sizes=="string"?e.sizes:JSON.stringify(e.sizes);r.append("sizes",o)}if(e.tags){const o=typeof e.tags=="string"?e.tags:JSON.stringify(e.tags);r.append("tags",o)}e.attributes&&Object.keys(e.attributes).length>0&&r.append("attributes",JSON.stringify(e.attributes)),e.replace_images!==void 0&&r.append("replace_images",String(e.replace_images)),e.remove_images&&e.remove_images.length>0&&r.append("remove_images",JSON.stringify(e.remove_images)),e.images&&e.images.length>0&&e.images.forEach((o,g)=>{r.append(`images[${g}]`,o)});const s=await h.updateFile(m.PRODUCTS.UPDATE(e.id),r);let t=null;if(s&&typeof s=="object"&&(t=s),t)u(l,p);else throw new Error("No se pudo actualizar el producto");return t}catch(r){const s=r instanceof Error?r.message:"Error al actualizar producto";return c(s),console.error("Error al actualizar producto:",r),null}finally{n(!1)}},[u,l,p]),N=i.useCallback(async e=>{n(!0),c(null);try{const r=await y.deleteProduct(e);return r&&u(l,p),r}catch(r){const s=r instanceof Error?r.message:"Error al eliminar producto";return c(s),console.error("Error al eliminar producto:",r),!1}finally{n(!1)}},[u,l,p]),C=i.useCallback(async(e,r)=>{n(!0),c(null);try{const s=r==="active"?"inactive":"active",t=new FormData;if(t.append("status",s),await h.uploadFile(m.PRODUCTS.UPDATE(e),t))return u(l,p),!0;throw new Error("Error al cambiar estado del producto")}catch(s){const t=s instanceof Error?s.message:"Error al cambiar estado del producto";return c(t),console.error("Error al cambiar estado del producto:",s),!1}finally{n(!1)}},[u,l,p]);i.useEffect(()=>{a&&u(l,p)},[a,l,p,u]);const A=i.useCallback(e=>{S(e)},[]),J=i.useCallback(e=>{D(e),S(1)},[]);return{products:E,productDetail:P,totalProducts:_,loading:v,error:b,page:l,itemsPerPage:p,fetchSellerProducts:u,fetchProductById:k,createProduct:z,updateProduct:O,deleteProduct:N,toggleProductStatus:C,changePage:A,changeItemsPerPage:J}};export{M as u};
//# sourceMappingURL=useSellerProducts-DEL8zFcQ.js.map

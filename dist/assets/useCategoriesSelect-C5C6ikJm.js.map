{"version":3,"file":"useCategoriesSelect-C5C6ikJm.js","sources":["../../node_modules/lucide-react/dist/esm/icons/image.js","../../node_modules/lucide-react/dist/esm/icons/package-open.js","../../node_modules/lucide-react/dist/esm/icons/palette.js","../../node_modules/lucide-react/dist/esm/icons/ruler.js","../../src/presentation/hooks/useCategoriesSelect.ts"],"sourcesContent":["/**\n * @license lucide-react v0.484.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", ry: \"2\", key: \"1m3agn\" }],\n  [\"circle\", { cx: \"9\", cy: \"9\", r: \"2\", key: \"af1f0g\" }],\n  [\"path\", { d: \"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21\", key: \"1xmnt7\" }]\n];\nconst Image = createLucideIcon(\"image\", __iconNode);\n\nexport { __iconNode, Image as default };\n//# sourceMappingURL=image.js.map\n","/**\n * @license lucide-react v0.484.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 22v-9\", key: \"x3hkom\" }],\n  [\n    \"path\",\n    {\n      d: \"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z\",\n      key: \"2ntwy6\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13\",\n      key: \"1pmm1c\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z\",\n      key: \"12ttoo\"\n    }\n  ]\n];\nconst PackageOpen = createLucideIcon(\"package-open\", __iconNode);\n\nexport { __iconNode, PackageOpen as default };\n//# sourceMappingURL=package-open.js.map\n","/**\n * @license lucide-react v0.484.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", fill: \"currentColor\", key: \"1okk4w\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", fill: \"currentColor\", key: \"f64h9f\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"fotxhn\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", fill: \"currentColor\", key: \"qy21gx\" }],\n  [\n    \"path\",\n    {\n      d: \"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z\",\n      key: \"12rzf8\"\n    }\n  ]\n];\nconst Palette = createLucideIcon(\"palette\", __iconNode);\n\nexport { __iconNode, Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.484.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z\",\n      key: \"icamh8\"\n    }\n  ],\n  [\"path\", { d: \"m14.5 12.5 2-2\", key: \"inckbg\" }],\n  [\"path\", { d: \"m11.5 9.5 2-2\", key: \"fmmyf7\" }],\n  [\"path\", { d: \"m8.5 6.5 2-2\", key: \"vc6u1g\" }],\n  [\"path\", { d: \"m17.5 15.5 2-2\", key: \"wo5hmg\" }]\n];\nconst Ruler = createLucideIcon(\"ruler\", __iconNode);\n\nexport { __iconNode, Ruler as default };\n//# sourceMappingURL=ruler.js.map\n","import {useState, useEffect, useMemo} from \"react\";\r\nimport useCategories from \"./useCategories\";\r\n\r\n// Estructura para el menú desplegable de categorías\r\nexport interface CategoryOption {\r\n\tvalue: number;\r\n\tlabel: string;\r\n\tisSubcategory?: boolean;\r\n\tparentId?: number;\r\n}\r\n\r\n/**\r\n * Hook para obtener categorías formateadas para selectores\r\n * Con soporte para selección jerárquica de categorías y subcategorías\r\n */\r\nexport const useCategoriesSelect = () => {\r\n\tconst {categories, mainCategories, fetchCategories, fetchMainCategories} =\r\n\t\tuseCategories();\r\n\tconst [loading, setLoading] = useState<boolean>(true);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\tconst [selectedParentId, setSelectedParentId] = useState<number | null>(null);\r\n\r\n\t// Cargar categorías al inicializar\r\n\tuseEffect(() => {\r\n\t\tconst loadCategories = async () => {\r\n\t\t\tsetLoading(true);\r\n\t\t\ttry {\r\n\t\t\t\t// Cargar categorías principales con subcategorías\r\n\t\t\t\tawait fetchMainCategories(true);\r\n\t\t\t\t// También cargar todas las categorías para tener el listado completo\r\n\t\t\t\tawait fetchCategories(true);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tsetError(\r\n\t\t\t\t\terr instanceof Error ? err.message : \"Error al cargar categorías\"\r\n\t\t\t\t);\r\n\t\t\t} finally {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tloadCategories();\r\n\t}, [fetchCategories, fetchMainCategories]);\r\n\r\n\t// Opciones de categorías principales\r\n\tconst parentCategoryOptions = useMemo(() => {\r\n\t\tconst options: CategoryOption[] = [];\r\n\r\n\t\tmainCategories.forEach((category) => {\r\n\t\t\tif (category.id) {\r\n\t\t\t\toptions.push({\r\n\t\t\t\t\tvalue: category.id,\r\n\t\t\t\t\tlabel: category.name,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// Agregar categorías que no tienen parent_id\r\n\t\tcategories.forEach((category) => {\r\n\t\t\tif (\r\n\t\t\t\tcategory.id &&\r\n\t\t\t\t!category.parent_id &&\r\n\t\t\t\t!options.some((option) => option.value === category.id)\r\n\t\t\t) {\r\n\t\t\t\toptions.push({\r\n\t\t\t\t\tvalue: category.id,\r\n\t\t\t\t\tlabel: category.name,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn options;\r\n\t}, [mainCategories, categories]);\r\n\r\n\t// Opciones de subcategorías filtradas por la categoría principal seleccionada\r\n\tconst subcategoryOptions = useMemo(() => {\r\n\t\tif (!selectedParentId) return [];\r\n\r\n\t\tconst options: CategoryOption[] = [];\r\n\r\n\t\t// Buscar en categorías principales para encontrar subcategorías\r\n\t\tconst parentCategory = mainCategories.find(\r\n\t\t\t(category) => category.id === selectedParentId\r\n\t\t);\r\n\r\n\t\tif (parentCategory && parentCategory.subcategories) {\r\n\t\t\tparentCategory.subcategories.forEach((subcategory) => {\r\n\t\t\t\tif (subcategory.id) {\r\n\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\tvalue: subcategory.id,\r\n\t\t\t\t\t\tlabel: subcategory.name,\r\n\t\t\t\t\t\tisSubcategory: true,\r\n\t\t\t\t\t\tparentId: selectedParentId,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// También buscar en todas las categorías para asegurar\r\n\t\tcategories.forEach((category) => {\r\n\t\t\tif (\r\n\t\t\t\tcategory.id &&\r\n\t\t\t\tcategory.parent_id === selectedParentId &&\r\n\t\t\t\t!options.some((option) => option.value === category.id)\r\n\t\t\t) {\r\n\t\t\t\toptions.push({\r\n\t\t\t\t\tvalue: category.id,\r\n\t\t\t\t\tlabel: category.name,\r\n\t\t\t\t\tisSubcategory: true,\r\n\t\t\t\t\tparentId: selectedParentId,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn options;\r\n\t}, [selectedParentId, mainCategories, categories]);\r\n\r\n\t// Todas las opciones disponibles (para compatibilidad hacia atrás)\r\n\tconst allCategoryOptions = useMemo(() => {\r\n\t\treturn [...parentCategoryOptions, ...subcategoryOptions];\r\n\t}, [parentCategoryOptions, subcategoryOptions]);\r\n\r\n\treturn {\r\n\t\tloading,\r\n\t\terror,\r\n\t\tcategoryOptions: allCategoryOptions, // Para compatibilidad\r\n\t\tparentCategoryOptions,\r\n\t\tsubcategoryOptions,\r\n\t\tselectedParentId,\r\n\t\tsetSelectedParentId,\r\n\t};\r\n};\r\n\r\nexport default useCategoriesSelect;\r\n"],"names":["__iconNode","Image","createLucideIcon","PackageOpen","Palette","Ruler","useCategoriesSelect","categories","mainCategories","fetchCategories","fetchMainCategories","useCategories","loading","setLoading","useState","error","setError","selectedParentId","setSelectedParentId","useEffect","err","parentCategoryOptions","useMemo","options","category","option","subcategoryOptions","parentCategory","subcategory","allCategoryOptions"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}
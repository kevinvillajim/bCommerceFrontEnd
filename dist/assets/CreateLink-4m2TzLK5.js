import{j as e,a7 as b,ak as w,r as h,b6 as g,h as k,D as _,N as C,K as E}from"./ui-vendor-DEBjJ4HS.js";import{r as d}from"./react-vendor-Cy458wKG.js";import{g as L,N as l,c as R,A as S}from"./admin-chunk-C7Ad4l4I.js";const P=()=>{const{showToast:r}=L(),[s,x]=d.useState({customer_name:"",amount:"",description:"",expires_in_days:7}),[c,u]=d.useState(!1),[t,p]=d.useState(null),[j,m]=d.useState(!1),o=i=>{const{name:n,value:a}=i.target;x(v=>({...v,[n]:a}))},f=async i=>{if(i.preventDefault(),!s.customer_name.trim()){r(l.ERROR,"El nombre del cliente es requerido");return}const n=parseFloat(s.amount);if(isNaN(n)||n<=0){r(l.ERROR,"El monto debe ser un número válido mayor a 0");return}try{u(!0);const a=await R.post(S.EXTERNAL_PAYMENT.CREATE,{customer_name:s.customer_name.trim(),amount:n,description:s.description.trim()||void 0,expires_in_days:s.expires_in_days});a.success?(p(a.data),r(l.SUCCESS,"Link de pago creado exitosamente"),x({customer_name:"",amount:"",description:"",expires_in_days:7})):r(l.ERROR,a.message||"Error creando el link")}catch(a){console.error("Error creating payment link:",a),r(l.ERROR,a.response?.data?.message||"Error creando el link de pago")}finally{u(!1)}},y=async i=>{try{await navigator.clipboard.writeText(i),m(!0),r(l.SUCCESS,"URL copiada al portapapeles"),setTimeout(()=>m(!1),2e3)}catch{r(l.ERROR,"Error copiando la URL")}},N=()=>{p(null),m(!1)};return t?e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"h-8 w-8 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"¡Link Creado Exitosamente!"}),e.jsx("p",{className:"text-gray-600",children:"Tu link de pago está listo para compartir"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles del Link"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),e.jsx("p",{className:"text-gray-900 font-medium",children:t.customer_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monto"}),e.jsxs("p",{className:"text-gray-900 font-medium",children:["$",t.amount.toFixed(2)," USD"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Código del Link"}),e.jsx("p",{className:"text-gray-900 font-mono text-lg",children:t.link_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expira el"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.expires_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL del Link de Pago"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:t.public_url,readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm font-mono"}),e.jsx("button",{onClick:()=>y(t.public_url),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:j?e.jsx(b,{className:"h-4 w-4"}):e.jsx(w,{className:"h-4 w-4"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:N,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center justify-center",children:[e.jsx(h,{className:"h-5 w-5 mr-2"}),"Crear Otro Link"]}),e.jsxs("button",{onClick:()=>window.location.href="/payment/links",className:"bg-white text-blue-600 border border-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50 transition-colors inline-flex items-center justify-center",children:[e.jsx(g,{className:"h-5 w-5 mr-2"}),"Ver Mis Links"]})]})]}):e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(h,{className:"h-8 w-8 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Link de Pago"}),e.jsx("p",{className:"text-gray-600",children:"Genera un link para que tus clientes puedan pagar"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"customer_name",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(k,{className:"h-4 w-4 inline mr-1"}),"Nombre del Cliente *"]}),e.jsx("input",{type:"text",id:"customer_name",name:"customer_name",value:s.customer_name,onChange:o,required:!0,placeholder:"Ej: Juan Pérez",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(_,{className:"h-4 w-4 inline mr-1"}),"Monto (USD) *"]}),e.jsx("input",{type:"number",id:"amount",name:"amount",value:s.amount,onChange:o,required:!0,min:"0.01",max:"99999.99",step:"0.01",placeholder:"Ej: 25.50",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(C,{className:"h-4 w-4 inline mr-1"}),"Descripción (Opcional)"]}),e.jsx("textarea",{id:"description",name:"description",value:s.description,onChange:o,rows:3,placeholder:"Ej: Pago por servicio de consultoría",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"expires_in_days",className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(E,{className:"h-4 w-4 inline mr-1"}),"Válido por"]}),e.jsxs("select",{id:"expires_in_days",name:"expires_in_days",value:s.expires_in_days,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:1,children:"1 día"}),e.jsx("option",{value:3,children:"3 días"}),e.jsx("option",{value:7,children:"7 días (recomendado)"}),e.jsx("option",{value:15,children:"15 días"}),e.jsx("option",{value:30,children:"30 días"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors inline-flex items-center justify-center",children:[c?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):e.jsx(g,{className:"h-5 w-5 mr-2"}),c?"Creando Link...":"Generar Link de Pago"]})})]})})]})};export{P as default};
//# sourceMappingURL=CreateLink-4m2TzLK5.js.map

import{c as _,j as e,r as c,w as me,q,u as fe,l as V,L as O,f as he,X as xe}from"./index-DmNDOrWy.js";import{S as ne}from"./search-CbEKe7UQ.js";import{F as ge}from"./funnel-CAFb7hhq.js";import{U as F}from"./user-nLts-VnI.js";import{S as H}from"./store-BV-a-_hn.js";import{P as se}from"./package-CIRlwNqy.js";import{p as $,i as ye,a as pe,C as K,E as be}from"./dateUtils-CfeftkgG.js";import{C as ve}from"./check-CHNPnXXq.js";import{L as je}from"./loader-circle-D95e5ckH.js";import{S as we}from"./send-BCk3tQWd.js";import{T as Q}from"./triangle-alert-B75WTV0P.js";import{B as Ne}from"./ban-DWyykPX6.js";import{S as Me}from"./shield-C7SSAF2o.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],I=_("circle",ke);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Se=_("smile",Ce);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ee=_("wifi-off",Pe);/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],$e=_("wifi",De),R=43200,G=1440,Z=Symbol.for("constructDateFrom");function Y(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&Z in t?t[Z](r):t instanceof Date?new t.constructor(r):new Date(r)}function D(t,r){return Y(t,t)}let Te={};function We(){return Te}function ee(t){const r=D(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function B(t,...r){const n=Y.bind(null,t||r.find(a=>typeof a=="object"));return r.map(n)}function z(t,r){const n=+D(t)-+D(r);return n<0?-1:n>0?1:n}function Ae(t){return Y(t,Date.now())}function Ie(t,r,n){const[a,s]=B(n?.in,t,r),u=a.getFullYear()-s.getFullYear(),o=a.getMonth()-s.getMonth();return u*12+o}function Fe(t){return r=>{const a=(t?Math[t]:Math.trunc)(r);return a===0?0:a}}function Oe(t,r){return+D(t)-+D(r)}function Re(t,r){const n=D(t);return n.setHours(23,59,59,999),n}function ze(t,r){const n=D(t),a=n.getMonth();return n.setFullYear(n.getFullYear(),a+1,0),n.setHours(23,59,59,999),n}function _e(t,r){const n=D(t);return+Re(n)==+ze(n)}function Le(t,r,n){const[a,s,u]=B(n?.in,t,t,r),o=z(s,u),i=Math.abs(Ie(s,u));if(i<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*i);let x=z(s,u)===-o;_e(a)&&i===1&&z(a,u)===1&&(x=!1);const d=o*(i-+x);return d===0?0:d}function Ve(t,r,n){const a=Oe(t,r)/1e3;return Fe(n?.roundingMethod)(a)}const He={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xe=(t,r,n)=>{let a;const s=He[t];return typeof s=="string"?a=s:r===1?a=s.one:a=s.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function T(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const qe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ye={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Be={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ue={date:T({formats:qe,defaultWidth:"full"}),time:T({formats:Ye,defaultWidth:"full"}),dateTime:T({formats:Be,defaultWidth:"full"})},Je={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ke=(t,r,n,a)=>Je[t];function S(t){return(r,n)=>{const a=n?.context?String(n.context):"standalone";let s;if(a==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,i=n?.width?String(n.width):o;s=t.formattingValues[i]||t.formattingValues[o]}else{const o=t.defaultWidth,i=n?.width?String(n.width):t.defaultWidth;s=t.values[i]||t.values[o]}const u=t.argumentCallback?t.argumentCallback(r):r;return s[u]}}const Qe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ge={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ze={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},et={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nt=(t,r)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},st={ordinalNumber:nt,era:S({values:Qe,defaultWidth:"wide"}),quarter:S({values:Ge,defaultWidth:"wide",argumentCallback:t=>t-1}),month:S({values:Ze,defaultWidth:"wide"}),day:S({values:et,defaultWidth:"wide"}),dayPeriod:S({values:tt,defaultWidth:"wide",formattingValues:rt,defaultFormattingWidth:"wide"})};function P(t){return(r,n={})=>{const a=n.width,s=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],u=r.match(s);if(!u)return null;const o=u[0],i=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],x=Array.isArray(i)?ot(i,p=>p.test(o)):at(i,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(x):x,d=n.valueCallback?n.valueCallback(d):d;const g=r.slice(o.length);return{value:d,rest:g}}}function at(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function ot(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function ae(t){return(r,n={})=>{const a=r.match(t.matchPattern);if(!a)return null;const s=a[0],u=r.match(t.parsePattern);if(!u)return null;let o=t.valueCallback?t.valueCallback(u[0]):u[0];o=n.valueCallback?n.valueCallback(o):o;const i=r.slice(s.length);return{value:o,rest:i}}}const it=/^(\d+)(th|st|nd|rd)?/i,lt=/\d+/i,ct={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dt={any:[/^b/i,/^(a|c)/i]},ut={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mt={any:[/1/i,/2/i,/3/i,/4/i]},ft={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ht={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gt={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yt={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},pt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bt={ordinalNumber:ae({matchPattern:it,parsePattern:lt,valueCallback:t=>parseInt(t,10)}),era:P({matchPatterns:ct,defaultMatchWidth:"wide",parsePatterns:dt,defaultParseWidth:"any"}),quarter:P({matchPatterns:ut,defaultMatchWidth:"wide",parsePatterns:mt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:P({matchPatterns:ft,defaultMatchWidth:"wide",parsePatterns:ht,defaultParseWidth:"any"}),day:P({matchPatterns:xt,defaultMatchWidth:"wide",parsePatterns:gt,defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:yt,defaultMatchWidth:"any",parsePatterns:pt,defaultParseWidth:"any"})},vt={code:"en-US",formatDistance:Xe,formatLong:Ue,formatRelative:Ke,localize:st,match:bt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jt(t,r,n){const a=We(),s=n?.locale??a.locale??vt,u=2520,o=z(t,r);if(isNaN(o))throw new RangeError("Invalid time value");const i=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[x,d]=B(n?.in,...o>0?[r,t]:[t,r]),g=Ve(d,x),p=(ee(d)-ee(x))/1e3,h=Math.round((g-p)/60);let l;if(h<2)return n?.includeSeconds?g<5?s.formatDistance("lessThanXSeconds",5,i):g<10?s.formatDistance("lessThanXSeconds",10,i):g<20?s.formatDistance("lessThanXSeconds",20,i):g<40?s.formatDistance("halfAMinute",0,i):g<60?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",1,i):h===0?s.formatDistance("lessThanXMinutes",1,i):s.formatDistance("xMinutes",h,i);if(h<45)return s.formatDistance("xMinutes",h,i);if(h<90)return s.formatDistance("aboutXHours",1,i);if(h<G){const f=Math.round(h/60);return s.formatDistance("aboutXHours",f,i)}else{if(h<u)return s.formatDistance("xDays",1,i);if(h<R){const f=Math.round(h/G);return s.formatDistance("xDays",f,i)}else if(h<R*2)return l=Math.round(h/R),s.formatDistance("aboutXMonths",l,i)}if(l=Le(d,x),l<12){const f=Math.round(h/R);return s.formatDistance("xMonths",f,i)}else{const f=l%12,v=Math.trunc(l/12);return f<3?s.formatDistance("aboutXYears",v,i):f<9?s.formatDistance("overXYears",v,i):s.formatDistance("almostXYears",v+1,i)}}function wt(t,r){return jt(t,Ae(t),r)}const Nt={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},Mt=(t,r,n)=>{let a;const s=Nt[t];return typeof s=="string"?a=s:r===1?a=s.one:a=s.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"en "+a:"hace "+a:a},kt={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Ct={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},St={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Pt={date:T({formats:kt,defaultWidth:"full"}),time:T({formats:Ct,defaultWidth:"full"}),dateTime:T({formats:St,defaultWidth:"full"})},Et={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Dt={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},$t=(t,r,n,a)=>r.getHours()!==1?Dt[t]:Et[t],Tt={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Wt={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},At={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},It={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},Ft={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},Ot={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Rt=(t,r)=>Number(t)+"º",zt={ordinalNumber:Rt,era:S({values:Tt,defaultWidth:"wide"}),quarter:S({values:Wt,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:S({values:At,defaultWidth:"wide"}),day:S({values:It,defaultWidth:"wide"}),dayPeriod:S({values:Ft,defaultWidth:"wide",formattingValues:Ot,defaultFormattingWidth:"wide"})},_t=/^(\d+)(º)?/i,Lt=/\d+/i,Vt={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Ht={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Xt={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},qt={any:[/1/i,/2/i,/3/i,/4/i]},Yt={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},Bt={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},Ut={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},Jt={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},Kt={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},Qt={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},Gt={ordinalNumber:ae({matchPattern:_t,parsePattern:Lt,valueCallback:function(t){return parseInt(t,10)}}),era:P({matchPatterns:Vt,defaultMatchWidth:"wide",parsePatterns:Ht,defaultParseWidth:"any"}),quarter:P({matchPatterns:Xt,defaultMatchWidth:"wide",parsePatterns:qt,defaultParseWidth:"any",valueCallback:t=>t+1}),month:P({matchPatterns:Yt,defaultMatchWidth:"wide",parsePatterns:Bt,defaultParseWidth:"any"}),day:P({matchPatterns:Ut,defaultMatchWidth:"wide",parsePatterns:Jt,defaultParseWidth:"any"}),dayPeriod:P({matchPatterns:Kt,defaultMatchWidth:"any",parsePatterns:Qt,defaultParseWidth:"any"})},Zt={code:"es",formatDistance:Mt,formatLong:Pt,formatRelative:$t,localize:zt,match:Gt,options:{weekStartsOn:1,firstWeekContainsDate:1}},jr=({chats:t,selectedChatId:r,onSelectChat:n,loading:a,searchTerm:s,onSearchChange:u,statusFilter:o,onStatusFilterChange:i,unreadFilter:x,onUnreadFilterChange:d,isSeller:g=!1})=>{const p=l=>{if(!l)return"fecha desconocida";try{return wt(new Date(l),{addSuffix:!0,locale:Zt})}catch{return"fecha desconocida"}},h=l=>g?{name:l.user?.name||`Cliente #${l.userId}`,avatar:l.user?.avatar,id:l.userId,icon:e.jsx(F,{className:"h-6 w-6 text-gray-500"})}:{name:l.seller?.storeName||`Vendedor #${l.sellerId}`,avatar:l.seller?.avatar,id:l.sellerId,icon:e.jsx(H,{className:"h-6 w-6 text-gray-500"})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white flex-shrink-0",children:[e.jsxs("div",{className:"mb-2 relative",children:[e.jsx("input",{type:"text",placeholder:"Buscar conversaciones...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:s,onChange:l=>u(l.target.value)}),e.jsx(ne,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-1.5 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",value:o,onChange:l=>i(l.target.value),children:[e.jsx("option",{value:"all",children:"Todos"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"closed",children:"Cerrados"}),e.jsx("option",{value:"archived",children:"Archivados"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"unreadOnly",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:x,onChange:l=>d(l.target.checked)}),e.jsx("label",{htmlFor:"unreadOnly",className:"ml-2 text-sm text-gray-700",children:"Solo no leídos"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:a?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:g?e.jsx(F,{className:"h-8 w-8 text-gray-500"}):e.jsx(H,{className:"h-8 w-8 text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No hay conversaciones"}),e.jsx("p",{className:"text-gray-500 mt-2",children:s||o!=="all"||x?"No se encontraron resultados con los filtros actuales":g?"Cuando los clientes inicien conversaciones, aparecerán aquí":"Inicia una conversación con un vendedor desde la página de un producto"})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:t.map(l=>{const f=h(l),v=l.id||0;return e.jsx("div",{className:`p-4 hover:bg-gray-50 cursor-pointer transition-colors border-l-4 ${r===v?"bg-primary-50 border-l-primary-500":"border-l-transparent hover:border-l-gray-300"}`,onClick:()=>n(l),children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:f.avatar?e.jsx("img",{src:f.avatar,alt:f.name,className:"h-12 w-12 rounded-full border-2 border-white shadow-sm",onError:N=>{const k=N.target;k.onerror=null,k.src="https://via.placeholder.com/48?text=U"}}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white shadow-sm",children:f.icon})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h3",{className:`text-sm font-medium truncate pr-2 ${r===v?"text-primary-700":"text-gray-900"}`,children:f.name}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-500",children:p(l.updatedAt)}),l.unreadCount&&l.unreadCount>0&&e.jsx("span",{className:"inline-flex items-center justify-center h-5 w-5 rounded-full bg-primary-600 text-white text-xs font-medium",children:l.unreadCount>99?"99+":l.unreadCount})]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mb-2",children:[e.jsx(se,{className:"h-3 w-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:l.product?.name||`Producto #${l.productId}`})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center min-w-0 flex-1",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium mr-2 flex-shrink-0 ${l.status==="active"?"bg-green-100 text-green-800":l.status==="closed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx(I,{className:"w-1.5 h-1.5 mr-1",fill:"currentColor"}),l.status==="active"?"Activo":l.status==="closed"?"Cerrado":"Archivado"]})})}),e.jsx("div",{className:"mt-1",children:e.jsx("p",{className:"text-sm text-gray-600 truncate",children:l.lastMessage?.content||"Sin mensajes"})})]})]})},`chat-${v}`)})})}),t.length>10&&e.jsx("div",{className:"p-2 border-t border-gray-200 bg-gray-50 text-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[t.length," conversaciones • Desliza para ver más"]})})]})},er=(t,r)=>r?t.content&&t.content.includes("[ERROR]")?"error":!t.id||t.id<0?"sending":t.isRead?"read":t.createdAt?"delivered":"sent":"delivered",tr=({status:t})=>{const r=()=>{switch(t){case"sending":return e.jsx("div",{className:"flex items-center",children:e.jsx(q,{className:"h-3 w-3 text-gray-400 animate-pulse"})});case"sent":return e.jsx("div",{className:"flex items-center",children:e.jsx(ve,{className:"h-3 w-3 text-gray-400"})});case"delivered":return e.jsx("div",{className:"flex items-center",children:e.jsx(K,{className:"h-3 w-3 text-gray-400"})});case"read":return e.jsx("div",{className:"flex items-center",children:e.jsx(K,{className:"h-3 w-3 text-primary-500"})});case"error":return e.jsx("div",{className:"flex items-center",title:"Error al enviar mensaje",children:e.jsx(me,{className:"h-3 w-3 text-red-500"})});default:return null}};return e.jsx("span",{className:"ml-1 flex-shrink-0",children:r()})},rr=t=>{try{const r=$(t);if(!r)return"";if(ye(t))return"Hoy";if(pe(t))return"Ayer";{const n=new Date;return Math.floor((n.getTime()-r.getTime())/(1e3*60*60*24))<7?r.toLocaleDateString("es-EC",{weekday:"long"}):r.toLocaleDateString("es-EC",{day:"numeric",month:"long",year:r.getFullYear()!==n.getFullYear()?"numeric":void 0})}}catch(r){return console.error("Error formateando fecha separador:",r),""}},nr=t=>{try{if(!t)return"";const r=$(t);return r?r.toLocaleTimeString("es-EC",{hour:"2-digit",minute:"2-digit",hour12:!1}):""}catch(r){return console.error("Error formateando hora:",r),""}},sr=t=>{const r=[];return[...t].sort((a,s)=>{const u=a.createdAt&&$(a.createdAt)?.getTime()||0,o=s.createdAt&&$(s.createdAt)?.getTime()||0;return u-o}).forEach(a=>{if(!a.createdAt)return;const s=$(a.createdAt);if(!s)return;const u=s.toDateString();let o=r.find(i=>i.dateKey===u);o||(o={date:rr(a.createdAt),messages:[],dateKey:u},r.push(o)),o.messages.push(a)}),r},te=(t,r)=>{if(!r||t.senderId!==r.senderId)return!1;const n=t.createdAt?$(t.createdAt)?.getTime():0,a=r.createdAt?$(r.createdAt)?.getTime():0;return!n||!a?!1:(n-a)/(1e3*60)<5},wr=({messages:t,loading:r,noMessagesText:n="No hay mensajes",currentUserId:a})=>{const s=c.useRef(null),u=c.useRef(null),[o,i]=c.useState(0),[x,d]=c.useState(!0),g=()=>{if(u.current){const{scrollTop:h,scrollHeight:l,clientHeight:f}=u.current,v=l-h-f<100;d(v)}};if(c.useEffect(()=>{t.length>0&&console.log(`📱 Mostrando ${t.length} mensajes en estilo WhatsApp`),t.length>o&&x&&s.current&&s.current.scrollIntoView({behavior:"smooth"}),i(t.length)},[t.length,o,x]),c.useEffect(()=>{s.current&&t.length>0&&setTimeout(()=>{s.current?.scrollIntoView({behavior:"auto"})},100)},[]),r&&t.length===0)return e.jsx("div",{className:"flex justify-center items-center h-full p-8",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(!t.length)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mb-4",children:e.jsx(F,{className:"h-8 w-8 text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n}),e.jsx("p",{className:"text-sm text-gray-500",children:"Envía un mensaje para iniciar la conversación"})]});const p=sr(t);return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50 relative",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-2 space-y-1 messages-scroll smooth-scroll",style:{height:"calc(70vh - 180px)"},ref:u,onScroll:g,children:[p.map((h,l)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm px-3 py-1 rounded-full shadow-sm border border-gray-200",children:e.jsx("span",{className:"text-xs text-gray-600 font-medium",children:h.date})})}),h.messages.map((f,v)=>{const N=f.isMine||a!==void 0&&f.senderId===a,k=er(f,!!N),m=v>0?h.messages[v-1]:null,b=v<h.messages.length-1?h.messages[v+1]:null,w=m?te(f,m):!1,M=b?te(b,f):!1,W=()=>N?w&&M?"rounded-l-2xl rounded-r-md rounded-tr-2xl":w?"rounded-l-2xl rounded-r-2xl rounded-tr-md":M?"rounded-2xl rounded-br-md":"rounded-2xl":w&&M?"rounded-r-2xl rounded-l-md rounded-tl-2xl":w?"rounded-r-2xl rounded-l-2xl rounded-tl-md":M?"rounded-2xl rounded-bl-md":"rounded-2xl";return e.jsx("div",{className:`flex ${N?"justify-end":"justify-start"} ${w?"mt-0.5":"mt-3"}`,children:e.jsxs("div",{className:`flex max-w-xs lg:max-w-md items-end ${N?"flex-row-reverse":"flex-row"}`,children:[!N&&!M&&e.jsx("div",{className:"flex-shrink-0 mr-2 mb-1",children:f.sender?.avatar?e.jsx("img",{src:f.sender.avatar,alt:f.sender?.name,className:"h-6 w-6 rounded-full",onError:E=>{const A=E.target;A.onerror=null,A.src="https://via.placeholder.com/24?text=U"}}):e.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(F,{className:"h-3 w-3 text-gray-600"})})}),!N&&M&&e.jsx("div",{className:"w-8 flex-shrink-0"}),e.jsxs("div",{className:`
												relative px-3 py-2 max-w-full break-words shadow-sm
												${W()}
												${N?"bg-primary-500 text-white":"bg-white text-gray-800 border border-gray-200"}
											`,children:[!N&&!w&&f.sender?.name&&e.jsx("p",{className:"text-xs font-medium text-primary-600 mb-1",children:f.sender.name}),e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words leading-relaxed",children:f.content}),e.jsxs("div",{className:`
													flex items-center justify-end mt-1 space-x-1
													${N?"text-primary-100":"text-gray-500"}
												`,children:[e.jsx("span",{className:"text-xs",children:nr(f.createdAt||"")}),N&&e.jsx(tr,{status:k})]})]})]})},f.id||`temp-${l}-${v}`)})]},`${h.dateKey}-${l}`)),e.jsx("div",{ref:s,className:"h-1"}),r&&t.length>0&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm px-3 py-1 rounded-full shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-primary-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Cargando mensajes..."})]})})})]}),!x&&e.jsx("div",{className:"absolute bottom-20 right-4 z-10",children:e.jsx("button",{onClick:()=>{d(!0),s.current?.scrollIntoView({behavior:"smooth"})},className:"bg-primary-500 text-white p-3 rounded-full shadow-lg hover:bg-primary-600 transition-all transform hover:scale-105 active:scale-95",title:"Ir al final",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})}),e.jsx("div",{className:`scroll-indicator ${t.length>10?"visible":""}`}),t.length>10&&e.jsx("div",{className:"scroll-hint",children:"Desliza para ver más mensajes"})]})},oe=({chatId:t,participantId:r,pollInterval:n=3e4,enableTypingIndicator:a=!0})=>{const{user:s}=fe(),[u,o]=c.useState({isOnline:!1,lastSeen:null,isTyping:!1}),[i,x]=c.useState(navigator.onLine),d=c.useRef(null),g=c.useRef(null),p=c.useRef(new Date),h=c.useRef(!1);c.useEffect(()=>{const m=()=>x(!0),b=()=>x(!1);return window.addEventListener("online",m),window.addEventListener("offline",b),()=>{window.removeEventListener("online",m),window.removeEventListener("offline",b)}},[]);const l=c.useCallback(async()=>{if(!r||!i||h.current)return null;try{h.current=!0;const m=await V.get(`/api/users/${r}/status`);if(m?.data){const{is_online:b,last_seen:w,is_typing:M}=m.data;return{isOnline:!!b,lastSeen:w?new Date(w):null,isTyping:!!M}}}catch(m){return console.warn("Error fetching online status:",m),f()}finally{h.current=!1}return null},[r,i]),f=c.useCallback(()=>{const m=new Date,w=Math.random()>.75;let M=null;if(!w){const E=Math.floor(Math.random()*240)+5;M=new Date(m.getTime()-E*60*1e3)}const W=w&&Math.random()>.95;return{isOnline:w,lastSeen:M,isTyping:W}},[]),v=c.useCallback(async()=>{if(!r)return;const m=await l();m&&o(m)},[l,r]),N=c.useCallback(async m=>{if(!(!a||!t||!s?.id||!i))try{g.current&&clearTimeout(g.current),m?(await V.post(`/api/chats/${t}/typing`,{user_id:s.id,is_typing:!0}),g.current=setTimeout(()=>{N(!1)},3e3)):await V.post(`/api/chats/${t}/typing`,{user_id:s.id,is_typing:!1})}catch(b){console.warn("Error sending typing indicator:",b)}},[a,t,s?.id,i]),k=c.useCallback(()=>{p.current=new Date},[]);return c.useEffect(()=>{if(!r||!i){o({isOnline:!1,lastSeen:null,isTyping:!1});return}return v(),d.current=setInterval(()=>{v()},n),()=>{d.current&&clearInterval(d.current)}},[r,i,n,v]),c.useEffect(()=>{if(!a)return;const m=["mousemove","keypress","click","scroll","touchstart"];return m.forEach(b=>{window.addEventListener(b,k,{passive:!0})}),()=>{m.forEach(b=>{window.removeEventListener(b,k)})}},[a,k]),c.useEffect(()=>()=>{d.current&&clearInterval(d.current),g.current&&clearTimeout(g.current)},[]),c.useEffect(()=>{if(!s?.id||!i)return;const m=()=>{navigator.sendBeacon(`/api/users/${s.id}/activity`,JSON.stringify({last_seen:new Date().toISOString()}))},b=()=>{document.visibilityState==="hidden"&&m()};return window.addEventListener("beforeunload",m),document.addEventListener("visibilitychange",b),()=>{window.removeEventListener("beforeunload",m),document.removeEventListener("visibilitychange",b)}},[s?.id,i]),{onlineStatus:u,sendTypingIndicator:N,refreshOnlineStatus:v,isConnected:i}},ar=t=>{const{sendTypingIndicator:r}=oe({chatId:t,enableTypingIndicator:!0}),[n,a]=c.useState(!1),s=c.useRef(null),u=c.useCallback(()=>{n||(a(!0),r(!0)),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{a(!1),r(!1)},3e3)},[n,r]),o=c.useCallback(()=>{n&&(a(!1),r(!1)),s.current&&clearTimeout(s.current)},[n,r]);return c.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]),{isTyping:n,startTyping:u,stopTyping:o}},Nr=({chat:t,isSeller:r=!1,onUpdateStatus:n,loading:a})=>{const[s,u]=c.useState(!1),[o,i]=c.useState(!1),x=c.useRef(null),d=r?{name:t.user?.name||`Cliente #${t.userId}`,avatar:t.user?.avatar,id:t.userId,icon:e.jsx(F,{className:"h-6 w-6 text-gray-500"}),route:`/admin/users/${t.userId}`}:{name:t.seller?.storeName||`Vendedor #${t.sellerId}`,avatar:t.seller?.avatar,id:t.sellerId,icon:e.jsx(H,{className:"h-6 w-6 text-gray-500"}),route:`/sellers/${t.sellerId}`},{onlineStatus:g}=oe({chatId:t.id,participantId:d.id,pollInterval:3e4,enableTypingIndicator:!0}),{isOnline:p,lastSeen:h,isTyping:l}=g,f=r?`/seller/products/edit/${t.productId}`:`/products/${t.productId}`;c.useEffect(()=>{const m=b=>{x.current&&!x.current.contains(b.target)&&u(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const v=()=>{u(!1)},N=async m=>{if(!(a||o||!t.id)){i(!0),v();try{console.log(`Cambiando estado de chat ${t.id} a ${m}`),await n(t.id,m)||console.error(`Error al cambiar estado a ${m}`)}catch(b){console.error(`Error al actualizar estado a ${m}:`,b)}finally{i(!1)}}},k=m=>{const w=Math.floor((new Date().getTime()-m.getTime())/(1e3*60));if(w<1)return"hace un momento";if(w<60)return`hace ${w} min`;if(w<1440)return`hace ${Math.floor(w/60)} h`;{const M=Math.floor(w/1440);return M===1?"ayer":M<7?`hace ${M} días`:m.toLocaleDateString("es-EC",{day:"numeric",month:"short"})}};return e.jsx("div",{className:"p-4 border-b border-gray-200 bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsxs("div",{className:"flex-shrink-0 mr-3 relative",children:[d.avatar?e.jsx("img",{src:d.avatar,alt:d.name,className:"h-12 w-12 rounded-full border-2 border-white shadow-sm",onError:m=>{const b=m.target;b.onerror=null,b.src="https://via.placeholder.com/48?text=U"}}):e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center border-2 border-white shadow-sm",children:d.icon}),e.jsx("div",{className:`absolute -bottom-1 -right-1 ${p?"connection-indicator":"connection-indicator offline"}`,children:e.jsx("div",{className:`w-4 h-4 rounded-full border-2 border-white shadow-sm flex items-center justify-center ${p?"bg-green-500":"bg-gray-400"}`,children:p?e.jsx($e,{size:8,className:"text-white"}):e.jsx(Ee,{size:8,className:"text-white"})})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(O,{to:d.route,className:"text-lg font-semibold text-gray-900 hover:text-primary-600 truncate transition-colors",children:d.name}),e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800":t.status==="closed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[e.jsx(I,{className:"w-1.5 h-1.5 mr-1",fill:"currentColor"}),t.status==="active"?"Activo":t.status==="closed"?"Cerrado":"Archivado"]})]}),e.jsx("div",{className:"flex items-center text-sm mb-1",children:l?e.jsxs("div",{className:"flex items-center text-primary-600 font-medium",children:[e.jsxs("div",{className:"typing-indicator flex space-x-1 mr-2",children:[e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"})]}),e.jsx("span",{children:"escribiendo..."})]}):e.jsx("div",{className:"flex items-center text-gray-500",children:p?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-2 h-2 mr-2 fill-green-500 text-green-500"}),e.jsx("span",{className:"text-green-600 font-medium",children:"En línea"})]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-2 h-2 mr-2 fill-gray-400 text-gray-400"}),e.jsx("span",{children:h?`Visto ${k(h)}`:"Desconectado"})]})})}),e.jsx("div",{className:"flex items-center text-sm text-gray-500",children:e.jsxs(O,{to:f,className:"text-primary-600 hover:text-primary-700 hover:underline flex items-center truncate",title:t.product?.name||`Producto #${t.productId}`,children:[e.jsx(se,{className:"h-3.5 w-3.5 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-xs",children:t.product?.name||`Producto #${t.productId}`}),e.jsx(he,{size:14,className:"ml-1 flex-shrink-0"})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[(a||o)&&e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-gray-400 mr-2"}),e.jsx("span",{className:"text-sm",children:o?"Actualizando...":"Cargando..."})]}),e.jsxs("div",{className:"relative",ref:x,children:[e.jsx("button",{onClick:()=>u(!s),className:"p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",disabled:a||o,title:"Más opciones",children:e.jsx(be,{className:"h-5 w-5 text-gray-600"})}),s&&e.jsxs("div",{className:"absolute right-0 z-20 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Chat ID: ",t.id]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Creado: ",t.createdAt?new Date(t.createdAt).toLocaleDateString("es-EC"):"N/A"]})]}),t.status==="active"&&e.jsxs("button",{onClick:()=>N("closed"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",disabled:a||o,children:[e.jsx(q,{className:"inline h-4 w-4 mr-2"}),"Cerrar conversación"]}),t.status==="closed"&&e.jsxs("button",{onClick:()=>N("active"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",disabled:a||o,children:[e.jsx(I,{className:"inline h-4 w-4 mr-2"}),"Reabrir conversación"]}),t.status!=="archived"&&e.jsx("button",{onClick:()=>N("archived"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",disabled:a||o,children:"📦 Archivar conversación"}),t.status==="archived"&&e.jsx("button",{onClick:()=>N("active"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",disabled:a||o,children:"📤 Desarchivar conversación"}),e.jsxs("div",{className:"border-t border-gray-100 mt-1",children:[e.jsx(O,{to:d.route,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"👤 Ver perfil"}),e.jsx(O,{to:f,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"📦 Ver producto"})]})]})]})]})]})})},X={Frecuentes:{icon:"🕒",emojis:["😊","😂","❤️","👍","👌","🙏","😍","🎉","🤔","😭","🔥","💪"]},Emociones:{icon:"😊",emojis:["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕"]},Gestos:{icon:"👍",emojis:["👍","👎","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👏","🙌","👐","🤲","🤝","🙏","✍️","💅","🤳","💪","🦾","🦿","🦵","🦶","👂","🦻","👃","🧠","🫀","🫁","🦷","🦴","👀","👁️","👅","👄","💋"]},Objetos:{icon:"❤️",emojis:["❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🔥","💯","💢","💦","💨","🎉","🎊","🎈","🎁","🏆","🥇","🥈","🥉","⭐","🌟","💫","✨"]},Animales:{icon:"🐶",emojis:["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐻‍❄️","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦅","🦉","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐞","🐜","🦟","🦗","🕷️","🦂","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦞","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🦧","🐘","🦣","🦏","🦛","🐪","🐫","🦒","🦘","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🦙","🐐","🦌","🐕","🐩","🦮","🐕‍🦺","🐈","🐈‍⬛","🐓","🦃","🦚","🦜","🦢","🦩","🕊️","🐇","🦝","🦨","🦡","🦦","🦥","🐁","🐀","🐿️"]},Comida:{icon:"🍕",emojis:["🍎","🍏","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🍒","🍑","🥭","🍍","🥥","🥝","🍅","🍆","🥑","🥦","🥬","🥒","🌶️","🫑","🌽","🥕","🫒","🧄","🧅","🥔","🍠","🥐","🥯","🍞","🥖","🥨","🧀","🥚","🍳","🧈","🥞","🧇","🥓","🥩","🍗","🍖","🦴","🌭","🍔","🍟","🍕","🫓","🥪","🥙","🧆","🌮","🌯","🫔","🥗","🥘","🫕","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🦪","🍤","🍙","🍚","🍘","🍥","🥠","🥮","🍢","🍡","🍧","🍨","🍦","🥧","🧁","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🍩","🍪","🌰","🥜"]},Actividades:{icon:"⚽",emojis:["⚽","🏀","🏈","⚾","🥎","🎾","🏐","🏉","🥏","🎱","🪀","🏓","🏸","🏑","🏒","🥍","🏏","🪃","🥅","⛳","🪁","🏹","🎣","🤿","🥊","🥋","🎽","🛹","🛷","⛸️","🥌","🎿","⛷️","🏂","🪂","🏋️","🤼","🤸","⛹️","🤺","🏌️","🏇","🧘","🏄","🏊","🤽","🚣","🧗","🚵","🚴","🏆","🥇","🥈","🥉","🏅","🎖️","🏵️","🎗️","🎫","🎟️","🎪","🤹","🎭","🩰","🎨","🎬","🎤","🎧","🎼","🎵","🎶","🎹","🥁","🎷","🎺","🎸","🪕","🎻","🎲","♠️","♥️","♦️","♣️","♟️","🃏","🀄","🎴","🎮","🕹️","🎯"]},Viajes:{icon:"✈️",emojis:["🚗","🚕","🚙","🚌","🚎","🏎️","🚓","🚑","🚒","🚐","🛻","🚚","🚛","🚜","🏍️","🛵","🚲","🛴","🛹","🛼","🚁","🛸","✈️","🛩️","🛫","🛬","🪂","⛵","🚤","🛥️","🛳️","⛴️","🚢","⚓","⛽","🚧","🚦","🚥","🚏","🗺️","🎡","🎢","🎠","⛲","⛱️","🏖️","🏝️","🏜️","🌋","⛰️","🏔️","🗻","🏕️","⛺","🏠","🏡","🏘️","🏚️","🏗️","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛️","⛪","🕌","🛕","🕍","🕋","⛩️","🛤️","🛣️","🗾","🎑","🏞️","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙️","🌃","🌌","🌉","🌁"]}},re=()=>{try{const t=localStorage.getItem("frequent-emojis");if(t)return JSON.parse(t).slice(0,12)}catch(t){console.error("Error loading frequent emojis:",t)}return X.Frecuentes.emojis},or=t=>{try{const r=localStorage.getItem("frequent-emojis");let n=r?JSON.parse(r):[];n=n.filter(a=>a!==t),n.unshift(t),n=n.slice(0,20),localStorage.setItem("frequent-emojis",JSON.stringify(n))}catch(r){console.error("Error saving emoji usage:",r)}},Mr=({onSendMessage:t,isDisabled:r=!1,disabledText:n="Esta conversación está cerrada",placeholder:a="Escribe un mensaje...",isLoading:s=!1,chatId:u})=>{const[o,i]=c.useState(""),[x,d]=c.useState(null),[g,p]=c.useState(!1),[h,l]=c.useState("Frecuentes"),[f,v]=c.useState(""),[N,k]=c.useState(()=>re()),m=c.useRef(null),b=c.useRef(null),w=c.useRef(null),M=c.useRef(!0),{startTyping:W,stopTyping:E}=ar(u);c.useEffect(()=>()=>{M.current=!1,E()},[E]),c.useEffect(()=>{g&&k(re())},[g]),c.useEffect(()=>{m.current&&!r&&m.current.focus()},[r]),c.useEffect(()=>{const y=j=>{b.current&&!b.current.contains(j.target)&&(p(!1),v(""))};return g&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[g]),c.useEffect(()=>{g&&w.current&&setTimeout(()=>{w.current?.focus()},100)},[g]);const A=async y=>{if(y.preventDefault(),d(null),r||s||!o.trim()){console.log("Envío bloqueado:",{isDisabled:r,isLoading:s,messageEmpty:!o.trim()});return}const j=o.trim();E();try{console.log("Enviando mensaje:",j);const C=await t(j);M.current&&(C?(console.log("Mensaje enviado correctamente"),i(""),m.current&&(m.current.style.height="auto",m.current.focus())):(console.error("Error al enviar mensaje"),d("No se pudo enviar el mensaje. Inténtalo de nuevo.")))}catch(C){console.error("Error al enviar mensaje:",C),M.current&&d("Error al enviar mensaje. Por favor, inténtalo de nuevo.")}},ie=y=>{x&&d(null),(y.ctrlKey||y.metaKey)&&y.key==="Enter"&&(y.preventDefault(),A(y))},le=y=>{const j=y.target,C=j.value;j.style.height="auto";const L=Math.min(Math.max(j.scrollHeight,40),150);j.style.height=`${L}px`,i(C),C.trim()&&!r&&!s?W():C.trim()||E()},ce=y=>{const j=m.current;if(!j)return;const C=j.selectionStart,L=j.selectionEnd,de=o.slice(0,C)+y+o.slice(L);i(de),or(y),setTimeout(()=>{if(j){j.focus(),j.setSelectionRange(C+y.length,C+y.length),j.style.height="auto";const ue=Math.min(Math.max(j.scrollHeight,40),150);j.style.height=`${ue}px`}},0)},U=y=>f.trim()?y.filter(j=>j.includes(f.trim())):y,J=()=>U(h==="Frecuentes"?N:X[h].emojis);return r?e.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-500",children:[e.jsx(q,{size:16}),e.jsx("p",{className:"text-sm",children:n})]})}):e.jsxs("div",{className:"p-4 border-t border-gray-200 bg-white relative",children:[x&&e.jsxs("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 text-red-600 text-sm rounded-lg flex items-start space-x-2",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:"⚠️"}),e.jsx("div",{className:"flex-1",children:x}),e.jsx("button",{onClick:()=>d(null),className:"flex-shrink-0 text-red-400 hover:text-red-600",children:"×"})]}),g&&e.jsxs("div",{ref:b,className:"absolute bottom-full left-4 right-4 mb-2 bg-white border border-gray-300 rounded-xl shadow-xl z-50 overflow-hidden",style:{maxHeight:"320px"},children:[e.jsx("div",{className:"p-3 border-b border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{ref:w,type:"text",placeholder:"Buscar emojis...",value:f,onChange:y=>v(y.target.value),className:"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:Object.entries(X).map(([y,j])=>e.jsx("button",{onClick:()=>{l(y),v("")},className:`flex-shrink-0 px-3 py-2 text-lg hover:bg-gray-100 transition-colors ${h===y?"bg-primary-100 border-b-2 border-primary-500":""}`,title:y,children:y==="Frecuentes"?"🕒":j.icon},y))})}),e.jsxs("div",{className:"p-2 max-h-48 overflow-y-auto emoji-scroll",children:[e.jsx("div",{className:"grid grid-cols-8 gap-1",children:J().map((y,j)=>e.jsx("button",{onClick:()=>{ce(y)},className:"p-2 text-lg hover:bg-gray-100 rounded-lg transition-colors transform hover:scale-110 active:scale-95",title:y,children:y},`${y}-${j}`))}),J().length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-2xl mb-2",children:"🔍"}),e.jsx("p",{className:"text-sm",children:"No se encontraron emojis"})]})]}),e.jsx("div",{className:"p-2 border-t border-gray-200 bg-gray-50 text-center",children:e.jsx("button",{onClick:()=>p(!1),className:"text-xs text-gray-500 hover:text-gray-700",children:"Presiona ESC para cerrar"})})]}),e.jsxs("form",{onSubmit:A,className:"flex items-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>p(!g),className:`flex-shrink-0 p-2 rounded-full transition-colors ${g?"bg-primary-100 text-primary-600":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,disabled:s,title:"Insertar emoji",children:e.jsx(Se,{size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{ref:m,value:o,onChange:le,onKeyDown:ie,placeholder:a,className:"w-full border border-gray-300 rounded-2xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 resize-none scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",rows:1,style:{minHeight:"44px",maxHeight:"150px"},disabled:s}),e.jsxs("div",{className:"flex items-center justify-between mt-1 px-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:s?"Enviando...":"Ctrl+Enter para enviar"}),o.length>0&&e.jsxs("p",{className:"text-xs text-gray-400",children:[o.length,"/2000"]})]})]}),e.jsx("button",{type:"submit",className:`flex-shrink-0 h-11 w-11 rounded-full flex items-center justify-center transition-all transform ${o.trim()&&!s?"bg-primary-600 text-white hover:bg-primary-700 hover:scale-105 active:scale-95 shadow-lg":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!o.trim()||s,title:s?"Enviando...":"Enviar mensaje",children:s?e.jsx(je,{className:"h-5 w-5 animate-spin"}):e.jsx(we,{size:18})})]}),g&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>p(!1),onKeyDown:y=>{y.key==="Escape"&&p(!1)},tabIndex:-1})]})},ir=({isVisible:t,onClose:r,type:n,message:a,censoredContent:s,strikeCount:u,autoClose:o=!0,autoCloseTime:i=8e3})=>{const[x,d]=c.useState(100);c.useEffect(()=>{if(o&&t){const h=setInterval(()=>{d(l=>{const f=l-100/(i/100);return f<=0?(r(),0):f})},100);return()=>clearInterval(h)}},[o,i,t,r]);const g=()=>{switch(n){case"user_warning":return{icon:e.jsx(Q,{className:"text-yellow-500",size:24}),bgColor:"bg-yellow-50",borderColor:"border-yellow-200",titleColor:"text-yellow-800",textColor:"text-yellow-700",progressColor:"bg-yellow-500",title:"Mensaje no permitido"};case"seller_strike":return{icon:e.jsx(Me,{className:"text-orange-500",size:24}),bgColor:"bg-orange-50",borderColor:"border-orange-200",titleColor:"text-orange-800",textColor:"text-orange-700",progressColor:"bg-orange-500",title:"Strike aplicado"};case"seller_blocked":return{icon:e.jsx(Ne,{className:"text-red-500",size:24}),bgColor:"bg-red-50",borderColor:"border-red-200",titleColor:"text-red-800",textColor:"text-red-700",progressColor:"bg-red-500",title:"Cuenta bloqueada"};default:return{icon:e.jsx(Q,{className:"text-gray-500",size:24}),bgColor:"bg-gray-50",borderColor:"border-gray-200",titleColor:"text-gray-800",textColor:"text-gray-700",progressColor:"bg-gray-500",title:"Notificación"}}};if(!t)return null;const p=g();return e.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-sm w-full",children:e.jsxs("div",{className:`
        ${p.bgColor} ${p.borderColor} border rounded-lg shadow-lg
        transform transition-all duration-300 animate-slide-in-right
      `,children:[o&&e.jsx("div",{className:"h-1 bg-gray-200 rounded-t-lg overflow-hidden",children:e.jsx("div",{className:`h-full ${p.progressColor} transition-all duration-100 ease-linear`,style:{width:`${x}%`}})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 mr-3",children:p.icon}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`text-sm font-medium ${p.titleColor} mb-1`,children:p.title}),e.jsx("p",{className:`text-sm ${p.textColor} mb-2`,children:a}),s&&e.jsxs("div",{className:"mt-2 p-2 bg-white bg-opacity-50 rounded border",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Mensaje filtrado:"}),e.jsx("p",{className:"text-sm font-mono text-gray-800",children:s})]}),typeof u=="number"&&u>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex space-x-1",children:[1,2,3].map(h=>e.jsx("div",{className:`w-3 h-3 rounded-full ${h<=u?"bg-red-500":"bg-gray-300"}`},h))}),e.jsxs("span",{className:"text-xs text-gray-600",children:[u,"/3 strikes"]})]}),u>=3&&e.jsx("p",{className:"text-xs text-red-600 mt-1 font-medium",children:"Tu cuenta ha sido bloqueada por acumular 3 strikes."})]})]}),e.jsx("button",{onClick:r,className:"ml-2 flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xe,{size:16})})]})})]})})]})})},kr=()=>{const[t,r]=c.useState(null),n=(x,d,g,p)=>{r({isVisible:!0,type:x,message:d,censoredContent:g,strikeCount:p})},a=()=>{r(x=>x?{...x,isVisible:!1}:null),setTimeout(()=>r(null),300)};return{showUserWarning:(x,d)=>{n("user_warning",x,d)},showSellerStrike:(x,d,g)=>{n("seller_strike",x,g,d)},showSellerBlocked:x=>{n("seller_blocked",x)},hideNotification:a,NotificationComponent:()=>t?e.jsx(ir,{isVisible:t.isVisible,onClose:a,type:t.type,message:t.message,censoredContent:t.censoredContent,strikeCount:t.strikeCount}):null}};export{jr as C,Mr as M,Nr as a,wr as b,kr as u};
//# sourceMappingURL=ChatFilterToast-DPT1PUcO.js.map

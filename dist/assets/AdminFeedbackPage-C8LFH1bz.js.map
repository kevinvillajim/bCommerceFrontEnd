{"version":3,"file":"AdminFeedbackPage-C8LFH1bz.js","sources":["../../src/presentation/pages/admin/AdminFeedbackPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Table from \"../../components/dashboard/Table\";\r\nimport {\r\n  User,\r\n  MessageSquare,\r\n  CheckCircle,\r\n  XCircle,\r\n  AlertTriangle,\r\n  Clock,\r\n  RefreshCw,\r\n  Filter,\r\n  Calendar,\r\n  BarChart2,\r\n  Eye,\r\n  Tag,\r\n  Store,\r\n  Gift,\r\n  Star\r\n} from \"lucide-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport StatCardList from \"../../components/dashboard/StatCardList\";\r\nimport ApiClient from \"../../../infrastructure/api/apiClient\";\r\nimport { API_ENDPOINTS } from \"../../../constants/apiEndpoints\";\r\n\r\ninterface User {\r\n  id: number;\r\n  name: string;\r\n  email?: string;\r\n}\r\n\r\ninterface Seller {\r\n  id: number;\r\n  store_name: string;\r\n  user_id: number;\r\n}\r\n\r\ninterface Admin {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\ninterface Feedback {\r\n  id: number;\r\n  user_id: number;\r\n  seller_id?: number;\r\n  title: string;\r\n  description: string;\r\n  type: 'bug' | 'improvement' | 'other';\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  admin_notes?: string;\r\n  reviewed_by?: number;\r\n  reviewed_at?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n  user?: User;\r\n  seller?: Seller;\r\n  admin?: Admin;\r\n  discount_code?: {\r\n    code: string;\r\n    discount_percentage: number;\r\n    expires_at: string;\r\n  };\r\n  seller_featured?: {\r\n    featured_at: string;\r\n    featured_expires_at: string;\r\n    featured_days: number;\r\n    is_active: boolean;\r\n  };\r\n}\r\n\r\n// Mapeo de estado para feedback\r\nconst feedbackStatusMap: Record<string, { label: string, color: string, icon: React.ReactNode }> = {\r\n  pending: { \r\n    label: \"Pendiente\", \r\n    color: \"bg-yellow-100 text-yellow-800\",\r\n    icon: <Clock className=\"w-3 h-3 mr-1\" />\r\n  },\r\n  approved: { \r\n    label: \"Aprobado\", \r\n    color: \"bg-green-100 text-green-800\",\r\n    icon: <CheckCircle className=\"w-3 h-3 mr-1\" />\r\n  },\r\n  rejected: { \r\n    label: \"Rechazado\", \r\n    color: \"bg-red-100 text-red-800\",\r\n    icon: <XCircle className=\"w-3 h-3 mr-1\" />\r\n  }\r\n};\r\n\r\n// Mapeo de tipo de feedback\r\nconst feedbackTypeMap: Record<string, { label: string, color: string, icon: React.ReactNode }> = {\r\n  improvement: { \r\n    label: \"Mejora\", \r\n    color: \"bg-blue-100 text-blue-800\",\r\n    icon: <Tag className=\"w-3 h-3 mr-1\" />\r\n  },\r\n  bug: { \r\n    label: \"Error/Bug\", \r\n    color: \"bg-red-100 text-red-800\",\r\n    icon: <AlertTriangle className=\"w-3 h-3 mr-1\" />\r\n  },\r\n  other: { \r\n    label: \"Otro\", \r\n    color: \"bg-gray-100 text-gray-800\",\r\n    icon: <MessageSquare className=\"w-3 h-3 mr-1\" />\r\n  }\r\n};\r\n\r\nconst AdminFeedbackPage: React.FC = () => {\r\n\tconst [feedback, setFeedback] = useState<Feedback[]>([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\tconst [typeFilter, setTypeFilter] = useState<string>(\"all\");\r\n\tconst [dateRangeFilter, setDateRangeFilter] = useState<{\r\n\t\tfrom: string;\r\n\t\tto: string;\r\n\t}>({\r\n\t\tfrom: \"\",\r\n\t\tto: \"\",\r\n\t});\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tcurrentPage: 1,\r\n\t\ttotalPages: 1,\r\n\t\ttotalItems: 0,\r\n\t\titemsPerPage: 10,\r\n\t});\r\n\tconst [selectedFeedback, setSelectedFeedback] = useState<Feedback | null>(null);\r\n\tconst [showFeedbackModal, setShowFeedbackModal] = useState(false);\r\n\tconst [adminNote, setAdminNote] = useState(\"\");\r\n\tconst [generateDiscountCode, setGenerateDiscountCode] = useState(true);\r\n\tconst [validityDays, setValidityDays] = useState(30);\r\n\tconst [isProcessing, setIsProcessing] = useState(false);\r\n\r\n\t// Cargar datos de feedback\r\n\tuseEffect(() => {\r\n\t\tfetchFeedback();\r\n\t}, [pagination.currentPage, statusFilter, typeFilter, dateRangeFilter]);\r\n\r\n\tconst fetchFeedback = async () => {\r\n\t\ttry {\r\n\t\t\tsetLoading(true);\r\n\t\t\tconst params = new URLSearchParams({\r\n\t\t\t\tlimit: pagination.itemsPerPage.toString(),\r\n\t\t\t\toffset: ((pagination.currentPage - 1) * pagination.itemsPerPage).toString()\r\n\t\t\t});\r\n\r\n\t\t\t// Aplicar filtros\r\n\t\t\tif (statusFilter !== 'all') {\r\n\t\t\t\tparams.append('status', statusFilter);\r\n\t\t\t}\r\n\t\t\tif (typeFilter !== 'all') {\r\n\t\t\t\tparams.append('type', typeFilter);\r\n\t\t\t}\r\n\t\t\tif (dateRangeFilter.from) {\r\n\t\t\t\tparams.append('from_date', dateRangeFilter.from);\r\n\t\t\t}\r\n\t\t\tif (dateRangeFilter.to) {\r\n\t\t\t\tparams.append('to_date', dateRangeFilter.to);\r\n\t\t\t}\r\n\r\n\t\t\tconst response = await ApiClient.get(`${API_ENDPOINTS.ADMIN.PENDING_FEEDBACK}?${params.toString()}`) as {\r\n\t\t\t\tstatus: string;\r\n\t\t\t\tdata: Feedback[];\r\n\t\t\t\tmeta?: { total: number };\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tif (response.status === 'success') {\r\n\t\t\t\tsetFeedback(response.data || []);\r\n\t\t\t\tsetPagination(prev => ({\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\ttotalItems: response.meta?.total || 0,\r\n\t\t\t\t\ttotalPages: Math.ceil((response.meta?.total || 0) / pagination.itemsPerPage)\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching feedback:', error);\r\n\t\t\tsetFeedback([]);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// ✅ El filtrado ahora se hace en el backend, no necesitamos filtrar en el frontend\r\n\tconst filteredFeedback = feedback;\r\n\r\n\t// Abrir modal de feedback\r\n\tconst openFeedbackModal = (item: Feedback) => {\r\n\t\tsetSelectedFeedback(item);\r\n\t\tsetAdminNote(item.admin_notes || \"\");\r\n\t\tsetGenerateDiscountCode(true);\r\n\t\tsetValidityDays(30);\r\n\t\tsetShowFeedbackModal(true);\r\n\t};\r\n\r\n\t// Cerrar modal de feedback\r\n\tconst closeFeedbackModal = () => {\r\n\t\tsetSelectedFeedback(null);\r\n\t\tsetShowFeedbackModal(false);\r\n\t\tsetAdminNote(\"\");\r\n\t\tsetGenerateDiscountCode(true);\r\n\t\tsetValidityDays(30);\r\n\t\tsetIsProcessing(false);\r\n\t};\r\n\r\n\t// Aprobar feedback\r\n\tconst approveFeedback = async (feedbackId: number) => {\r\n\t\tif (!adminNote.trim()) {\r\n\t\t\talert(\"Por favor, proporciona una nota de administrador para la aprobación.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsetIsProcessing(true);\r\n\t\t\t\r\n\t\t\tconst approvalData = {\r\n\t\t\t\tstatus: 'approved',\r\n\t\t\t\tadmin_notes: adminNote,\r\n\t\t\t\tgenerate_discount: generateDiscountCode,\r\n\t\t\t\tvalidity_days: generateDiscountCode ? validityDays : undefined\r\n\t\t\t};\r\n\r\n\t\t\tconst response = await ApiClient.post(\r\n\t\t\t\t`${API_ENDPOINTS.ADMIN.REVIEW_FEEDBACK(feedbackId)}`,\r\n\t\t\t\tapprovalData\r\n\t\t\t) as {\r\n\t\t\t\tstatus: string;\r\n\t\t\t\tdata?: {\r\n\t\t\t\t\tdiscount_code?: { code: string; discount_percentage: number; expires_at: string };\r\n\t\t\t\t\tseller_featured?: { featured_at: string; featured_expires_at: string; featured_days: number; is_active: boolean };\r\n\t\t\t\t};\r\n\t\t\t\tmessage?: string;\r\n\t\t\t};\r\n\r\n\t\t\tif (response.status === 'success') {\r\n\t\t\t\t// Actualizar lista local\r\n\t\t\t\tsetFeedback((prevFeedback) =>\r\n\t\t\t\t\tprevFeedback.map((item) => {\r\n\t\t\t\t\t\tif (item.id === feedbackId) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tstatus: \"approved\" as const,\r\n\t\t\t\t\t\t\t\tadmin_notes: adminNote,\r\n\t\t\t\t\t\t\t\treviewed_at: new Date().toISOString(),\r\n\t\t\t\t\t\t\t\tupdated_at: new Date().toISOString(),\r\n\t\t\t\t\t\t\t\tdiscount_code: response.data?.discount_code,\r\n\t\t\t\t\t\t\t\tseller_featured: response.data?.seller_featured\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Mostrar mensaje de éxito\r\n\t\t\t\tlet message = `Feedback #${feedbackId} aprobado correctamente.`;\r\n\t\t\t\tif (response.data?.discount_code && !selectedFeedback?.seller_id) {\r\n\t\t\t\t\tmessage += ` Se ha generado el código de descuento '${response.data.discount_code.code}' para el usuario.`;\r\n\t\t\t\t}\r\n\t\t\t\tif (response.data?.seller_featured && selectedFeedback?.seller_id) {\r\n\t\t\t\t\tmessage += ` La tienda ha sido destacada por 15 días.`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\talert(message);\r\n\t\t\t\tcloseFeedbackModal();\r\n\t\t\t\t\r\n\t\t\t\t// Recargar datos\r\n\t\t\t\tawait fetchFeedback();\r\n\t\t\t} else {\r\n\t\t\t\talert(response.message || 'Error al aprobar feedback');\r\n\t\t\t}\r\n\t\t} catch (error: any) {\r\n\t\t\tconsole.error('Error approving feedback:', error);\r\n\t\t\tconst errorMessage = error.response?.data?.message || error.message || 'Error al aprobar feedback';\r\n\t\t\talert(errorMessage);\r\n\t\t} finally {\r\n\t\t\tsetIsProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Rechazar feedback\r\n\tconst rejectFeedback = async (feedbackId: number) => {\r\n\t\tif (!adminNote.trim()) {\r\n\t\t\talert(\"Por favor, proporciona una nota de administrador para el rechazo.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tsetIsProcessing(true);\r\n\t\t\t\r\n\t\t\tconst rejectionData = {\r\n\t\t\t\tstatus: 'rejected',\r\n\t\t\t\tadmin_notes: adminNote\r\n\t\t\t};\r\n\r\n\t\t\tconst response = await ApiClient.post(\r\n\t\t\t\t`${API_ENDPOINTS.ADMIN.REVIEW_FEEDBACK(feedbackId)}`,\r\n\t\t\t\trejectionData\r\n\t\t\t) as {\r\n\t\t\t\tstatus: string;\r\n\t\t\t\tmessage?: string;\r\n\t\t\t};\r\n\r\n\t\t\tif (response.status === 'success') {\r\n\t\t\t\t// Actualizar lista local\r\n\t\t\t\tsetFeedback((prevFeedback) =>\r\n\t\t\t\t\tprevFeedback.map((item) => {\r\n\t\t\t\t\t\tif (item.id === feedbackId) {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\t\t\tstatus: \"rejected\" as const,\r\n\t\t\t\t\t\t\t\tadmin_notes: adminNote,\r\n\t\t\t\t\t\t\t\treviewed_at: new Date().toISOString(),\r\n\t\t\t\t\t\t\t\tupdated_at: new Date().toISOString(),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn item;\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\r\n\t\t\t\talert(`Feedback #${feedbackId} rechazado.`);\r\n\t\t\t\tcloseFeedbackModal();\r\n\t\t\t\t\r\n\t\t\t\t// Recargar datos\r\n\t\t\t\tawait fetchFeedback();\r\n\t\t\t} else {\r\n\t\t\t\talert(response.message || 'Error al rechazar feedback');\r\n\t\t\t}\r\n\t\t} catch (error: any) {\r\n\t\t\tconsole.error('Error rejecting feedback:', error);\r\n\t\t\tconst errorMessage = error.response?.data?.message || error.message || 'Error al rechazar feedback';\r\n\t\t\talert(errorMessage);\r\n\t\t} finally {\r\n\t\t\tsetIsProcessing(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Formatear fecha\r\n\tconst formatDate = (dateString: string | undefined) => {\r\n\t\tif (!dateString) return \"N/A\";\r\n\r\n\t\tconst date = new Date(dateString);\r\n\t\treturn new Intl.DateTimeFormat(\"es-ES\", {\r\n\t\t\tday: \"2-digit\",\r\n\t\t\tmonth: \"2-digit\",\r\n\t\t\tyear: \"numeric\",\r\n\t\t\thour: \"2-digit\",\r\n\t\t\tminute: \"2-digit\",\r\n\t\t}).format(date);\r\n\t};\r\n\r\n\t// Manejar cambio de página\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tsetPagination((prev) => ({...prev, currentPage: page}));\r\n\t};\r\n\r\n\t// Refrescar datos\r\n\tconst refreshData = async () => {\r\n\t\tawait fetchFeedback();\r\n\t};\r\n\r\n\t// Definir columnas de la tabla\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tkey: \"user\",\r\n\t\t\theader: \"Usuario\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<div className=\"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\">\r\n\t\t\t\t\t\t<User className=\"h-4 w-4 text-gray-500\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"ml-3\">\r\n\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t{feedback.user?.name || `Usuario #${feedback.user_id}`}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\tID: {feedback.user_id}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"seller\",\r\n\t\t\theader: \"Vendedor\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => {\r\n\t\t\t\tif (feedback.seller_id && feedback.seller) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\tto={`/admin/sellers/${feedback.seller_id}`}\r\n\t\t\t\t\t\t\tclassName=\"flex items-center text-primary-600 hover:text-primary-800\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Store className=\"h-4 w-4 mr-1\" />\r\n\t\t\t\t\t\t\t{feedback.seller.store_name}\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn <span className=\"text-gray-500\">N/A</span>;\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"type\",\r\n\t\t\theader: \"Tipo\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => {\r\n\t\t\t\tconst type = feedbackTypeMap[feedback.type] || {\r\n\t\t\t\t\tlabel: feedback.type,\r\n\t\t\t\t\tcolor: \"bg-gray-100 text-gray-800\",\r\n\t\t\t\t\ticon: <AlertTriangle className=\"w-3 h-3 mr-1\" />,\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${type.color}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{type.icon}\r\n\t\t\t\t\t\t{type.label}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"title\",\r\n\t\t\theader: \"Título\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => (\r\n\t\t\t\t<div className=\"text-sm font-medium text-gray-900 line-clamp-2\">\r\n\t\t\t\t\t{feedback.title}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"date\",\r\n\t\t\theader: \"Fecha\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => (\r\n\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t{formatDate(feedback.created_at)}\r\n\t\t\t\t\t{feedback.reviewed_at && (\r\n\t\t\t\t\t\t<div>Revisado: {formatDate(feedback.reviewed_at)}</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"status\",\r\n\t\t\theader: \"Estado\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (feedback: Feedback) => {\r\n\t\t\t\tconst status = feedbackStatusMap[feedback.status] || {\r\n\t\t\t\t\tlabel: feedback.status,\r\n\t\t\t\t\tcolor: \"bg-gray-100 text-gray-800\",\r\n\t\t\t\t\ticon: <AlertTriangle className=\"w-3 h-3 mr-1\" />,\r\n\t\t\t\t};\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${status.color}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{status.icon}\r\n\t\t\t\t\t\t{status.label}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"actions\",\r\n\t\t\theader: \"Acciones\",\r\n\t\t\trender: (feedback: Feedback) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t\t{/* Ver detalles */}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => openFeedbackModal(feedback)}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-blue-600 hover:bg-blue-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Ver detalles\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Eye size={18} />\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{/* Solo mostrar botones para feedback pendiente */}\r\n\t\t\t\t\t\t{feedback.status === \"pending\" && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => openFeedbackModal(feedback)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"p-1 text-green-600 hover:bg-green-100 rounded-md\"\r\n\t\t\t\t\t\t\t\t\ttitle=\"Revisar y aprobar\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<CheckCircle size={18} />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => openFeedbackModal(feedback)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"p-1 text-red-600 hover:bg-red-100 rounded-md\"\r\n\t\t\t\t\t\t\t\t\ttitle=\"Revisar y rechazar\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<XCircle size={18} />\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t{/* Mostrar recompensas si está aprobado */}\r\n\t\t\t\t\t\t{feedback.status === \"approved\" && (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t{feedback.discount_code && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"p-1 text-blue-600\" title=\"Cupón generado\">\r\n\t\t\t\t\t\t\t\t\t\t<Gift size={18} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{feedback.seller_featured && (\r\n\t\t\t\t\t\t\t\t\t<div className=\"p-1 text-yellow-600\" title=\"Tienda destacada\">\r\n\t\t\t\t\t\t\t\t\t\t<Star size={18} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\t// ✅ Estadísticas basadas en los datos actuales (pueden estar filtrados)\r\n\tconst statItems = [\r\n\t\t{\r\n\t\t  title: \"Total\",\r\n\t\t  value: feedback.length,\r\n\t\t  description: statusFilter !== \"all\" || typeFilter !== \"all\" || dateRangeFilter.from || dateRangeFilter.to \r\n\t\t    ? \"En filtros aplicados\" \r\n\t\t    : \"Comentarios y sugerencias\",\r\n\t\t  icon: MessageSquare,\r\n\t\t  bgColor: \"bg-blue-50/20\",\r\n\t\t  textColor: \"text-blue-800\",\r\n\t\t  valueColor: \"text-blue-900\",\r\n\t\t  descriptionColor: \"text-blue-700\",\r\n\t\t  iconColor: \"text-blue-600\",\r\n\t\t},\r\n\t\t{\r\n\t\t  title: \"Pendientes\",\r\n\t\t  value: feedback.filter((f) => f.status === \"pending\").length,\r\n\t\t  description: \"Esperando revisión\",\r\n\t\t  icon: Clock,\r\n\t\t  bgColor: \"bg-yellow-50/20\",\r\n\t\t  textColor: \"text-yellow-800\",\r\n\t\t  valueColor: \"text-yellow-900\",\r\n\t\t  descriptionColor: \"text-yellow-700\",\r\n\t\t  iconColor: \"text-yellow-600\",\r\n\t\t},\r\n\t\t{\r\n\t\t  title: \"Aprobados\",\r\n\t\t  value: feedback.filter((f) => f.status === \"approved\").length,\r\n\t\t  description: \"Implementados o en proceso\",\r\n\t\t  icon: CheckCircle,\r\n\t\t  bgColor: \"bg-green-50/20\",\r\n\t\t  textColor: \"text-green-800\",\r\n\t\t  valueColor: \"text-green-900\",\r\n\t\t  descriptionColor: \"text-green-700\",\r\n\t\t  iconColor: \"text-green-600\",\r\n\t\t},\r\n\t\t{\r\n\t\t  title: \"Rechazados\",\r\n\t\t  value: feedback.filter((f) => f.status === \"rejected\").length,\r\n\t\t  description: \"No considerados\",\r\n\t\t  icon: XCircle,\r\n\t\t  bgColor: \"bg-red-50/20\",\r\n\t\t  textColor: \"text-red-800\",\r\n\t\t  valueColor: \"text-red-900\",\r\n\t\t  descriptionColor: \"text-red-700\",\r\n\t\t  iconColor: \"text-red-600\",\r\n\t\t},\r\n\t  ];\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\tGestión de Feedback y Comentarios\r\n\t\t\t\t</h1>\r\n\t\t\t\t<div className=\"flex space-x-2\">\r\n\t\t\t\t\t<Link\r\n\t\t\t\t\t\tto=\"/admin/feedback/dashboard\"\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<BarChart2 size={18} className=\"inline mr-2\" />\r\n\t\t\t\t\t\tEstadísticas\r\n\t\t\t\t\t</Link>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={refreshData}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<RefreshCw size={18} className={`inline mr-2 ${loading ? 'animate-spin' : ''}`} />\r\n\t\t\t\t\t\tActualizar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t{/* StatCards */}\r\n\t\t\t<StatCardList items={statItems} />\r\n\t\t\t\r\n\t\t\t{/* Filtros */}\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-4\">\r\n\t\t\t\t<div className=\"flex flex-col md:flex-row gap-4\">\r\n\t\t\t\t\t{/* Filtro de Estado */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Filter className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={statusFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setStatusFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Estados</option>\r\n\t\t\t\t\t\t\t<option value=\"pending\">Pendientes</option>\r\n\t\t\t\t\t\t\t<option value=\"approved\">Aprobados</option>\r\n\t\t\t\t\t\t\t<option value=\"rejected\">Rechazados</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Tipo */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={typeFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setTypeFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Tipos</option>\r\n\t\t\t\t\t\t\t<option value=\"improvement\">Mejoras</option>\r\n\t\t\t\t\t\t\t<option value=\"bug\">Errores/Bugs</option>\r\n\t\t\t\t\t\t\t<option value=\"other\">Otros</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Fecha */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Calendar className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={dateRangeFilter.from}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetDateRangeFilter({...dateRangeFilter, from: e.target.value})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder=\"Desde\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={dateRangeFilter.to}\r\n\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\tsetDateRangeFilter({...dateRangeFilter, to: e.target.value})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tplaceholder=\"Hasta\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Tabla de Feedback */}\r\n\t\t\t<Table\r\n\t\t\t\tdata={filteredFeedback}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsearchFields={[\"title\", \"description\"]}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\temptyMessage=\"No se encontraron comentarios o sugerencias\"\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tcurrentPage: pagination.currentPage,\r\n\t\t\t\t\ttotalPages: pagination.totalPages,\r\n\t\t\t\t\ttotalItems: pagination.totalItems,\r\n\t\t\t\t\titemsPerPage: pagination.itemsPerPage,\r\n\t\t\t\t\tonPageChange: handlePageChange,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Modal de Detalle de Feedback */}\r\n\t\t\t{showFeedbackModal && selectedFeedback && (\r\n\t\t\t\t<div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n\t\t\t\t\t\t<div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\tDetalles de Feedback #{selectedFeedback.id}\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeFeedbackModal}\r\n\t\t\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<XCircle className=\"h-5 w-5\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"p-6\">\r\n\t\t\t\t\t\t\t{/* Información de Usuario */}\r\n\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Usuario</h4>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden\">\r\n\t\t\t\t\t\t\t\t\t\t<User className=\"h-6 w-6 text-gray-500\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"ml-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t{selectedFeedback.user?.name || `Usuario #${selectedFeedback.user_id}`}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\tID: {selectedFeedback.user_id}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Si es de un seller, mostrar información del seller */}\r\n\t\t\t\t\t\t\t{selectedFeedback.seller_id && selectedFeedback.seller && (\r\n\t\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Vendedor</h4>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t<Store className=\"h-5 w-5 text-gray-500 mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\tto={`/admin/sellers/${selectedFeedback.seller_id}`}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-primary-600 hover:text-primary-800\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{selectedFeedback.seller.store_name}\r\n\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Información del Feedback */}\r\n\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-start mb-2\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500\">Detalles</h4>\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tconst type = feedbackTypeMap[selectedFeedback.type] || {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlabel: selectedFeedback.type,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"bg-gray-100 text-gray-800\",\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: <AlertTriangle className=\"w-4 h-4 mr-1\" />,\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${type.color}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{type.icon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{type.label}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.title}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"bg-gray-50 p-4 rounded-lg text-gray-800 mb-2 whitespace-pre-wrap\">\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.description}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t<div>Enviado: {formatDate(selectedFeedback.created_at)}</div>\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.updated_at !== selectedFeedback.created_at && (\r\n\t\t\t\t\t\t\t\t\t\t<div>Actualizado: {formatDate(selectedFeedback.updated_at)}</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Estado Actual */}\r\n\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Estado Actual</h4>\r\n\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t{(() => {\r\n\t\t\t\t\t\t\t\t\t\tconst status = feedbackStatusMap[selectedFeedback.status] || {\r\n\t\t\t\t\t\t\t\t\t\t\tlabel: selectedFeedback.status,\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: \"bg-gray-100 text-gray-800\",\r\n\t\t\t\t\t\t\t\t\t\t\ticon: <AlertTriangle className=\"w-4 h-4 mr-1\" />,\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${status.color}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{status.icon}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{status.label}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t})()}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Notas de Administración existentes */}\r\n\t\t\t\t\t\t\t{selectedFeedback.admin_notes && (\r\n\t\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Notas de Administración</h4>\r\n\t\t\t\t\t\t\t\t\t<div className=\"bg-gray-50 p-3 rounded-lg text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t{selectedFeedback.admin_notes}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.reviewed_at && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\tRevisado: {formatDate(selectedFeedback.reviewed_at)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Información de recompensas si está aprobado */}\r\n\t\t\t\t\t\t\t{selectedFeedback.status === \"approved\" && (\r\n\t\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Recompensas Otorgadas</h4>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.discount_code && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Gift className=\"w-4 h-4 text-blue-600\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"font-medium text-blue-900 text-sm\">Código de Descuento Generado</h6>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-2 text-xs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-blue-700 font-medium\">Código:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-blue-900\">{selectedFeedback.discount_code.code}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-blue-700 font-medium\">Descuento:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-blue-900\">{selectedFeedback.discount_code.discount_percentage}%</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t\t\t{selectedFeedback.seller_featured && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-2 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Star className=\"w-4 h-4 text-yellow-600\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h6 className=\"font-medium text-yellow-900 text-sm\">Tienda Destacada Activada</h6>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-3 gap-2 text-xs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-yellow-700 font-medium\">Activada:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-yellow-900\">{formatDate(selectedFeedback.seller_featured.featured_at)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-yellow-700 font-medium\">Duración:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-yellow-900\">{selectedFeedback.seller_featured.featured_days} días</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-yellow-700 font-medium\">Válido hasta:</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-yellow-900\">{formatDate(selectedFeedback.seller_featured.featured_expires_at)}</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t{selectedFeedback.seller_featured.is_active ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-yellow-600 text-xs mt-1 font-medium\">✨ Tienda actualmente destacada</p>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-600 text-xs mt-1 font-medium\">⏰ Destacado expirado</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t\t{/* Acciones de Administración */}\r\n\t\t\t\t\t\t\t{selectedFeedback.status === \"pending\" && (\r\n\t\t\t\t\t\t\t\t<div className=\"mb-6\">\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-500 mb-2\">Revisión de Administrador</h4>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"adminNote\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\tNota de Administrador (obligatoria)\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"adminNote\"\r\n\t\t\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Notas adicionales o respuesta al usuario...\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={adminNote}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setAdminNote(e.target.value)}\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isProcessing}\r\n\t\t\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Opción de código de descuento/featured store */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"generateDiscount\"\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={generateDiscountCode}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setGenerateDiscountCode(e.target.checked)}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isProcessing}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"generateDiscount\" className=\"ml-2 block text-sm text-gray-700\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedFeedback.seller_id \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Activar tienda destacada por 15 días\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Generar código de descuento para el usuario\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t{generateDiscountCode && !selectedFeedback.seller_id && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"ml-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"validityDays\" className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDías de validez del cupón\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"validityDays\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"365\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={validityDays}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setValidityDays(parseInt(e.target.value) || 30)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-24 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={isProcessing}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-2 text-sm text-gray-500\">días</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex space-x-2\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => approveFeedback(selectedFeedback.id || 0)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!adminNote.trim() || isProcessing}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<CheckCircle size={18} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t{isProcessing ? \"Procesando...\" : \"Aprobar\"}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => rejectFeedback(selectedFeedback.id || 0)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50\"\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled={!adminNote.trim() || isProcessing}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<XCircle size={18} className=\"mr-2\" />\r\n\t\t\t\t\t\t\t\t\t\t\t{isProcessing ? \"Procesando...\" : \"Rechazar\"}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AdminFeedbackPage;"],"names":["feedbackStatusMap","jsx","Clock","CheckCircle","XCircle","feedbackTypeMap","Tag","AlertTriangle","MessageSquare","AdminFeedbackPage","feedback","setFeedback","useState","loading","setLoading","statusFilter","setStatusFilter","typeFilter","setTypeFilter","dateRangeFilter","setDateRangeFilter","pagination","setPagination","selectedFeedback","setSelectedFeedback","showFeedbackModal","setShowFeedbackModal","adminNote","setAdminNote","generateDiscountCode","setGenerateDiscountCode","validityDays","setValidityDays","isProcessing","setIsProcessing","useEffect","fetchFeedback","params","response","ApiClient","API_ENDPOINTS","prev","error","filteredFeedback","openFeedbackModal","item","closeFeedbackModal","approveFeedback","feedbackId","approvalData","prevFeedback","message","errorMessage","rejectFeedback","rejectionData","formatDate","dateString","date","handlePageChange","page","refreshData","columns","jsxs","User","Link","Store","type","status","Eye","Fragment","Gift","Star","statItems","f","BarChart2","RefreshCw","StatCardList","Filter","e","Calendar","Table"],"mappings":"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"}
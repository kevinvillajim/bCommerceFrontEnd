import{j as e,$ as S,P as f,e as P,H as k,d as y,M as C,D as w,h as T,Y as _}from"./ui-vendor-BUNMIuFe.js";import{a as E,r as l}from"./react-vendor-Cy458wKG.js";import{D as R,B as A}from"./BaseDashboardLayout-YFVadxAL.js";import{u as v}from"./chat-chunk-BRsdDZXf.js";import{a as I}from"./index-C7ooKqFU.js";import"./seller-chunk-6swISJwY.js";import"./admin-chunk-BNcFjXlJ.js";import"./utils-vendor-DeGC_a19.js";import"./ThemeToggle-CkG__62M.js";import"./checkout-chunk-DAros4Zm.js";const O=[{title:"Principal",links:[{path:"/seller/dashboard",label:"Dashboard",icon:e.jsx(S,{className:"w-5 h-5 mr-3"})}]},{title:"Productos",links:[{path:"/seller/products",label:"Todos los Productos",icon:e.jsx(f,{className:"w-5 h-5 mr-3"})},{path:"/seller/products/create",label:"Añadir Producto",icon:e.jsx(f,{className:"w-5 h-5 mr-3"})}]},{title:"Pedidos",links:[{path:"/seller/orders",label:"Pedidos",icon:e.jsx(P,{className:"w-5 h-5 mr-3"}),isNotificated:!0,notificationCount:0},{path:"/seller/shipping",label:"Envíos",icon:e.jsx(k,{className:"w-5 h-5 mr-3"}),isNotificated:!0,notificationCount:0}]},{title:"Clientes",links:[{path:"/seller/ratings",label:"Valoraciones y Reseñas",icon:e.jsx(y,{className:"w-5 h-5 mr-3"}),isNotificated:!0,notificationCount:0},{path:"/seller/messages",label:"Mensajes",icon:e.jsx(C,{className:"w-5 h-5 mr-3"}),isNotificated:!0,notificationCount:0}]},{title:"Finanzas",links:[{path:"/seller/earnings",label:"Ganancias",icon:e.jsx(w,{className:"w-5 h-5 mr-3"})}]},{title:"Cuenta",links:[{path:"/seller/profile",label:"Perfil",icon:e.jsx(T,{className:"w-5 h-5 mr-3"})}]}],D={orders:"/seller/orders",shipping:"/seller/shipping",ratings:"/seller/ratings",messages:"/seller/messages"},N={new_order:"orders",order_status:"orders",order_update:"orders",shipping_update:"shipping",shipping_status:"shipping",rating_received:"ratings",seller_rated:"ratings",rating_request:"ratings",new_message:"messages",message_received:"messages"},M=()=>{const{isAuthenticated:s,roleInfo:r}=v(),p=E(),{notifications:c,loading:u,error:a,fetchNotifications:o,markAsRead:t}=I(),m=l.useMemo(()=>{if(!s||!r.isSeller||!c.length)return{orders:0,shipping:0,ratings:0,messages:0};const d={orders:0,shipping:0,ratings:0,messages:0};return c.filter(n=>!n.read).forEach(n=>{const i=N[n.type];i&&d[i]++}),d},[c,s,r.isSeller]),h=l.useCallback(async d=>{if(!(!s||!r.isSeller))try{const n=c.filter(i=>!i.read&&N[i.type]===d);for(const i of n)await t(i.id)}catch{}},[s,r.isSeller,c,t]),g=l.useRef(m),b=l.useRef(h);g.current=m,b.current=h,l.useEffect(()=>{const d=p.pathname;for(const[n,i]of Object.entries(D))if(d.startsWith(i)){const x=n;g.current[x]>0&&b.current(x);break}},[p.pathname]),l.useEffect(()=>{s&&r.isSeller&&o(1,!1)},[s,r.isSeller,o]);const j=l.useCallback(async()=>{s&&r.isSeller&&await o(1,!1)},[s,r.isSeller,o]);return{counts:m,loading:u,error:a,refetch:j,markSectionAsRead:h}},K=()=>{const{counts:s}=M(),r={"/seller/dashboard":"Dashboard","/seller/products":"Productos","/seller/products/create":"Añadir Nuevo Producto","/seller/orders":"Pedidos","/seller/ratings":"Valoraciones y Reseñas","/seller/messages":"Mensajes","/seller/profile":"Mi Perfil","/seller/settings":"Configuración","/seller/shipping":"Envíos","/seller/earnings":"Ganancias"},p={title:"Portal del Vendedor",icon:e.jsx(f,{className:"w-7 h-7 text-primary-400"})},c=l.useMemo(()=>O.map(a=>({...a,links:a.links.map(o=>{let t=0;switch(o.path){case"/seller/orders":t=s.orders;break;case"/seller/shipping":t=s.shipping;break;case"/seller/ratings":t=s.ratings;break;case"/seller/messages":t=s.messages;break;default:t=o.notificationCount||0}return{...o,notificationCount:t,isNotificated:t>0}})})),[s]),u=()=>{const a=parseInt(localStorage.getItem("sellerPendingOrders")||"0");return a===0?null:e.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-blue-50 px-4 py-3 border-b border-primary-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"h-5 w-5 text-primary-500 mr-2"}),e.jsxs("span",{className:"text-sm text-primary-700",children:["Tienes ",e.jsx("strong",{children:a})," pedido",a!==1?"s":""," pendiente",a!==1?"s":""," por procesar. ¡Revísalos pronto!"]})]})})};return e.jsx(R,{initialType:"seller",initialPageTitles:r,children:e.jsx(A,{sidebarGroups:c,sidebarTitle:p,headerExtras:e.jsx(u,{})})})};export{K as default};
//# sourceMappingURL=SellerLayout-DjO7xsEv.js.map

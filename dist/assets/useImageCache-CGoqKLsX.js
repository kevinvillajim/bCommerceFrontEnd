import{r as f}from"./react-vendor-Cy458wKG.js";import{j as b}from"./admin-chunk-bhOJ3jtA.js";const l=new Map,h=5*60*1e3,C=()=>{const g=Date.now(),o=[];l.forEach((r,c)=>{g-r.timestamp>h&&o.push(c)}),o.forEach(r=>l.delete(r))},E=()=>{const g=f.useCallback((e,s="medium")=>{if(!e)return b("");const m=`${JSON.stringify(e)}_${s}`,n=l.get(m);if(n&&Date.now()-n.timestamp<h)return n.url;let i="";if(s==="thumbnail"){if(e.thumbnail)i=e.thumbnail;else if(e.image)i=e.image;else if(e.images&&Array.isArray(e.images)&&e.images.length>0){const a=e.images[0];typeof a=="string"?i=a:typeof a=="object"&&a!==null&&(i=a.thumbnail||a.medium||a.original||"")}}else if(s==="original")if(e.images&&Array.isArray(e.images)&&e.images.length>0){const a=e.images[0];typeof a=="string"?i=a:typeof a=="object"&&a!==null&&(i=a.original||a.large||a.medium||"")}else e.image?i=e.image:e.main_image&&(i=e.main_image);else if(e.image)i=e.image;else if(e.main_image)i=e.main_image;else if(e.images&&Array.isArray(e.images)&&e.images.length>0){const a=e.images[0];typeof a=="string"?i=a:typeof a=="object"&&a!==null&&(i=a.original||a.large||a.medium||"")}else e.featured_image?i=e.featured_image:e.thumbnail&&(i=e.thumbnail);const t=b(i);return l.set(m,{url:t,timestamp:Date.now()}),l.size>100&&C(),t},[]),o=f.useCallback((e,s="medium")=>e.map(m=>g(m,s)),[g]),r=f.useCallback(e=>{const s=e.map(m=>new Promise((n,i)=>{const t=new Image;t.onload=()=>n(),t.onerror=()=>i(new Error(`Failed to load image: ${m}`)),t.src=m}));return Promise.all(s)},[]),c=f.useCallback(()=>{const e=Date.now();let s=0,m=0;return l.forEach(n=>{e-n.timestamp<h?s++:m++}),{total:l.size,active:s,expired:m,cacheDuration:h}},[]),y=f.useCallback(()=>{l.clear()},[]);return{getOptimizedImageUrl:g,getMultipleImageUrls:o,preloadImages:r,getCacheStats:c,clearImageCache:y}};export{E as u};
//# sourceMappingURL=useImageCache-CGoqKLsX.js.map

import{d as C,r as a,j as e,L as y,s as u,t as p}from"./index-DmNDOrWy.js";const F=()=>{const b=C(),[c,x]=a.useState("email"),[d,v]=a.useState(""),[o,j]=a.useState(""),[m,w]=a.useState(""),[k,f]=a.useState(!1),[n,i]=a.useState(!1),[h,t]=a.useState(null),[g,l]=a.useState(null),N=async s=>{if(s.preventDefault(),!d.trim()||!/\S+@\S+\.\S+/.test(d)){t("Por favor ingresa un correo electrónico válido");return}i(!0),t(null),l(null);try{const r=await u.post(p.AUTH.FORGOT_PASSWORD_EMAIL,{email:d});r.data?.success||r.status===200?l("Se ha enviado un correo electrónico con instrucciones para recuperar tu contraseña. Por favor revisa tu bandeja de entrada."):t("No se pudo procesar la solicitud. Inténtalo de nuevo.")}catch(r){console.error("Error al solicitar recuperación por email:",r),r.response?.status===422?t("Correo electrónico inválido o no registrado"):r.response?.data?.message?t(r.response.data.message):t("Error al procesar la solicitud. Inténtalo de nuevo más tarde.")}finally{i(!1)}},S=async s=>{if(s.preventDefault(),!o.trim()||!/\S+@\S+\.\S+/.test(o)){t("Por favor ingresa un correo electrónico válido");return}i(!0),t(null),l(null);try{(await u.post(p.AUTH.FORGOT_PASSWORD_TOKEN,{email:o})).status===200?(l("Se ha enviado un token de recuperación a los medios de contacto registrados."),f(!0)):t("No se pudo generar el token. Inténtalo de nuevo.")}catch(r){console.error("Error al solicitar token:",r),r.response?.status===422?t("Correo electrónico inválido o no registrado"):r.response?.data?.message?t(r.response.data.message):t("Error al procesar la solicitud. Inténtalo de nuevo más tarde.")}finally{i(!1)}},T=async s=>{if(s.preventDefault(),!m.trim()){t("Por favor ingresa el token de recuperación");return}i(!0),t(null),l(null);try{(await u.post(`${p.AUTH.RESET_PASSWORD}/validate`,{token:m,email:o})).status===200?(l("Token válido. Serás redirigido para crear una nueva contraseña."),setTimeout(()=>{b("/reset-password",{state:{token:m,email:o}})},2e3)):t("Token inválido o expirado. Inténtalo de nuevo.")}catch(r){console.error("Error al validar token:",r),r.response?.status===422?t("Token inválido o expirado"):r.response?.data?.message?t(r.response.data.message):t("Error al procesar la solicitud. Inténtalo de nuevo más tarde.")}finally{i(!1)}};return e.jsx("div",{className:"min-h-[80vh] flex items-center justify-center py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Recupera tu contraseña"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Elige el método que prefieras para recuperar tu acceso"})]}),e.jsxs("div",{className:"flex border border-gray-200 rounded-md overflow-hidden",children:[e.jsx("button",{type:"button",className:`flex-1 py-3 px-4 text-center font-medium ${c==="email"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>x("email"),children:"Por correo electrónico"}),e.jsx("button",{type:"button",className:`flex-1 py-3 px-4 text-center font-medium ${c==="token"?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,onClick:()=>x("token"),children:"Por token"})]}),h&&e.jsx("div",{className:"bg-red-50 text-red-700 p-3 rounded-md text-sm",children:h}),g&&e.jsx("div",{className:"bg-green-50 text-green-700 p-3 rounded-md text-sm",children:g}),c==="email"&&e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:N,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailForReset",className:"block text-sm font-medium text-gray-700",children:"Correo electrónico"}),e.jsx("input",{id:"emailForReset",name:"emailForReset",type:"email",autoComplete:"email",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:d,onChange:s=>v(s.target.value),placeholder:"tu@email.com"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Te enviaremos un enlace a tu correo electrónico para que puedas crear una nueva contraseña."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(y,{to:"/login",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Volver al inicio de sesión"}),e.jsx("button",{type:"submit",disabled:n,className:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar enlace"})]})]}),c==="token"&&e.jsx(e.Fragment,{children:k?e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:T,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"token",className:"block text-sm font-medium text-gray-700",children:"Token de recuperación"}),e.jsx("input",{id:"token",name:"token",type:"text",autoComplete:"off",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:m,onChange:s=>w(s.target.value),placeholder:"Ingresa el token recibido"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ingresa el token de recuperación que has recibido en tus medios de contacto registrados."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Solicitar otro token"}),e.jsx("button",{type:"submit",disabled:n,className:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verificando..."]}):"Verificar token"})]})]}):e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:S,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"emailForToken",className:"block text-sm font-medium text-gray-700",children:"Correo electrónico"}),e.jsx("input",{id:"emailForToken",name:"emailForToken",type:"email",autoComplete:"email",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500",value:o,onChange:s=>j(s.target.value),placeholder:"tu@email.com"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Ingresa tu correo electrónico para recibir un token de recuperación en tus medios de contacto registrados."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(y,{to:"/login",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Volver al inicio de sesión"}),e.jsx("button",{type:"submit",disabled:n,className:"inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Solicitando..."]}):"Solicitar token"})]})]})})]})})};export{F as default};
//# sourceMappingURL=ForgotPasswordPage-BS_J560d.js.map

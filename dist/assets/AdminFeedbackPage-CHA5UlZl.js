import{r,q as L,p as j,j as e,L as d}from"./index-DmNDOrWy.js";import{T as ee}from"./Table-BdEePeKQ.js";import{S as te}from"./StatCardList-BKb18NhN.js";import{M as B}from"./message-square-C6QrtgNg.js";import{C as p}from"./circle-x-BwsT4AZ5.js";import{C as se}from"./chart-no-axes-column-C4ngQd1-.js";import{R as ae}from"./refresh-cw-BOPCg90x.js";import{F as re}from"./funnel-CAFb7hhq.js";import{C as oe}from"./calendar-COADRkv0.js";import{U as S}from"./user-nLts-VnI.js";import{S as T}from"./store-BV-a-_hn.js";import{T as c}from"./triangle-alert-B75WTV0P.js";import{T as F}from"./tag-z784mohN.js";import{E as ie}from"./eye-CldZNoIz.js";import{F as O}from"./flag-DaneOi1U.js";import"./chevron-left-Dl3DF2OO.js";import"./search-CbEKe7UQ.js";import"./arrow-up-DQySjn32.js";const M=[{id:1,userId:101,sellerId:2,title:"Mejora sugerida para la navegación",description:"Sería genial si pudieran añadir filtros más específicos en la sección de categorías. A veces es difícil encontrar productos específicos.",type:"improvement",status:"pending",createdAt:"2023-11-05T14:30:00Z",updatedAt:"2023-11-05T14:30:00Z",user:{id:101,name:"Juan Pérez"}},{id:2,userId:102,sellerId:3,title:"Error al cargar imágenes de productos",description:"He notado que algunas imágenes de productos no se cargan correctamente en dispositivos móviles, especialmente en iOS. Esto ocurre regularmente en la sección de ofertas.",type:"bug",status:"approved",adminNotes:"Verificado y enviado al equipo de desarrollo. Se está trabajando en una solución.",reviewedBy:201,reviewedAt:"2023-11-06T10:15:00Z",createdAt:"2023-11-04T09:20:00Z",updatedAt:"2023-11-06T10:15:00Z",user:{id:102,name:"María Rodríguez"},admin:{id:201,name:"Admin Principal"}},{id:3,userId:103,title:"Sugerencia para nuevas categorías",description:"Me encantaría ver una categoría específica para productos ecológicos o sostenibles. Creo que sería muy útil para los consumidores que buscan alternativas más respetuosas con el medio ambiente.",type:"feature",status:"pending",createdAt:"2023-11-03T16:45:00Z",updatedAt:"2023-11-03T16:45:00Z",user:{id:103,name:"Carlos Sánchez"}},{id:4,userId:104,sellerId:5,title:"Problema con el tiempo de carga",description:"El sitio se ha vuelto extremadamente lento en los últimos días, especialmente al buscar productos o cambiar entre categorías. Por favor, mejoren el rendimiento.",type:"bug",status:"approved",adminNotes:"Confirmado, estamos optimizando la carga de imágenes y recursos.",reviewedBy:202,reviewedAt:"2023-11-05T11:30:00Z",createdAt:"2023-11-02T13:20:00Z",updatedAt:"2023-11-05T11:30:00Z",user:{id:104,name:"Ana Martínez"},admin:{id:202,name:"Admin Técnico"}},{id:5,userId:105,sellerId:1,title:"Queja sobre vendedor no profesional",description:"Tuve una experiencia muy negativa con el vendedor 'ElectroStore'. No respondieron a mis mensajes, enviaron un producto diferente al que compré y ahora no quieren aceptar la devolución.",type:"complaint",status:"pending",createdAt:"2023-11-06T09:10:00Z",updatedAt:"2023-11-06T09:10:00Z",user:{id:105,name:"Javier García"},seller:{id:1,storeName:"ElectroStore"}},{id:6,userId:106,title:"Sugerencia para proceso de checkout",description:"El proceso de pago tiene demasiados pasos. Sería genial si pudieran simplificarlo y ofrecer la opción de guardar información para futuras compras.",type:"improvement",status:"rejected",adminNotes:"Actualmente no es viable reducir pasos debido a requisitos de seguridad. Lo reconsideraremos en futuras actualizaciones.",reviewedBy:201,reviewedAt:"2023-11-04T14:30:00Z",createdAt:"2023-11-01T10:45:00Z",updatedAt:"2023-11-04T14:30:00Z",user:{id:106,name:"Lucía Fernández"},admin:{id:201,name:"Admin Principal"}},{id:7,userId:107,title:"Solicitud de nueva función de comparación",description:"Sería muy útil poder comparar varios productos lado a lado. Muchos otros sitios de e-commerce ofrecen esta función y realmente ayuda a tomar decisiones informadas.",type:"feature",status:"approved",adminNotes:"Excelente idea, incluida en el roadmap para el próximo trimestre.",reviewedBy:203,reviewedAt:"2023-11-06T13:45:00Z",createdAt:"2023-11-04T18:30:00Z",updatedAt:"2023-11-06T13:45:00Z",user:{id:107,name:"David López"},admin:{id:203,name:"Admin Producto"}},{id:8,userId:108,sellerId:4,title:"Problema con cupones de descuento",description:"Los cupones de descuento no se aplican correctamente cuando el carrito tiene productos de múltiples vendedores. El sistema muestra un error y no permite completar la compra.",type:"bug",status:"pending",createdAt:"2023-11-05T20:15:00Z",updatedAt:"2023-11-05T20:15:00Z",user:{id:108,name:"Elena Gómez"}}],$={pending:{label:"Pendiente",color:"bg-yellow-100 text-yellow-800",icon:e.jsx(L,{className:"w-3 h-3 mr-1"})},approved:{label:"Aprobado",color:"bg-green-100 text-green-800",icon:e.jsx(j,{className:"w-3 h-3 mr-1"})},rejected:{label:"Rechazado",color:"bg-red-100 text-red-800",icon:e.jsx(p,{className:"w-3 h-3 mr-1"})}},q={improvement:{label:"Mejora",color:"bg-blue-100 text-blue-800",icon:e.jsx(F,{className:"w-3 h-3 mr-1"})},bug:{label:"Error",color:"bg-red-100 text-red-800",icon:e.jsx(c,{className:"w-3 h-3 mr-1"})},feature:{label:"Función",color:"bg-purple-100 text-purple-800",icon:e.jsx(F,{className:"w-3 h-3 mr-1"})},complaint:{label:"Queja",color:"bg-orange-100 text-orange-800",icon:e.jsx(O,{className:"w-3 h-3 mr-1"})},other:{label:"Otro",color:"bg-gray-100 text-gray-800",icon:e.jsx(B,{className:"w-3 h-3 mr-1"})}},Ce=()=>{const[m,v]=r.useState([]),[U,g]=r.useState(!0),[y,V]=r.useState("all"),[N,G]=r.useState("all"),[o,I]=r.useState({from:"",to:""}),[h,D]=r.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10}),[s,z]=r.useState(null),[H,E]=r.useState(!1),[i,w]=r.useState(""),[u,A]=r.useState(!1),[b,C]=r.useState(10);r.useEffect(()=>{(()=>{g(!0),setTimeout(()=>{v(M),D({currentPage:1,totalPages:1,totalItems:M.length,itemsPerPage:10}),g(!1)},500)})()},[]);const Q=m.filter(t=>{const a=y==="all"||t.status===y,n=N==="all"||t.type===N;let l=!0;if(o.from){const P=new Date(t.createdAt||""),f=new Date(o.from);l=P>=f}if(o.to&&l){const P=new Date(t.createdAt||""),f=new Date(o.to);f.setHours(23,59,59,999),l=P<=f}return a&&n&&l}),J=t=>{z(t),w(t.adminNotes||""),A(!1),C(10),E(!0)},k=()=>{z(null),E(!1),w(""),A(!1),C(10)},Z=t=>{if(s){if(!i){alert("Por favor, proporciona una nota de administrador para la aprobación.");return}console.log("Datos de aprobación:",{id:t,status:"approved",adminNotes:i,generateDiscountCode:u,discountPercentage:u?b:void 0}),k()}v(n=>n.map(l=>l.id===t?{...l,status:"approved",adminNotes:i,reviewedBy:201,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:l));let a=`Feedback #${t} aprobado correctamente.`;u&&(a+=` Se ha generado un código de descuento del ${b}% para el usuario.`),alert(a)},R=t=>{if(s){if(!i){alert("Por favor, proporciona una nota de administrador para el rechazo.");return}k()}v(a=>a.map(n=>n.id===t?{...n,status:"rejected",adminNotes:i,reviewedBy:201,reviewedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:n)),alert(`Feedback #${t} rechazado.`)},X=t=>{alert(`El feedback #${t} ha sido reportado para revisión adicional.`)},x=t=>{if(!t)return"N/A";const a=new Date(t);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(a)},K=t=>{D(a=>({...a,currentPage:t}))},W=()=>{g(!0),setTimeout(()=>{g(!1)},500)},Y=[{key:"user",header:"Usuario",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(S,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.user?.name||`Usuario #${t.userId}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",t.userId]})]})]})},{key:"seller",header:"Vendedor",sortable:!0,render:t=>t.sellerId&&t.seller?e.jsxs(d,{to:`/admin/sellers/${t.sellerId}`,className:"flex items-center text-primary-600 hover:text-primary-800",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),t.seller.storeName]}):e.jsx("span",{className:"text-gray-500",children:"N/A"})},{key:"type",header:"Tipo",sortable:!0,render:t=>{const a=q[t.type]||{label:t.type,color:"bg-gray-100 text-gray-800",icon:e.jsx(c,{className:"w-3 h-3 mr-1"})};return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.color}`,children:[a.icon,a.label]})}},{key:"title",header:"Título",sortable:!0,render:t=>e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:t.title})},{key:"date",header:"Fecha",sortable:!0,render:t=>e.jsxs("div",{className:"text-xs text-gray-500",children:[x(t.createdAt),t.reviewedAt&&e.jsxs("div",{children:["Revisado: ",x(t.reviewedAt)]})]})},{key:"status",header:"Estado",sortable:!0,render:t=>{const a=$[t.status]||{label:t.status,color:"bg-gray-100 text-gray-800",icon:e.jsx(c,{className:"w-3 h-3 mr-1"})};return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a.color}`,children:[a.icon,a.label]})}},{key:"actions",header:"Acciones",render:t=>e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>J(t),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",title:"Ver detalles",children:e.jsx(ie,{size:18})}),t.status==="pending"&&e.jsx("button",{onClick:()=>Z(t.id||0),className:"p-1 text-green-600 hover:bg-green-100 rounded-md",title:"Aprobar feedback",children:e.jsx(j,{size:18})}),t.status==="pending"&&e.jsx("button",{onClick:()=>R(t.id||0),className:"p-1 text-red-600 hover:bg-red-100 rounded-md",title:"Rechazar feedback",children:e.jsx(p,{size:18})}),e.jsx("button",{onClick:()=>X(t.id||0),className:"p-1 text-orange-600 hover:bg-orange-100 rounded-md",title:"Reportar feedback",children:e.jsx(O,{size:18})})]})}],_=[{title:"Total",value:m.length,description:"Comentarios y sugerencias",icon:B,bgColor:"bg-blue-50/20",textColor:"text-blue-800",valueColor:"text-blue-900",descriptionColor:"text-blue-700",iconColor:"text-blue-600"},{title:"Pendientes",value:m.filter(t=>t.status==="pending").length,description:"Esperando revisión",icon:L,bgColor:"bg-yellow-50/20",textColor:"text-yellow-800",valueColor:"text-yellow-900",descriptionColor:"text-yellow-700",iconColor:"text-yellow-600"},{title:"Aprobados",value:m.filter(t=>t.status==="approved").length,description:"Implementados o en proceso",icon:j,bgColor:"bg-green-50/20",textColor:"text-green-800",valueColor:"text-green-900",descriptionColor:"text-green-700",iconColor:"text-green-600"},{title:"Rechazados",value:m.filter(t=>t.status==="rejected").length,description:"No considerados",icon:p,bgColor:"bg-red-50/20",textColor:"text-red-800",valueColor:"text-red-900",descriptionColor:"text-red-700",iconColor:"text-red-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Feedback y Comentarios"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(d,{to:"/admin/feedback/dashboard",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(se,{size:18,className:"inline mr-2"}),"Estadísticas"]}),e.jsxs("button",{onClick:W,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(ae,{size:18,className:"inline mr-2"}),"Actualizar"]})]})]}),e.jsx(te,{items:_}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:y,onChange:t=>V(t.target.value),children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),e.jsx("option",{value:"pending",children:"Pendientes"}),e.jsx("option",{value:"approved",children:"Aprobados"}),e.jsx("option",{value:"rejected",children:"Rechazados"})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:N,onChange:t=>G(t.target.value),children:[e.jsx("option",{value:"all",children:"Todos los Tipos"}),e.jsx("option",{value:"improvement",children:"Mejoras"}),e.jsx("option",{value:"bug",children:"Errores"}),e.jsx("option",{value:"feature",children:"Nuevas Funciones"}),e.jsx("option",{value:"complaint",children:"Quejas"}),e.jsx("option",{value:"other",children:"Otros"})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.from,onChange:t=>I({...o,from:t.target.value}),placeholder:"Desde"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:o.to,onChange:t=>I({...o,to:t.target.value}),placeholder:"Hasta"})]})]})}),e.jsx(ee,{data:Q,columns:Y,searchFields:["title","description"],loading:U,emptyMessage:"No se encontraron comentarios o sugerencias",pagination:{currentPage:h.currentPage,totalPages:h.totalPages,totalItems:h.totalItems,itemsPerPage:h.itemsPerPage,onPageChange:K}}),H&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de Feedback"}),e.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-500",children:e.jsx(p,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Usuario"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(S,{className:"h-6 w-6 text-gray-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.user?.name||`Usuario #${s.userId}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.userId]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Detalles"}),e.jsx("div",{children:(()=>{const t=q[s.type]||{label:s.type,color:"bg-gray-100 text-gray-800",icon:e.jsx(c,{className:"w-4 h-4 mr-1"})};return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color}`,children:[t.icon,t.label]})})()})]}),e.jsx("div",{className:"text-lg font-medium text-gray-900 mb-2",children:s.title}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg text-gray-800 mb-2 whitespace-pre-wrap",children:s.description}),e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsxs("div",{children:["Enviado: ",x(s.createdAt)]}),s.updatedAt!==s.createdAt&&e.jsxs("div",{children:["Actualizado: ",x(s.updatedAt)]})]})]}),s.sellerId&&s.seller&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Vendedor Relacionado"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx(d,{to:`/admin/sellers/${s.sellerId}`,className:"text-primary-600 hover:text-primary-800",children:s.seller.storeName})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Estado Actual"}),e.jsx("div",{className:"flex items-center",children:(()=>{const t=$[s.status]||{label:s.status,color:"bg-gray-100 text-gray-800",icon:e.jsx(c,{className:"w-4 h-4 mr-1"})};return e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color}`,children:[t.icon,t.label]})})()})]}),s.adminNotes&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Notas de Administración"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-gray-800 mb-2",children:s.adminNotes}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.admin&&e.jsxs("span",{children:["Por: ",s.admin.name]}),s.reviewedAt&&e.jsxs("span",{className:"ml-2",children:["(",x(s.reviewedAt),")"]})]})]}),s.status==="pending"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Revisión de Administrador"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"adminNote",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota de Administrador (obligatoria)"}),e.jsx("textarea",{id:"adminNote",rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Notas adicionales o respuesta al usuario...",value:i,onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{id:"generateDiscount",type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded",checked:u,onChange:t=>A(t.target.checked)}),e.jsx("label",{htmlFor:"generateDiscount",className:"ml-2 block text-sm text-gray-700",children:"Generar código de descuento para el usuario"})]}),u&&e.jsxs("div",{className:"ml-6",children:[e.jsx("label",{htmlFor:"discountPercentage",className:"block text-sm font-medium text-gray-700 mb-1",children:"Porcentaje de descuento"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"range",id:"discountPercentage",min:"5",max:"50",step:"5",value:b,onChange:t=>C(parseInt(t.target.value)),className:"mr-3 w-40"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 w-10",children:[b,"%"]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>Z(s.id||0),className:"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",disabled:!i,children:[e.jsx(j,{size:18,className:"mr-2"}),"Aprobar"]}),e.jsxs("button",{onClick:()=>R(s.id||0),className:"flex items-center justify-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",disabled:!i,children:[e.jsx(p,{size:18,className:"mr-2"}),"Rechazar"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Enlaces Rápidos"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.sellerId&&e.jsxs(d,{to:`/admin/sellers/${s.sellerId}`,className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[e.jsx(T,{className:"w-4 h-4 mr-1"}),"Perfil del Vendedor"]}),e.jsxs(d,{to:`/admin/users/${s.userId}`,className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Ver Usuario"]}),s.type==="bug"&&e.jsxs(d,{to:"/admin/bugs",className:"inline-flex items-center px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm",children:[e.jsx(c,{className:"w-4 h-4 mr-1"}),"Lista de Errores"]}),s.type==="feature"&&e.jsxs(d,{to:"/admin/roadmap",className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:[e.jsx(F,{className:"w-4 h-4 mr-1"}),"Roadmap de Funciones"]})]})]})]})]})})]})};export{Ce as default};
//# sourceMappingURL=AdminFeedbackPage-CHA5UlZl.js.map

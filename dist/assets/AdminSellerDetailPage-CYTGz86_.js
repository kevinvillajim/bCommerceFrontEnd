import{j as e,a0 as n,f as v,h as p,m as w,I as _,B as S,ao as D,aZ as C,an as P,e as k,D as E,d as A,P as V,G as $,c as I,r as z}from"./ui-vendor-BUNMIuFe.js";import{d as L,u as R,r as d,L as B}from"./react-vendor-Cy458wKG.js";import{a as h}from"./AdminSellerService-B2Gtbd0h.js";import"./admin-chunk-BNcFjXlJ.js";const G=()=>{const{id:l}=L(),g=R(),[s,j]=d.useState(null),[f,c]=d.useState(!0),[N,o]=d.useState(null),[r,u]=d.useState(!1);d.useEffect(()=>{(async()=>{if(!l){o("ID de vendedor no válido"),c(!1);return}try{c(!0),o(null);const a=await h.getSellerDetails(l);j(a)}catch(a){console.error("Error fetching seller details:",a),o(a instanceof Error?a.message:"Error al cargar los detalles del vendedor")}finally{c(!1)}})()},[l]);const x=async(t,a)=>{if(!(!s||!l))try{u(!0),await h.updateSellerStatus(l,t,a);const m=await h.getSellerDetails(l);j(m),alert(`Estado del vendedor actualizado a: ${t}`)}catch(m){console.error("Error updating seller status:",m),alert("Error al actualizar el estado del vendedor")}finally{u(!1)}},b=t=>{switch(t){case"active":return{color:"text-green-700",bg:"bg-green-100",icon:z,text:"Activo"};case"pending":return{color:"text-yellow-700",bg:"bg-yellow-100",icon:I,text:"Pendiente"};case"suspended":return{color:"text-red-700",bg:"bg-red-100",icon:$,text:"Suspendido"};default:return{color:"text-gray-700",bg:"bg-gray-100",icon:v,text:"Desconocido"}}};if(f)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(n,{className:"w-5 h-5"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detalle del Vendedor"})]}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"ml-3 text-gray-600",children:"Cargando detalles del vendedor..."})]})]});if(N||!s)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>g("/admin/sellers"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx(n,{className:"w-5 h-5 mr-1"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detalle del Vendedor"})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(v,{className:"w-5 h-5 text-red-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-800 text-lg font-medium",children:"Error al cargar vendedor"}),e.jsx("p",{className:"text-red-700 mt-1",children:N||"Vendedor no encontrado"}),e.jsxs(B,{to:"/admin/sellers",className:"inline-flex items-center mt-3 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Volver a Vendedores"]})]})]})})]});const i=b(s.status),y=i.icon;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>g("/admin/sellers"),className:"flex items-center text-gray-600 hover:text-gray-800 transition-colors",children:[e.jsx(n,{className:"w-5 h-5 mr-1"}),"Volver"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Detalle del Vendedor"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx(p,{className:"w-8 h-8 text-gray-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center mt-1 text-gray-600",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),s.email]}),e.jsxs("div",{className:"flex items-center mt-1 text-gray-500 text-sm",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Registrado: ",new Date(s.joined_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full ${i.bg} ${i.color}`,children:[e.jsx(y,{className:"w-4 h-4 mr-1"}),i.text]}),s.is_blocked&&e.jsx("span",{className:"text-red-600 text-xs mt-1",children:"Bloqueado"})]})]}),s.seller_info&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Información del Negocio"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.seller_info.business_name&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Nombre: "}),e.jsx("span",{className:"ml-1 font-medium",children:s.seller_info.business_name})]}),s.seller_info.description&&e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(p,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Descripción: "}),e.jsx("p",{className:"mt-1 text-gray-800",children:s.seller_info.description})]})]}),s.seller_info.phone&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Teléfono: "}),e.jsx("span",{className:"ml-1 font-medium",children:s.seller_info.phone})]}),s.seller_info.website&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-600",children:"Sitio web: "}),e.jsx("a",{href:s.seller_info.website,target:"_blank",rel:"noopener noreferrer",className:"ml-1 font-medium text-blue-600 hover:underline",children:s.seller_info.website})]}),s.seller_info.address&&e.jsxs("div",{className:"flex items-start md:col-span-2",children:[e.jsx(P,{className:"w-4 h-4 text-gray-400 mr-2 mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:"Dirección: "}),e.jsx("span",{className:"ml-1",children:s.seller_info.address})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx(k,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.total_orders}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pedidos Totales"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Completados: ",s.completed_orders," | Pendientes: ",s.pending_orders]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-50 rounded-lg",children:e.jsx(E,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["$",s.total_revenue.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ingresos Totales"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:e.jsx(A,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.average_rating.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rating Promedio"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:e.jsx(V,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.products_count}),e.jsx("div",{className:"text-sm text-gray-600",children:"Productos"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Clientes únicos: ",s.customer_count]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Pedidos Recientes"}),s.recent_orders.length>0?e.jsx("div",{className:"space-y-3",children:s.recent_orders.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["#",t.id]}),e.jsx("div",{className:"text-sm text-gray-600",children:t.customer_name}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:["$",t.formatted_total]}),e.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${t.status==="completed"?"bg-green-100 text-green-800":t.status==="processing"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})]})]},t.id))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay pedidos recientes"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Productos Destacados"}),s.top_products.length>0?e.jsx("div",{className:"space-y-3",children:s.top_products.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium truncate",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",t.price.toFixed(2)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[t.sales_count," ventas"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.view_count," vistas"]})]})]},t.id))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay productos registrados"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rendimiento Mensual (Últimos 6 Meses)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:s.monthly_stats.map(t=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.month_name.split(" ")[0]}),e.jsx("div",{className:"text-lg font-bold text-blue-600",children:t.orders}),e.jsx("div",{className:"text-xs text-gray-600",children:"pedidos"}),e.jsxs("div",{className:"text-sm font-medium text-green-600",children:["$",t.revenue.toFixed(2)]})]},t.month))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Acciones de Administrador"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.status!=="active"&&e.jsx("button",{onClick:()=>x("active"),disabled:r,className:"px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-lg transition-colors",children:r?"Actualizando...":"Activar Vendedor"}),s.status!=="suspended"&&e.jsx("button",{onClick:()=>{const t=prompt("Razón de la suspensión (opcional):");x("suspended",t||void 0)},disabled:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-lg transition-colors",children:r?"Actualizando...":"Suspender Vendedor"}),s.status!=="pending"&&e.jsx("button",{onClick:()=>x("pending"),disabled:r,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 disabled:bg-yellow-400 text-white rounded-lg transition-colors",children:r?"Actualizando...":"Marcar como Pendiente"})]})]})]})};export{G as default};
//# sourceMappingURL=AdminSellerDetailPage-CYTGz86_.js.map

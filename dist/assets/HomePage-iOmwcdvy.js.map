{"version":3,"file":"HomePage-iOmwcdvy.js","sources":["../../src/presentation/components/common/ImageSlider.tsx","../../src/presentation/components/common/Categories.tsx","../../src/presentation/components/common/TextSlider.tsx","../../src/presentation/components/common/ProductCards.tsx","../../src/presentation/components/product/ProductCarousel.tsx","../../src/presentation/components/common/WhyUs.tsx","../../src/presentation/components/skeletons/ProductCardSkeleton.tsx","../../src/presentation/components/skeletons/ProductCarouselSkeleton.tsx","../../src/utils/productTransformer.ts","../../src/presentation/hooks/useHomeProducts.ts","../../src/core/services/RecommendationService.ts","../../src/infrastructure/services/UserInteractionService.ts","../../src/presentation/hooks/useUserInteractions.ts","../../src/presentation/pages/HomePage.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\n\r\ninterface ImageSliderProps {\r\n  images: string[];\r\n  autoPlay?: boolean;\r\n  autoPlayInterval?: number;\r\n}\r\n\r\nconst ImageSlider: React.FC<ImageSliderProps> = ({ \r\n  images, \r\n  autoPlay = true, \r\n  autoPlayInterval = 5000 \r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  \r\n  // Auto-play functionality\r\n  useEffect(() => {\r\n    if (!autoPlay) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      setCurrentIndex((prevIndex) => (prevIndex + 1) % images.length);\r\n    }, autoPlayInterval);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, [autoPlay, autoPlayInterval, images.length]);\r\n  \r\n  // Navigate to the next slide\r\n  const nextSlide = () => {\r\n    setCurrentIndex((prevIndex) => (prevIndex + 1) % images.length);\r\n  };\r\n  \r\n  // Navigate to the previous slide\r\n  const prevSlide = () => {\r\n    setCurrentIndex((prevIndex) => (prevIndex - 1 + images.length) % images.length);\r\n  };\r\n  \r\n  // Navigate to a specific slide\r\n  const goToSlide = (index: number) => {\r\n    setCurrentIndex(index);\r\n  };\r\n  \r\n  return (\r\n    <div className=\"relative w-full h-[45vh] overflow-hidden image-slider\">\r\n      {/* Images */}\r\n      <div className=\"relative w-full h-full\">\r\n        {images.map((image, index) => (\r\n          <div\r\n            key={index}\r\n            className={`absolute top-0 left-0 w-full h-full transition-opacity duration-500 ease-in-out\r\n              ${index === currentIndex ? 'opacity-100 z-20' : 'opacity-0 z-10'}`}\r\n          >\r\n            {/* Main image (35% width centered) */}\r\n            <div className=\"relative w-full h-full flex justify-center items-center\">\r\n              <div className=\"w-[80%] h-full z-20 relative\">\r\n                <img\r\n                  src={image}\r\n                  alt={`Slide ${index + 1}`}\r\n                  className=\"w-full h-full object-cover rounded-lg shadow-lg\"\r\n                />\r\n              </div>\r\n              \r\n              {/* Background image (blurred, full width) */}\r\n              <div className=\"absolute inset-0 z-10\">\r\n                <img\r\n                  src={image}\r\n                  alt={`Slide background ${index + 1}`}\r\n                  className=\"w-full h-full object-cover filter blur-sm opacity-50\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Navigation buttons */}\r\n      <button\r\n        onClick={prevSlide}\r\n              className=\"hover:opacity-100 hover:border-1 hover:border-blue-200 opacity-75 cursor-pointer absolute left-4 top-1/2 transform -translate-y-1/2 z-30 bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-3 rounded-full transition-all\"\r\n        aria-label=\"Previous slide\"\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n        </svg>\r\n      </button>\r\n      \r\n      <button\r\n        onClick={nextSlide}\r\n        className=\"hover:opacity-100 hover:border-1 hover:border-blue-200 opacity-75 cursor-pointer absolute right-4 top-1/2 transform -translate-y-1/2 z-30 bg-black bg-opacity-30 hover:bg-opacity-50 text-white p-3 rounded-full transition-all\"\r\n        aria-label=\"Next slide\"\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n        </svg>\r\n      </button>\r\n      \r\n      {/* Indicators */}\r\n      <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-30 flex space-x-2\">\r\n        {images.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => goToSlide(index)}\r\n            className={`cursor-pointer w-2 h-2 rounded-full transition-all ${\r\n              index === currentIndex \r\n                ? 'bg-white scale-110' \r\n                : 'bg-white bg-opacity-50 hover:bg-opacity-75'\r\n            }`}\r\n            aria-label={`Go to slide ${index + 1}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImageSlider;","import React from 'react';\r\nimport type { LucideIcon } from 'lucide-react';\r\n\r\ninterface Category {\r\n  id: number;\r\n  title: string;\r\n    icon: LucideIcon;\r\n    link: string\r\n}\r\n\r\ninterface CategoryCardProps {\r\n    category: string;\r\n    icon: LucideIcon;\r\n    link: string\r\n}\r\n\r\nconst CategoryCard: React.FC<CategoryCardProps> = ({ category, icon: Icon, link=undefined }) => {\r\n    return (\r\n      <a href={link}>\r\n    <div className=\"cursor-pointer bg-white shadow-md hover:shadow-xl rounded-xl p-6 text-center transition-all duration-300 hover:scale-105 border border-gray-50 category-card\">\r\n      <div className=\"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 hover:text-primary-600 hover:bg-primary-50 transition-colors category-icon\">\r\n        <Icon size={28} strokeWidth={1.5} />\r\n      </div>\r\n      <h3 className=\"font-medium text-gray-800 tracking-wide\">{category}</h3>\r\n            </div>\r\n        </a>\r\n  );\r\n};\r\n\r\ninterface CategoriesProps {\r\n  categories: Category[];\r\n}\r\n\r\nconst Categories: React.FC<CategoriesProps> = ({ categories }) => {\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-4\">\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\r\n        {categories.map((category, key) => (\r\n          <CategoryCard \r\n            key={`${category.id} - ${key}`} \r\n            category={category.title} \r\n                icon={category.icon}\r\n                link={category.link}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Categories;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\n// Definir la interfaz para un slide\r\ninterface Slide {\r\n  title: string;\r\n  description: string;\r\n  buttonText: string;\r\n  buttonAction: () => void;\r\n  image: string;\r\n  color: string; // Se espera un color en formato rgba() o hexadecimal\r\n}\r\n\r\n// Definir las props del componente\r\ninterface SliderProps {\r\n  slides: Slide[];\r\n  interval?: number;\r\n}\r\n\r\nconst TextSlider: React.FC<SliderProps> = ({ slides, interval = 5000 }) => {\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n\r\n  // Cambio automático de slide\r\n  useEffect(() => {\r\n    const timer = setInterval(() => {\r\n      setCurrentSlide((prevSlide) => (prevSlide + 1) % slides.length);\r\n    }, interval);\r\n\r\n    return () => clearInterval(timer);\r\n  }, [slides.length, interval]);\r\n\r\n  // Función para cambiar manualmente el slide\r\n  const goToSlide = (index: number) => {\r\n    setCurrentSlide(index);\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative overflow-hidden rounded-xl h-96 text-slider\">\r\n      {slides.map((slide, index) => {\r\n        const contentPosition =\r\n        // Determinar la posición del contenido según el índice del slide (comentado) \r\n        // index % 2 === 0 ? \r\n        \"items-start text-left\" \r\n        // : \"items-end text-right\";\r\n\r\n        return (\r\n          <div\r\n            key={index}\r\n            className={`absolute inset-0 w-full h-full transition-opacity duration-700 ${\r\n              currentSlide === index ? \"opacity-100\" : \"opacity-0 pointer-events-none\"\r\n            }`}\r\n            style={{\r\n              backgroundImage: `linear-gradient(${slide.color}, ${slide.color}), url(${slide.image})`,\r\n              backgroundSize: \"cover\",\r\n              backgroundPosition: \"center\",\r\n              backgroundBlendMode: \"multiply\", // Mezcla la imagen con el color de fondo\r\n            }}\r\n          >\r\n            <div className={`relative h-full flex flex-col justify-center p-8 md:p-12 ${contentPosition}`}>\r\n              <div className=\"max-w-md\">\r\n                <h1 className=\"text-3xl md:text-4xl font-bold mb-4 text-white\">{slide.title}</h1>\r\n                <p className=\"text-lg md:text-xl mb-6 text-white opacity-90\">{slide.description}</p>\r\n                <button\r\n                  onClick={slide.buttonAction}\r\n                  className=\"cursor-pointer bg-white text-gray-900 font-medium px-6 py-3 rounded-md hover:bg-gray-100 transition-colors\"\r\n                >\r\n                  {slide.buttonText}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      {/* Indicadores (bolitas) */}\r\n      <div className=\"absolute bottom-4 left-0 right-0 flex justify-center space-x-2\">\r\n        {slides.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => goToSlide(index)}\r\n            className={`cursor-pointer w-2 h-2 rounded-full transition-all duration-300 ${\r\n              currentSlide === index ? \"bg-white scale-125\" : \"bg-white bg-opacity-50 hover:bg-opacity-75\"\r\n            }`}\r\n            aria-label={`Go to slide ${index + 1}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextSlider;\r\n","import React, { useState } from 'react';\r\nimport { ShoppingCart, Tag } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useCart } from '../../hooks/useCart';\r\nimport { NotificationType } from '../../contexts/CartContext';\r\n\r\n// Definir la interfaz para un producto (compatible con la API)\r\ninterface Product {\r\n  id?: number;\r\n  name: string;\r\n  slug?: string;\r\n  description?: string;\r\n  price: number | string; // ✅ Aceptar tanto número como string\r\n  final_price?: number | string; // ✅ Aceptar tanto número como string\r\n  discount_percentage?: number | string; // ✅ Aceptar tanto número como string\r\n  main_image?: string;\r\n  category_name?: string;\r\n  stock?: number | string;\r\n  is_in_stock?: boolean;\r\n  featured?: boolean;\r\n  status?: string;\r\n  recommendation_type?: string;\r\n  // Compatibilidad con interfaz antigua\r\n  discount?: number | string;\r\n  image?: string;\r\n}\r\n\r\n// Definir las props del componente\r\ninterface ProductGridProps {\r\n  products?: Product[];\r\n  title?: string;\r\n  onClick?: (productId: number) => void;\r\n}\r\n\r\nconst ProductGrid: React.FC<ProductGridProps> = ({ \r\n  products=[], title,\r\n  onClick\r\n}) => {\r\n  const { addToCart, showNotification } = useCart();\r\n  const [loadingStates, setLoadingStates] = useState<Record<number, boolean>>({});\r\n  // ✅ FUNCIONES HELPER PARA CONVERSIÓN SEGURA DE TIPOS\r\n  const safeNumber = (value: number | string | null | undefined, defaultValue: number = 0): number => {\r\n    if (typeof value === 'number') return value;\r\n    if (typeof value === 'string') {\r\n      const parsed = parseFloat(value);\r\n      return isNaN(parsed) ? defaultValue : parsed;\r\n    }\r\n    return defaultValue;\r\n  };\r\n\r\n\r\n  // Función para obtener el precio final (ya calculado por la API)\r\n  const getFinalPrice = (product: Product): number => {\r\n    // Si viene final_price de la API, usarlo\r\n    if (product.final_price !== undefined) {\r\n      return safeNumber(product.final_price);\r\n    }\r\n    // Fallback: calcular con price y discount\r\n    const safePrice = safeNumber(product.price);\r\n    const discount = safeNumber(product.discount_percentage) || safeNumber(product.discount) || 0;\r\n    if (discount > 0) {\r\n      return safePrice - (safePrice * (discount / 100));\r\n    }\r\n    return safePrice;\r\n  };\r\n\r\n  // Función para obtener el descuento\r\n  const getDiscount = (product: Product): number => {\r\n    return safeNumber(product.discount_percentage) || safeNumber(product.discount) || 0;\r\n  };\r\n\r\n  // Función para obtener la imagen principal\r\n  const getMainImage = (product: Product): string => {\r\n    return product.main_image || product.image || 'https://via.placeholder.com/400x300/f3f4f6/9ca3af?text=Sin+Imagen';\r\n  };\r\n\r\n  // Formato de precio\r\n  const formatPrice = (price: number): string => {\r\n    return `$${price.toFixed(2)}`;\r\n  };\r\n\r\n  // Función para manejar añadir al carrito\r\n  const handleAddToCart = async (product: Product) => {\r\n    if (!product.id || loadingStates[product.id]) return;\r\n\r\n    setLoadingStates(prev => ({ ...prev, [product.id!]: true }));\r\n\r\n    try {\r\n      if (onClick) {\r\n        // Si hay función externa, usarla\r\n        onClick(product.id);\r\n      } else {\r\n        // Usar el hook del carrito\r\n        const success = await addToCart({\r\n          productId: product.id,\r\n          quantity: 1,\r\n        });\r\n\r\n        if (success) {\r\n          showNotification(\r\n            NotificationType.SUCCESS,\r\n            `${product.name} ha sido agregado al carrito`\r\n          );\r\n        } else {\r\n          showNotification(\r\n            NotificationType.ERROR,\r\n            \"Error al agregar producto al carrito\"\r\n          );\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n      showNotification(\r\n        NotificationType.ERROR,\r\n        \"Error al agregar producto al carrito\"\r\n      );\r\n    } finally {\r\n      setTimeout(() => {\r\n        if (product.id) {\r\n          setLoadingStates(prev => ({ ...prev, [product.id!]: false }));\r\n        }\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"mb-12\">\r\n      <h2 className=\"text-2xl font-bold mb-6\">{title}</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {products.map((product) => {\r\n          const finalPrice = getFinalPrice(product);\r\n          const discount = getDiscount(product);\r\n          const hasDiscount = discount > 0;\r\n          const mainImage = getMainImage(product);\r\n          \r\n          return (\r\n            <div \r\n              key={product.id || `product-${Math.random()}`} \r\n              className=\"bg-white shadow rounded-xl overflow-hidden hover:shadow-lg transition-all duration-300 group\"\r\n            >\r\n              {/* Imagen del producto */}\r\n              <div \r\n                className=\"h-48 bg-gray-100 relative overflow-hidden\"\r\n                style={{\r\n                  backgroundImage: `url(\"${mainImage}\")`,\r\n                  backgroundSize: 'cover',\r\n                  backgroundPosition: 'center',\r\n                  backgroundRepeat: 'no-repeat'\r\n                }}\r\n                onError={(e) => {\r\n                  // Fallback si la imagen falla al cargar\r\n                  const target = e.target as HTMLDivElement;\r\n                  target.style.backgroundImage = 'url(\"https://via.placeholder.com/400x300/f3f4f6/9ca3af?text=Error+Imagen\")';\r\n                }}\r\n              >\r\n                {/* Badge de descuento */}\r\n                {hasDiscount && (\r\n                  <div className=\"absolute top-3 right-3 bg-primary-600 text-white text-sm font-medium px-2 py-1 rounded-md flex items-center\">\r\n                    <Tag size={14} className=\"mr-1\" />\r\n                    {discount}% OFF\r\n                  </div>\r\n                )}\r\n              </div>\r\n              \r\n              {/* Información del producto */}\r\n              <div className=\"p-4\">\r\n                <Link to={`/products/${product.id || 0}`}>\r\n                  <h3 className=\"font-medium text-lg mb-2 text-gray-800 hover:text-primary-600 transition-colors cursor-pointer\">{product.name}</h3>\r\n                </Link>\r\n                {product.description && (\r\n                  <p className=\"text-gray-600 text-sm mb-4\">{product.description}</p>\r\n                )}\r\n                {product.category_name && (\r\n                  <p className=\"text-gray-500 text-xs mb-2\">{product.category_name}</p>\r\n                )}\r\n                \r\n                <div className=\"flex justify-between items-center\">\r\n                  {/* Precio con o sin descuento */}\r\n                  <div>\r\n                    {hasDiscount ? (\r\n                      <div className=\"flex flex-col\">\r\n                        <span className=\"line-through text-gray-500 text-sm\">\r\n                          {formatPrice(safeNumber(product.price))}\r\n                        </span>\r\n                        <span className=\"font-bold text-primary-600\">\r\n                          {formatPrice(finalPrice)}\r\n                        </span>\r\n                      </div>\r\n                    ) : (\r\n                      <span className=\"font-bold text-primary-600\">\r\n                        {formatPrice(finalPrice)}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {/* Botón de añadir al carrito */}\r\n                  <button \r\n                    onClick={() => handleAddToCart(product)}\r\n                    disabled={!product.id || loadingStates[product.id] || !product.is_in_stock}\r\n                    className={`cursor-pointer px-3 py-2 rounded-lg text-sm flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${\r\n                      product.is_in_stock !== false \r\n                        ? 'bg-primary-600 text-white hover:bg-primary-700' \r\n                        : 'bg-gray-400 text-white'\r\n                    }`}\r\n                  >\r\n                    {product.id && loadingStates[product.id] ? (\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-1\"></div>\r\n                    ) : (\r\n                      <ShoppingCart size={16} className=\"mr-1\" />\r\n                    )}\r\n                    <span className='hidden md:block'>\r\n                      {product.is_in_stock === false ? 'Sin Stock' : 'Añadir al Carrito'}\r\n                    </span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProductGrid;","import React, {useState, useRef, useEffect, memo} from \"react\";\r\nimport {ChevronLeft, ChevronRight} from \"lucide-react\";\r\nimport ProductCardCompact from \"./ProductCardCompact\";\r\n\r\n// Interfaces\r\ninterface ProductType {\r\n\tid: number;\r\n\tname: string;\r\n\tprice: number;\r\n\tdiscount?: number;\r\n\trating?: number;\r\n\treviews?: number;\r\n\timage: string;\r\n\tcategory?: string;\r\n\tisNew?: boolean;\r\n\tstock?: number;\r\n\tslug?: string;\r\n}\r\n\r\ninterface CarouselProps {\r\n\tpersonalizedProducts: ProductType[];\r\n\ttrendingProducts: ProductType[];\r\n\tonAddToCart: (id: number) => void;\r\n\tonAddToWishlist: (id: number) => void;\r\n\tcolor: boolean;\r\n\tisAuthenticated?: boolean;\r\n}\r\n\r\n// Componente de carrusel\r\nconst ProductCarousel: React.FC<CarouselProps> = memo(({\r\n\tpersonalizedProducts,\r\n\ttrendingProducts,\r\n\tonAddToCart,\r\n\tonAddToWishlist,\r\n\tcolor,\r\n}) => {\r\n\t// Refs para los contenedores de carrusel\r\n\tconst personalizedCarouselRef = useRef<HTMLDivElement>(null);\r\n\tconst trendingCarouselRef = useRef<HTMLDivElement>(null);\r\n\r\n\t// Estados para controlar botones de navegación\r\n\tconst [canScrollLeftPersonalized, setCanScrollLeftPersonalized] =\r\n\t\tuseState(false);\r\n\tconst [canScrollRightPersonalized, setCanScrollRightPersonalized] =\r\n\t\tuseState(true);\r\n\tconst [canScrollLeftTrending, setCanScrollLeftTrending] = useState(false);\r\n\tconst [canScrollRightTrending, setCanScrollRightTrending] = useState(true);\r\n\r\n\t// Función para desplazar a la izquierda\r\n\tconst scrollLeft = (ref: React.RefObject<HTMLDivElement | null>) => {\r\n\t\tif (ref && ref.current) {\r\n\t\t\t// Obtener el ancho del primer elemento hijo para determinar cuánto desplazar\r\n\t\t\tconst firstChild = ref.current.querySelector(\".product-card-wrapper\");\r\n\t\t\tif (firstChild) {\r\n\t\t\t\t// En móvil (menos de 640px) desplazarse de uno en uno, en otros tamaños de dos en dos\r\n\t\t\t\tconst multiplier = window.innerWidth < 640 ? 1 : 2;\r\n\t\t\t\tconst scrollAmount = -1 * (firstChild.clientWidth + 12) * multiplier;\r\n\t\t\t\tref.current.scrollBy({left: scrollAmount, behavior: \"smooth\"});\r\n\t\t\t} else {\r\n\t\t\t\t// Fallback si no se puede obtener el ancho\r\n\t\t\t\tref.current.scrollBy({left: -400, behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Función para desplazar a la derecha\r\n\tconst scrollRight = (ref: React.RefObject<HTMLDivElement | null>) => {\r\n\t\tif (ref && ref.current) {\r\n\t\t\t// Obtener el ancho del primer elemento hijo para determinar cuánto desplazar\r\n\t\t\tconst firstChild = ref.current.querySelector(\".product-card-wrapper\");\r\n\t\t\tif (firstChild) {\r\n\t\t\t\t// En móvil (menos de 640px) desplazarse de uno en uno, en otros tamaños de dos en dos\r\n\t\t\t\tconst multiplier = window.innerWidth < 640 ? 1 : 2;\r\n\t\t\t\tconst scrollAmount = (firstChild.clientWidth + 12) * multiplier;\r\n\t\t\t\tref.current.scrollBy({left: scrollAmount, behavior: \"smooth\"});\r\n\t\t\t} else {\r\n\t\t\t\t// Fallback si no se puede obtener el ancho\r\n\t\t\t\tref.current.scrollBy({left: 400, behavior: \"smooth\"});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Función para comprobar si se puede desplazar\r\n\tconst checkScrollability = (\r\n\t\telement: HTMLDivElement,\r\n\t\tsetCanScrollLeft: React.Dispatch<React.SetStateAction<boolean>>,\r\n\t\tsetCanScrollRight: React.Dispatch<React.SetStateAction<boolean>>\r\n\t) => {\r\n\t\tif (element) {\r\n\t\t\tsetCanScrollLeft(element.scrollLeft > 0);\r\n\t\t\tsetCanScrollRight(\r\n\t\t\t\telement.scrollWidth > element.clientWidth &&\r\n\t\t\t\t\telement.scrollLeft < element.scrollWidth - element.clientWidth\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\t// Efecto para configurar oyentes de desplazamiento\r\n\tuseEffect(() => {\r\n\t\tconst personalizedEl = personalizedCarouselRef.current;\r\n\t\tconst trendingEl = trendingCarouselRef.current;\r\n\r\n\t\tconst handlePersonalizedScroll = () => {\r\n\t\t\tif (personalizedEl) {\r\n\t\t\t\tcheckScrollability(\r\n\t\t\t\t\tpersonalizedEl,\r\n\t\t\t\t\tsetCanScrollLeftPersonalized,\r\n\t\t\t\t\tsetCanScrollRightPersonalized\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst handleTrendingScroll = () => {\r\n\t\t\tif (trendingEl) {\r\n\t\t\t\tcheckScrollability(\r\n\t\t\t\t\ttrendingEl,\r\n\t\t\t\t\tsetCanScrollLeftTrending,\r\n\t\t\t\t\tsetCanScrollRightTrending\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// También verificar scrollability cuando cambia el tamaño de la ventana\r\n\t\tconst handleResize = () => {\r\n\t\t\tif (personalizedEl) {\r\n\t\t\t\thandlePersonalizedScroll();\r\n\t\t\t}\r\n\t\t\tif (trendingEl) {\r\n\t\t\t\thandleTrendingScroll();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Configurar oyentes\r\n\t\tif (personalizedEl) {\r\n\t\t\tpersonalizedEl.addEventListener(\"scroll\", handlePersonalizedScroll);\r\n\t\t\t// Comprobar el estado inicial\r\n\t\t\thandlePersonalizedScroll();\r\n\t\t}\r\n\r\n\t\tif (trendingEl) {\r\n\t\t\ttrendingEl.addEventListener(\"scroll\", handleTrendingScroll);\r\n\t\t\t// Comprobar el estado inicial\r\n\t\t\thandleTrendingScroll();\r\n\t\t}\r\n\r\n\t\t// Agregar evento de redimensionamiento\r\n\t\twindow.addEventListener(\"resize\", handleResize);\r\n\r\n\t\t// Limpiar oyentes\r\n\t\treturn () => {\r\n\t\t\tif (personalizedEl) {\r\n\t\t\t\tpersonalizedEl.removeEventListener(\"scroll\", handlePersonalizedScroll);\r\n\t\t\t}\r\n\t\t\tif (trendingEl) {\r\n\t\t\t\ttrendingEl.removeEventListener(\"scroll\", handleTrendingScroll);\r\n\t\t\t}\r\n\t\t\twindow.removeEventListener(\"resize\", handleResize);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-8\">\r\n\t\t\t{/* Sección de productos personalizados */}\r\n\t\t\t<div className=\"relative\">\r\n\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\r\n\t\t\t\t\t<h2 className=\"text-xl font-bold text-gray-800\">\r\n\t\t\t\t\t\tRecomendados para ti\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<div className=\"flex gap-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tscrollLeft(\r\n\t\t\t\t\t\t\t\t\tpersonalizedCarouselRef as React.RefObject<HTMLDivElement>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdisabled={!canScrollLeftPersonalized}\r\n\t\t\t\t\t\t\tclassName={`p-1 rounded-full border ${\r\n\t\t\t\t\t\t\t\tcanScrollLeftPersonalized\r\n\t\t\t\t\t\t\t\t\t? \"text-gray-700 border-gray-300 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t: \"text-gray-400 border-gray-200 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronLeft size={20} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tscrollRight(\r\n\t\t\t\t\t\t\t\t\tpersonalizedCarouselRef as React.RefObject<HTMLDivElement>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdisabled={!canScrollRightPersonalized}\r\n\t\t\t\t\t\t\tclassName={`p-1 rounded-full border ${\r\n\t\t\t\t\t\t\t\tcanScrollRightPersonalized\r\n\t\t\t\t\t\t\t\t\t? \"text-gray-700 border-gray-300 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t: \"text-gray-400 border-gray-200 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronRight size={20} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={personalizedCarouselRef}\r\n\t\t\t\t\tclassName=\"flex overflow-x-auto gap-3 pb-4 hide-scrollbar\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{personalizedProducts.map((product) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={`personalized-${product.id}`}\r\n\t\t\t\t\t\t\tclassName=\"product-card-wrapper flex-none w-[calc(100%-24px)] sm:w-[calc(50%-12px)] md:w-[calc(33.333%-12px)] xl:w-[calc(20%-12px)]\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ProductCardCompact\r\n\t\t\t\t\t\t\t\t{...product}\r\n\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\tonAddToCart={onAddToCart}\r\n\t\t\t\t\t\t\t\tonAddToWishlist={onAddToWishlist}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Sección de productos en tendencia/con descuento */}\r\n\t\t\t<div className=\"relative\">\r\n\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\r\n\t\t\t\t\t<h2 className=\"text-xl font-bold text-gray-800\">\r\n\t\t\t\t\t\tOfertas y tendencias\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<div className=\"flex gap-2\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tscrollLeft(\r\n\t\t\t\t\t\t\t\t\ttrendingCarouselRef as React.RefObject<HTMLDivElement>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdisabled={!canScrollLeftTrending}\r\n\t\t\t\t\t\t\tclassName={`p-1 rounded-full border ${\r\n\t\t\t\t\t\t\t\tcanScrollLeftTrending\r\n\t\t\t\t\t\t\t\t\t? \"text-gray-700 border-gray-300 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t: \"text-gray-400 border-gray-200 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronLeft size={20} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tscrollRight(\r\n\t\t\t\t\t\t\t\t\ttrendingCarouselRef as React.RefObject<HTMLDivElement>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tdisabled={!canScrollRightTrending}\r\n\t\t\t\t\t\t\tclassName={`p-1 rounded-full border ${\r\n\t\t\t\t\t\t\t\tcanScrollRightTrending\r\n\t\t\t\t\t\t\t\t\t? \"text-gray-700 border-gray-300 hover:bg-gray-100\"\r\n\t\t\t\t\t\t\t\t\t: \"text-gray-400 border-gray-200 cursor-not-allowed\"\r\n\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ChevronRight size={20} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tref={trendingCarouselRef}\r\n\t\t\t\t\tclassName=\"flex overflow-x-auto gap-3 pb-4 hide-scrollbar\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{trendingProducts.map((product) => (\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tkey={`trending-${product.id}`}\r\n\t\t\t\t\t\t\tclassName=\"product-card-wrapper flex-none w-[calc(100%-24px)] sm:w-[calc(50%-12px)] md:w-[calc(33.333%-12px)] xl:w-[calc(20%-12px)]\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ProductCardCompact\r\n\t\t\t\t\t\t\t\t{...product}\r\n\t\t\t\t\t\t\t\tcolor={color}\r\n\t\t\t\t\t\t\t\tonAddToCart={onAddToCart}\r\n\t\t\t\t\t\t\t\tonAddToWishlist={onAddToWishlist}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Estilos CSS para ocultar la barra de desplazamiento */}\r\n\t\t\t<style>{`\r\n        .hide-scrollbar {\r\n          -ms-overflow-style: none;  /* IE and Edge */\r\n          scrollbar-width: none;  /* Firefox */\r\n        }\r\n        .hide-scrollbar::-webkit-scrollbar {\r\n          display: none;  /* Chrome, Safari, Opera */\r\n        }\r\n      `}</style>\r\n\t\t</div>\r\n\t);\r\n});\r\n\r\nexport default ProductCarousel;","import React from 'react';\r\n\r\n\r\ninterface Feature {\r\n  title: string;\r\n  description: string;\r\n  icon: React.ElementType;\r\n  color?: string;\r\n}\r\n\r\ninterface WhyUsProps {\r\n  title?: string;\r\n  features?: Feature[];\r\n}\r\n\r\nconst WhyUs: React.FC<WhyUsProps> = ({ \r\n  title,\r\n  features = []\r\n}) => {\r\n  return (\r\n    <section className=\"mb-12 py-8\">\r\n      <h2 className=\"text-2xl font-bold mb-8 text-center\">{title}</h2>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {features.map((feature, index) => (\r\n          <div \r\n            key={index} \r\n            className=\"bg-white shadow-md hover:shadow-lg rounded-xl p-6 transition-all duration-300 hover:translate-y-[-5px] feature-card\"\r\n          >\r\n            <div className={`w-14 h-14 ${feature.color || 'bg-indigo-50 text-indigo-600'} rounded-full flex items-center justify-center mb-4 feature-icon`}>\r\n              <feature.icon size={28} strokeWidth={1.5} />\r\n            </div>\r\n            <h3 className=\"font-bold text-lg mb-3 text-gray-800\">{feature.title}</h3>\r\n            <p className=\"text-gray-600 leading-relaxed\">{feature.description}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default WhyUs;","import React from 'react';\r\n\r\ninterface ProductCardSkeletonProps {\r\n  count?: number;\r\n  title?: string;\r\n}\r\n\r\nconst ProductCardSkeleton: React.FC<ProductCardSkeletonProps> = ({ \r\n  count = 6, \r\n  title = \"Cargando productos...\" \r\n}) => {\r\n  return (\r\n    <section className=\"mb-12\">\r\n      {/* Título con skeleton */}\r\n      <div className=\"mb-6\">\r\n        {title ? (\r\n          <h2 className=\"text-2xl font-bold\">{title}</h2>\r\n        ) : (\r\n          <div className=\"h-8 bg-gray-200 rounded w-64 animate-pulse\"></div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Grid de tarjetas skeleton */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {Array.from({ length: count }).map((_, index) => (\r\n          <div \r\n            key={index} \r\n            className=\"bg-white shadow rounded-xl overflow-hidden animate-pulse\"\r\n          >\r\n            {/* Imagen skeleton */}\r\n            <div className=\"h-48 bg-gray-200 relative\">\r\n              {/* Badge skeleton */}\r\n              <div className=\"absolute top-3 right-3 bg-gray-300 rounded-md w-16 h-6\"></div>\r\n            </div>\r\n            \r\n            {/* Contenido skeleton */}\r\n            <div className=\"p-4\">\r\n              {/* Título skeleton */}\r\n              <div className=\"h-6 bg-gray-200 rounded mb-2 w-3/4\"></div>\r\n              \r\n              {/* Descripción skeleton */}\r\n              <div className=\"h-4 bg-gray-200 rounded mb-1 w-full\"></div>\r\n              <div className=\"h-4 bg-gray-200 rounded mb-4 w-2/3\"></div>\r\n              \r\n              <div className=\"flex justify-between items-center\">\r\n                {/* Precio skeleton */}\r\n                <div className=\"flex flex-col space-y-1\">\r\n                  <div className=\"h-4 bg-gray-200 rounded w-16\"></div>\r\n                  <div className=\"h-5 bg-gray-300 rounded w-20\"></div>\r\n                </div>\r\n                \r\n                {/* Botón skeleton */}\r\n                <div className=\"bg-gray-200 rounded-lg w-32 h-10\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ProductCardSkeleton;\r\n","import React from 'react';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\n\r\ninterface ProductCarouselSkeletonProps {\r\n  showPersonalized?: boolean;\r\n  isAuthenticated?: boolean;\r\n}\r\n\r\nconst ProductCarouselSkeleton: React.FC<ProductCarouselSkeletonProps> = ({ \r\n  showPersonalized = true}) => {\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {/* Skeleton para primer carrusel (personalizado/trending) */}\r\n      {showPersonalized && (\r\n        <div className=\"relative\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            {/* Título skeleton */}\r\n            <div className=\"h-7 bg-gray-200 rounded animate-pulse w-64\">\r\n            </div>\r\n            {/* Botones de navegación skeleton */}\r\n            <div className=\"flex gap-2\">\r\n              <div className=\"p-1 rounded-full border border-gray-200 bg-gray-100 opacity-50\">\r\n                <ChevronLeft size={20} className=\"text-gray-400\" />\r\n              </div>\r\n              <div className=\"p-1 rounded-full border border-gray-200 bg-gray-100 opacity-50\">\r\n                <ChevronRight size={20} className=\"text-gray-400\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Carrusel skeleton */}\r\n          <div className=\"flex overflow-hidden gap-3 pb-4\">\r\n            {Array.from({ length: 5 }).map((_, index) => (\r\n              <div\r\n                key={`personalized-skeleton-${index}`}\r\n                className=\"flex-none w-[calc(100%-24px)] sm:w-[calc(50%-12px)] md:w-[calc(33.333%-12px)] xl:w-[calc(20%-12px)]\"\r\n              >\r\n                <div className=\"bg-white shadow rounded-xl overflow-hidden animate-pulse\">\r\n                  {/* Imagen skeleton */}\r\n                  <div className=\"h-40 bg-gray-200 relative\">\r\n                    {/* Badge skeleton */}\r\n                    <div className=\"absolute top-2 right-2 bg-gray-300 rounded w-12 h-5\"></div>\r\n                    {/* Rating skeleton */}\r\n                    <div className=\"absolute bottom-2 left-2 bg-gray-300 rounded w-16 h-4\"></div>\r\n                  </div>\r\n                  \r\n                  {/* Contenido skeleton */}\r\n                  <div className=\"p-3\">\r\n                    {/* Nombre skeleton */}\r\n                    <div className=\"h-5 bg-gray-200 rounded mb-2 w-full\"></div>\r\n                    <div className=\"h-4 bg-gray-200 rounded mb-3 w-2/3\"></div>\r\n                    \r\n                    {/* Precio skeleton */}\r\n                    <div className=\"flex justify-between items-center mb-3\">\r\n                      <div className=\"flex flex-col space-y-1\">\r\n                        <div className=\"h-3 bg-gray-200 rounded w-12\"></div>\r\n                        <div className=\"h-5 bg-gray-300 rounded w-16\"></div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* Botones skeleton */}\r\n                    <div className=\"flex gap-2\">\r\n                      <div className=\"flex-1 bg-gray-200 rounded h-8\"></div>\r\n                      <div className=\"bg-gray-200 rounded h-8 w-8\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Skeleton para segundo carrusel (ofertas y tendencias) */}\r\n      <div className=\"relative\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          {/* Título skeleton */}\r\n          <div className=\"h-7 bg-gray-200 rounded animate-pulse w-48\">\r\n          </div>\r\n          {/* Botones de navegación skeleton */}\r\n          <div className=\"flex gap-2\">\r\n            <div className=\"p-1 rounded-full border border-gray-200 bg-gray-100 opacity-50\">\r\n              <ChevronLeft size={20} className=\"text-gray-400\" />\r\n            </div>\r\n            <div className=\"p-1 rounded-full border border-gray-200 bg-gray-100 opacity-50\">\r\n              <ChevronRight size={20} className=\"text-gray-400\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Carrusel skeleton */}\r\n        <div className=\"flex overflow-hidden gap-3 pb-4\">\r\n          {Array.from({ length: 5 }).map((_, index) => (\r\n            <div\r\n              key={`trending-skeleton-${index}`}\r\n              className=\"flex-none w-[calc(100%-24px)] sm:w-[calc(50%-12px)] md:w-[calc(33.333%-12px)] xl:w-[calc(20%-12px)]\"\r\n            >\r\n              <div className=\"bg-white shadow rounded-xl overflow-hidden animate-pulse\">\r\n                {/* Imagen skeleton */}\r\n                <div className=\"h-40 bg-gray-200 relative\">\r\n                  {/* Badge de descuento skeleton */}\r\n                  <div className=\"absolute top-2 right-2 bg-gray-300 rounded w-14 h-5\"></div>\r\n                  {/* Rating skeleton */}\r\n                  <div className=\"absolute bottom-2 left-2 bg-gray-300 rounded w-16 h-4\"></div>\r\n                </div>\r\n                \r\n                {/* Contenido skeleton */}\r\n                <div className=\"p-3\">\r\n                  {/* Nombre skeleton */}\r\n                  <div className=\"h-5 bg-gray-200 rounded mb-2 w-full\"></div>\r\n                  <div className=\"h-4 bg-gray-200 rounded mb-3 w-3/4\"></div>\r\n                  \r\n                  {/* Precio skeleton */}\r\n                  <div className=\"flex justify-between items-center mb-3\">\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                      <div className=\"h-3 bg-gray-200 rounded w-12\"></div>\r\n                      <div className=\"h-5 bg-gray-300 rounded w-16\"></div>\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  {/* Botones skeleton */}\r\n                  <div className=\"flex gap-2\">\r\n                    <div className=\"flex-1 bg-gray-200 rounded h-8\"></div>\r\n                    <div className=\"bg-gray-200 rounded h-8 w-8\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Estilos CSS para la animación */}\r\n      <style>{`\r\n        @keyframes pulse {\r\n          0%, 100% {\r\n            opacity: 1;\r\n          }\r\n          50% {\r\n            opacity: 0.5;\r\n          }\r\n        }\r\n        \r\n        .animate-pulse {\r\n          animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCarouselSkeleton;\r\n","import type { Product } from '../core/domain/entities/Product';\r\n\r\n/**\r\n * Interfaz que espera el ProductCarousel\r\n */\r\nexport interface ProductCarouselType {\r\n  id: number;\r\n  name: string;\r\n  price: number;\r\n  discount?: number;\r\n  rating?: number;\r\n  reviews?: number;\r\n  image: string;\r\n  category?: string;\r\n  isNew?: boolean;\r\n  stock?: number;\r\n  slug?: string;\r\n}\r\n\r\n/**\r\n * Transforma un Product de la API al formato que espera ProductCarousel\r\n */\r\nexport const transformProductForCarousel = (product: Product): ProductCarouselType => {\r\n  // Obtener la imagen principal\r\n  const getMainImage = (): string => {\r\n    if (product.main_image) return product.main_image;\r\n    if (product.image) return product.image;\r\n    \r\n    if (product.images && product.images.length > 0) {\r\n      const firstImage = product.images[0];\r\n      if (typeof firstImage === 'string') {\r\n        return firstImage;\r\n      } else if (typeof firstImage === 'object' && firstImage.url) {\r\n        return firstImage.url;\r\n      }\r\n    }\r\n    \r\n    // Imagen por defecto si no hay ninguna\r\n    return '/images/placeholder-product.jpg';\r\n  };\r\n\r\n  // Calcular discount percentage\r\n  const getDiscountPercentage = (): number | undefined => {\r\n    if (product.discount_percentage) return product.discount_percentage;\r\n    if (product.discountPercentage) return product.discountPercentage;\r\n    \r\n    // Si no hay discount_percentage pero hay precio final, calculamos el descuento\r\n    const finalPrice = product.final_price || product.finalPrice;\r\n    if (finalPrice && finalPrice < product.price) {\r\n      return Math.round(((product.price - finalPrice) / product.price) * 100);\r\n    }\r\n    \r\n    return undefined;\r\n  };\r\n\r\n  // Obtener rating\r\n  const getRating = (): number | undefined => {\r\n    if (product.rating !== null && product.rating !== undefined) return product.rating;\r\n    if (product.calculated_rating !== null && product.calculated_rating !== undefined) {\r\n      return product.calculated_rating;\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Obtener número de reviews\r\n  const getReviews = (): number | undefined => {\r\n    if (product.rating_count !== null && product.rating_count !== undefined) return product.rating_count;\r\n    if (product.ratingCount !== null && product.ratingCount !== undefined) return product.ratingCount;\r\n    if (product.calculated_rating_count !== null && product.calculated_rating_count !== undefined) {\r\n      return product.calculated_rating_count;\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  // Determinar si es nuevo (productos creados en los últimos 30 días)\r\n  const getIsNew = (): boolean => {\r\n\t\tif (typeof product.isNew === \"boolean\") return product.isNew;\r\n\r\n\t\tif (product.created_at || product.createdAt) {\r\n\t\t\tconst createdDate = new Date(product.created_at || product.createdAt!);\r\n\t\t\tconst thirtyDaysAgo = new Date();\r\n\t\t\tthirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\t\t\treturn createdDate > thirtyDaysAgo;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n  return {\r\n    id: product.id!,\r\n    name: product.name || 'Producto sin nombre',\r\n    price: product.final_price || product.finalPrice || product.price || 0,\r\n    discount: getDiscountPercentage(),\r\n    rating: getRating(),\r\n    reviews: getReviews(),\r\n    image: getMainImage(),\r\n    category: product.category_name || product.category?.name,\r\n    isNew: getIsNew(),\r\n    stock: product.stock || 0,\r\n    slug: product.slug\r\n  };\r\n};\r\n\r\n/**\r\n * Transforma un array de Products al formato que espera ProductCarousel\r\n */\r\nexport const transformProductsForCarousel = (products: Product[]): ProductCarouselType[] => {\r\n  return products\r\n    .filter(product => product.id !== undefined) // Filtrar productos sin ID\r\n    .map(transformProductForCarousel);\r\n};\r\n\r\n/**\r\n * Función helper para obtener imagen de producto con fallback\r\n */\r\nexport const getProductImage = (product: Product, size: 'thumbnail' | 'medium' | 'large' | 'original' = 'medium'): string => {\r\n  const defaultImage = '/images/placeholder-product.jpg';\r\n  \r\n  // Prioridad: main_image > image > images array\r\n  if (product.main_image) return product.main_image;\r\n  if (product.image) return product.image;\r\n  \r\n  if (product.images && product.images.length > 0) {\r\n    const firstImage = product.images[0];\r\n    \r\n    if (typeof firstImage === 'string') {\r\n      return firstImage;\r\n    } else if (typeof firstImage === 'object') {\r\n      // Si es un objeto ProductImage, usar el tamaño solicitado\r\n      switch (size) {\r\n        case 'thumbnail':\r\n          return firstImage.thumbnail || firstImage.medium || firstImage.original || defaultImage;\r\n        case 'medium':\r\n          return firstImage.medium || firstImage.original || firstImage.thumbnail || defaultImage;\r\n        case 'large':\r\n          return firstImage.large || firstImage.original || firstImage.medium || defaultImage;\r\n        case 'original':\r\n          return firstImage.original || firstImage.large || firstImage.medium || defaultImage;\r\n        default:\r\n          return firstImage.url || firstImage.medium || firstImage.original || defaultImage;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return defaultImage;\r\n};\r\n\r\n/**\r\n * Función helper para calcular el precio final de un producto\r\n */\r\nexport const calculateProductFinalPrice = (product: Product): number => {\r\n  // Si ya tiene final_price, usarlo\r\n  if (product.final_price !== undefined && product.final_price !== null) {\r\n    return product.final_price;\r\n  }\r\n  \r\n  if (product.finalPrice !== undefined && product.finalPrice !== null) {\r\n    return product.finalPrice;\r\n  }\r\n  \r\n  // Si hay descuento, calcularlo\r\n  const discountPercentage = product.discount_percentage || product.discountPercentage;\r\n  if (discountPercentage && discountPercentage > 0) {\r\n    return product.price * (1 - discountPercentage / 100);\r\n  }\r\n  \r\n  // Precio base\r\n  return product.price;\r\n};\r\n\r\n/**\r\n * Función helper para verificar si un producto está disponible\r\n */\r\nexport const isProductAvailable = (product: Product): boolean => {\r\n  // Verificar stock\r\n  const hasStock = (product.stock || 0) > 0 || !!product.is_in_stock || !!product.isInStock;\r\n  \r\n  // Verificar si está publicado\r\n  const isPublished = product.published !== false && product.status !== 'inactive';\r\n  \r\n  return hasStock && isPublished;\r\n};\r\n\r\nexport default {\r\n  transformProductForCarousel,\r\n  transformProductsForCarousel,\r\n  getProductImage,\r\n  calculateProductFinalPrice,\r\n  isProductAvailable\r\n};\r\n","import { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { ProductService } from '../../core/services/ProductService';\r\nimport { transformProductsForCarousel, type ProductCarouselType } from '../../utils/productTransformer';\r\nimport type { Product } from '../../core/domain/entities/Product';\r\n\r\ninterface UseHomeProductsReturn {\r\n  personalizedProducts: ProductCarouselType[];\r\n  trendingProducts: ProductCarouselType[];\r\n  featuredProducts: Product[]; // 🔧 Cambio: Usar Product[] para compatibilidad con ProductCards\r\n  loading: boolean;\r\n  error: string | null;\r\n  refetch: () => Promise<void>;\r\n  isAuthenticated: boolean;\r\n  hasInitialLoad: boolean; // 🚀 Para evitar flickers\r\n}\r\n\r\n/**\r\n * Hook para obtener productos del HomePage - OPTIMIZADO CON NUEVOS ENDPOINTS\r\n * Cada recarga = productos diferentes para featured/trending, consistentes para personalizados\r\n */\r\nexport const useHomeProducts = (limit = 12): UseHomeProductsReturn => {\r\n  const [personalizedProducts, setPersonalizedProducts] = useState<ProductCarouselType[]>([]);\r\n  const [trendingProducts, setTrendingProducts] = useState<ProductCarouselType[]>([]);\r\n  const [featuredProducts, setFeaturedProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  \r\n  // 🚀 Flag para evitar el flash de contenido inicial\r\n  const [hasInitialLoad, setHasInitialLoad] = useState(false);\r\n  \r\n  // 🚀 Prevenir solicitudes duplicadas y optimizar rendimiento\r\n  const fetchingRef = useRef(false);\r\n  const lastLimitRef = useRef<number>(limit);\r\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  // Verificar autenticación\r\n  const checkAuthentication = (): boolean => {\r\n    const token = localStorage.getItem('auth_token');\r\n    const isAuth = !!token && token.trim() !== '';\r\n    setIsAuthenticated(isAuth);\r\n    return isAuth;\r\n  };\r\n\r\n  const fetchProducts = async () => {\r\n    // 🚀 Prevenir solicitudes duplicadas\r\n    if (fetchingRef.current) {\r\n      console.log('🚫 useHomeProducts: Fetch en curso, ignorando solicitud duplicada');\r\n      return;\r\n    }\r\n\r\n    fetchingRef.current = true;\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const userIsAuthenticated = checkAuthentication();\r\n      console.log('🏠 useHomeProducts: Cargando productos optimizados...', {\r\n        isAuthenticated: userIsAuthenticated,\r\n        limit\r\n      });\r\n\r\n      // SIEMPRE obtener productos featured aleatorios (ProductCards) - usando ProductService directo\r\n      const featuredPromise = ProductService.getFeaturedRandom(6);\r\n\r\n      if (userIsAuthenticated) {\r\n        // 🔐 USUARIO AUTENTICADO\r\n        console.log('🔐 Usuario autenticado - personalizados + trending');\r\n        \r\n        const [personalizedResult, trendingResult, featuredResult] = await Promise.allSettled([\r\n          ProductService.getPersonalizedProducts(limit), // 🆕 Recomendaciones personalizadas\r\n          ProductService.getTrendingAndOffers(limit),     // 🆕 Trending and offers\r\n          featuredPromise                                 // Featured products\r\n        ]);\r\n\r\n        // Procesar recomendaciones personalizadas\r\n        if (personalizedResult.status === 'fulfilled' && personalizedResult.value.data) {\r\n          const transformedPersonalized = transformProductsForCarousel(personalizedResult.value.data);\r\n          setPersonalizedProducts(transformedPersonalized);\r\n          console.log('✅ Recomendaciones personalizadas:', transformedPersonalized.length);\r\n        } else {\r\n          // Fallback: usar trending-offers\r\n          console.log('⚠️ Fallback a trending para personalizadas');\r\n          const fallback = await ProductService.getTrendingAndOffers(limit);\r\n          const transformedFallback = transformProductsForCarousel(fallback.data || []);\r\n          setPersonalizedProducts(transformedFallback);\r\n        }\r\n\r\n        // Procesar trending and offers\r\n        if (trendingResult.status === 'fulfilled' && trendingResult.value.data) {\r\n          const transformedTrending = transformProductsForCarousel(trendingResult.value.data);\r\n          setTrendingProducts(transformedTrending);\r\n          console.log('✅ Trending and offers:', transformedTrending.length);\r\n        } else {\r\n          console.log('⚠️ Fallback a discounted para trending');\r\n          const fallback = await ProductService.getDiscountedProducts(limit);\r\n          const transformedFallback = transformProductsForCarousel(fallback.data || []);\r\n          setTrendingProducts(transformedFallback);\r\n        }\r\n\r\n        // Procesar featured\r\n        if (featuredResult.status === 'fulfilled' && featuredResult.value.data) {\r\n          setFeaturedProducts(featuredResult.value.data); // 🔧 Usar Product[] directamente\r\n          console.log('✅ Featured products:', featuredResult.value.data.length);\r\n        } else {\r\n          setFeaturedProducts([]);\r\n          console.log('⚠️ No featured products available');\r\n        }\r\n\r\n      } else {\r\n        // 🌍 USUARIO NO AUTENTICADO - OPTIMIZADO\r\n        console.log('🌍 Usuario no autenticado - trending + discounted + featured');\r\n        \r\n        const [trendingResult, discountedResult, featuredResult] = await Promise.allSettled([\r\n          ProductService.getTrendingAndOffers(limit), // Para primer carrusel\r\n          ProductService.getDiscountedProducts(limit), // Para segundo carrusel - DIFERENTES productos\r\n          featuredPromise                             // Featured products\r\n        ]);\r\n\r\n        // Primer carrusel - Trending\r\n        if (trendingResult.status === 'fulfilled' && trendingResult.value.data) {\r\n          const transformedTrending = transformProductsForCarousel(trendingResult.value.data);\r\n          setPersonalizedProducts(transformedTrending);\r\n          console.log('✅ Trending products:', transformedTrending.length);\r\n        } else {\r\n          const fallback = await ProductService.getPopularProducts(limit);\r\n          const transformedFallback = transformProductsForCarousel(fallback.data || []);\r\n          setPersonalizedProducts(transformedFallback);\r\n        }\r\n\r\n        // Segundo carrusel - Discounted\r\n        if (discountedResult.status === 'fulfilled' && discountedResult.value.data) {\r\n          const transformedDiscounted = transformProductsForCarousel(discountedResult.value.data);\r\n          setTrendingProducts(transformedDiscounted);\r\n          console.log('✅ Discounted products:', transformedDiscounted.length);\r\n        } else {\r\n          const fallback = await ProductService.getPopularProducts(limit);\r\n          const transformedFallback = transformProductsForCarousel(fallback.data || []);\r\n          setTrendingProducts(transformedFallback);\r\n        }\r\n\r\n        // Featured (igual para todos)\r\n        if (featuredResult.status === 'fulfilled' && featuredResult.value.data) {\r\n          setFeaturedProducts(featuredResult.value.data); // 🔧 Usar Product[] directamente\r\n          console.log('✅ Featured products (no auth):', featuredResult.value.data.length);\r\n        } else {\r\n          setFeaturedProducts([]);\r\n        }\r\n      }\r\n\r\n      console.log('🏠 useHomeProducts: Carga completada');\r\n    } catch (err) {\r\n      console.error('❌ useHomeProducts: Error general:', err);\r\n      setError(err instanceof Error ? err.message : 'Error desconocido');\r\n      \r\n      // Fallback completo\r\n      setPersonalizedProducts([]);\r\n      setTrendingProducts([]);\r\n      setFeaturedProducts([]);\r\n    } finally {\r\n      setLoading(false);\r\n      setHasInitialLoad(true); // 🚀 Marcar que ya cargamos una vez\r\n      fetchingRef.current = false; // 🚀 Permitir nuevas solicitudes\r\n      lastLimitRef.current = limit;\r\n    }\r\n  };\r\n\r\n  // 🚀 Función debounceda para evitar llamadas múltiples\r\n  const debouncedFetchProducts = useMemo(() => {\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n      timeoutRef.current = setTimeout(() => {\r\n        fetchProducts();\r\n      }, 100); // 100ms debounce\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // 🚀 Solo fetch si es la primera carga O si el límite cambió realmente\r\n    const shouldFetch = !hasInitialLoad || (lastLimitRef.current !== limit);\r\n    \r\n    if (shouldFetch && !fetchingRef.current) {\r\n      debouncedFetchProducts();\r\n    }\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (timeoutRef.current) {\r\n        clearTimeout(timeoutRef.current);\r\n      }\r\n    };\r\n  }, [limit, debouncedFetchProducts, hasInitialLoad]); // Incluir hasInitialLoad\r\n\r\n  return {\r\n    personalizedProducts,\r\n    trendingProducts,\r\n    featuredProducts,\r\n    loading,\r\n    error,\r\n    refetch: fetchProducts,\r\n    isAuthenticated,\r\n    hasInitialLoad\r\n  };\r\n};\r\n\r\nexport default useHomeProducts;\r\n","import ApiClient from '../../infrastructure/api/apiClient';\r\nimport type { Product } from '../domain/entities/Product';\r\n\r\nexport interface RecommendationResponse {\r\n  success: boolean;\r\n  data: Product[];\r\n  meta?: {\r\n    total: number;\r\n    count: number;\r\n    [key: string]: any;\r\n  };\r\n}\r\n\r\n/**\r\n * Servicio para manejar recomendaciones de productos - CORREGIDO\r\n */\r\nexport class RecommendationService {\r\n  private static readonly BASE_PATH = '/recommendations';\r\n\r\n  /**\r\n   * Obtiene productos recomendados REALES para el usuario actual\r\n   */\r\n  public static async getRecommendations(limit = 10): Promise<RecommendationResponse> {\r\n    try {\r\n      console.log('🎯 RecommendationService: Llamando a /recommendations...', { limit });\r\n\r\n      // CORREGIDO: Usar ApiClient correctamente  \r\n      const response = await ApiClient.get<RecommendationResponse>(\r\n        this.BASE_PATH,\r\n        { limit }\r\n      );\r\n\r\n      console.log('🎯 RecommendationService: Respuesta recibida:', response);\r\n\r\n      if (response.success && response.data && Array.isArray(response.data)) {\r\n        console.log('✅ RecommendationService: Productos REALES obtenidos:', {\r\n          count: response.data.length,\r\n          productos: response.data.map(p => p.name).slice(0, 3),\r\n          primer_producto: response.data[0]\r\n        });\r\n\r\n        return response;\r\n      } else {\r\n        console.warn('⚠️ RecommendationService: Respuesta sin éxito o datos válidos:', response);\r\n        return {\r\n          success: false,\r\n          data: [],\r\n          meta: { total: 0, count: 0, error: 'Respuesta sin datos válidos' }\r\n        };\r\n      }\r\n    } catch (error: any) {\r\n      console.error('❌ RecommendationService: ERROR COMPLETO:', error);\r\n      console.error('❌ Error status:', error.response?.status);\r\n      console.error('❌ Error data:', error.response?.data);\r\n      \r\n      return {\r\n        success: false,\r\n        data: [],\r\n        meta: {\r\n          total: 0,\r\n          count: 0,\r\n          error: `Error del servidor: ${error.response?.status || 'desconocido'}`\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Registra una interacción del usuario con un producto\r\n   */\r\n  public static async trackInteraction(\r\n    interactionType: string,\r\n    itemId: number,\r\n    metadata: Record<string, any> = {}\r\n  ): Promise<void> {\r\n    try {\r\n      console.log('📊 RecommendationService: Registrando interacción:', {\r\n        interactionType,\r\n        itemId,\r\n        metadata\r\n      });\r\n\r\n      await ApiClient.post(`${this.BASE_PATH}/track-interaction`, {\r\n        interactionType,\r\n        itemId,\r\n        metadata\r\n      });\r\n\r\n      console.log('✅ RecommendationService: Interacción registrada exitosamente');\r\n    } catch (error) {\r\n      console.error('❌ RecommendationService: Error registrando interacción:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Obtiene el perfil del usuario para recomendaciones\r\n   */\r\n  public static async getUserProfile(): Promise<any> {\r\n    try {\r\n      console.log('👤 RecommendationService: Obteniendo perfil de usuario...');\r\n      \r\n      const response = await ApiClient.get(`${this.BASE_PATH}/user-profile`);\r\n      \r\n      console.log('✅ RecommendationService: Perfil obtenido:', response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error('❌ RecommendationService: Error obteniendo perfil:', error);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default RecommendationService;\r\n","import { RecommendationService } from \"../../core/services/RecommendationService\";\r\n/** * Tipos de interacciones disponibles */ export enum InteractionType {\r\n  VIEW = \"view\",\r\n  CLICK = \"click\",\r\n  ADD_TO_CART = \"add_to_cart\",\r\n  ADD_TO_WISHLIST = \"add_to_wishlist\",\r\n  REMOVE_FROM_WISHLIST = \"remove_from_wishlist\",\r\n  SEARCH = \"search\",\r\n  CATEGORY_VIEW = \"category_view\",\r\n  PURCHASE = \"purchase\",\r\n  TIME_SPENT = \"time_spent\",\r\n  RATING = \"rating\",\r\n}\r\n/** * Interfaz para metadatos de interacciones */ interface InteractionMetadata {\r\n  timestamp?: string;\r\n  source?: string;\r\n  action?: string;\r\n  quantity?: number;\r\n  search_term?: string;\r\n  results_count?: number;\r\n  category_name?: string;\r\n  total_amount?: number;\r\n  order_id?: number;\r\n  time_spent_seconds?: number;\r\n  rating_value?: number;\r\n  [key: string]: any;\r\n}\r\n/** * Configuración del servicio */ interface ServiceConfig {\r\n  enableLogging: boolean;\r\n  batchInteractions: boolean;\r\n  batchSize: number;\r\n  batchDelay: number;\r\n  minTimeSpent: number;\r\n}\r\n/** * Servicio profesional para el registro de interacciones de usuario * Optimizado para rendimiento y experiencia de usuario */ export class UserInteractionService {\r\n  private static config: ServiceConfig = {\r\n    enableLogging: true,\r\n    batchInteractions: false,\r\n    batchSize: 5,\r\n    batchDelay: 2000,\r\n    minTimeSpent: 10,\r\n  };\r\n  /**   * Verifica si el usuario está autenticado   */ private static isAuthenticated(): boolean {\r\n    const token = localStorage.getItem(\"auth_token\");\r\n    return !!(token && token.trim() !== \"\");\r\n  }\r\n  /**   * Logger interno para debugging   */ private static log(\r\n    message: string,\r\n    data?: any\r\n  ): void {\r\n    if (this.config.enableLogging) {\r\n      console.log(`🔍 UserInteractionService: ${message}`, data || \"\");\r\n    }\r\n  }\r\n  /**   * Registra una interacción individual   */ private static async recordInteraction(\r\n    type: InteractionType,\r\n    itemId: number,\r\n    metadata: InteractionMetadata = {}\r\n  ): Promise<boolean> {\r\n    if (!this.isAuthenticated()) {\r\n      this.log(\r\n        `Usuario no autenticado - omitiendo ${type} para item ${itemId}`\r\n      );\r\n      return false;\r\n    }\r\n    try {\r\n      const enrichedMetadata: InteractionMetadata = {\r\n        timestamp: new Date().toISOString(),\r\n        action: type,\r\n        ...metadata,\r\n      };\r\n      await RecommendationService.trackInteraction(\r\n        type,\r\n        itemId,\r\n        enrichedMetadata\r\n      );\r\n      this.log(`✅ ${type} registrado exitosamente`, {\r\n        itemId,\r\n        metadata: enrichedMetadata,\r\n      });\r\n      return true;\r\n    } catch (error) {\r\n      this.log(`❌ Error registrando ${type}:`, error);\r\n      return false;\r\n    }\r\n  }\r\n  /**   * Registra una vista de producto   */ public static async trackProductView(\r\n    productId: number,\r\n    source: string = \"unknown\",\r\n    additionalData: Record<string, any> = {}\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(InteractionType.VIEW, productId, {\r\n      source,\r\n      ...additionalData,\r\n    });\r\n  }\r\n  /**   * Registra un click en producto   */ public static async trackProductClick(\r\n    productId: number,\r\n    source: string = \"unknown\",\r\n    additionalData: Record<string, any> = {}\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(InteractionType.CLICK, productId, {\r\n      source,\r\n      ...additionalData,\r\n    });\r\n  }\r\n  /**   * Registra añadir al carrito   */ public static async trackAddToCart(\r\n    productId: number,\r\n    quantity: number = 1,\r\n    source: string = \"unknown\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(\r\n      InteractionType.ADD_TO_CART,\r\n      productId,\r\n      { quantity, source }\r\n    );\r\n  }\r\n  /**   * Registra añadir a favoritos   */ public static async trackAddToWishlist(\r\n    productId: number,\r\n    source: string = \"unknown\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(\r\n      InteractionType.ADD_TO_WISHLIST,\r\n      productId,\r\n      { source }\r\n    );\r\n  }\r\n  /**   * Registra remover de favoritos   */ public static async trackRemoveFromWishlist(\r\n    productId: number,\r\n    source: string = \"unknown\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(\r\n      InteractionType.REMOVE_FROM_WISHLIST,\r\n      productId,\r\n      { source }\r\n    );\r\n  }\r\n  /**   * Registra una búsqueda   */ public static async trackSearch(\r\n    searchTerm: string,\r\n    resultsCount: number = 0,\r\n    source: string = \"search_bar\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(InteractionType.SEARCH, 0, {\r\n      search_term: searchTerm.toLowerCase().trim(),\r\n      results_count: resultsCount,\r\n      source,\r\n    });\r\n  }\r\n  /**   * Registra navegación por categoría   */ public static async trackCategoryView(\r\n    categoryId: number,\r\n    categoryName: string,\r\n    source: string = \"navigation\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(\r\n      InteractionType.CATEGORY_VIEW,\r\n      categoryId,\r\n      { category_name: categoryName, source }\r\n    );\r\n  }\r\n  /**   * Registra una compra completada   */ public static async trackPurchase(\r\n    productIds: number[],\r\n    totalAmount: number,\r\n    orderId?: number\r\n  ): Promise<boolean[]> {\r\n    const results: boolean[] = [];\r\n    for (const productId of productIds) {\r\n      const result = await this.recordInteraction(\r\n        InteractionType.PURCHASE,\r\n        productId,\r\n        {\r\n          total_amount: totalAmount,\r\n          order_id: orderId,\r\n          product_count: productIds.length,\r\n        }\r\n      );\r\n      results.push(result);\r\n    }\r\n    return results;\r\n  }\r\n  /**   * Registra tiempo en página de producto   */ public static async trackTimeOnProduct(\r\n    productId: number,\r\n    timeSpentSeconds: number,\r\n    source: string = \"product_page\"\r\n  ): Promise<boolean> {\r\n    if (timeSpentSeconds < this.config.minTimeSpent) {\r\n      this.log(`Tiempo insuficiente (${timeSpentSeconds}s) - no se registra`);\r\n      return false;\r\n    }\r\n    return await this.recordInteraction(InteractionType.TIME_SPENT, productId, {\r\n      time_spent_seconds: timeSpentSeconds,\r\n      source,\r\n    });\r\n  }\r\n  /**   * Registra una valoración/rating   */ public static async trackRating(\r\n    productId: number,\r\n    ratingValue: number,\r\n    source: string = \"product_page\"\r\n  ): Promise<boolean> {\r\n    return await this.recordInteraction(InteractionType.RATING, productId, {\r\n      rating_value: ratingValue,\r\n      source,\r\n    });\r\n  }\r\n  /**   * Actualiza la configuración del servicio   */ public static updateConfig(\r\n    newConfig: Partial<ServiceConfig>\r\n  ): void {\r\n    this.config = { ...this.config, ...newConfig };\r\n    this.log(\"Configuración actualizada:\", this.config);\r\n  }\r\n  /**   * Obtiene la configuración actual   */ public static getConfig(): ServiceConfig {\r\n    return { ...this.config };\r\n  }\r\n  /**   * Habilita/deshabilita el logging   */ public static setLogging(\r\n    enabled: boolean\r\n  ): void {\r\n    this.config.enableLogging = enabled;\r\n  }\r\n}\r\nexport default UserInteractionService;\r\n","import { useCallback } from \"react\";\r\nimport UserInteractionService from \"../../infrastructure/services/UserInteractionService\";\r\n/** * Hook para registrar interacciones de usuario de manera sencilla * Encapsula la lógica del UserInteractionService */ export const useUserInteractions =\r\n  (defaultSource: string = \"unknown\") => {\r\n    const trackProductView = useCallback(\r\n      (\r\n        productId: number,\r\n        source?: string,\r\n        additionalData?: Record<string, any>\r\n      ) => {\r\n        UserInteractionService.trackProductView(\r\n          productId,\r\n          source || defaultSource,\r\n          additionalData\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackProductClick = useCallback(\r\n      (\r\n        productId: number,\r\n        source?: string,\r\n        additionalData?: Record<string, any>\r\n      ) => {\r\n        UserInteractionService.trackProductClick(\r\n          productId,\r\n          source || defaultSource,\r\n          additionalData\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackAddToCart = useCallback(\r\n      (productId: number, quantity: number = 1, source?: string) => {\r\n        UserInteractionService.trackAddToCart(\r\n          productId,\r\n          quantity,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackAddToWishlist = useCallback(\r\n      (productId: number, source?: string) => {\r\n        UserInteractionService.trackAddToWishlist(\r\n          productId,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackRemoveFromWishlist = useCallback(\r\n      (productId: number, source?: string) => {\r\n        UserInteractionService.trackRemoveFromWishlist(\r\n          productId,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackSearch = useCallback(\r\n      (searchTerm: string, resultsCount?: number, source?: string) => {\r\n        UserInteractionService.trackSearch(\r\n          searchTerm,\r\n          resultsCount,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackCategoryView = useCallback(\r\n      (categoryId: number, categoryName: string, source?: string) => {\r\n        UserInteractionService.trackCategoryView(\r\n          categoryId,\r\n          categoryName,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackTimeOnProduct = useCallback(\r\n      (productId: number, timeSpentSeconds: number, source?: string) => {\r\n        UserInteractionService.trackTimeOnProduct(\r\n          productId,\r\n          timeSpentSeconds,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackRating = useCallback(\r\n      (productId: number, ratingValue: number, source?: string) => {\r\n        UserInteractionService.trackRating(\r\n          productId,\r\n          ratingValue,\r\n          source || defaultSource\r\n        );\r\n      },\r\n      [defaultSource]\r\n    );\r\n    const trackPurchase = useCallback(\r\n      (productIds: number[], totalAmount: number, orderId?: number) => {\r\n        UserInteractionService.trackPurchase(productIds, totalAmount, orderId);\r\n      },\r\n      []\r\n    );\r\n    return {\r\n      trackProductView,\r\n      trackProductClick,\r\n      trackAddToCart,\r\n      trackAddToWishlist,\r\n      trackRemoveFromWishlist,\r\n      trackSearch,\r\n      trackCategoryView,\r\n      trackTimeOnProduct,\r\n      trackRating,\r\n      trackPurchase,\r\n    };\r\n  };\r\nexport default useUserInteractions;\r\n","import React from 'react';\r\nimport ImageSlider from '../components/common/ImageSlider.tsx';\r\nimport Categories from '../components/common/Categories.tsx';\r\nimport TextSlider from '../components/common/TextSlider.tsx';\r\nimport ProductCards from '../components/common/ProductCards.tsx';\r\nimport ProductCarousel from '../components/product/ProductCarousel.tsx';\r\nimport WhyUs from '../components/common/WhyUs.tsx';\r\nimport ProductCardSkeleton from '../components/skeletons/ProductCardSkeleton.tsx';\r\nimport ProductCarouselSkeleton from '../components/skeletons/ProductCarouselSkeleton.tsx';\r\nimport useHomeProducts from '../hooks/useHomeProducts';\r\nimport useUserInteractions from '../hooks/useUserInteractions';\r\nimport { useCart } from '../hooks/useCart';\r\nimport { useFavorites } from '../hooks/useFavorites';\r\nimport { useInvalidateCounters } from '../hooks/useHeaderCounters';\r\nimport { NotificationType } from '../contexts/CartContext';\r\nimport { Smartphone, Tv, Laptop, Monitor } from 'lucide-react';\r\nimport { Truck, ShieldCheck, Headphones, Zap, Award, CreditCard } from 'lucide-react';\r\n\r\nconst HomePage: React.FC = () => {\r\n  // 🆕 Hook para obtener productos dinámicos\r\n  const { personalizedProducts, trendingProducts, featuredProducts, loading, error, isAuthenticated, hasInitialLoad } = useHomeProducts(12);\r\n\r\n  // 📊 Hook para registrar interacciones de usuario\r\n  const { trackAddToCart, trackAddToWishlist } = useUserInteractions('home_page');\r\n\r\n  // 🛒 Hooks para carrito y favoritos\r\n  const { addToCart, showNotification } = useCart();\r\n  const { toggleFavorite } = useFavorites();\r\n  \r\n  // 🔄 Hook para actualizaciones optimistas del header\r\n  const {\r\n    optimisticCartAdd,\r\n    optimisticFavoriteAdd,\r\n    optimisticFavoriteRemove,\r\n    invalidateCounters\r\n  } = useInvalidateCounters();\r\n\r\n  const images = [\r\n    './banner1.png',\r\n    './banner2.png',\r\n  ];\r\n\r\n  //Actualizar links\r\n  const categories = [\r\n    { id: 1, title: \"Smartphones\", icon: Smartphone, link:\"/products/1\"},\r\n    { id: 2, title: \"Laptops\", icon: Laptop, link:\"/products/2\" },\r\n    { id: 3, title: \"Monitores\", icon: Monitor, link:\"/products/3\" },\r\n    { id: 4, title: \"TVs\", icon: Tv, link: \"/products/4\" },\r\n  ];\r\n\r\n  const slidesData = [\r\n  {\r\n    title: \"Llévate más, paga menos ¡Solo en comersia!\",\r\n    description: \"Regreso a clase con los mejores precios del mercado.\",\r\n    buttonText: \"Comprar Ahora\",\r\n    buttonAction: () => console.log(\"Shop Now clicked\"),\r\n    image: \"./2banner1.png\",\r\n    color: \"rgba(75, 0, 130, 0)\"\r\n  },\r\n  {\r\n    title: \"Tú proveedor mayorista de confianza.\",\r\n    description: \"Envío gratis a todo el Ecuador en tu primera compra.\",\r\n    buttonText: \"Ver Colección\",\r\n    buttonAction: () => console.log(\"View Collection clicked\"),\r\n    image: \"./2banner2.png\",\r\n    color: \"rgba(46, 204, 113, 0)\"\r\n  },\r\n  {\r\n    title: \"Potencia, precisión y precios bajos para tu taller.\",\r\n    description: \"Aplica cupón de descuento\",\r\n    buttonText: \"Ver Ofertas\",\r\n    buttonAction: () => console.log(\"See Offers clicked\"),\r\n    image: \"./2banner3.png\",\r\n    color: \"rgba(255, 165, 0, 0)\"\r\n  }\r\n  ];\r\n  \r\n  const features = [{ \r\n      title: 'Entrega Rápida', \r\n      description: 'Recibe tus productos en la puerta de tu casa rápidamente con nuestras opciones de envío express.', \r\n      icon: Truck,\r\n      color: 'bg-blue-50 text-blue-600'\r\n    },\r\n    { \r\n      title: 'Pago Seguro', \r\n      description: 'Garantizamos métodos de pago seguros con encriptación y protección contra fraudes para tu tranquilidad.', \r\n      icon: ShieldCheck,\r\n      color: 'bg-green-50 text-green-600'\r\n    },\r\n    { \r\n      title: 'Soporte 24/7', \r\n      description: 'Nuestro equipo de atención al cliente está disponible las 24 horas para ayudarte con cualquier pregunta o problema.', \r\n      icon: Headphones,\r\n      color: 'bg-purple-50 text-purple-600'\r\n    },\r\n    { \r\n      title: 'Rendimiento Rápido', \r\n      description: 'Navega por nuestra tienda con velocidad instantánea, sin retrasos ni ralentizaciones al comprar con nosotros.', \r\n      icon: Zap,\r\n      color: 'bg-amber-50 text-amber-600'\r\n    },\r\n    { \r\n      title: 'Garantía de Calidad', \r\n      description: 'Todos nuestros productos son probados rigurosamente y vienen con garantía de satisfacción o te devolvemos tu dinero.', \r\n      icon: Award,\r\n      color: 'bg-red-50 text-red-600'\r\n    },\r\n    { \r\n      title: 'Pago Flexible', \r\n      description: 'Elige entre varios métodos de pago incluyendo tarjetas de crédito, PayPal y opciones de pago a plazos.', \r\n      icon: CreditCard,\r\n      color: 'bg-indigo-50 text-indigo-600'\r\n    }]\r\n  \r\n  // Manejadores de eventos con registro de interacciones\r\n  const handleAddToCart = async (id: number) => {\r\n    try {\r\n      console.log(`Producto ${id} añadido al carrito`);\r\n      \r\n      // 🚀 Actualización optimista INMEDIATA del header\r\n      optimisticCartAdd();\r\n      \r\n      // Registrar interacción de usuario\r\n      trackAddToCart(id, 1, 'home_carousel');\r\n      \r\n      // Agregar al carrito\r\n      const success = await addToCart({\r\n        productId: id,\r\n        quantity: 1,\r\n      });\r\n\r\n      if (success) {\r\n        showNotification(\r\n          NotificationType.SUCCESS,\r\n          \"Producto agregado al carrito exitosamente\"\r\n        );\r\n        // Invalidar cache para sincronizar con el servidor\r\n        invalidateCounters();\r\n      } else {\r\n        showNotification(\r\n          NotificationType.ERROR,\r\n          \"Error al agregar producto al carrito\"\r\n        );\r\n        // Revertir el contador optimista si falla\r\n        invalidateCounters();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding to cart:', error);\r\n      showNotification(\r\n        NotificationType.ERROR,\r\n        \"Error al agregar producto al carrito\"\r\n      );\r\n      // Revertir el contador optimista si falla\r\n      invalidateCounters();\r\n    }\r\n  };\r\n\r\n  const handleAddToWishlist = async (id: number) => {\r\n    try {\r\n      console.log(`Producto ${id} añadido a la lista de deseos`);\r\n      \r\n      // Registrar interacción de usuario\r\n      trackAddToWishlist(id, 'home_carousel');\r\n      \r\n      // Alternar favorito\r\n      const result = await toggleFavorite(id);\r\n      \r\n      if (result !== undefined) {\r\n        // 🚀 Actualización optimista INMEDIATA del header basada en el resultado\r\n        if (result) {\r\n          optimisticFavoriteAdd();\r\n          showNotification(\r\n            NotificationType.SUCCESS,\r\n            \"Producto añadido a favoritos\"\r\n          );\r\n        } else {\r\n          optimisticFavoriteRemove();\r\n          showNotification(\r\n            NotificationType.INFO,\r\n            \"Producto eliminado de favoritos\"\r\n          );\r\n        }\r\n        // Invalidar cache para sincronizar con el servidor\r\n        invalidateCounters();\r\n      } else {\r\n        showNotification(\r\n          NotificationType.ERROR,\r\n          \"Error al gestionar favoritos\"\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.error('Error managing wishlist:', error);\r\n      showNotification(\r\n        NotificationType.ERROR,\r\n        \"Error al gestionar favoritos\"\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleFeaturedAddToCart = async (id: number) => {\r\n    try {\r\n      console.log(`Producto destacado ${id} añadido al carrito`);\r\n      \r\n      // 🚀 Actualización optimista INMEDIATA del header\r\n      optimisticCartAdd();\r\n      \r\n      // Registrar interacción de usuario\r\n      trackAddToCart(id, 1, 'featured_products');\r\n      \r\n      // Agregar al carrito\r\n      const success = await addToCart({\r\n        productId: id,\r\n        quantity: 1,\r\n      });\r\n\r\n      if (success) {\r\n        showNotification(\r\n          NotificationType.SUCCESS,\r\n          \"Producto destacado agregado al carrito exitosamente\"\r\n        );\r\n        // Invalidar cache para sincronizar con el servidor\r\n        invalidateCounters();\r\n      } else {\r\n        showNotification(\r\n          NotificationType.ERROR,\r\n          \"Error al agregar producto destacado al carrito\"\r\n        );\r\n        // Revertir el contador optimista si falla\r\n        invalidateCounters();\r\n      }\r\n    } catch (error) {\r\n      console.error('Error adding featured product to cart:', error);\r\n      showNotification(\r\n        NotificationType.ERROR,\r\n        \"Error al agregar producto destacado al carrito\"\r\n      );\r\n      // Revertir el contador optimista si falla\r\n      invalidateCounters();\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n       <div className=\"container mx-auto px-4 py-8\">\r\n        {/* Hero Section with Image Slider */}\r\n        <section className=\"mb-12\">\r\n          <ImageSlider images={images} autoPlay={true} autoPlayInterval={5000} />\r\n        </section>\r\n\r\n        {/* Categories Section */}\r\n        <section className=\"mb-8\">\r\n          <h2 className=\"text-2xl font-bold text-center mb-6\">Categorías de Tecnología</h2>\r\n          <Categories categories={categories} />\r\n        </section>\r\n      </div>\r\n      \r\n      <div className=\"max-w-5xl mx-auto\">\r\n        <section className=\"mb-12\">\r\n          <TextSlider slides={slidesData} interval={4000} />         \r\n        </section>\r\n\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <h1 className=\"text-2xl font-bold mb-8\">\r\n            {isAuthenticated ? 'Descubre productos para ti' : 'Productos populares'}\r\n          </h1>          \r\n          \r\n          {/* Mostrar mensaje de error si hay uno */}\r\n          {error && (\r\n            <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n              <p>Error cargando productos: {error}</p>\r\n            </div>\r\n          )}\r\n          \r\n          {/* 🆕 CARRUSEL DE PRODUCTOS CON SKELETON - OPTIMIZADO */}\r\n          {loading && !hasInitialLoad ? (\r\n            <ProductCarouselSkeleton \r\n              showPersonalized={true}\r\n              isAuthenticated={isAuthenticated}\r\n            />\r\n          ) : (personalizedProducts.length > 0 || trendingProducts.length > 0) ? (\r\n            <ProductCarousel\r\n              personalizedProducts={personalizedProducts}\r\n              trendingProducts={trendingProducts}\r\n              onAddToCart={handleAddToCart}\r\n              onAddToWishlist={handleAddToWishlist}\r\n              color={false}\r\n              isAuthenticated={isAuthenticated}\r\n            />\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <p className=\"text-gray-600\">Cargando productos...</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* 🆕 PRODUCTOS DESTACADOS CON SKELETON - OPTIMIZADO */}\r\n        <section className=\"mb-12\">\r\n          {loading && !hasInitialLoad ? (\r\n            <ProductCardSkeleton \r\n              count={6}\r\n              title=\"Cargando productos destacados...\"\r\n            />\r\n          ) : featuredProducts.length > 0 ? (\r\n            <ProductCards \r\n              products={featuredProducts}\r\n              title=\"Productos destacados\" \r\n              onClick={handleFeaturedAddToCart}\r\n            />\r\n          ) : hasInitialLoad ? (\r\n            <div className=\"text-center py-12\">\r\n              <p className=\"text-gray-600\">No hay productos destacados disponibles en este momento.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <p className=\"text-gray-600\">Cargando productos destacados...</p>\r\n            </div>\r\n          )}\r\n        </section>\r\n\r\n        <section className=\"mb-12\">\r\n          <WhyUs features = {features} title = \"Por qué elegirnos\"/>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"names":["ImageSlider","images","autoPlay","autoPlayInterval","currentIndex","setCurrentIndex","useState","useEffect","interval","prevIndex","nextSlide","prevSlide","goToSlide","index","jsxs","jsx","image","_","CategoryCard","category","Icon","link","Categories","categories","key","TextSlider","slides","currentSlide","setCurrentSlide","timer","slide","ProductGrid","products","title","onClick","addToCart","showNotification","useCart","loadingStates","setLoadingStates","safeNumber","value","defaultValue","parsed","getFinalPrice","product","safePrice","discount","getDiscount","getMainImage","formatPrice","price","handleAddToCart","prev","NotificationType","error","finalPrice","hasDiscount","mainImage","e","target","Tag","Link","ShoppingCart","ProductCarousel","memo","personalizedProducts","trendingProducts","onAddToCart","onAddToWishlist","color","personalizedCarouselRef","useRef","trendingCarouselRef","canScrollLeftPersonalized","setCanScrollLeftPersonalized","canScrollRightPersonalized","setCanScrollRightPersonalized","canScrollLeftTrending","setCanScrollLeftTrending","canScrollRightTrending","setCanScrollRightTrending","scrollLeft","ref","firstChild","multiplier","scrollAmount","scrollRight","checkScrollability","element","setCanScrollLeft","setCanScrollRight","personalizedEl","trendingEl","handlePersonalizedScroll","handleTrendingScroll","handleResize","ChevronLeft","ChevronRight","ProductCardCompact","WhyUs","features","feature","ProductCardSkeleton","count","ProductCarouselSkeleton","showPersonalized","transformProductForCarousel","firstImage","getDiscountPercentage","getRating","getReviews","getIsNew","createdDate","thirtyDaysAgo","transformProductsForCarousel","useHomeProducts","limit","setPersonalizedProducts","setTrendingProducts","featuredProducts","setFeaturedProducts","loading","setLoading","setError","isAuthenticated","setIsAuthenticated","hasInitialLoad","setHasInitialLoad","fetchingRef","lastLimitRef","timeoutRef","checkAuthentication","token","isAuth","fetchProducts","userIsAuthenticated","featuredPromise","ProductService","personalizedResult","trendingResult","featuredResult","transformedPersonalized","fallback","transformedFallback","transformedTrending","discountedResult","transformedDiscounted","err","debouncedFetchProducts","useMemo","RecommendationService","response","ApiClient","p","interactionType","itemId","metadata","UserInteractionService","message","data","type","enrichedMetadata","productId","source","additionalData","quantity","searchTerm","resultsCount","categoryId","categoryName","productIds","totalAmount","orderId","results","result","timeSpentSeconds","ratingValue","newConfig","enabled","useUserInteractions","defaultSource","trackProductView","useCallback","trackProductClick","trackAddToCart","trackAddToWishlist","trackRemoveFromWishlist","trackSearch","trackCategoryView","trackTimeOnProduct","trackRating","trackPurchase","HomePage","toggleFavorite","useFavorites","optimisticCartAdd","optimisticFavoriteAdd","optimisticFavoriteRemove","invalidateCounters","useInvalidateCounters","Smartphone","Laptop","Monitor","Tv","slidesData","Truck","ShieldCheck","Headphones","Zap","Award","CreditCard","id","handleAddToWishlist","handleFeaturedAddToCart","ProductCards"],"mappings":"6iBAQA,MAAMA,GAA0C,CAAC,CAC/C,OAAAC,EACA,SAAAC,EAAW,GACX,iBAAAC,EAAmB,GACrB,IAAM,CACJ,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAAAA,SAAS,CAAC,EAGlDC,EAAAA,UAAU,IAAM,CACd,GAAI,CAACL,EAAU,OAET,MAAAM,EAAW,YAAY,IAAM,CACjCH,EAAiBI,IAAeA,EAAY,GAAKR,EAAO,MAAM,GAC7DE,CAAgB,EAEZ,MAAA,IAAM,cAAcK,CAAQ,GAClC,CAACN,EAAUC,EAAkBF,EAAO,MAAM,CAAC,EAG9C,MAAMS,EAAY,IAAM,CACtBL,EAAiBI,IAAeA,EAAY,GAAKR,EAAO,MAAM,CAChE,EAGMU,EAAY,IAAM,CACtBN,EAAiBI,IAAeA,EAAY,EAAIR,EAAO,QAAUA,EAAO,MAAM,CAChF,EAGMW,EAAaC,GAAkB,CACnCR,EAAgBQ,CAAK,CACvB,EAGE,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,wDAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,yBACZ,WAAO,IAAI,CAACC,EAAOH,IAClBE,EAAA,IAAC,MAAA,CAEC,UAAW;AAAA,gBACPF,IAAUT,EAAe,mBAAqB,gBAAgB,GAGlE,SAAAU,EAAA,KAAC,MAAI,CAAA,UAAU,0DACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAA,IAAC,MAAA,CACC,IAAKC,EACL,IAAK,SAASH,EAAQ,CAAC,GACvB,UAAU,iDAAA,CAAA,EAEd,EAGAE,EAAAA,IAAC,MAAI,CAAA,UAAU,wBACb,SAAAA,EAAA,IAAC,MAAA,CACC,IAAKC,EACL,IAAK,oBAAoBH,EAAQ,CAAC,GAClC,UAAU,sDAAA,CAAA,CAEd,CAAA,CAAA,CACF,CAAA,CAAA,EAtBKA,CAwBR,CAAA,EACH,EAGAE,EAAA,IAAC,SAAA,CACC,QAASJ,EACH,UAAU,iOAChB,aAAW,iBAEX,SAAAI,EAAA,IAAC,OAAI,MAAM,6BAA6B,UAAU,UAAU,KAAK,OAAO,QAAQ,YAAY,OAAO,eACjG,SAACA,EAAAA,IAAA,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,iBAAkB,CAAA,CACzF,CAAA,CAAA,CACF,EAEAA,EAAA,IAAC,SAAA,CACC,QAASL,EACT,UAAU,kOACV,aAAW,aAEX,SAAAK,EAAA,IAAC,OAAI,MAAM,6BAA6B,UAAU,UAAU,KAAK,OAAO,QAAQ,YAAY,OAAO,eACjG,SAACA,EAAAA,IAAA,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,cAAe,CAAA,CACtF,CAAA,CAAA,CACF,EAGAA,EAAAA,IAAC,OAAI,UAAU,4EACZ,WAAO,IAAI,CAACE,EAAGJ,IACdE,EAAA,IAAC,SAAA,CAEC,QAAS,IAAMH,EAAUC,CAAK,EAC9B,UAAW,sDACTA,IAAUT,EACN,qBACA,4CACN,GACA,aAAY,eAAeS,EAAQ,CAAC,EAAA,EAP/BA,CAAA,CASR,CACH,CAAA,CAAA,EACF,CAEJ,EChGMK,GAA4C,CAAC,CAAE,SAAAC,EAAU,KAAMC,EAAM,KAAAC,EAAK,gBAEzE,IAAE,CAAA,KAAMA,EACX,SAACP,EAAA,KAAA,MAAA,CAAI,UAAU,+JACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,4KACb,SAAAA,EAAA,IAACK,GAAK,KAAM,GAAI,YAAa,GAAA,CAAK,CACpC,CAAA,EACCL,EAAA,IAAA,KAAA,CAAG,UAAU,0CAA2C,SAASI,CAAA,CAAA,CAAA,CAAA,CAC5D,CACJ,CAAA,EAQFG,GAAwC,CAAC,CAAE,WAAAC,KAE5CR,EAAAA,IAAA,MAAA,CAAI,UAAU,wBACb,SAACA,EAAAA,IAAA,MAAA,CAAI,UAAU,wCACZ,SAAWQ,EAAA,IAAI,CAACJ,EAAUK,IACzBT,EAAA,IAACG,GAAA,CAEC,SAAUC,EAAS,MACf,KAAMA,EAAS,KACf,KAAMA,EAAS,IAAA,EAHd,GAAGA,EAAS,EAAE,MAAMK,CAAG,EAAA,CAK/B,EACH,CACF,CAAA,EC5BEC,GAAoC,CAAC,CAAE,OAAAC,EAAQ,SAAAlB,EAAW,OAAW,CACzE,KAAM,CAACmB,EAAcC,CAAe,EAAItB,EAAAA,SAAS,CAAC,EAGlDC,EAAAA,UAAU,IAAM,CACR,MAAAsB,EAAQ,YAAY,IAAM,CAC9BD,EAAiBjB,IAAeA,EAAY,GAAKe,EAAO,MAAM,GAC7DlB,CAAQ,EAEJ,MAAA,IAAM,cAAcqB,CAAK,CAC/B,EAAA,CAACH,EAAO,OAAQlB,CAAQ,CAAC,EAGtB,MAAAI,EAAaC,GAAkB,CACnCe,EAAgBf,CAAK,CACvB,EAGE,OAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,uDACZ,SAAA,CAAOY,EAAA,IAAI,CAACI,EAAOjB,IAQhBE,EAAA,IAAC,MAAA,CAEC,UAAW,kEACTY,IAAiBd,EAAQ,cAAgB,+BAC3C,GACA,MAAO,CACL,gBAAiB,mBAAmBiB,EAAM,KAAK,KAAKA,EAAM,KAAK,UAAUA,EAAM,KAAK,IACpF,eAAgB,QAChB,mBAAoB,SACpB,oBAAqB,UACvB,EAEA,SAAAf,EAAA,IAAC,OAAI,UAAW,iFACd,SAAAD,EAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAAAC,EAAA,IAAC,KAAG,CAAA,UAAU,iDAAkD,SAAAe,EAAM,MAAM,EAC3Ef,EAAA,IAAA,IAAA,CAAE,UAAU,gDAAiD,WAAM,YAAY,EAChFA,EAAA,IAAC,SAAA,CACC,QAASe,EAAM,aACf,UAAU,6GAET,SAAMA,EAAA,UAAA,CAAA,CACT,CAAA,CACF,CACF,CAAA,CAAA,EAtBKjB,CAuBP,CAEH,EAGDE,EAAAA,IAAC,OAAI,UAAU,iEACZ,WAAO,IAAI,CAACE,EAAGJ,IACdE,EAAA,IAAC,SAAA,CAEC,QAAS,IAAMH,EAAUC,CAAK,EAC9B,UAAW,mEACTc,IAAiBd,EAAQ,qBAAuB,4CAClD,GACA,aAAY,eAAeA,EAAQ,CAAC,EAAA,EAL/BA,CAAA,CAOR,CACH,CAAA,CAAA,EACF,CAEJ,ECtDMkB,GAA0C,CAAC,CAC/C,SAAAC,EAAS,CAAC,EAAG,MAAAC,EACb,QAAAC,CACF,IAAM,CACJ,KAAM,CAAE,UAAAC,EAAW,iBAAAC,CAAiB,EAAIC,EAAQ,EAC1C,CAACC,EAAeC,CAAgB,EAAIjC,EAAAA,SAAkC,CAAA,CAAE,EAExEkC,EAAa,CAACC,EAA2CC,EAAuB,IAAc,CAC9F,GAAA,OAAOD,GAAU,SAAiB,OAAAA,EAClC,GAAA,OAAOA,GAAU,SAAU,CACvB,MAAAE,EAAS,WAAWF,CAAK,EACxB,OAAA,MAAME,CAAM,EAAID,EAAeC,CAAA,CAEjC,OAAAD,CACT,EAIME,EAAiBC,GAA6B,CAE9C,GAAAA,EAAQ,cAAgB,OACnB,OAAAL,EAAWK,EAAQ,WAAW,EAGjC,MAAAC,EAAYN,EAAWK,EAAQ,KAAK,EACpCE,EAAWP,EAAWK,EAAQ,mBAAmB,GAAKL,EAAWK,EAAQ,QAAQ,GAAK,EAC5F,OAAIE,EAAW,EACND,EAAaA,GAAaC,EAAW,KAEvCD,CACT,EAGME,EAAeH,GACZL,EAAWK,EAAQ,mBAAmB,GAAKL,EAAWK,EAAQ,QAAQ,GAAK,EAI9EI,EAAgBJ,GACbA,EAAQ,YAAcA,EAAQ,OAAS,oEAI1CK,EAAeC,GACZ,IAAIA,EAAM,QAAQ,CAAC,CAAC,GAIvBC,EAAkB,MAAOP,GAAqB,CAClD,GAAI,GAACA,EAAQ,IAAMP,EAAcO,EAAQ,EAAE,GAE1B,CAAAN,EAAAc,IAAS,CAAE,GAAGA,EAAM,CAACR,EAAQ,EAAG,EAAG,EAAA,EAAO,EAEvD,GAAA,CACEX,EAEFA,EAAQW,EAAQ,EAAE,EAGF,MAAMV,EAAU,CAC9B,UAAWU,EAAQ,GACnB,SAAU,CAAA,CACX,EAGCT,EACEkB,EAAiB,QACjB,GAAGT,EAAQ,IAAI,8BACjB,EAEAT,EACEkB,EAAiB,MACjB,sCACF,QAGGC,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,EAC5CnB,EACEkB,EAAiB,MACjB,sCACF,CAAA,QACA,CACA,WAAW,IAAM,CACXT,EAAQ,IACON,EAAAc,IAAS,CAAE,GAAGA,EAAM,CAACR,EAAQ,EAAG,EAAG,EAAA,EAAQ,GAE7D,GAAG,CAAA,EAEV,EAGE,OAAA/B,EAAA,KAAC,UAAQ,CAAA,UAAU,QACjB,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,0BAA2B,SAAMkB,EAAA,QAC9C,MAAI,CAAA,UAAU,uDACZ,SAASD,EAAA,IAAKa,GAAY,CACnB,MAAAW,EAAaZ,EAAcC,CAAO,EAClCE,EAAWC,EAAYH,CAAO,EAC9BY,EAAcV,EAAW,EACzBW,EAAYT,EAAaJ,CAAO,EAGpC,OAAA/B,EAAA,KAAC,MAAA,CAEC,UAAU,+FAGV,SAAA,CAAAC,EAAA,IAAC,MAAA,CACC,UAAU,4CACV,MAAO,CACL,gBAAiB,QAAQ2C,CAAS,KAClC,eAAgB,QAChB,mBAAoB,SACpB,iBAAkB,WACpB,EACA,QAAUC,GAAM,CAEd,MAAMC,EAASD,EAAE,OACjBC,EAAO,MAAM,gBAAkB,4EACjC,EAGC,SACCH,GAAA3C,OAAC,MAAI,CAAA,UAAU,8GACb,SAAA,CAAAC,EAAA,IAAC8C,EAAI,CAAA,KAAM,GAAI,UAAU,OAAO,EAC/Bd,EAAS,OAAA,CACZ,CAAA,CAAA,CAEJ,EAGAjC,EAAAA,KAAC,MAAI,CAAA,UAAU,MACb,SAAA,CAAAC,MAAC+C,EAAK,CAAA,GAAI,aAAajB,EAAQ,IAAM,CAAC,GACpC,SAAA9B,MAAC,KAAG,CAAA,UAAU,iGAAkG,SAAA8B,EAAQ,IAAK,CAAA,EAC/H,EACCA,EAAQ,aACP9B,EAAA,IAAC,KAAE,UAAU,6BAA8B,WAAQ,YAAY,EAEhE8B,EAAQ,eACP9B,EAAA,IAAC,KAAE,UAAU,6BAA8B,WAAQ,cAAc,EAGnED,EAAAA,KAAC,MAAI,CAAA,UAAU,oCAEb,SAAA,CAAAC,MAAC,MACE,CAAA,SAAA0C,EACE3C,OAAA,MAAA,CAAI,UAAU,gBACb,SAAA,CAACC,EAAAA,IAAA,OAAA,CAAK,UAAU,qCACb,SAAAmC,EAAYV,EAAWK,EAAQ,KAAK,CAAC,CACxC,CAAA,QACC,OAAK,CAAA,UAAU,6BACb,SAAAK,EAAYM,CAAU,CACzB,CAAA,CACF,CAAA,CAAA,QAEC,OAAK,CAAA,UAAU,6BACb,SAAYN,EAAAM,CAAU,EACzB,CAEJ,CAAA,EAGA1C,EAAA,KAAC,SAAA,CACC,QAAS,IAAMsC,EAAgBP,CAAO,EACtC,SAAU,CAACA,EAAQ,IAAMP,EAAcO,EAAQ,EAAE,GAAK,CAACA,EAAQ,YAC/D,UAAW,mIACTA,EAAQ,cAAgB,GACpB,iDACA,wBACN,GAEC,SAAA,CAAAA,EAAQ,IAAMP,EAAcO,EAAQ,EAAE,EACpC9B,EAAAA,IAAA,MAAA,CAAI,UAAU,oFAAoF,EAElGA,EAAA,IAAAgD,EAAA,CAAa,KAAM,GAAI,UAAU,OAAO,EAE3ChD,EAAAA,IAAC,QAAK,UAAU,kBACb,WAAQ,cAAgB,GAAQ,YAAc,mBACjD,CAAA,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EA9EK8B,EAAQ,IAAM,WAAW,KAAK,QAAQ,EA+E7C,CAAA,CAEH,CACH,CAAA,CAAA,EACF,CAEJ,ECjMMmB,GAA2CC,OAAK,CAAC,CACtD,qBAAAC,EACA,iBAAAC,EACA,YAAAC,EACA,gBAAAC,EACA,MAAAC,CACD,IAAM,CAEC,MAAAC,EAA0BC,SAAuB,IAAI,EACrDC,EAAsBD,SAAuB,IAAI,EAGjD,CAACE,EAA2BC,CAA4B,EAC7DrE,EAAAA,SAAS,EAAK,EACT,CAACsE,EAA4BC,CAA6B,EAC/DvE,EAAAA,SAAS,EAAI,EACR,CAACwE,EAAuBC,CAAwB,EAAIzE,EAAAA,SAAS,EAAK,EAClE,CAAC0E,EAAwBC,CAAyB,EAAI3E,EAAAA,SAAS,EAAI,EAGnE4E,EAAcC,GAAgD,CAC/D,GAAAA,GAAOA,EAAI,QAAS,CAEvB,MAAMC,EAAaD,EAAI,QAAQ,cAAc,uBAAuB,EACpE,GAAIC,EAAY,CAEf,MAAMC,EAAa,OAAO,WAAa,IAAM,EAAI,EAC3CC,EAAe,IAAMF,EAAW,YAAc,IAAMC,EAC1DF,EAAI,QAAQ,SAAS,CAAC,KAAMG,EAAc,SAAU,SAAS,CAAA,MAG7DH,EAAI,QAAQ,SAAS,CAAC,KAAM,KAAM,SAAU,SAAS,CACtD,CAEF,EAGMI,EAAeJ,GAAgD,CAChE,GAAAA,GAAOA,EAAI,QAAS,CAEvB,MAAMC,EAAaD,EAAI,QAAQ,cAAc,uBAAuB,EACpE,GAAIC,EAAY,CAEf,MAAMC,EAAa,OAAO,WAAa,IAAM,EAAI,EAC3CC,GAAgBF,EAAW,YAAc,IAAMC,EACrDF,EAAI,QAAQ,SAAS,CAAC,KAAMG,EAAc,SAAU,SAAS,CAAA,MAG7DH,EAAI,QAAQ,SAAS,CAAC,KAAM,IAAK,SAAU,SAAS,CACrD,CAEF,EAGMK,EAAqB,CAC1BC,EACAC,EACAC,IACI,CACAF,IACcC,EAAAD,EAAQ,WAAa,CAAC,EACvCE,EACCF,EAAQ,YAAcA,EAAQ,aAC7BA,EAAQ,WAAaA,EAAQ,YAAcA,EAAQ,WACrD,EAEF,EAGAlF,OAAAA,EAAAA,UAAU,IAAM,CACf,MAAMqF,EAAiBrB,EAAwB,QACzCsB,EAAapB,EAAoB,QAEjCqB,EAA2B,IAAM,CAClCF,GACHJ,EACCI,EACAjB,EACAE,CACD,CAEF,EAEMkB,EAAuB,IAAM,CAC9BF,GACHL,EACCK,EACAd,EACAE,CACD,CAEF,EAGMe,EAAe,IAAM,CACtBJ,GACsBE,EAAA,EAEtBD,GACkBE,EAAA,CAEvB,EAGA,OAAIH,IACYA,EAAA,iBAAiB,SAAUE,CAAwB,EAEzCA,EAAA,GAGtBD,IACQA,EAAA,iBAAiB,SAAUE,CAAoB,EAErCA,EAAA,GAIf,OAAA,iBAAiB,SAAUC,CAAY,EAGvC,IAAM,CACRJ,GACYA,EAAA,oBAAoB,SAAUE,CAAwB,EAElED,GACQA,EAAA,oBAAoB,SAAUE,CAAoB,EAEvD,OAAA,oBAAoB,SAAUC,CAAY,CAClD,CACD,EAAG,EAAE,EAGJlF,EAAA,KAAC,MAAI,CAAA,UAAU,YAEd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,WACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACd,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,kCAAkC,SAEhD,uBAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAS,IACRmE,EACCX,CACD,EAED,SAAU,CAACG,EACX,UAAW,2BACVA,EACG,kDACA,kDACJ,GAEA,SAAA3D,EAAAA,IAACkF,EAAY,CAAA,KAAM,EAAI,CAAA,CAAA,CACxB,EACAlF,EAAA,IAAC,SAAA,CACA,QAAS,IACRwE,EACChB,CACD,EAED,SAAU,CAACK,EACX,UAAW,2BACVA,EACG,kDACA,kDACJ,GAEA,SAAA7D,EAAAA,IAACmF,EAAa,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CACzB,CACD,CAAA,CAAA,EACD,EACAnF,EAAA,IAAC,MAAA,CACA,IAAKwD,EACL,UAAU,iDAET,SAAAL,EAAqB,IAAKrB,GAC1B9B,EAAA,IAAC,MAAA,CAEA,UAAU,2HAEV,SAAAA,EAAA,IAACoF,EAAA,CACC,GAAGtD,EACJ,MAAAyB,EACA,YAAAF,EACA,gBAAAC,CAAA,CAAA,CACD,EARK,gBAAgBxB,EAAQ,EAAE,EAUhC,CAAA,CAAA,CAAA,CACF,EACD,EAGA/B,EAAAA,KAAC,MAAI,CAAA,UAAU,WACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCACd,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,kCAAkC,SAEhD,uBAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAS,IACRmE,EACCT,CACD,EAED,SAAU,CAACK,EACX,UAAW,2BACVA,EACG,kDACA,kDACJ,GAEA,SAAA/D,EAAAA,IAACkF,EAAY,CAAA,KAAM,EAAI,CAAA,CAAA,CACxB,EACAlF,EAAA,IAAC,SAAA,CACA,QAAS,IACRwE,EACCd,CACD,EAED,SAAU,CAACO,EACX,UAAW,2BACVA,EACG,kDACA,kDACJ,GAEA,SAAAjE,EAAAA,IAACmF,EAAa,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CACzB,CACD,CAAA,CAAA,EACD,EACAnF,EAAA,IAAC,MAAA,CACA,IAAK0D,EACL,UAAU,iDAET,SAAAN,EAAiB,IAAKtB,GACtB9B,EAAA,IAAC,MAAA,CAEA,UAAU,2HAEV,SAAAA,EAAA,IAACoF,EAAA,CACC,GAAGtD,EACJ,MAAAyB,EACA,YAAAF,EACA,gBAAAC,CAAA,CAAA,CACD,EARK,YAAYxB,EAAQ,EAAE,EAU5B,CAAA,CAAA,CAAA,CACF,EACD,QAGC,QAAO,CAAA,SAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAQH,CAAA,CAAA,EACN,CAEF,CAAC,ECrRKuD,GAA8B,CAAC,CACnC,MAAAnE,EACA,SAAAoE,EAAW,CAAA,CACb,IAEIvF,EAAA,KAAC,UAAQ,CAAA,UAAU,aACjB,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAuC,SAAMkB,EAAA,EAC3DlB,EAAAA,IAAC,OAAI,UAAU,uDACZ,WAAS,IAAI,CAACuF,EAASzF,IACtBC,EAAA,KAAC,MAAA,CAEC,UAAU,sHAEV,SAAA,CAAAC,MAAC,MAAI,CAAA,UAAW,aAAauF,EAAQ,OAAS,8BAA8B,mEAC1E,SAACvF,MAAAuF,EAAQ,KAAR,CAAa,KAAM,GAAI,YAAa,GAAK,CAAA,EAC5C,EACCvF,EAAA,IAAA,KAAA,CAAG,UAAU,uCAAwC,WAAQ,MAAM,EACnEA,EAAA,IAAA,IAAA,CAAE,UAAU,gCAAiC,WAAQ,WAAY,CAAA,CAAA,CAAA,EAP7DF,CAAA,CASR,CACH,CAAA,CAAA,EACF,EC7BE0F,GAA0D,CAAC,CAC/D,MAAAC,EAAQ,EACR,MAAAvE,EAAQ,uBACV,IAEInB,EAAA,KAAC,UAAQ,CAAA,UAAU,QAEjB,SAAA,CAAAC,MAAC,MAAI,CAAA,UAAU,OACZ,SAAAkB,QACE,KAAG,CAAA,UAAU,qBAAsB,SAAAA,CAAM,CAAA,EAE1ClB,EAAA,IAAC,MAAI,CAAA,UAAU,4CAA6C,CAAA,EAEhE,EAGCA,EAAA,IAAA,MAAA,CAAI,UAAU,uDACZ,eAAM,KAAK,CAAE,OAAQyF,CAAA,CAAO,EAAE,IAAI,CAACvF,EAAGJ,IACrCC,EAAA,KAAC,MAAA,CAEC,UAAU,2DAGV,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4BAEb,eAAC,MAAI,CAAA,UAAU,yDAAyD,CAC1E,CAAA,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,MAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,oCAAqC,CAAA,EAGpDA,EAAAA,IAAC,MAAI,CAAA,UAAU,qCAAsC,CAAA,EACrDA,EAAAA,IAAC,MAAI,CAAA,UAAU,oCAAqC,CAAA,EAEpDD,EAAAA,KAAC,MAAI,CAAA,UAAU,oCAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,8BAA+B,CAAA,EAC9CA,EAAAA,IAAC,MAAI,CAAA,UAAU,8BAA+B,CAAA,CAAA,EAChD,EAGAA,EAAAA,IAAC,MAAI,CAAA,UAAU,kCAAmC,CAAA,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EA5BKF,CAAA,CA8BR,CACH,CAAA,CAAA,EACF,EClDE4F,GAAkE,CAAC,CACvE,iBAAAC,EAAmB,EAAI,IAErB5F,EAAA,KAAC,MAAI,CAAA,UAAU,YAEZ,SAAA,CACC4F,GAAA5F,EAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,4CACf,CAAA,EAEAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,iEACb,SAAAA,EAAA,IAACkF,GAAY,KAAM,GAAI,UAAU,eAAA,CAAgB,CACnD,CAAA,EACAlF,EAAAA,IAAC,MAAI,CAAA,UAAU,iEACb,SAAAA,EAAAA,IAACmF,GAAa,KAAM,GAAI,UAAU,eAAgB,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EAGCnF,EAAA,IAAA,MAAA,CAAI,UAAU,kCACZ,eAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAACE,EAAGJ,IACjCE,EAAA,IAAC,MAAA,CAEC,UAAU,sGAEV,SAAAD,EAAA,KAAC,MAAI,CAAA,UAAU,2DAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,4BAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,qDAAsD,CAAA,EAErEA,EAAAA,IAAC,MAAI,CAAA,UAAU,uDAAwD,CAAA,CAAA,EACzE,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,MAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,qCAAsC,CAAA,EACrDA,EAAAA,IAAC,MAAI,CAAA,UAAU,oCAAqC,CAAA,QAGnD,MAAI,CAAA,UAAU,yCACb,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,8BAA+B,CAAA,EAC9CA,EAAAA,IAAC,MAAI,CAAA,UAAU,8BAA+B,CAAA,CAAA,CAAA,CAChD,CACF,CAAA,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,gCAAiC,CAAA,EAChDA,EAAAA,IAAC,MAAI,CAAA,UAAU,6BAA8B,CAAA,CAAA,CAC/C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAhCK,yBAAyBF,CAAK,EAAA,CAkCtC,CACH,CAAA,CAAA,EACF,EAIFC,EAAAA,KAAC,MAAI,CAAA,UAAU,WACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yCAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,4CACf,CAAA,EAEAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,iEACb,SAAAA,EAAA,IAACkF,GAAY,KAAM,GAAI,UAAU,eAAA,CAAgB,CACnD,CAAA,EACAlF,EAAAA,IAAC,MAAI,CAAA,UAAU,iEACb,SAAAA,EAAAA,IAACmF,GAAa,KAAM,GAAI,UAAU,eAAgB,CAAA,CACpD,CAAA,CAAA,CACF,CAAA,CAAA,EACF,EAGCnF,EAAA,IAAA,MAAA,CAAI,UAAU,kCACZ,eAAM,KAAK,CAAE,OAAQ,CAAA,CAAG,EAAE,IAAI,CAACE,EAAGJ,IACjCE,EAAA,IAAC,MAAA,CAEC,UAAU,sGAEV,SAAAD,EAAA,KAAC,MAAI,CAAA,UAAU,2DAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,4BAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,qDAAsD,CAAA,EAErEA,EAAAA,IAAC,MAAI,CAAA,UAAU,uDAAwD,CAAA,CAAA,EACzE,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,MAEb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,qCAAsC,CAAA,EACrDA,EAAAA,IAAC,MAAI,CAAA,UAAU,oCAAqC,CAAA,QAGnD,MAAI,CAAA,UAAU,yCACb,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,8BAA+B,CAAA,EAC9CA,EAAAA,IAAC,MAAI,CAAA,UAAU,8BAA+B,CAAA,CAAA,CAAA,CAChD,CACF,CAAA,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,aACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,gCAAiC,CAAA,EAChDA,EAAAA,IAAC,MAAI,CAAA,UAAU,6BAA8B,CAAA,CAAA,CAC/C,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,EAhCK,qBAAqBF,CAAK,EAAA,CAkClC,CACH,CAAA,CAAA,EACF,QAGC,QAAO,CAAA,SAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAaN,CAAA,CAAA,EACJ,EC7HS8F,GAA+B9D,GAA0C,CAEpF,MAAMI,EAAe,IAAc,CAC7B,GAAAJ,EAAQ,WAAY,OAAOA,EAAQ,WACnC,GAAAA,EAAQ,MAAO,OAAOA,EAAQ,MAElC,GAAIA,EAAQ,QAAUA,EAAQ,OAAO,OAAS,EAAG,CACzC,MAAA+D,EAAa/D,EAAQ,OAAO,CAAC,EAC/B,GAAA,OAAO+D,GAAe,SACjB,OAAAA,EACE,GAAA,OAAOA,GAAe,UAAYA,EAAW,IACtD,OAAOA,EAAW,GACpB,CAIK,MAAA,iCACT,EAGMC,EAAwB,IAA0B,CAClD,GAAAhE,EAAQ,oBAAqB,OAAOA,EAAQ,oBAC5C,GAAAA,EAAQ,mBAAoB,OAAOA,EAAQ,mBAGzC,MAAAW,EAAaX,EAAQ,aAAeA,EAAQ,WAC9C,GAAAW,GAAcA,EAAaX,EAAQ,MACrC,OAAO,KAAK,OAAQA,EAAQ,MAAQW,GAAcX,EAAQ,MAAS,GAAG,CAI1E,EAGMiE,EAAY,IAA0B,CAC1C,GAAIjE,EAAQ,SAAW,MAAQA,EAAQ,SAAW,cAAkBA,EAAQ,OAC5E,GAAIA,EAAQ,oBAAsB,MAAQA,EAAQ,oBAAsB,OACtE,OAAOA,EAAQ,iBAGnB,EAGMkE,EAAa,IAA0B,CAC3C,GAAIlE,EAAQ,eAAiB,MAAQA,EAAQ,eAAiB,cAAkBA,EAAQ,aACxF,GAAIA,EAAQ,cAAgB,MAAQA,EAAQ,cAAgB,cAAkBA,EAAQ,YACtF,GAAIA,EAAQ,0BAA4B,MAAQA,EAAQ,0BAA4B,OAClF,OAAOA,EAAQ,uBAGnB,EAGMmE,EAAW,IAAe,CAChC,GAAI,OAAOnE,EAAQ,OAAU,iBAAkBA,EAAQ,MAEnD,GAAAA,EAAQ,YAAcA,EAAQ,UAAW,CAC5C,MAAMoE,EAAc,IAAI,KAAKpE,EAAQ,YAAcA,EAAQ,SAAU,EAC/DqE,MAAoB,KAC1B,OAAAA,EAAc,QAAQA,EAAc,QAAQ,EAAI,EAAE,EAC3CD,EAAcC,CAAA,CAGf,MAAA,EACR,EAEQ,MAAA,CACL,GAAIrE,EAAQ,GACZ,KAAMA,EAAQ,MAAQ,sBACtB,MAAOA,EAAQ,aAAeA,EAAQ,YAAcA,EAAQ,OAAS,EACrE,SAAUgE,EAAsB,EAChC,OAAQC,EAAU,EAClB,QAASC,EAAW,EACpB,MAAO9D,EAAa,EACpB,SAAUJ,EAAQ,eAAiBA,EAAQ,UAAU,KACrD,MAAOmE,EAAS,EAChB,MAAOnE,EAAQ,OAAS,EACxB,KAAMA,EAAQ,IAChB,CACF,EAKasE,EAAgCnF,GACpCA,EACJ,OAAkBa,GAAAA,EAAQ,KAAO,MAAS,EAC1C,IAAI8D,EAA2B,ECzFvBS,GAAkB,CAACC,EAAQ,KAA8B,CACpE,KAAM,CAACnD,EAAsBoD,CAAuB,EAAIhH,EAAAA,SAAgC,CAAA,CAAE,EACpF,CAAC6D,EAAkBoD,CAAmB,EAAIjH,EAAAA,SAAgC,CAAA,CAAE,EAC5E,CAACkH,EAAkBC,CAAmB,EAAInH,EAAAA,SAAoB,CAAA,CAAE,EAChE,CAACoH,EAASC,CAAU,EAAIrH,EAAAA,SAAS,EAAI,EACrC,CAACiD,EAAOqE,CAAQ,EAAItH,EAAAA,SAAwB,IAAI,EAChD,CAACuH,EAAiBC,CAAkB,EAAIxH,EAAAA,SAAS,EAAK,EAGtD,CAACyH,EAAgBC,CAAiB,EAAI1H,EAAAA,SAAS,EAAK,EAGpD2H,EAAczD,SAAO,EAAK,EAC1B0D,EAAe1D,SAAe6C,CAAK,EACnCc,EAAa3D,SAA8B,IAAI,EAG/C4D,EAAsB,IAAe,CACnC,MAAAC,EAAQ,aAAa,QAAQ,YAAY,EACzCC,EAAS,CAAC,CAACD,GAASA,EAAM,KAAW,IAAA,GAC3C,OAAAP,EAAmBQ,CAAM,EAClBA,CACT,EAEMC,EAAgB,SAAY,CAEhC,GAAIN,EAAY,QAAS,CACvB,QAAQ,IAAI,mEAAmE,EAC/E,MAAA,CAGFA,EAAY,QAAU,GACtBN,EAAW,EAAI,EACfC,EAAS,IAAI,EAET,GAAA,CACF,MAAMY,EAAsBJ,EAAoB,EAChD,QAAQ,IAAI,wDAAyD,CACnE,gBAAiBI,EACjB,MAAAnB,CAAA,CACD,EAGK,MAAAoB,EAAkBC,EAAe,kBAAkB,CAAC,EAE1D,GAAIF,EAAqB,CAEvB,QAAQ,IAAI,oDAAoD,EAEhE,KAAM,CAACG,EAAoBC,EAAgBC,CAAc,EAAI,MAAM,QAAQ,WAAW,CACpFH,EAAe,wBAAwBrB,CAAK,EAC5CqB,EAAe,qBAAqBrB,CAAK,EACzCoB,CAAA,CACD,EAGD,GAAIE,EAAmB,SAAW,aAAeA,EAAmB,MAAM,KAAM,CAC9E,MAAMG,EAA0B3B,EAA6BwB,EAAmB,MAAM,IAAI,EAC1FrB,EAAwBwB,CAAuB,EACvC,QAAA,IAAI,oCAAqCA,EAAwB,MAAM,CAAA,KAC1E,CAEL,QAAQ,IAAI,4CAA4C,EACxD,MAAMC,EAAW,MAAML,EAAe,qBAAqBrB,CAAK,EAC1D2B,EAAsB7B,EAA6B4B,EAAS,MAAQ,CAAA,CAAE,EAC5EzB,EAAwB0B,CAAmB,CAAA,CAI7C,GAAIJ,EAAe,SAAW,aAAeA,EAAe,MAAM,KAAM,CACtE,MAAMK,EAAsB9B,EAA6ByB,EAAe,MAAM,IAAI,EAClFrB,EAAoB0B,CAAmB,EAC/B,QAAA,IAAI,yBAA0BA,EAAoB,MAAM,CAAA,KAC3D,CACL,QAAQ,IAAI,wCAAwC,EACpD,MAAMF,EAAW,MAAML,EAAe,sBAAsBrB,CAAK,EAC3D2B,EAAsB7B,EAA6B4B,EAAS,MAAQ,CAAA,CAAE,EAC5ExB,EAAoByB,CAAmB,CAAA,CAIrCH,EAAe,SAAW,aAAeA,EAAe,MAAM,MAC5CpB,EAAAoB,EAAe,MAAM,IAAI,EAC7C,QAAQ,IAAI,uBAAwBA,EAAe,MAAM,KAAK,MAAM,IAEpEpB,EAAoB,CAAA,CAAE,EACtB,QAAQ,IAAI,mCAAmC,EACjD,KAEK,CAEL,QAAQ,IAAI,8DAA8D,EAE1E,KAAM,CAACmB,EAAgBM,EAAkBL,CAAc,EAAI,MAAM,QAAQ,WAAW,CAClFH,EAAe,qBAAqBrB,CAAK,EACzCqB,EAAe,sBAAsBrB,CAAK,EAC1CoB,CAAA,CACD,EAGD,GAAIG,EAAe,SAAW,aAAeA,EAAe,MAAM,KAAM,CACtE,MAAMK,EAAsB9B,EAA6ByB,EAAe,MAAM,IAAI,EAClFtB,EAAwB2B,CAAmB,EACnC,QAAA,IAAI,uBAAwBA,EAAoB,MAAM,CAAA,KACzD,CACL,MAAMF,EAAW,MAAML,EAAe,mBAAmBrB,CAAK,EACxD2B,EAAsB7B,EAA6B4B,EAAS,MAAQ,CAAA,CAAE,EAC5EzB,EAAwB0B,CAAmB,CAAA,CAI7C,GAAIE,EAAiB,SAAW,aAAeA,EAAiB,MAAM,KAAM,CAC1E,MAAMC,EAAwBhC,EAA6B+B,EAAiB,MAAM,IAAI,EACtF3B,EAAoB4B,CAAqB,EACjC,QAAA,IAAI,yBAA0BA,EAAsB,MAAM,CAAA,KAC7D,CACL,MAAMJ,EAAW,MAAML,EAAe,mBAAmBrB,CAAK,EACxD2B,EAAsB7B,EAA6B4B,EAAS,MAAQ,CAAA,CAAE,EAC5ExB,EAAoByB,CAAmB,CAAA,CAIrCH,EAAe,SAAW,aAAeA,EAAe,MAAM,MAC5CpB,EAAAoB,EAAe,MAAM,IAAI,EAC7C,QAAQ,IAAI,iCAAkCA,EAAe,MAAM,KAAK,MAAM,GAE9EpB,EAAoB,CAAA,CAAE,CACxB,CAGF,QAAQ,IAAI,sCAAsC,QAC3C2B,EAAK,CACJ,QAAA,MAAM,oCAAqCA,CAAG,EACtDxB,EAASwB,aAAe,MAAQA,EAAI,QAAU,mBAAmB,EAGjE9B,EAAwB,CAAA,CAAE,EAC1BC,EAAoB,CAAA,CAAE,EACtBE,EAAoB,CAAA,CAAE,CAAA,QACtB,CACAE,EAAW,EAAK,EAChBK,EAAkB,EAAI,EACtBC,EAAY,QAAU,GACtBC,EAAa,QAAUb,CAAA,CAE3B,EAGMgC,EAAyBC,EAAAA,QAAQ,IAC9B,IAAM,CACPnB,EAAW,SACb,aAAaA,EAAW,OAAO,EAEtBA,EAAA,QAAU,WAAW,IAAM,CACtBI,EAAA,GACb,GAAG,CACR,EACC,EAAE,EAELhI,OAAAA,EAAAA,UAAU,MAEY,CAACwH,GAAmBG,EAAa,UAAYb,IAE9C,CAACY,EAAY,SACPoB,EAAA,EAIlB,IAAM,CACPlB,EAAW,SACb,aAAaA,EAAW,OAAO,CAEnC,GACC,CAACd,EAAOgC,EAAwBtB,CAAc,CAAC,EAE3C,CACL,qBAAA7D,EACA,iBAAAC,EACA,iBAAAqD,EACA,QAAAE,EACA,MAAAnE,EACA,QAASgF,EACT,gBAAAV,EACA,eAAAE,CACF,CACF,EC7LO,MAAMwB,EAAsB,CACjC,OAAwB,UAAY,mBAKpC,aAAoB,mBAAmBlC,EAAQ,GAAqC,CAC9E,GAAA,CACF,QAAQ,IAAI,2DAA4D,CAAE,MAAAA,CAAA,CAAO,EAG3E,MAAAmC,EAAW,MAAMC,EAAU,IAC/B,KAAK,UACL,CAAE,MAAApC,CAAM,CACV,EAII,OAFI,QAAA,IAAI,gDAAiDmC,CAAQ,EAEjEA,EAAS,SAAWA,EAAS,MAAQ,MAAM,QAAQA,EAAS,IAAI,GAClE,QAAQ,IAAI,uDAAwD,CAClE,MAAOA,EAAS,KAAK,OACrB,UAAWA,EAAS,KAAK,IAAIE,GAAKA,EAAE,IAAI,EAAE,MAAM,EAAG,CAAC,EACpD,gBAAiBF,EAAS,KAAK,CAAC,CAAA,CACjC,EAEMA,IAEC,QAAA,KAAK,iEAAkEA,CAAQ,EAChF,CACL,QAAS,GACT,KAAM,CAAC,EACP,KAAM,CAAE,MAAO,EAAG,MAAO,EAAG,MAAO,6BAA8B,CACnE,SAEKjG,EAAY,CACX,eAAA,MAAM,2CAA4CA,CAAK,EAC/D,QAAQ,MAAM,kBAAmBA,EAAM,UAAU,MAAM,EACvD,QAAQ,MAAM,gBAAiBA,EAAM,UAAU,IAAI,EAE5C,CACL,QAAS,GACT,KAAM,CAAC,EACP,KAAM,CACJ,MAAO,EACP,MAAO,EACP,MAAO,uBAAuBA,EAAM,UAAU,QAAU,aAAa,EAAA,CAEzE,CAAA,CACF,CAMF,aAAoB,iBAClBoG,EACAC,EACAC,EAAgC,CAAA,EACjB,CACX,GAAA,CACF,QAAQ,IAAI,qDAAsD,CAChE,gBAAAF,EACA,OAAAC,EACA,SAAAC,CAAA,CACD,EAED,MAAMJ,EAAU,KAAK,GAAG,KAAK,SAAS,qBAAsB,CAC1D,gBAAAE,EACA,OAAAC,EACA,SAAAC,CAAA,CACD,EAED,QAAQ,IAAI,8DAA8D,QACnEtG,EAAO,CACN,QAAA,MAAM,0DAA2DA,CAAK,CAAA,CAChF,CAMF,aAAoB,gBAA+B,CAC7C,GAAA,CACF,QAAQ,IAAI,2DAA2D,EAEvE,MAAMiG,EAAW,MAAMC,EAAU,IAAI,GAAG,KAAK,SAAS,eAAe,EAE7D,eAAA,IAAI,4CAA6CD,CAAQ,EAC1DA,QACAjG,EAAO,CACN,eAAA,MAAM,oDAAqDA,CAAK,EACjE,IAAA,CACT,CAEJ,CC5EyI,MAAMuG,CAAuB,CACpK,OAAe,OAAwB,CACrC,cAAe,GACf,kBAAmB,GACnB,UAAW,EACX,WAAY,IACZ,aAAc,EAChB,EACqD,OAAe,iBAA2B,CACvF,MAAAzB,EAAQ,aAAa,QAAQ,YAAY,EAC/C,MAAO,CAAC,EAAEA,GAASA,EAAM,SAAW,GAAA,CAEK,OAAe,IACxD0B,EACAC,EACM,CACF,KAAK,OAAO,eACd,QAAQ,IAAI,8BAA8BD,CAAO,GAAIC,GAAQ,EAAE,CACjE,CAE+C,aAAqB,kBACpEC,EACAL,EACAC,EAAgC,CAAA,EACd,CACd,GAAA,CAAC,KAAK,kBACH,YAAA,IACH,sCAAsCI,CAAI,cAAcL,CAAM,EAChE,EACO,GAEL,GAAA,CACF,MAAMM,EAAwC,CAC5C,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,OAAQD,EACR,GAAGJ,CACL,EACA,aAAMN,GAAsB,iBAC1BU,EACAL,EACAM,CACF,EACK,KAAA,IAAI,KAAKD,CAAI,2BAA4B,CAC5C,OAAAL,EACA,SAAUM,CAAA,CACX,EACM,SACA3G,EAAO,CACd,YAAK,IAAI,uBAAuB0G,CAAI,IAAK1G,CAAK,EACvC,EAAA,CACT,CAE0C,aAAoB,iBAC9D4G,EACAC,EAAiB,UACjBC,EAAsC,CAAA,EACpB,CAClB,OAAO,MAAM,KAAK,kBAAkB,OAAsBF,EAAW,CACnE,OAAAC,EACA,GAAGC,CAAA,CACJ,CAAA,CAEwC,aAAoB,kBAC7DF,EACAC,EAAiB,UACjBC,EAAsC,CAAA,EACpB,CAClB,OAAO,MAAM,KAAK,kBAAkB,QAAuBF,EAAW,CACpE,OAAAC,EACA,GAAGC,CAAA,CACJ,CAAA,CAEqC,aAAoB,eAC1DF,EACAG,EAAmB,EACnBF,EAAiB,UACC,CAClB,OAAO,MAAM,KAAK,kBAChB,cACAD,EACA,CAAE,SAAAG,EAAU,OAAAF,CAAO,CACrB,CAAA,CAEuC,aAAoB,mBAC3DD,EACAC,EAAiB,UACC,CAClB,OAAO,MAAM,KAAK,kBAChB,kBACAD,EACA,CAAE,OAAAC,CAAO,CACX,CAAA,CAEyC,aAAoB,wBAC7DD,EACAC,EAAiB,UACC,CAClB,OAAO,MAAM,KAAK,kBAChB,uBACAD,EACA,CAAE,OAAAC,CAAO,CACX,CAAA,CAEiC,aAAoB,YACrDG,EACAC,EAAuB,EACvBJ,EAAiB,aACC,CAClB,OAAO,MAAM,KAAK,kBAAkB,SAAwB,EAAG,CAC7D,YAAaG,EAAW,YAAY,EAAE,KAAK,EAC3C,cAAeC,EACf,OAAAJ,CAAA,CACD,CAAA,CAE4C,aAAoB,kBACjEK,EACAC,EACAN,EAAiB,aACC,CAClB,OAAO,MAAM,KAAK,kBAChB,gBACAK,EACA,CAAE,cAAeC,EAAc,OAAAN,CAAO,CACxC,CAAA,CAE0C,aAAoB,cAC9DO,EACAC,EACAC,EACoB,CACpB,MAAMC,EAAqB,CAAC,EAC5B,UAAWX,KAAaQ,EAAY,CAC5B,MAAAI,EAAS,MAAM,KAAK,kBACxB,WACAZ,EACA,CACE,aAAcS,EACd,SAAUC,EACV,cAAeF,EAAW,MAAA,CAE9B,EACAG,EAAQ,KAAKC,CAAM,CAAA,CAEd,OAAAD,CAAA,CAE0C,aAAoB,mBACrEX,EACAa,EACAZ,EAAiB,eACC,CACd,OAAAY,EAAmB,KAAK,OAAO,cAC5B,KAAA,IAAI,wBAAwBA,CAAgB,qBAAqB,EAC/D,IAEF,MAAM,KAAK,kBAAkB,aAA4Bb,EAAW,CACzE,mBAAoBa,EACpB,OAAAZ,CAAA,CACD,CAAA,CAEyC,aAAoB,YAC9DD,EACAc,EACAb,EAAiB,eACC,CAClB,OAAO,MAAM,KAAK,kBAAkB,SAAwBD,EAAW,CACrE,aAAcc,EACd,OAAAb,CAAA,CACD,CAAA,CAEkD,OAAc,aACjEc,EACM,CACN,KAAK,OAAS,CAAE,GAAG,KAAK,OAAQ,GAAGA,CAAU,EACxC,KAAA,IAAI,6BAA8B,KAAK,MAAM,CAAA,CAEP,OAAc,WAA2B,CAC7E,MAAA,CAAE,GAAG,KAAK,MAAO,CAAA,CAEmB,OAAc,WACzDC,EACM,CACN,KAAK,OAAO,cAAgBA,CAAA,CAEhC,CCvNuI,MAAAC,GACrI,CAACC,EAAwB,YAAc,CACrC,MAAMC,EAAmBC,EAAA,YACvB,CACEpB,EACAC,EACAC,IACG,CACoBP,EAAA,iBACrBK,EACAC,GAAUiB,EACVhB,CACF,CACF,EACA,CAACgB,CAAa,CAChB,EACMG,EAAoBD,EAAA,YACxB,CACEpB,EACAC,EACAC,IACG,CACoBP,EAAA,kBACrBK,EACAC,GAAUiB,EACVhB,CACF,CACF,EACA,CAACgB,CAAa,CAChB,EACMI,EAAiBF,EAAA,YACrB,CAACpB,EAAmBG,EAAmB,EAAGF,IAAoB,CACrCN,EAAA,eACrBK,EACAG,EACAF,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMK,EAAqBH,EAAA,YACzB,CAACpB,EAAmBC,IAAoB,CACfN,EAAA,mBACrBK,EACAC,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMM,EAA0BJ,EAAA,YAC9B,CAACpB,EAAmBC,IAAoB,CACfN,EAAA,wBACrBK,EACAC,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMO,EAAcL,EAAA,YAClB,CAAChB,EAAoBC,EAAuBJ,IAAoB,CACvCN,EAAA,YACrBS,EACAC,EACAJ,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMQ,EAAoBN,EAAA,YACxB,CAACd,EAAoBC,EAAsBN,IAAoB,CACtCN,EAAA,kBACrBW,EACAC,EACAN,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMS,EAAqBP,EAAA,YACzB,CAACpB,EAAmBa,EAA0BZ,IAAoB,CACzCN,EAAA,mBACrBK,EACAa,EACAZ,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMU,EAAcR,EAAA,YAClB,CAACpB,EAAmBc,EAAqBb,IAAoB,CACpCN,EAAA,YACrBK,EACAc,EACAb,GAAUiB,CACZ,CACF,EACA,CAACA,CAAa,CAChB,EACMW,EAAgBT,EAAA,YACpB,CAACZ,EAAsBC,EAAqBC,IAAqB,CACxCf,EAAA,cAAca,EAAYC,EAAaC,CAAO,CACvE,EACA,CAAA,CACF,EACO,MAAA,CACL,iBAAAS,EACA,kBAAAE,EACA,eAAAC,EACA,mBAAAC,EACA,wBAAAC,EACA,YAAAC,EACA,kBAAAC,EACA,mBAAAC,EACA,YAAAC,EACA,cAAAC,CACF,CACF,ECpGIC,GAAqB,IAAM,CAEzB,KAAA,CAAE,qBAAA/H,EAAsB,iBAAAC,EAAkB,iBAAAqD,EAAkB,QAAAE,EAAS,MAAAnE,EAAO,gBAAAsE,EAAiB,eAAAE,CAAA,EAAmBX,GAAgB,EAAE,EAGlI,CAAE,eAAAqE,EAAgB,mBAAAC,GAAuBN,GAAoB,WAAW,EAGxE,CAAE,UAAAjJ,EAAW,iBAAAC,CAAiB,EAAIC,EAAQ,EAC1C,CAAE,eAAA6J,CAAe,EAAIC,EAAa,EAGlC,CACJ,kBAAAC,EACA,sBAAAC,EACA,yBAAAC,EACA,mBAAAC,GACEC,EAAsB,EAEpBvM,EAAS,CACb,gBACA,eACF,EAGMsB,EAAa,CACjB,CAAE,GAAI,EAAG,MAAO,cAAe,KAAMkL,EAAY,KAAK,aAAa,EACnE,CAAE,GAAI,EAAG,MAAO,UAAW,KAAMC,EAAQ,KAAK,aAAc,EAC5D,CAAE,GAAI,EAAG,MAAO,YAAa,KAAMC,EAAS,KAAK,aAAc,EAC/D,CAAE,GAAI,EAAG,MAAO,MAAO,KAAMC,EAAI,KAAM,aAAc,CACvD,EAEMC,EAAa,CACnB,CACE,MAAO,6CACP,YAAa,uDACb,WAAY,gBACZ,aAAc,IAAM,QAAQ,IAAI,kBAAkB,EAClD,MAAO,iBACP,MAAO,qBACT,EACA,CACE,MAAO,uCACP,YAAa,uDACb,WAAY,gBACZ,aAAc,IAAM,QAAQ,IAAI,yBAAyB,EACzD,MAAO,iBACP,MAAO,uBACT,EACA,CACE,MAAO,sDACP,YAAa,4BACb,WAAY,cACZ,aAAc,IAAM,QAAQ,IAAI,oBAAoB,EACpD,MAAO,iBACP,MAAO,sBAAA,CAET,EAEMxG,EAAW,CAAC,CACd,MAAO,iBACP,YAAa,mGACb,KAAMyG,EACN,MAAO,0BACT,EACA,CACE,MAAO,cACP,YAAa,0GACb,KAAMC,EACN,MAAO,4BACT,EACA,CACE,MAAO,eACP,YAAa,sHACb,KAAMC,EACN,MAAO,8BACT,EACA,CACE,MAAO,qBACP,YAAa,gHACb,KAAMC,EACN,MAAO,4BACT,EACA,CACE,MAAO,sBACP,YAAa,uHACb,KAAMC,EACN,MAAO,wBACT,EACA,CACE,MAAO,gBACP,YAAa,yGACb,KAAMC,EACN,MAAO,8BAAA,CACR,EAGG/J,EAAkB,MAAOgK,GAAe,CACxC,GAAA,CACM,QAAA,IAAI,YAAYA,CAAE,qBAAqB,EAG7BhB,EAAA,EAGHX,EAAA2B,EAAI,EAAG,eAAe,EAGrB,MAAMjL,EAAU,CAC9B,UAAWiL,EACX,SAAU,CAAA,CACX,GAGChL,EACEkB,EAAiB,QACjB,2CACF,EAEmBiJ,EAAA,IAEnBnK,EACEkB,EAAiB,MACjB,sCACF,EAEmBiJ,EAAA,SAEdhJ,EAAO,CACN,QAAA,MAAM,wBAAyBA,CAAK,EAC5CnB,EACEkB,EAAiB,MACjB,sCACF,EAEmBiJ,EAAA,CAAA,CAEvB,EAEMc,EAAsB,MAAOD,GAAe,CAC5C,GAAA,CACM,QAAA,IAAI,YAAYA,CAAE,+BAA+B,EAGzD1B,EAAmB0B,EAAI,eAAe,EAGhC,MAAArC,EAAS,MAAMmB,EAAekB,CAAE,EAElCrC,IAAW,QAETA,GACoBsB,EAAA,EACtBjK,EACEkB,EAAiB,QACjB,8BACF,IAEyBgJ,EAAA,EACzBlK,EACEkB,EAAiB,KACjB,iCACF,GAGiBiJ,EAAA,GAEnBnK,EACEkB,EAAiB,MACjB,8BACF,QAEKC,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,EAC/CnB,EACEkB,EAAiB,MACjB,8BACF,CAAA,CAEJ,EAEMgK,EAA0B,MAAOF,GAAe,CAChD,GAAA,CACM,QAAA,IAAI,sBAAsBA,CAAE,qBAAqB,EAGvChB,EAAA,EAGHX,EAAA2B,EAAI,EAAG,mBAAmB,EAGzB,MAAMjL,EAAU,CAC9B,UAAWiL,EACX,SAAU,CAAA,CACX,GAGChL,EACEkB,EAAiB,QACjB,qDACF,EAEmBiJ,EAAA,IAEnBnK,EACEkB,EAAiB,MACjB,gDACF,EAEmBiJ,EAAA,SAEdhJ,EAAO,CACN,QAAA,MAAM,yCAA0CA,CAAK,EAC7DnB,EACEkB,EAAiB,MACjB,gDACF,EAEmBiJ,EAAA,CAAA,CAEvB,EAIE,OAAAzL,EAAA,KAAC,MAAI,CAAA,UAAU,8BACZ,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BAEd,SAAA,CAACC,EAAA,IAAA,UAAA,CAAQ,UAAU,QACjB,SAACA,EAAAA,IAAAf,GAAA,CAAY,OAAAC,EAAgB,SAAU,GAAM,iBAAkB,GAAA,CAAM,CACvE,CAAA,EAGAa,EAAAA,KAAC,UAAQ,CAAA,UAAU,OACjB,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,sCAAsC,SAAwB,2BAAA,EAC5EA,MAACO,IAAW,WAAAC,CAAwB,CAAA,CAAA,CACtC,CAAA,CAAA,EACF,EAEAT,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACb,SAAA,CAACC,EAAAA,IAAA,UAAA,CAAQ,UAAU,QACjB,SAAAA,EAAA,IAACU,IAAW,OAAQoL,EAAY,SAAU,GAAA,CAAM,CAClD,CAAA,EAEA/L,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACb,SAAA,CAAAC,MAAC,KAAG,CAAA,UAAU,0BACX,SAAA8G,EAAkB,6BAA+B,sBACpD,EAGCtE,GACExC,EAAAA,IAAA,MAAA,CAAI,UAAU,uEACb,gBAAC,IAAE,CAAA,SAAA,CAAA,6BAA2BwC,CAAA,CAAA,CAAM,CACtC,CAAA,EAIDmE,GAAW,CAACK,EACXhH,EAAA,IAAC0F,GAAA,CACC,iBAAkB,GAClB,gBAAAoB,CAAA,CAAA,EAEC3D,EAAqB,OAAS,GAAKC,EAAiB,OAAS,EAChEpD,EAAA,IAACiD,GAAA,CACC,qBAAAE,EACA,iBAAAC,EACA,YAAaf,EACb,gBAAiBiK,EACjB,MAAO,GACP,gBAAAxF,CAAA,CACF,EAEC9G,EAAA,IAAA,MAAA,CAAI,UAAU,oBACb,eAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,uBAAqB,CAAA,CACpD,CAAA,CAAA,EAEJ,QAGC,UAAQ,CAAA,UAAU,QAChB,SAAA2G,GAAW,CAACK,EACXhH,EAAA,IAACwF,GAAA,CACC,MAAO,EACP,MAAM,kCAAA,CAAA,EAENiB,EAAiB,OAAS,EAC5BzG,EAAA,IAACwM,GAAA,CACC,SAAU/F,EACV,MAAM,uBACN,QAAS8F,CAAA,CACX,EACEvF,EACDhH,EAAA,IAAA,MAAA,CAAI,UAAU,oBACb,SAAAA,EAAAA,IAAC,IAAE,CAAA,UAAU,gBAAgB,SAAA,0DAAA,CAAwD,EACvF,EAEAA,EAAA,IAAC,MAAI,CAAA,UAAU,oBACb,SAAAA,EAAAA,IAAC,KAAE,UAAU,gBAAgB,SAAgC,kCAAA,CAAA,CAAA,CAC/D,CAEJ,CAAA,EAEAA,EAAAA,IAAC,WAAQ,UAAU,QACjB,eAACqF,GAAM,CAAA,SAAAC,EAAsB,MAAQ,mBAAmB,CAAA,CAC1D,CAAA,CAAA,CACF,CAAA,CAAA,EACF,CAEJ"}
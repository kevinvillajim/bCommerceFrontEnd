{"version":3,"file":"EmailVerificationPendingPage-Byle7fvt.js","sources":["../../src/presentation/pages/EmailVerificationPendingPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { Mail, RefreshCw, ArrowRight, CheckCircle, AlertCircle } from 'lucide-react';\r\nimport { NotificationType } from '../types/NotificationTypes';\r\n\r\n/**\r\n * Página que se muestra después del registro para informar sobre la verificación de email pendiente\r\n */\r\nconst EmailVerificationPendingPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  const [resendLoading, setResendLoading] = useState(false);\r\n  const [resendMessage, setResendMessage] = useState<{type: NotificationType.SUCCESS | NotificationType.ERROR, text: string} | null>(null);\r\n\r\n  // Obtener email del state de navegación\r\n  const userEmail = (location.state as any)?.email;\r\n\r\n  // Función para reenviar email de verificación\r\n  const handleResendVerification = async () => {\r\n    if (!userEmail) {\r\n      setResendMessage({type: NotificationType.ERROR, text: 'No se pudo determinar tu email. Por favor, intenta registrarte nuevamente.'});\r\n      return;\r\n    }\r\n\r\n    setResendLoading(true);\r\n    setResendMessage(null);\r\n\r\n    try {\r\n      const response = await fetch(`${import.meta.env.VITE_API_BASE_URL || 'http://127.0.0.1:8000/api'}/email-verification/resend`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email: userEmail }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (data.status === 'success') {\r\n        setResendMessage({type: NotificationType.SUCCESS, text: 'Email de verificación reenviado correctamente. Revisa tu bandeja de entrada.'});\r\n      } else if (data.status === 'rate_limited') {\r\n        setResendMessage({type: NotificationType.ERROR, text: data.message || 'Debes esperar antes de solicitar otro email.'});\r\n      } else {\r\n        setResendMessage({type: NotificationType.ERROR, text: data.message || 'Error al reenviar el email de verificación.'});\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al reenviar verificación:', error);\r\n      setResendMessage({type: NotificationType.ERROR, text: 'Error al procesar la solicitud. Inténtalo de nuevo.'});\r\n    } finally {\r\n      setResendLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center py-12 px-4 bg-gray-50\">\r\n      <div className=\"max-w-md w-full space-y-6\">\r\n        {/* Card principal */}\r\n        <div className=\"bg-white p-8 rounded-lg shadow-lg border\">\r\n          {/* Icono */}\r\n          <div className=\"text-center mb-6\">\r\n            <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-primary-100 mb-4\">\r\n              <Mail className=\"h-8 w-8 text-primary-600\" />\r\n            </div>\r\n            \r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n              Verifica tu correo electrónico\r\n            </h1>\r\n            \r\n            <p className=\"text-gray-600 text-sm leading-relaxed\">\r\n              Hemos enviado un enlace de verificación a tu correo electrónico\r\n            </p>\r\n          </div>\r\n\r\n          {/* Información del email */}\r\n          {userEmail && (\r\n            <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6\">\r\n              <div className=\"flex items-center\">\r\n                <Mail className=\"h-5 w-5 text-gray-400 mr-3\" />\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-gray-900\">Email enviado a:</p>\r\n                  <p className=\"text-sm text-gray-600\">{userEmail}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Instrucciones */}\r\n          <div className=\"space-y-4 mb-6\">\r\n            <div className=\"bg-primary-50 p-4 rounded-lg border border-primary-200\">\r\n              <h3 className=\"text-sm font-medium text-primary-900 mb-2\">Pasos a seguir:</h3>\r\n              <ol className=\"text-sm text-primary-800 space-y-1\">\r\n                <li className=\"flex items-start\">\r\n                  <span className=\" w-5 h-5 bg-primary-200 text-primary-800 rounded-full text-xs font-bold flex items-center justify-center mr-2 mt-0.5 flex-shrink-0\">1</span>\r\n                  Revisa tu bandeja de entrada\r\n                </li>\r\n                <li className=\"flex items-start\">\r\n                  <span className=\" w-5 h-5 bg-primary-200 text-primary-800 rounded-full text-xs font-bold flex items-center justify-center mr-2 mt-0.5 flex-shrink-0\">2</span>\r\n                  Busca un email de Comersia\r\n                </li>\r\n                <li className=\"flex items-start\">\r\n                  <span className=\" w-5 h-5 bg-primary-200 text-primary-800 rounded-full text-xs font-bold flex items-center justify-center mr-2 mt-0.5 flex-shrink-0\">3</span>\r\n                  Haz clic en el enlace de verificación\r\n                </li>\r\n              </ol>\r\n            </div>\r\n            \r\n            <div className=\"bg-yellow-50 p-3 rounded-lg border border-yellow-200\">\r\n              <p className=\"text-xs text-yellow-800\">\r\n                <strong>Nota:</strong> Si no encuentras el email, revisa tu carpeta de spam o correo no deseado.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mensaje de reenvío */}\r\n          {resendMessage && (\r\n            <div className={`p-4 rounded-lg border mb-4 ${\r\n              resendMessage.type === NotificationType.SUCCESS \r\n                ? 'bg-green-50 border-green-200 text-green-700' \r\n                : 'bg-red-50 border-red-200 text-red-700'\r\n            }`}>\r\n              <div className=\"flex items-center\">\r\n                {resendMessage.type === NotificationType.SUCCESS ? (\r\n                  <CheckCircle className=\"h-5 w-5 mr-2\" />\r\n                ) : (\r\n                  <AlertCircle className=\"h-5 w-5 mr-2\" />\r\n                )}\r\n                <span className=\"text-sm\">{resendMessage.text}</span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Botones de acción */}\r\n          <div className=\"space-y-3\">\r\n            <button\r\n              onClick={handleResendVerification}\r\n              disabled={resendLoading}\r\n              className=\"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n            >\r\n              {resendLoading ? (\r\n                <>\r\n                  <RefreshCw className=\"animate-spin -ml-1 mr-2 h-4 w-4\" />\r\n                  Reenviando...\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Mail className=\"-ml-1 mr-2 h-4 w-4\" />\r\n                  Reenviar email de verificación\r\n                </>\r\n              )}\r\n            </button>\r\n\r\n            <button\r\n              onClick={() => navigate('/login')}\r\n              className=\"w-full flex justify-center items-center px-4 py-3 border border-transparent rounded-lg text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors\"\r\n            >\r\n              Continuar al inicio de sesión\r\n              <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"text-center\">\r\n          <p className=\"text-xs text-gray-500\">\r\n            ¿Problemas con la verificación? {' '}\r\n            <button \r\n              onClick={() => navigate('/contact')}\r\n              className=\"text-primary-600 hover:text-primary-500 underline\"\r\n            >\r\n              Contáctanos\r\n            </button>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailVerificationPendingPage;"],"names":["EmailVerificationPendingPage","navigate","useNavigate","location","useLocation","resendLoading","setResendLoading","useState","resendMessage","setResendMessage","userEmail","handleResendVerification","NotificationType","data","error","jsxs","jsx","Mail","CheckCircle","AlertCircle","Fragment","RefreshCw","ArrowRight"],"mappings":"2LAQA,MAAMA,EAAyC,IAAM,CACnD,MAAMC,EAAWC,EAAY,EACvBC,EAAWC,EAAY,EAEvB,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAAS,EAAK,EAClD,CAACC,EAAeC,CAAgB,EAAIF,EAAAA,SAAyF,IAAI,EAGjIG,EAAaP,EAAS,OAAe,MAGrCQ,EAA2B,SAAY,CAC3C,GAAI,CAACD,EAAW,CACdD,EAAiB,CAAC,KAAMG,EAAiB,MAAO,KAAM,6EAA6E,EACnI,MAAA,CAGFN,EAAiB,EAAI,EACrBG,EAAiB,IAAI,EAEjB,GAAA,CASI,MAAAI,EAAO,MARI,MAAM,MAAM,yDAAiG,CAC5H,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,UAAU,CAAE,MAAOH,CAAW,CAAA,CAAA,CAC1C,GAE2B,KAAK,EAE7BG,EAAK,SAAW,UAClBJ,EAAiB,CAAC,KAAMG,EAAiB,QAAS,KAAM,+EAA+E,EAC9HC,EAAK,SAAW,eACRJ,EAAA,CAAC,KAAMG,EAAiB,MAAO,KAAMC,EAAK,SAAW,+CAA+C,EAEpGJ,EAAA,CAAC,KAAMG,EAAiB,MAAO,KAAMC,EAAK,SAAW,8CAA8C,QAE/GC,EAAO,CACN,QAAA,MAAM,kCAAmCA,CAAK,EACtDL,EAAiB,CAAC,KAAMG,EAAiB,MAAO,KAAM,sDAAsD,CAAA,QAC5G,CACAN,EAAiB,EAAK,CAAA,CAE1B,eAGG,MAAI,CAAA,UAAU,sEACb,SAACS,EAAA,KAAA,MAAA,CAAI,UAAU,4BAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,2CAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAACC,EAAAA,IAAA,OAAI,UAAU,sFACb,SAACA,MAAAC,EAAK,CAAA,UAAU,2BAA2B,EAC7C,QAEC,KAAA,CAAG,UAAU,wCAAwC,SAEtD,iCAAA,QAEC,IAAA,CAAE,UAAU,wCAAwC,SAErD,iEAAA,CAAA,CAAA,EACF,EAGCP,SACE,MAAI,CAAA,UAAU,wDACb,SAACK,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACb,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAK,UAAU,6BAA6B,SAC5C,MACC,CAAA,SAAA,OAAC,IAAA,CAAE,UAAU,oCAAoC,SAAgB,mBAAA,QAChE,IAAA,CAAE,UAAU,wBAAyB,SAAUP,CAAA,CAAA,CAAA,CAClD,CAAA,CAAA,CAAA,CACF,CAAA,CACF,EAIDK,EAAAA,KAAA,MAAI,CAAA,UAAU,iBACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,yDACb,SAAA,OAAC,KAAA,CAAG,UAAU,4CAA4C,SAAe,kBAAA,EACxEA,EAAAA,KAAA,KAAG,CAAA,UAAU,qCACZ,SAAA,CAACA,EAAAA,KAAA,KAAA,CAAG,UAAU,mBACZ,SAAA,OAAC,OAAA,CAAK,UAAU,qIAAqI,SAAC,IAAA,EAAO,8BAAA,EAE/J,EACCA,EAAAA,KAAA,KAAG,CAAA,UAAU,mBACZ,SAAA,OAAC,OAAA,CAAK,UAAU,qIAAqI,SAAC,IAAA,EAAO,4BAAA,EAE/J,EACCA,EAAAA,KAAA,KAAG,CAAA,UAAU,mBACZ,SAAA,OAAC,OAAA,CAAK,UAAU,qIAAqI,SAAC,IAAA,EAAO,uCAAA,CAE/J,CAAA,CAAA,CACF,CAAA,CAAA,EACF,QAEC,MAAI,CAAA,UAAU,uDACb,SAACA,EAAA,KAAA,IAAA,CAAE,UAAU,0BACX,SAAA,CAACC,EAAAA,IAAA,UAAO,SAAK,QAAA,EAAS,4EAAA,CAAA,CACxB,CACF,CAAA,CAAA,EACF,EAGCR,GACEQ,EAAAA,IAAA,MAAI,CAAA,UAAW,8BACdR,EAAc,OAASI,EAAiB,QACpC,8CACA,uCACN,GACE,SAACG,EAAAA,KAAA,MAAA,CAAI,UAAU,oBACZ,SAAA,CAAcP,EAAA,OAASI,EAAiB,QACtCI,EAAA,IAAAE,EAAA,CAAY,UAAU,cAAe,CAAA,EAErCF,EAAAA,IAAAG,EAAY,CAAA,UAAU,eAAe,EAEvCH,EAAA,IAAA,OAAA,CAAK,UAAU,UAAW,WAAc,IAAK,CAAA,CAAA,CAAA,CAChD,CAAA,CACF,EAIDD,EAAAA,KAAA,MAAI,CAAA,UAAU,YACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,QAASL,EACT,SAAUN,EACV,UAAU,+RAET,WAEGU,EAAAA,KAAAK,EAAA,SAAA,CAAA,SAAA,CAACJ,EAAAA,IAAAK,EAAA,CAAU,UAAU,kCAAkC,EAAE,iBAE3D,EAGEN,EAAAA,KAAAK,EAAA,SAAA,CAAA,SAAA,CAACJ,EAAAA,IAAAC,EAAA,CAAK,UAAU,qBAAqB,EAAE,gCAAA,CAEzC,CAAA,CAAA,CAEJ,EAEAF,EAAA,KAAC,SAAA,CACC,QAAS,IAAMd,EAAS,QAAQ,EAChC,UAAU,yPACX,SAAA,CAAA,gCAEEe,EAAAA,IAAAM,EAAW,CAAA,UAAU,cAAe,CAAA,CAAA,CAAA,CAAA,CACvC,CACF,CAAA,CAAA,EACF,QAGC,MAAI,CAAA,UAAU,cACb,SAACP,EAAA,KAAA,IAAA,CAAE,UAAU,wBAAwB,SAAA,CAAA,mCACF,IACjCC,EAAA,IAAC,SAAA,CACC,QAAS,IAAMf,EAAS,UAAU,EAClC,UAAU,oDACX,SAAA,aAAA,CAAA,CAED,CAAA,CACF,CACF,CAAA,CAAA,CAAA,CACF,CAAA,CACF,CAEJ"}
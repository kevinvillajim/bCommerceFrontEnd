import{aB as Q,a as ee,e as te,T as P,j as e,R as j,F as st,K as rt,h as se,l as re,X as M,aa as ae,r as at,o as ot,ap as it,ao as nt,N as oe,n as Ce,E as ct,t as lt,G as we,H as G}from"./ui-vendor-DEBjJ4HS.js";import{a as dt,r as i,L as mt}from"./react-vendor-Cy458wKG.js";import{c as y,b as _e,g as ut,T as xt,N as d}from"./admin-chunk-bhOJ3jtA.js";import{S as gt}from"./StatCardList-BC4AxJgi.js";class N{async getAllCreditNotes(r={}){try{const a={};r.page&&(a.page=r.page),r.limit&&(a.limit=r.limit),r.estado&&(a.estado=r.estado),r.fechaDesde&&(a.fechaDesde=r.fechaDesde),r.fechaHasta&&(a.fechaHasta=r.fechaHasta);const l=await y.get("/credit-notes",a),T=l?.data||[],f=l?.meta||{page:1,limit:20,total:0,totalPages:1,hasNext:!1,hasPrev:!1},L={current_page:f.current_page||1,last_page:f.last_page||1,per_page:f.per_page||20,total:f.total||0,from:f.from||1,to:f.to||0};return{status:"success",message:"Notas de crédito obtenidas exitosamente",data:{data:T,meta:L,links:{first:"",last:"",prev:f.hasPrev?"":null,next:f.hasNext?"":null}}}}catch(a){throw console.error("Error en HttpCreditNoteRepository.getAllCreditNotes:",a),a}}async getCreditNoteById(r){try{return(await y.get(`/admin/credit-notes/${r}`)).data}catch(a){throw console.error("Error en HttpCreditNoteRepository.getCreditNoteById:",a),a}}async createCreditNote(r){try{return await y.post("/credit-notes",r)}catch(a){throw console.error("Error en HttpCreditNoteRepository.createCreditNote:",a),a}}async validateCreditNote(r){try{return await y.post("/credit-notes/validate",r)}catch(a){throw console.error("Error en HttpCreditNoteRepository.validateCreditNote:",a),a}}async getCreditNoteStatusByAccessKey(r){try{return await y.get(`/credit-notes/status/${r}`)}catch(a){throw console.error("Error en HttpCreditNoteRepository.getCreditNoteStatusByAccessKey:",a),a}}async retryCreditNote(r){try{return(await y.post(`/admin/credit-notes/${r}/retry`,{})).data}catch(a){throw console.error("Error en HttpCreditNoteRepository.retryCreditNote:",a),a}}async checkCreditNoteStatus(r){try{return(await y.get(`/admin/credit-notes/${r}/check-status`)).data}catch(a){throw console.error("Error en HttpCreditNoteRepository.checkCreditNoteStatus:",a),a}}async getCreditNoteStats(){try{return(await y.get("/admin/credit-notes/stats/overview")).data}catch(r){throw console.error("Error en HttpCreditNoteRepository.getCreditNoteStats:",r),r}}async updateCreditNote(r,a){try{return(await y.put(`/admin/credit-notes/${r}`,a)).data}catch(l){throw console.error("Error en HttpCreditNoteRepository.updateCreditNote:",l),l}}async downloadCreditNotePdf(r){try{const a=await fetch(`${_e.api.baseUrl}/admin/credit-notes/${r}/download-pdf`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem(_e.storage.authTokenKey)}`,Accept:"application/pdf"}});if(!a.ok)throw new Error(`Error ${a.status}: ${a.statusText}`);return await a.blob()}catch(a){throw console.error("Error en HttpCreditNoteRepository.downloadCreditNotePdf:",a),a}}async getAuthorizedInvoices(r,a){try{const l={};return r&&(l.search=r),a&&(l.limit=a),await y.get("/invoices/authorized",l)}catch(l){throw console.error("Error en HttpCreditNoteRepository.getAuthorizedInvoices:",l),l}}async getInvoiceDetails(r){try{return(await y.get(`/invoices/${r}/details`)).data}catch(a){throw console.error("Error en HttpCreditNoteRepository.getInvoiceDetails:",a),a}}}class ht{constructor(r){this.creditNoteRepository=r}async execute(r={}){try{return(await this.creditNoteRepository.getAllCreditNotes(r)).data}catch(a){throw console.error("Error en GetAllCreditNotesUseCase:",a),a}}}class pt{constructor(r){this.creditNoteRepository=r}async execute(r){try{return await this.creditNoteRepository.getCreditNoteById(r)}catch(a){throw console.error("Error en GetCreditNoteByIdUseCase:",a),a}}}class yt{constructor(r){this.creditNoteRepository=r}async execute(r){try{return await this.creditNoteRepository.retryCreditNote(r)}catch(a){throw console.error("Error en RetryCreditNoteUseCase:",a),a}}}class ft{constructor(r){this.creditNoteRepository=r}async execute(r){try{return await this.creditNoteRepository.checkCreditNoteStatus(r)}catch(a){throw console.error("Error en CheckCreditNoteStatusUseCase:",a),a}}}class Nt{constructor(r){this.creditNoteRepository=r}async execute(){try{return await this.creditNoteRepository.getCreditNoteStats()}catch(r){throw console.error("Error en GetCreditNoteStatsUseCase:",r),r}}}class bt{constructor(r){this.creditNoteRepository=r}async execute(r,a){try{return await this.creditNoteRepository.updateCreditNote(r,a)}catch(l){throw console.error("Error en UpdateCreditNoteUseCase:",l),l}}}class vt{constructor(r){this.creditNoteRepository=r}async execute(r){try{return this.validateCreditNoteData(r),await this.creditNoteRepository.createCreditNote(r)}catch(a){throw console.error("Error en CreateCreditNoteUseCase:",a),a}}validateCreditNoteData(r){if(!r.fechaEmision)throw new Error("Fecha de emisión es requerida");if(!r.motivo||r.motivo.trim()==="")throw new Error("Motivo es requerido");if(!r.documentoModificado?.numero||r.documentoModificado.numero.trim()==="")throw new Error("Número del documento modificado es requerido");if(!r.comprador?.identificacion||r.comprador.identificacion.trim()==="")throw new Error("Identificación del comprador es requerida");if(!r.detalles||r.detalles.length===0)throw new Error("Al menos un detalle es requerido");r.detalles.forEach((a,l)=>{if(!a.codigoInterno||a.codigoInterno.trim()==="")throw new Error(`Código interno es requerido en detalle ${l+1}`);if(!a.descripcion||a.descripcion.trim()==="")throw new Error(`Descripción es requerida en detalle ${l+1}`);if(a.cantidad<=0)throw new Error(`Cantidad debe ser mayor a 0 en detalle ${l+1}`);if(a.precioUnitario<=0)throw new Error(`Precio unitario debe ser mayor a 0 en detalle ${l+1}`)})}}class jt{constructor(r){this.creditNoteRepository=r}async execute(r,a=50){try{return a>100&&(a=100),await this.creditNoteRepository.getAuthorizedInvoices(r,a)}catch(l){throw console.error("Error en GetAuthorizedInvoicesUseCase:",l),l}}}const Ct=["DRAFT","SENT_TO_SRI","PENDING","PROCESSING","RECEIVED","AUTHORIZED","REJECTED","NOT_AUTHORIZED","RETURNED","SRI_ERROR","FAILED","DEFINITIVELY_FAILED"],ie=[{value:"01",label:"Anulación de la operación"},{value:"02",label:"Anulación por error en el RUC"},{value:"03",label:"Corrección por error en la descripción"},{value:"04",label:"Descuento otorgado"},{value:"05",label:"Devolución de bienes"},{value:"06",label:"Descuento por bonificación"},{value:"07",label:"Descuento por avería"}],Rt=()=>{const{showToast:n}=ut(),r=dt(),[a]=i.useState(()=>{const t=new N;return new ht(t)}),[l]=i.useState(()=>{const t=new N;return new pt(t)}),[T]=i.useState(()=>{const t=new N;return new yt(t)}),[f]=i.useState(()=>{const t=new N;return new ft(t)}),[L]=i.useState(()=>{const t=new N;return new Nt(t)}),[Ee]=i.useState(()=>{const t=new N;return new bt(t)}),[Se]=i.useState(()=>{const t=new N;return new vt(t)}),[Re]=i.useState(()=>{const t=new N;return new jt(t)}),[Ie,ne]=i.useState([]),[C,De]=i.useState(null),[H,ce]=i.useState(!0),[le,de]=i.useState(null),[_,ke]=i.useState({page:1,per_page:20}),[O,Ae]=i.useState({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:20}),[c,me]=i.useState(null),[Ue,B]=i.useState(!1),[k,A]=i.useState(!1),[Fe,ue]=i.useState(!1),[x,xe]=i.useState(null),[u,E]=i.useState({}),[Pe,q]=i.useState(!1),[h,b]=i.useState({invoice_id:0,motivo:"Anulación de la operación",detalles:[]}),[ge,z]=i.useState([]),[he,$]=i.useState(""),[m,V]=i.useState(null),[W,U]=i.useState(!1),[Te,pe]=i.useState(!1),J=i.useRef(null),[p,g]=i.useState({});i.useEffect(()=>{F()},[_]),i.useEffect(()=>{if(r.state?.createFromInvoice&&r.state?.invoiceData){const t=r.state.invoiceData,s={id:t.id,invoice_number:t.invoice_number,display_label:`${t.invoice_number} - ${t.customer?.name||"Cliente"} ($${Number(t.total_amount||0).toFixed(2)})`,customer:{name:t.customer?.name||"Cliente Sin Nombre",identification:t.customer?.identification||"",identification_type:t.customer?.identification_type||"05",email:t.customer?.email,address:t.customer?.address||"",phone:t.customer?.phone},amounts:{total:Number(t.total_amount||0),subtotal:Number(t.subtotal||0),tax:Number(t.tax_amount||0)},issue_date:t.issue_date||new Date().toISOString().split("T")[0],created_at:new Date().toISOString()};V(s),$(s.display_label),b(o=>({...o,invoice_id:t.id})),q(!0),window.history.replaceState({},document.title)}},[r.state]),i.useEffect(()=>{const t=s=>{W&&J.current&&!J.current.contains(s.target)&&U(!1)};return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[W]);const F=async()=>{try{ce(!0),de(null);const[t,s]=await Promise.all([a.execute(_),L.execute()]),o=Array.isArray(t.data)?t.data:[];ne(o),Ae({currentPage:t.meta?.current_page||1,totalPages:t.meta?.last_page||1,totalItems:t.meta?.total||0,itemsPerPage:t.meta?.per_page||20}),s&&De(s)}catch(t){console.error("Error cargando notas de crédito:",t),de(t instanceof Error?t.message:"Error al cargar los datos"),ne([])}finally{ce(!1)}},Oe=async t=>{try{pe(!0);const s=await Re.execute(t,20);z(s.data)}catch(s){console.error("Error buscando facturas:",s),z([])}finally{pe(!1)}},[ye,ze]=i.useState(null),$e=t=>{if($(t),U(!0),ye&&clearTimeout(ye),!t.trim()){z([]);return}const s=setTimeout(()=>{Oe(t.trim())},300);ze(s)},Me=t=>{V(t),$(t.display_label),U(!1),b(s=>({...s,invoice_id:t.id}))},fe=()=>{V(null),$(""),z([]),U(!1),b(t=>({...t,invoice_id:0}))},R=(t,s)=>{ke(o=>({...o,[t]:s,page:t==="page"?s:1}))},Ge=t=>{R("page",t)},Le=async t=>{try{B(!0);const s=await l.execute(t.id);me(s)}catch(s){console.error("Error cargando detalles:",s),n(d.ERROR,"Error al cargar los detalles de la nota de crédito"),B(!1)}},He=()=>{B(!1),me(null),A(!1)},Be=async t=>{try{g(s=>({...s,[t]:!0})),await T.execute(t),n(d.SUCCESS,"Reintento de nota de crédito iniciado correctamente"),F()}catch(s){const o=s?.response?.data?.error||"Error al reintentar la nota de crédito";n(d.ERROR,o)}finally{g(s=>({...s,[t]:!1}))}},qe=async t=>{try{g(o=>({...o,[t]:!0}));const s=await f.execute(t);if(s&&s.credit_note_id){const{current_status:o,sri_status:w,sri_access_key:S,sri_authorization_number:v}=s,Y=`Consulta exitosa

Nota de Crédito: ${t}
Estado Actual: ${o}
Clave Acceso: ${S}
N° Autorización: ${v||"N/A"}

Detalles SRI:
${JSON.stringify(w,null,2)}`;n(d.SUCCESS,Y)}else n(d.WARNING,"Respuesta inesperada del servidor")}catch(s){console.error("Error consultando estado:",s),n(d.ERROR,s instanceof Error?s.message:"Error al consultar el estado")}finally{g(s=>({...s,[t]:!1}))}},Ne=t=>{if(!t)return"N/A";const s=new Date(t);return new Intl.DateTimeFormat("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)},I=t=>new Intl.NumberFormat("es-EC",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(t),Z=async(t,s)=>{if(s==="xml"){n(d.INFO,"Funcionalidad de descarga XML en desarrollo"),k&&A(!1);return}try{g(Y=>({...Y,[t]:!0}));const w=await new N().downloadCreditNotePdf(t),S=window.URL.createObjectURL(w),v=document.createElement("a");v.href=S,v.download=`nota_credito_${t}.pdf`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(S),n(d.SUCCESS,"PDF descargado correctamente")}catch(o){console.error("Error descargando PDF:",o),n(d.ERROR,o instanceof Error?o.message:"Error al descargar el PDF")}finally{g(o=>({...o,[t]:!1})),k&&A(!1)}},Ve=t=>{n(d.INFO,"Funcionalidad de envío por email en desarrollo"),k&&A(!1)},We=t=>{xe(t),E({customer_name:t.customer?.name||"",customer_identification:t.customer?.identification||"",customer_email:t.customer?.email||"",customer_address:t.customer?.address||"",customer_phone:t.customer?.phone||""}),ue(!0)},K=()=>{ue(!1),xe(null),E({})},Je=async()=>{if(x)try{g(s=>({...s,[x.id]:!0}));const t={};if(u.customer_name&&u.customer_name!==x.customer?.name&&(t.customer_name=u.customer_name),u.customer_identification&&u.customer_identification!==x.customer?.identification&&(t.customer_identification=u.customer_identification),u.customer_email!==x.customer?.email&&(t.customer_email=u.customer_email||void 0),u.customer_address&&u.customer_address!==x.customer?.address&&(t.customer_address=u.customer_address),u.customer_phone!==x.customer?.phone&&(t.customer_phone=u.customer_phone||void 0),Object.keys(t).length===0){n(d.WARNING,"No se detectaron cambios para guardar");return}await Ee.execute(x.id,t),n(d.SUCCESS,"Nota de crédito actualizada correctamente"),K(),F()}catch(t){console.error("Error actualizando nota de crédito:",t),n(d.ERROR,t instanceof Error?t.message:"Error al actualizar la nota de crédito")}finally{g(t=>({...t,[x.id]:!1}))}},X=()=>{q(!1),b({invoice_id:0,motivo:"Anulación de la operación",detalles:[]}),fe()},Ze=()=>{const t={product_code:"",product_name:"",quantity:1,unit_price:0,discount:0,codigo_iva:"4"};b(s=>({...s,detalles:[...s.detalles,t]}))},Ke=t=>{b(s=>({...s,detalles:s.detalles.filter((o,w)=>w!==t)}))},D=(t,s,o)=>{b(w=>({...w,detalles:w.detalles.map((S,v)=>v===t?{...S,[s]:o}:S)}))},Xe=()=>h.detalles.reduce((t,s)=>{const o=(s.quantity||0)*(s.unit_price||0)-(s.discount||0);return t+o},0),Ye=async()=>{if(!m){n(d.WARNING,"Debe seleccionar una factura primero");return}try{g(o=>({...o,1:!0}));const s=await new N().getInvoiceDetails(m.id);b(o=>({...o,detalles:s})),n(d.SUCCESS,`Se cargaron ${s.length} detalles de la factura`)}catch(t){console.error("Error cargando detalles de factura:",t),n(d.ERROR,"Error al cargar los detalles de la factura")}finally{g(t=>({...t,1:!1}))}},Qe=async()=>{try{if(g(o=>({...o,0:!0})),!h.invoice_id){n(d.WARNING,"Debe seleccionar una factura para crear la nota de crédito");return}if(!m){n(d.WARNING,"Debe seleccionar una factura válida");return}if(h.detalles.length===0){n(d.WARNING,"Debe agregar al menos un detalle a la nota de crédito");return}if(h.detalles.some(o=>!o.product_code?.trim()||!o.product_name?.trim()||o.quantity<=0||o.unit_price<=0)){n(d.WARNING,"Todos los detalles deben tener código, nombre, cantidad y precio unitario válidos");return}console.log("DEBUG selectedInvoice:",JSON.stringify(m,null,2)),console.log("DEBUG createFormData:",JSON.stringify(h,null,2));const s={secuencial:"",fechaEmision:new Date().toISOString().split("T")[0],motivo:h.motivo,documentoModificado:{tipo:"01",numero:m.invoice_number,fechaEmision:m.issue_date},comprador:{tipoIdentificacion:m.customer.identification_type,identificacion:m.customer.identification,razonSocial:m.customer.name,direccion:m.customer.address,email:m.customer.email,telefono:m.customer.phone},detalles:h.detalles.map(o=>({codigoInterno:o.product_code,descripcion:o.product_name,cantidad:o.quantity,precioUnitario:o.unit_price,descuento:o.discount||0,codigoIva:o.codigo_iva})),informacionAdicional:{MotivoDetallado:h.motivo,Observaciones:"Nota de crédito generada desde sistema administrativo"}};console.log("DEBUG sriData final:",JSON.stringify(s,null,2)),await Se.execute(s),n(d.SUCCESS,"Nota de crédito creada correctamente"),X(),F()}catch(t){console.error("Error creando nota de crédito:",t),n(d.ERROR,t instanceof Error?t.message:"Error al crear la nota de crédito")}finally{g(t=>({...t,0:!1}))}},et=[{key:"credit_note",header:"Nota de Crédito",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.credit_note_number}),e.jsx("div",{className:"text-xs text-gray-500",children:Ne(t.created_at)})]})]})},{key:"customer",header:"Cliente",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:e.jsx(se,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.customer?.name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center",children:[e.jsx(re,{className:"h-3 w-3 mr-1"}),t.customer?.identification||"N/A"]})]})]})},{key:"invoice",header:"Factura Original",sortable:!0,render:t=>e.jsxs("div",{children:[t.documento_modificado?e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.documento_modificado}):e.jsx("span",{className:"text-sm text-gray-500",children:"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.items_count," items"]})]})},{key:"amount",header:"Monto",sortable:!0,render:t=>e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[I(t.total_amount),e.jsxs("div",{className:"text-xs text-gray-500",children:["Subtotal: ",I(t.subtotal)]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["IVA: ",I(t.tax_amount)]})]})},{key:"status",header:"Estado",sortable:!0,render:t=>e.jsxs("div",{children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:be(t.status_color),color:ve(t.status_color)},children:[je(t.status),t.status_label]}),t.retry_count>0&&e.jsxs("div",{className:"text-xs text-orange-600 mt-1",children:["Reintentos: ",t.retry_count]})]})},{key:"actions",header:"Acciones",render:t=>{const s=p[t.id];return e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>Le(t),className:"p-1 text-blue-600 hover:bg-blue-100 rounded-md",title:"Ver detalles",children:e.jsx(ct,{size:18})}),t.status!=="AUTHORIZED"&&e.jsx("button",{onClick:()=>We(t),disabled:s,className:"p-1 text-green-600 hover:bg-green-100 rounded-md disabled:opacity-50",title:"Editar datos de cliente",children:e.jsx(lt,{size:18})}),t.status==="FAILED"&&t.retry_count<12&&e.jsx("button",{onClick:()=>Be(t.id),disabled:s,className:"p-1 text-orange-600 hover:bg-orange-100 rounded-md disabled:opacity-50",title:"Reintentar envío",children:s?e.jsx(j,{size:18,className:"animate-spin"}):e.jsx(we,{size:18})}),t.sri_access_key&&e.jsx("button",{onClick:()=>qe(t.id),disabled:s,className:"p-1 text-purple-600 hover:bg-purple-100 rounded-md disabled:opacity-50",title:"Consultar estado SRI",children:s?e.jsx(j,{size:18,className:"animate-spin"}):e.jsx(j,{size:18})}),e.jsx("button",{onClick:()=>Z(t.id,"pdf"),className:"p-1 text-green-600 hover:bg-green-100 rounded-md",title:"Descargar PDF",children:e.jsx(ae,{size:18})})]})}}],be=t=>{const s={gray:"#f3f4f6",blue:"#dbeafe",yellow:"#fef3c7",indigo:"#e0e7ff",green:"#d1fae5",red:"#fee2e2",orange:"#fed7aa"};return s[t]||s.gray},ve=t=>{const s={gray:"#374151",blue:"#1e40af",yellow:"#92400e",indigo:"#3730a3",green:"#059669",red:"#dc2626",orange:"#ea580c"};return s[t]||s.gray},je=t=>({DRAFT:e.jsx(te,{className:"w-3 h-3 mr-1"}),SENT_TO_SRI:e.jsx(Ce,{className:"w-3 h-3 mr-1"}),PENDING:e.jsx(te,{className:"w-3 h-3 mr-1"}),PROCESSING:e.jsx(j,{className:"w-3 h-3 mr-1 animate-spin"}),RECEIVED:e.jsx(ee,{className:"w-3 h-3 mr-1"}),AUTHORIZED:e.jsx(ee,{className:"w-3 h-3 mr-1"}),REJECTED:e.jsx(G,{className:"w-3 h-3 mr-1"}),NOT_AUTHORIZED:e.jsx(G,{className:"w-3 h-3 mr-1"}),RETURNED:e.jsx(we,{className:"w-3 h-3 mr-1"}),SRI_ERROR:e.jsx(P,{className:"w-3 h-3 mr-1"}),FAILED:e.jsx(G,{className:"w-3 h-3 mr-1"}),DEFINITIVELY_FAILED:e.jsx(G,{className:"w-3 h-3 mr-1"})})[t]||e.jsx(P,{className:"w-3 h-3 mr-1"}),tt=C?[{title:"Total",value:C.sri_stats.total_credit_notes,description:"Notas de Crédito",icon:Q,bgColor:"bg-indigo-50/20",textColor:"text-indigo-800",valueColor:"text-indigo-900",descriptionColor:"text-indigo-700",iconColor:"text-indigo-600"},{title:"Autorizadas",value:C.sri_stats.authorized,description:`${C.sri_stats.success_rate}% éxito`,icon:ee,bgColor:"bg-green-50/20",textColor:"text-green-800",valueColor:"text-green-900",descriptionColor:"text-green-700",iconColor:"text-green-600"},{title:"Pendientes",value:C.sri_stats.pending,description:"En proceso",icon:te,bgColor:"bg-yellow-50",textColor:"text-yellow-800",valueColor:"text-yellow-900",descriptionColor:"text-yellow-700",iconColor:"text-yellow-600"},{title:"Fallidas",value:C.sri_stats.failed+C.sri_stats.definitively_failed,description:`${C.additional_stats.pending_retries} pueden reintentarse`,icon:P,bgColor:"bg-red-50/20",textColor:"text-red-800",valueColor:"text-red-900",descriptionColor:"text-red-700",iconColor:"text-red-600"}]:[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Notas de Crédito SRI"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[e.jsx(Q,{size:18,className:"inline mr-2"}),"Nueva Nota de Crédito"]}),e.jsxs("button",{onClick:F,disabled:H,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50",children:[e.jsx(j,{size:18,className:`inline mr-2 ${H?"animate-spin":""}`}),"Actualizar"]})]})]}),le&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(P,{className:"h-5 w-5 text-red-400 mr-3"}),e.jsx("p",{className:"text-red-800",children:le})]})}),e.jsx(gt,{items:tt}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"h-5 w-5 text-gray-500"}),e.jsxs("select",{className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.status||"all",onChange:t=>R("status",t.target.value==="all"?void 0:t.target.value),children:[e.jsx("option",{value:"all",children:"Todos los Estados"}),Ct.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rt,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.start_date||"",onChange:t=>R("start_date",t.target.value||void 0),placeholder:"Desde"}),e.jsx("input",{type:"date",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.end_date||"",onChange:t=>R("end_date",t.target.value||void 0),placeholder:"Hasta"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(se,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.customer_name||"",onChange:t=>R("customer_name",t.target.value||void 0),placeholder:"Nombre cliente"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{className:"h-5 w-5 text-gray-500"}),e.jsx("input",{type:"text",className:"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",value:_.customer_identification||"",onChange:t=>R("customer_identification",t.target.value||void 0),placeholder:"Cédula/RUC"})]})]})}),e.jsx(xt,{data:Ie,columns:et,searchFields:["credit_note_number"],loading:H,emptyMessage:"No se encontraron notas de crédito",pagination:{currentPage:O.currentPage,totalPages:O.totalPages,totalItems:O.totalItems,itemsPerPage:O.itemsPerPage,onPageChange:Ge}}),Pe&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nueva Nota de Crédito"}),e.jsx("button",{onClick:X,className:"text-gray-400 hover:text-gray-500",disabled:p[0],children:e.jsx(M,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar Factura"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:he,onChange:t=>$e(t.target.value),onFocus:()=>U(!0),placeholder:"Buscar por número de factura, cliente o cédula..."}),m&&e.jsx("button",{type:"button",onClick:fe,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(M,{className:"h-4 w-4"})}),W&&e.jsx("div",{ref:J,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Te?e.jsxs("div",{className:"p-3 text-center text-gray-500 flex items-center justify-center",children:[e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Buscando facturas..."]}):ge.length>0?ge.map(t=>e.jsxs("button",{type:"button",onClick:()=>Me(t),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.invoice_number}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.customer.name," - ",t.customer.identification]}),e.jsxs("div",{className:"text-sm text-green-600 font-medium",children:["$",Number(t.amounts.total||0).toFixed(2)]})]},t.id)):he.length>2?e.jsx("div",{className:"p-3 text-center text-gray-500",children:"No se encontraron facturas"}):e.jsx("div",{className:"p-3 text-center text-gray-500",children:"Escribe al menos 3 caracteres para buscar"})})]}),m&&e.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-green-800",children:["Factura seleccionada: ",m.invoice_number]}),e.jsxs("div",{className:"text-sm text-green-700",children:["Cliente: ",m.customer.name," (",m.customer.identification,")"]}),e.jsxs("div",{className:"text-sm text-green-700",children:["Total: $",Number(m.amounts.total||0).toFixed(2)]})]}),r.state?.invoiceData&&!m&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Factura desde navegación: ",r.state.invoiceData.invoice_number]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo"}),e.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:ie.find(t=>t.label===h.motivo)?.value||"01",onChange:t=>{const s=ie.find(o=>o.value===t.target.value);b(o=>({...o,motivo:s?s.label:t.target.value}))},children:ie.map(t=>e.jsxs("option",{value:t.value,children:[t.value," - ",t.label]},t.value))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Detalles de la Nota de Crédito"}),e.jsxs("div",{className:"flex gap-2",children:[m&&e.jsx("button",{type:"button",onClick:Ye,disabled:p[1],className:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:p[1]?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-1 animate-spin"}),"Cargando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Cargar de Factura"]})}),e.jsxs("button",{type:"button",onClick:Ze,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-lg hover:bg-indigo-700 transition-colors flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),"Agregar Item"]})]})]}),h.detalles.length===0?e.jsx("div",{className:"border border-gray-300 rounded-lg p-4 text-center text-gray-500",children:'No hay detalles agregados. Haga clic en "Agregar Item" para comenzar.'}):e.jsxs("div",{className:"space-y-4",children:[h.detalles.map((t,s)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["Item ",s+1]}),e.jsx("button",{type:"button",onClick:()=>Ke(s),className:"p-1 text-red-600 hover:text-red-800 transition-colors",children:e.jsx(ot,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Código del Producto *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.product_code||"",onChange:o=>D(s,"product_code",o.target.value),placeholder:"Ej: PROD001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Nombre del Producto *"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.product_name||"",onChange:o=>D(s,"product_name",o.target.value),placeholder:"Ej: Producto de ejemplo"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Cantidad *"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.quantity||0,onChange:o=>D(s,"quantity",parseFloat(o.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Precio Unitario *"}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.unit_price||0,onChange:o=>D(s,"unit_price",parseFloat(o.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Descuento"}),e.jsx("input",{type:"number",step:"0.01",min:"0",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.discount||0,onChange:o=>D(s,"discount",parseFloat(o.target.value)||0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Código IVA *"}),e.jsxs("select",{className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:t.codigo_iva||"4",onChange:o=>D(s,"codigo_iva",o.target.value),children:[e.jsx("option",{value:"4",children:"4 - IVA 15% (Actual)"}),e.jsx("option",{value:"0",children:"0 - IVA 0%"}),e.jsx("option",{value:"5",children:"5 - IVA 5% (materiales construcción)"}),e.jsx("option",{value:"2",children:"2 - IVA 12% (obsoleto)"}),e.jsx("option",{value:"3",children:"3 - IVA 14%"}),e.jsx("option",{value:"6",children:"6 - No objeto de impuesto"}),e.jsx("option",{value:"7",children:"7 - Exento de IVA"})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal: "}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",((t.quantity||0)*(t.unit_price||0)-(t.discount||0)).toFixed(2)]})]})})]},s)),e.jsx("div",{className:"border-t border-gray-300 pt-3",children:e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-lg font-medium text-gray-900",children:["Total: $",Xe().toFixed(2)]})})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:X,disabled:p[0],className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:Qe,disabled:p[0],className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 flex items-center",children:p[0]?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Creando..."]}):"Crear Nota de Crédito"})]})]})]})}),Fe&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Editar Nota de Crédito ",x.credit_note_number]}),e.jsx("button",{onClick:K,className:"text-gray-400 hover:text-gray-500",disabled:p[x.id],children:e.jsx(M,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del cliente"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.customer_name||"",onChange:t=>E(s=>({...s,customer_name:t.target.value})),placeholder:"Nombre completo del cliente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cédula/RUC"}),e.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.customer_identification||"",onChange:t=>E(s=>({...s,customer_identification:t.target.value})),placeholder:"Cédula (10 dígitos) o RUC (13 dígitos)",maxLength:13})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (opcional)"}),e.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.customer_email||"",onChange:t=>E(s=>({...s,customer_email:t.target.value})),placeholder:"email@ejemplo.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:u.customer_address||"",onChange:t=>E(s=>({...s,customer_address:t.target.value})),placeholder:"Dirección completa del cliente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono (opcional)"}),e.jsx("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.customer_phone||"",onChange:t=>E(s=>({...s,customer_phone:t.target.value})),placeholder:"0999999999"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[e.jsx("button",{onClick:K,disabled:p[x.id],className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),e.jsx("button",{onClick:Je,disabled:p[x.id],className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 flex items-center",children:p[x.id]?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2 animate-spin"}),"Guardando..."]}):"Guardar Cambios"})]})]})]})}),Ue&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Detalle de Nota de Crédito ",c.credit_note_number]}),e.jsx("button",{onClick:He,className:"text-gray-400 hover:text-gray-500",children:e.jsx(M,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Información General"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Número:"}),e.jsx("span",{className:"font-medium text-gray-900",children:c.credit_note_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha emisión:"}),e.jsx("span",{className:"font-medium text-gray-900",children:Ne(c.issue_date)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:be(c.status_color),color:ve(c.status_color)},children:[je(c.status),c.status_label]})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Cliente"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(se,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:c.customer.name})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-700",children:[c.customer.identification,e.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",c.customer.identification_type_label,")"]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(it,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-700",children:c.customer.phone||"N/A"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(nt,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5"}),e.jsx("span",{className:"text-gray-700 text-xs",children:c.customer.address})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"SRI"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[c.sri.access_key&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Clave de acceso:"}),e.jsx("p",{className:"text-xs text-gray-900 font-mono break-all mt-1",children:c.sri.access_key})]}),c.sri.authorization_number&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"N° autorización:"}),e.jsx("p",{className:"text-xs text-gray-900 font-mono break-all mt-1",children:c.sri.authorization_number})]}),c.retry_info.count>0&&e.jsx("div",{className:"text-orange-600",children:e.jsxs("span",{className:"text-xs",children:["Reintentos: ",c.retry_info.count]})})]})]})]}),c.sri.error_message&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[e.jsxs("h4",{className:"text-sm font-medium text-red-800 mb-2 flex items-center",children:[e.jsx(P,{className:"h-4 w-4 mr-1"}),"Error del SRI"]}),e.jsx("p",{className:"text-sm text-red-700",children:c.sri.error_message})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Totales"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("p",{className:"font-medium text-gray-900",children:I(c.subtotal)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"IVA (15%):"}),e.jsx("p",{className:"font-medium text-gray-900",children:I(c.tax_amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Total:"}),e.jsx("p",{className:"font-bold text-gray-900 text-lg",children:I(c.total_amount)})]})]})})]}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-2 mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>A(!k),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors flex items-center",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Descargar"]}),k&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>Z(c.id,"pdf"),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[e.jsx(oe,{className:"h-4 w-4 mr-2 text-gray-500"}),"Descargar PDF"]}),e.jsxs("button",{onClick:()=>Z(c.id,"xml"),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[e.jsx(oe,{className:"h-4 w-4 mr-2 text-gray-500"}),"Descargar XML"]}),e.jsxs("button",{onClick:()=>Ve(c.id),className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left",children:[e.jsx(Ce,{className:"h-4 w-4 mr-2 text-gray-500"}),"Enviar por email"]})]})})]}),c.invoice&&e.jsxs(mt,{to:`/admin/invoices/${c.invoice.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Ver Factura Original"]})]})]})]})})]})};export{Rt as default};
//# sourceMappingURL=AdminCreditNotesPage-BePNwWP5.js.map

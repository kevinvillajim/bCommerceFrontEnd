{"version":3,"file":"DatafastResultPage-Bvdpozq1.js","sources":["../../src/presentation/pages/DatafastResultPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useNavigate, useSearchParams} from \"react-router-dom\";\r\nimport {DatafastService} from \"../../core/services/DatafastService\";\r\nimport {useCart} from \"../hooks/useCart\";\r\nimport {NotificationType} from \"../contexts/CartContext\";\r\nimport {formatCurrency} from \"../../utils/formatters/formatCurrency\";\r\n\r\ninterface ProcessingResult {\r\n\tsuccess: boolean;\r\n\tdata?: {\r\n\t\torder_id: string;\r\n\t\torder_number: string;\r\n\t\ttotal: number;\r\n\t\tpayment_status: string;\r\n\t\tpayment_id: string;\r\n\t};\r\n\tmessage: string;\r\n}\r\n\r\nconst DatafastResultPage: React.FC = () => {\r\n\tconst navigate = useNavigate();\r\n\tconst [searchParams] = useSearchParams();\r\n\tconst {clearCart, showNotification} = useCart();\r\n\tconst [isProcessing, setIsProcessing] = useState(true);\r\n\tconst [result, setResult] = useState<ProcessingResult | null>(null);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\tconst [countdown] = useState(5);\r\n\r\n\tconst datafastService = new DatafastService();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst processDatafastResult = async () => {\r\n\t\t\ttry {\r\n\t\t\t\t// Obtener resourcePath de los parámetros de la URL\r\n\t\t\t\tconst resourcePath = searchParams.get(\"resourcePath\");\r\n\r\n\t\t\t\tif (!resourcePath) {\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\"No se encontró resourcePath en la respuesta de Datafast\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"Procesando resultado de Datafast:\", {\r\n\t\t\t\t\tresourcePath,\r\n\t\t\t\t\tallParams: Object.fromEntries(searchParams.entries()),\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Obtener transaction_id del localStorage o generar uno de respaldo\r\n\t\t\t\tlet transactionId = localStorage.getItem(\"datafast_transaction_id\");\r\n\r\n\t\t\t\tif (!transactionId) {\r\n\t\t\t\t\t// Si no hay transaction_id guardado, generar uno basado en el resourcePath\r\n\t\t\t\t\tconst checkoutIdMatch = resourcePath.match(/\\/checkouts\\/([^\\/]+)/);\r\n\t\t\t\t\tconst checkoutId = checkoutIdMatch\r\n\t\t\t\t\t\t? checkoutIdMatch[1]\r\n\t\t\t\t\t\t: Date.now().toString();\r\n\t\t\t\t\ttransactionId = `ORDER_${Date.now()}_${checkoutId}`;\r\n\r\n\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\t\"No se encontró transaction_id en localStorage, usando:\",\r\n\t\t\t\t\t\ttransactionId\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"Verificando pago con:\", {\r\n\t\t\t\t\tresourcePath,\r\n\t\t\t\t\ttransactionId,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Verificar el pago\r\n\t\t\t\tconst verifyResponse = await datafastService.verifyPayment({\r\n\t\t\t\t\tresource_path: resourcePath,\r\n\t\t\t\t\ttransaction_id: transactionId,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(\"Respuesta de verificación:\", verifyResponse);\r\n\r\n\t\t\t\tif (verifyResponse.success && verifyResponse.data) {\r\n\t\t\t\t\t// Pago exitoso\r\n\t\t\t\t\tsetResult({\r\n\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\tdata: verifyResponse.data,\r\n\t\t\t\t\t\tmessage: \"Pago procesado exitosamente\",\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Limpiar datos temporales\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_transaction_id\");\r\n\r\n\t\t\t\t\t// Usar setTimeout para evitar setState durante render\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tclearCart();\r\n\t\t\t\t\t\tshowNotification(\r\n\t\t\t\t\t\t\tNotificationType.SUCCESS,\r\n\t\t\t\t\t\t\t\"¡Pago procesado exitosamente con Datafast!\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 100);\r\n\r\n\t\t\t\t\t// Redirigir después de 5 segundos\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnavigate(\"/orders\");\r\n\t\t\t\t\t}, 5000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Pago fallido o pendiente\r\n\t\t\t\t\tconst message = verifyResponse.message || \"El pago no fue completado\";\r\n\t\t\t\t\tconst resultCode = verifyResponse.result_code;\r\n\r\n\t\t\t\t\tconsole.warn(\"Pago no exitoso:\", {\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\tresultCode,\r\n\t\t\t\t\t\tfullResponse: verifyResponse,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Mensajes específicos según el código de resultado\r\n\t\t\t\t\tlet userMessage = message;\r\n\t\t\t\t\tif (resultCode === \"000.200.100\") {\r\n\t\t\t\t\t\tuserMessage =\r\n\t\t\t\t\t\t\t\"El checkout fue creado pero el pago no se completó. Por favor, intente nuevamente.\";\r\n\t\t\t\t\t} else if (resultCode && resultCode.startsWith(\"800\")) {\r\n\t\t\t\t\t\tuserMessage =\r\n\t\t\t\t\t\t\t\"El pago fue rechazado por el banco. Verifique sus datos e intente nuevamente.\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow new Error(userMessage);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error al procesar resultado de Datafast:\", error);\r\n\r\n\t\t\t\tconst errorMessage =\r\n\t\t\t\t\terror instanceof Error\r\n\t\t\t\t\t\t? error.message\r\n\t\t\t\t\t\t: \"Error desconocido al procesar el pago\";\r\n\t\t\t\tsetError(errorMessage);\r\n\r\n\t\t\t\t// Usar setTimeout para evitar setState durante render\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tshowNotification(NotificationType.ERROR, errorMessage);\r\n\t\t\t\t}, 100);\r\n\r\n\t\t\t\t// Redirigir al carrito después de 8 segundos\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnavigate(\"/cart\");\r\n\t\t\t\t}, 8000);\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsProcessing(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprocessDatafastResult();\r\n\t}, [searchParams, navigate]);\r\n\r\n\tif (isProcessing) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\r\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\tProcesando pago...\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p className=\"text-gray-600\">\r\n\t\t\t\t\t\t\tEstamos verificando tu pago con Datafast. Por favor espera.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"mt-4 text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t<p>Este proceso puede tomar unos segundos.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-8 h-8 text-red-500\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\tError en el pago\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p className=\"text-gray-600 mb-6\">{error}</p>\r\n\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t<p>Serás redirigido al carrito en {countdown} segundos...</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/cart\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tVolver al carrito\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (result && result.success && result.data) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-lg w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-8 h-8 text-green-500\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\t¡Pago exitoso!\r\n\t\t\t\t\t\t</h2>\r\n\r\n\t\t\t\t\t\t<p className=\"text-gray-600 mb-6\">\r\n\t\t\t\t\t\t\tTu pago ha sido procesado correctamente con Datafast.\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{/* Detalles del pedido */}\r\n\t\t\t\t\t\t<div className=\"bg-gray-50 rounded-lg p-6 mb-6 text-left\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold text-gray-800 mb-4 text-center\">\r\n\t\t\t\t\t\t\t\tDetalles del pedido\r\n\t\t\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Número de orden:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t{result.data.order_number}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">ID de pago:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t{result.data.payment_id}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Total pagado:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-bold text-lg text-primary-600\">\r\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(result.data.total)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Estado del pago:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-3 h-3 mr-1\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\tCompletado\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Información adicional */}\r\n\t\t\t\t\t\t<div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-start\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-blue-700\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium mb-1\">¿Qué sigue?</p>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"text-xs space-y-1\">\r\n\t\t\t\t\t\t\t\t\t\t<li>• Recibirás un correo de confirmación</li>\r\n\t\t\t\t\t\t\t\t\t\t<li>• Procesaremos tu pedido en las próximas 24 horas</li>\r\n\t\t\t\t\t\t\t\t\t\t<li>• Te notificaremos cuando tu pedido sea enviado</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Información de redirección */}\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tSerás redirigido a tus pedidos en{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-primary-600\">\r\n\t\t\t\t\t\t\t\t\t{countdown}\r\n\t\t\t\t\t\t\t\t</span>{\" \"}\r\n\t\t\t\t\t\t\t\tsegundos...\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Botones de acción */}\r\n\t\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/orders\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tVer mis pedidos\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/products\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-primary-600 text-primary-600 hover:bg-primary-50 font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tSeguir comprando\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Fallback - no debería llegar aquí normalmente\r\n\treturn (\r\n\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\tEstado desconocido\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p className=\"text-gray-600 mb-6\">\r\n\t\t\t\t\t\tNo se pudo determinar el estado del pago.\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigate(\"/cart\")}\r\n\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tVolver al carrito\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DatafastResultPage;\r\n"],"names":["DatafastResultPage","navigate","useNavigate","searchParams","useSearchParams","clearCart","showNotification","useCart","isProcessing","setIsProcessing","useState","result","setResult","error","setError","countdown","datafastService","DatafastService","useEffect","resourcePath","transactionId","checkoutIdMatch","checkoutId","verifyResponse","NotificationType","message","resultCode","userMessage","errorMessage","jsx","jsxs"],"mappings":"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"}
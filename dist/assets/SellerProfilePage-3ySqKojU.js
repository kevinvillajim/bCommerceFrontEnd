import{j as e,M,f as B,i as Y,aW as Z,aq as ee,am as se,d as ae,G as re,r as G,c as te,aN as oe,n as V,a as le,h as q,m as ne,an as ie,L as ce,w as U,E as $,O as de}from"./ui-vendor-BUNMIuFe.js";import{r as o}from"./react-vendor-Cy458wKG.js";import{u as me}from"./seller-chunk-6swISJwY.js";import{A as P,c as R}from"./admin-chunk-BNcFjXlJ.js";import{u as ue}from"./usePasswordValidation-DE6-gHPX.js";import"./utils-vendor-DeGC_a19.js";import"./chat-chunk-BRsdDZXf.js";const xe=()=>{const{user:a,updateUser:f}=me(),[D,d]=o.useState(!1),[F,g]=o.useState(null),[L,h]=o.useState(null),[c,b]=o.useState(null),{validatePassword:m}=ue(),[x,j]=o.useState(!1);o.useEffect(()=>{console.log("üîÑ useEffect fetchSellerInfo - Conditions:",{hasUser:!!a,sellerInfoLoaded:x,userId:a?.id}),a&&!x&&(console.log("‚úÖ Conditions met, calling fetchSellerInfo..."),A())},[a,x]);const A=async()=>{try{console.log("üîç fetchSellerInfo started - calling API_ENDPOINTS.SELLER.INFO:",P.SELLER.INFO);const s=await R.get(P.SELLER.INFO);if(console.log("üì• RAW API Response:",s),console.log("üì• Response type:",typeof s),console.log("üì• Response.data:",s?.data),console.log("üì• Response.seller:",s?.seller),s)if(s.seller)console.log("‚úÖ Case 1: response.seller found:",s.seller),b(s);else if(s.data&&s.data.seller)console.log("‚úÖ Case 2: response.data.seller found:",s.data.seller),b(s.data);else if(s.data)console.log("‚úÖ Case 3: response.data found:",s.data),b({seller:s.data});else if(s.store_name){console.log("‚úÖ Case 4: response is seller data directly:",s);const r=s;b({seller:{id:r.id||0,store_name:r.store_name||"",description:r.description||"",status:r.status||"active",verification_level:r.verification_level||"none"}})}else console.log("‚ö†Ô∏è Unknown response structure:",s);else console.log("‚ùå No response received")}catch(s){console.error("‚ùå Error obteniendo informaci√≥n del seller:",s);const r=s;console.error("‚ùå Error details:",{message:r?.message,status:r?.response?.status,data:r?.response?.data})}finally{console.log("üèÅ fetchSellerInfo finished, setting sellerInfoLoaded = true"),j(!0)}},v=o.useMemo(()=>{console.log("üéØ profileData useMemo calculating with:",{user:a?{name:a.name,email:a.email,location:a.location,avatar:a.avatar}:"NO USER",sellerInfo:c?{seller:c.seller}:"NO SELLER INFO",sellerInfoLoaded:x});const s={name:a?.name||"",email:a?.email||"",phone:a?.phone||"",location:a?.location||"",storeName:c?.seller?.store_name||"",storeDescription:c?.seller?.description||"",avatar:a?.avatar||""};return console.log("üîç ProfileData calculado con seller info:",s),console.log("üîç storeName source value:",c?.seller?.store_name),console.log("üîç storeDescription source value:",c?.seller?.description),s},[a?.name,a?.email,a?.phone,a?.location,a?.avatar,c?.seller?.store_name,c?.seller?.description]),I=o.useCallback(async s=>{d(!0),g(null),h(null);try{console.log("üì§ Actualizando datos de usuario:",s);const r=Object.fromEntries(Object.entries(s).filter(([C,u])=>u!=null&&u!==""));if(Object.keys(r).length===0)return console.log("‚ö†Ô∏è No hay datos de usuario para actualizar"),!0;const i=await R.put(P.PROFILE.UPDATE,r);if(console.log("üì• Respuesta actualizaci√≥n usuario:",i),i)return f&&f(i),!0;throw new Error("No se pudo actualizar el perfil del usuario")}catch(r){console.error("‚ùå Error al actualizar perfil de usuario:",r);const i=r instanceof Error?r.message:"Error al actualizar perfil";return g(i),!1}finally{d(!1)}},[f]),w=o.useCallback(async s=>{d(!0),g(null),h(null);try{console.log("üì§ Actualizando datos de tienda:",s);const r={store_name:s.storeName,description:s.storeDescription},i=Object.fromEntries(Object.entries(r).filter(([N,z])=>z!=null&&z!==""));if(Object.keys(i).length===0)return console.log("‚ö†Ô∏è No hay datos de tienda para actualizar"),!0;console.log("üì§ Enviando datos limpios de tienda:",i);const C=await R.put(P.SELLER.UPDATE_STORE_INFO,i);console.log("üì• Respuesta actualizaci√≥n tienda:",C);const u=C;if(u&&u.data)return b(N=>N?{...N,seller:{...N.seller,id:N.seller.id,store_name:u.data.store_name||N.seller.store_name||"",description:u.data.description||N.seller.description||"",status:N.seller.status,verification_level:N.seller.verification_level,avatar:N.seller.avatar}}:null),!0;throw new Error("No se pudo actualizar la informaci√≥n de la tienda")}catch(r){console.error("‚ùå Error al actualizar informaci√≥n de tienda:",r);const i=r instanceof Error?r.message:"Error al actualizar informaci√≥n de tienda";return g(i),!1}finally{d(!1)}},[]),E=o.useCallback(async s=>{console.log("üîÑ Iniciando actualizaci√≥n de perfil completo:",s),d(!0),g(null),h(null);let r=!0,i=!1;const C={name:s.name,location:s.location},u={storeName:s.storeName,storeDescription:s.storeDescription},N=Object.values(C).some(y=>y!=null&&y!==""),z=Object.values(u).some(y=>y!=null&&y!=="");if(N){console.log("üë§ Actualizando datos de usuario..."),i=!0;const y=await I(C);r=r&&y}if(z){console.log("üè™ Actualizando datos de tienda..."),i=!0;const y=await w(u);r=r&&y}return i?(r?(console.log("‚úÖ Perfil actualizado exitosamente"),h("Perfil actualizado correctamente")):console.log("‚ùå Error en la actualizaci√≥n del perfil"),d(!1),r):(console.log("‚ö†Ô∏è No hay cambios para actualizar"),g("No hay cambios para actualizar"),d(!1),!1)},[I,w]),_=o.useCallback(async s=>{d(!0),g(null),h(null);try{console.log("üì§ Subiendo avatar:",s.name,"Tama√±o:",s.size,"Tipo:",s.type);const r=new FormData;r.append("avatar",s),console.log("üì§ Enviando a:",P.PROFILE.UPLOAD_AVATAR);const i=await R.uploadFile(P.PROFILE.UPLOAD_AVATAR,r);if(console.log("üì• Respuesta del avatar:",i),i)return f&&f(i),h("Avatar actualizado correctamente"),!0;throw new Error("No se pudo subir el avatar")}catch(r){if(console.error("‚ùå Error completo al subir avatar:",r),r.response?.status===422){const i=r.response?.data?.errors;i?.avatar?g(`Error de validaci√≥n: ${i.avatar[0]}`):g("Error de validaci√≥n en el archivo de imagen")}else{const i=r instanceof Error?r.message:"Error al subir avatar";g(i)}return!1}finally{d(!1)}},[f]),t=o.useCallback(async s=>{d(!0),g(null),h(null);try{if(s.newPassword!==s.confirmPassword)throw new Error("Las contrase√±as no coinciden");const r=m(s.newPassword);if(!r.isValid)throw new Error(r.errors[0]);console.log("üì§ Cambiando contrase√±a...");const i=await R.put(P.PROFILE.CHANGE_PASSWORD,{current_password:s.currentPassword,password:s.newPassword,password_confirmation:s.confirmPassword});if(console.log("üì• Respuesta del cambio de contrase√±a:",i),i)return h("Contrase√±a actualizada correctamente"),!0;throw new Error("No se pudo actualizar la contrase√±a")}catch(r){console.error("‚ùå Error al cambiar contrase√±a:",r);const i=r instanceof Error?r.message:"Error al cambiar contrase√±a";return g(i),!1}finally{d(!1)}},[]),n=o.useCallback(()=>{g(null),h(null)},[]);return{profileData:v,loading:D||!x,error:F,success:L,updateProfile:E,updateUserProfile:I,updateStoreInfo:w,uploadAvatar:_,changePassword:t,clearMessages:n,sellerInfo:c,refetchSellerInfo:A}},pe=()=>{const[a,f]=o.useState([]),[D,d]=o.useState(!0),[F,g]=o.useState(!1),[L,h]=o.useState(!1),[c,b]=o.useState({title:"",description:"",type:"improvement"}),[m,x]=o.useState({});o.useEffect(()=>{j()},[]),o.useEffect(()=>{if(a.some(n=>n.seller_featured?.is_active&&!_(n.seller_featured.featured_expires_at).expired)){const n=setInterval(()=>{f(s=>[...s])},6e4);return()=>clearInterval(n)}},[a]);const j=async()=>{try{d(!0);const t=await R.get(`${P.FEEDBACK.LIST}?limit=20`);f(t.data||[])}catch(t){console.error("Error fetching feedbacks:",t)}finally{d(!1)}},A=async t=>{if(t.preventDefault(),x({}),!c.title.trim()){x({title:["El t√≠tulo es obligatorio"]});return}if(c.title.length<5){x({title:["El t√≠tulo debe tener al menos 5 caracteres"]});return}if(!c.description.trim()){x({description:["La descripci√≥n es obligatoria"]});return}if(c.description.length<20){x({description:["La descripci√≥n debe tener al menos 20 caracteres"]});return}try{g(!0),await R.post(P.FEEDBACK.CREATE,c),b({title:"",description:"",type:"improvement"}),x({}),h(!1),await j()}catch(n){if(console.error("Error submitting feedback:",n),n.response?.status===422){const s=n.response.data;let r={};s?.errors?r=s.errors:s?.data?r=s.data:s&&typeof s=="object"&&!s.message&&(r=s),console.log("Validation errors received:",r),x(r)}else{const s=n.response?.data?.message||n.message||"Error al enviar feedback";x({general:[s]})}}finally{g(!1)}},v=t=>{switch(t){case"pending":return e.jsx(te,{className:"w-4 h-4 text-yellow-500"});case"approved":return e.jsx(G,{className:"w-4 h-4 text-green-500"});case"rejected":return e.jsx(re,{className:"w-4 h-4 text-red-500"})}},I=t=>{switch(t){case"pending":return"Pendiente";case"approved":return"Aprobado";case"rejected":return"Rechazado"}},w=t=>{switch(t){case"bug":return"Error/Bug";case"improvement":return"Mejora";case"other":return"Otro"}},E=t=>new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}),_=t=>{const n=new Date,r=new Date(t).getTime()-n.getTime();if(r<=0)return{expired:!0,days:0,hours:0,minutes:0};const i=Math.floor(r/(1e3*60*60*24)),C=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),u=Math.floor(r%(1e3*60*60)/(1e3*60));return{expired:!1,days:i,hours:C,minutes:u}};return D?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{size:20,className:"mr-3 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Feedback y Sugerencias"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comparte tus ideas para mejorar la plataforma y obt√©n tienda destacada por 15 d√≠as"})]})]}),e.jsxs("button",{onClick:()=>h(!L),className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 text-sm",children:[e.jsx(M,{className:"w-4 h-4"}),"Nuevo Feedback"]})]}),L&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Enviar Nuevo Feedback"}),m.general&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-red-600"}),e.jsx("div",{children:m.general.map((t,n)=>e.jsx("p",{className:"text-red-700 text-sm",children:t},n))})]})}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Feedback"}),e.jsxs("select",{value:c.type,onChange:t=>b({...c,type:t.target.value}),className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm ${m.type?"border-red-300 bg-red-50":"border-gray-300"}`,children:[e.jsx("option",{value:"improvement",children:"Mejora"}),e.jsx("option",{value:"bug",children:"Error/Bug"}),e.jsx("option",{value:"other",children:"Otro"})]}),m.type&&e.jsx("div",{className:"mt-1",children:m.type.map((t,n)=>e.jsx("p",{className:"text-red-600 text-xs",children:t},n))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["T√≠tulo ",e.jsx("span",{className:"text-gray-500",children:"(min. 5 chars)"})]}),e.jsx("input",{type:"text",value:c.title,onChange:t=>b({...c,title:t.target.value}),placeholder:"Describe brevemente tu feedback",className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm ${m.title?"border-red-300 bg-red-50":"border-gray-300"}`,required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[c.title.length,"/100 caracteres"]}),m.title&&e.jsx("div",{className:"mt-1",children:m.title.map((t,n)=>e.jsx("p",{className:"text-red-600 text-xs",children:t},n))})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Descripci√≥n ",e.jsx("span",{className:"text-gray-500",children:"(min. 20 chars)"})]}),e.jsx("textarea",{value:c.description,onChange:t=>b({...c,description:t.target.value}),placeholder:"Describe detalladamente tu feedback, sugerencia o el error encontrado",rows:3,className:`w-full p-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm ${m.description?"border-red-300 bg-red-50":"border-gray-300"}`,required:!0}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[c.description.length,"/1000 caracteres"]}),m.description&&e.jsx("div",{className:"mt-1",children:m.description.map((t,n)=>e.jsx("p",{className:"text-red-600 text-xs",children:t},n))})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",disabled:F,className:"bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 transition-colors flex items-center gap-2 disabled:opacity-50 text-sm",children:[e.jsx(Y,{className:"w-4 h-4"}),F?"Enviando...":"Enviar Feedback"]}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors text-sm",children:"Cancelar"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Mi Historial de Feedback"}),a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(M,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No has enviado feedback a√∫n"}),e.jsx("p",{className:"text-sm text-gray-500",children:"¬°Comparte tus ideas para mejorar la plataforma!"})]}):e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-900 text-sm",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:w(t.type)}),e.jsx("span",{className:"text-gray-300",children:"‚Ä¢"}),e.jsx("span",{className:"text-xs text-gray-500",children:E(t.created_at)})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[v(t.status),e.jsx("span",{className:`text-xs font-medium ${t.status==="approved"?"text-green-600":t.status==="rejected"?"text-red-600":"text-yellow-600"}`,children:I(t.status)})]})]}),e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:t.description}),t.admin_notes&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-3",children:[e.jsx("h6",{className:"font-medium text-blue-900 text-sm mb-1",children:"Respuesta del equipo:"}),e.jsx("p",{className:"text-blue-800 text-sm",children:t.admin_notes})]}),t.seller_featured&&(()=>{const n=_(t.seller_featured.featured_expires_at),s=t.seller_featured.is_active&&!n.expired;return e.jsxs("div",{className:`rounded-lg p-4 border-2 ${s?"bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200 shadow-sm":"bg-gray-50 border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-600"}),e.jsx(ee,{className:"w-3 h-3 text-purple-500 absolute -top-1 -right-1 animate-pulse"})]}),e.jsxs("div",{children:[e.jsxs("h6",{className:"font-bold text-blue-900 text-sm flex items-center gap-1",children:["¬°Gracias por ayudarnos a mejorar!",e.jsx(se,{className:"w-4 h-4 text-purple-600"})]}),e.jsx("p",{className:"text-blue-700 text-xs font-medium",children:"Has obtenido visibilidad premium gratuita"})]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-gray-500"}),e.jsx("h6",{className:"font-medium text-gray-700 text-sm",children:"Recompensa de visibilidad otorgada"})]})}),s?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-lg p-3 border border-blue-100",children:[e.jsx("p",{className:"text-blue-800 text-xs font-medium mb-2 text-center",children:"‚è∞ Tiempo restante de tu regalo"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"bg-blue-100 rounded-lg py-2 px-1",children:[e.jsx("div",{className:"text-lg font-bold text-blue-900",children:n.days}),e.jsx("div",{className:"text-xs text-blue-700 font-medium",children:n.days===1?"d√≠a":"d√≠as"})]}),e.jsxs("div",{className:"bg-purple-100 rounded-lg py-2 px-1",children:[e.jsx("div",{className:"text-lg font-bold text-purple-900",children:n.hours}),e.jsx("div",{className:"text-xs text-purple-700 font-medium",children:n.hours===1?"hora":"horas"})]}),e.jsxs("div",{className:"bg-indigo-100 rounded-lg py-2 px-1",children:[e.jsx("div",{className:"text-lg font-bold text-indigo-900",children:n.minutes}),e.jsx("div",{className:"text-xs text-indigo-700 font-medium",children:n.minutes===1?"minuto":"minutos"})]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium",children:"üåü ¬°Esperamos que disfrutes tu regalo! üåü"}),e.jsx("p",{className:"text-blue-600 text-xs mt-1",children:"Tu tienda aparece destacada en las b√∫squedas"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Duraci√≥n otorgada:"}),e.jsxs("p",{className:"font-bold text-gray-800",children:[t.seller_featured.featured_days," d√≠as"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Expir√≥ el:"}),e.jsx("p",{className:"text-gray-700",children:E(t.seller_featured.featured_expires_at)})]})]})]})})()]},t.id))})]})]})},ve=()=>{const{profileData:a,loading:f,error:D,success:d,updateProfile:F,uploadAvatar:g,changePassword:L,clearMessages:h}=xe(),[c,b]=o.useState({name:"",location:""}),[m,x]=o.useState({storeName:"",storeDescription:""}),[j,A]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[v,I]=o.useState({current:!1,new:!1,confirm:!1}),[w,E]=o.useState(!1),[_,t]=o.useState(null),[n,s]=o.useState(null),[r,i]=o.useState(!1),[C,u]=o.useState(!1),N=o.useRef(null);o.useEffect(()=>{a.name&&!r&&(console.log("üîÑ Inicializando datos del perfil por primera vez:",a),b({name:a.name||"",location:a.location||""}),x({storeName:a.storeName||"",storeDescription:a.storeDescription||""}),i(!0))},[a.name,a.location,a.storeName,a.storeDescription,r]),o.useEffect(()=>{d&&r&&(console.log("‚úÖ Datos guardados exitosamente, actualizando formulario"),b({name:a.name||"",location:a.location||""}),x({storeName:a.storeName||"",storeDescription:a.storeDescription||""}),E(!1))},[d,a.name,a.location,a.storeName,a.storeDescription,r]),o.useEffect(()=>{if(D||d){const l=setTimeout(()=>{h()},5e3);return()=>clearTimeout(l)}},[D,d,h]),o.useEffect(()=>{r&&console.log("üéØ Estados actualizados:",{personalData:c,storeData:m,hasChanges:w})},[c.name,c.location,m.storeName,m.storeDescription,w,r]);const z=(l,p)=>{console.log(`üìù Cambiando ${l}:`,p),b(S=>({...S,[l]:p})),E(!0)},y=(l,p)=>{console.log(`üè™ Cambiando ${l}:`,p),x(S=>({...S,[l]:p})),E(!0)},k=(l,p)=>{A(S=>({...S,[l]:p}))},W=l=>{const p=l.target.files?.[0];if(p){if(!p.type.startsWith("image/")){alert("Por favor selecciona una imagen v√°lida.");return}if(p.size>2*1024*1024){alert("La imagen debe ser menor a 2MB.");return}console.log("üì∑ Avatar seleccionado:",p.name,p.size),t(p),E(!0),u(!1);const S=new FileReader;S.onload=Q=>{s(Q.target?.result)},S.readAsDataURL(p)}},H=async()=>{if(console.log("üíæ Iniciando guardado del perfil..."),_){if(console.log("üì∑ Subiendo avatar primero..."),!await g(_)){console.error("‚ùå Fall√≥ la subida del avatar");return}t(null),s(null),u(!1),console.log("‚úÖ Avatar subido exitosamente")}const l={name:c.name,location:c.location,storeName:m.storeName,storeDescription:m.storeDescription};console.log("üì§ Actualizando perfil con datos:",l),await F(l)?(console.log("‚úÖ Perfil actualizado exitosamente"),u(!1)):console.error("‚ùå Fall√≥ la actualizaci√≥n del perfil")},K=async()=>{if(!j.currentPassword||!j.newPassword||!j.confirmPassword){alert("Por favor completa todos los campos de contrase√±a.");return}console.log("üîê Cambiando contrase√±a..."),await L(j)&&(console.log("‚úÖ Contrase√±a cambiada exitosamente"),A({currentPassword:"",newPassword:"",confirmPassword:""}))},O=l=>{I(p=>({...p,[l]:!p[l]}))},X=()=>{console.log("‚ùå Cancelando cambios..."),b({name:a.name||"",location:a.location||""}),x({storeName:a.storeName||"",storeDescription:a.storeDescription||""}),t(null),s(null),u(!1),E(!1)},T=()=>{if(n)return n;if(a.avatar&&!C)return a.avatar.startsWith("http")?a.avatar:`http://localhost:8000/storage/${a.avatar}`},J=()=>a.name?a.name.charAt(0).toUpperCase():"U";return r?e.jsxs("div",{className:"space-y-6",children:[!1,D&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(B,{className:"h-5 w-5 text-red-500"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:D})})]})}),d&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx(G,{className:"h-5 w-5 text-green-500"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-green-700",children:d})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[e.jsxs("div",{className:"relative",children:[T()?e.jsx("img",{src:T(),alt:"Seller profile",className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-md",onError:()=>{console.error("‚ùå Error cargando imagen:",T()),u(!0)},onLoad:()=>{u(!1)}}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-r from-primary-500 to-primary-600 flex items-center justify-center border-4 border-white shadow-md",children:e.jsx("span",{className:"text-white text-2xl font-bold",children:J()})}),e.jsx("button",{type:"button",onClick:()=>N.current?.click(),className:"absolute bottom-0 right-0 bg-primary-600 text-white rounded-full p-2 hover:bg-primary-700 transition-colors shadow-lg",title:"Cambiar imagen de perfil",children:e.jsx(oe,{size:16})}),e.jsx("input",{ref:N,type:"file",accept:"image/*",onChange:W,className:"hidden"})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a.name||"Nombre del Vendedor"}),e.jsx("p",{className:"text-gray-500",children:a.email}),e.jsx("div",{className:"mt-4 flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:e.jsxs("button",{className:"flex items-center justify-center text-primary-600 hover:underline",children:[e.jsx(V,{size:16,className:"mr-1"}),"Ver tienda",e.jsx(le,{size:16,className:"ml-1"})]})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(q,{size:20,className:"mr-3 text-primary-600"}),"Informaci√≥n Personal"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:18,className:"text-gray-500 mr-3 flex-shrink-0"}),e.jsx("input",{type:"text",value:c.name,onChange:l=>z("name",l.target.value),placeholder:a.name||"Nombre completo",className:"w-full bg-transparent focus:outline-none text-gray-700 border-b border-gray-300 pb-1 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{size:18,className:"text-gray-500 mr-3 flex-shrink-0"}),e.jsx("input",{type:"email",value:a.email,disabled:!0,className:"w-full bg-gray-50 text-gray-500 cursor-not-allowed border-b border-gray-300 pb-1"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{size:18,className:"text-gray-500 mr-3 flex-shrink-0"}),e.jsx("input",{type:"text",value:c.location,onChange:l=>z("location",l.target.value),placeholder:a.location||"Ciudad, Pa√≠s",className:"w-full bg-transparent focus:outline-none text-gray-700 border-b border-gray-300 pb-1 focus:border-primary-500"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4",children:[e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(V,{size:20,className:"mr-3 text-blue-600"}),"Informaci√≥n de la Tienda"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Nombre de tienda"}),e.jsx("input",{type:"text",value:m.storeName,onChange:l=>y("storeName",l.target.value),placeholder:a.storeName||"Mi Tienda Online",className:"w-full bg-transparent focus:outline-none text-gray-700 border-b border-gray-300 pb-1 focus:border-primary-500"}),a.storeName&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Actual: ",a.storeName]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 mb-1",children:"Descripci√≥n"}),e.jsx("textarea",{value:m.storeDescription,onChange:l=>y("storeDescription",l.target.value),placeholder:a.storeDescription||"Descripci√≥n de la tienda...",className:"w-full bg-transparent focus:outline-none text-gray-700 border-b border-gray-300 pb-1 focus:border-primary-500 resize-none",rows:3}),a.storeDescription&&e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Actual: ",a.storeDescription]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 space-y-4 md:col-span-2",children:[e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(ce,{size:20,className:"mr-3 text-red-600"}),"Cambiar Contrase√±a"]}),e.jsxs("form",{onSubmit:l=>{l.preventDefault(),K()},className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Contrase√±a actual"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v.current?"text":"password",value:j.currentPassword,onChange:l=>k("currentPassword",l.target.value),className:"w-full bg-gray-50 rounded-lg px-4 py-2 pr-10 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:()=>O("current"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:v.current?e.jsx(U,{size:16}):e.jsx($,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Nueva contrase√±a"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v.new?"text":"password",value:j.newPassword,onChange:l=>k("newPassword",l.target.value),className:"w-full bg-gray-50 rounded-lg px-4 py-2 pr-10 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:()=>O("new"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:v.new?e.jsx(U,{size:16}):e.jsx($,{size:16})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-500",children:"Confirmar contrase√±a"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v.confirm?"text":"password",value:j.confirmPassword,onChange:l=>k("confirmPassword",l.target.value),className:"w-full bg-gray-50 rounded-lg px-4 py-2 pr-10 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("button",{type:"button",onClick:()=>O("confirm"),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:v.confirm?e.jsx(U,{size:16}):e.jsx($,{size:16})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:f||!j.currentPassword||!j.newPassword||!j.confirmPassword,className:"px-4 py-2 bg-red-600 rounded-lg text-white hover:bg-red-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Cambiando...":"Cambiar Contrase√±a"})})]})]})]}),e.jsx(pe,{}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx("button",{onClick:X,disabled:f||!w,className:"px-6 py-2 bg-gray-200 rounded-lg text-gray-700 hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),e.jsx("button",{onClick:H,disabled:f||!w,className:"px-6 py-2 bg-primary-600 rounded-lg text-white hover:bg-primary-700 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block animate-spin mr-1",children:"‚ü≥"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(de,{size:18,className:"mr-2"}),"Guardar cambios"]})})]})]}):e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})})};export{ve as default};
//# sourceMappingURL=SellerProfilePage-3ySqKojU.js.map

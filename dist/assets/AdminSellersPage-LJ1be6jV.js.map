{"version":3,"file":"AdminSellersPage-LJ1be6jV.js","sources":["../../src/presentation/components/admin/StatusUpdateModal.tsx","../../src/presentation/components/admin/SellerFormModal.tsx","../../src/presentation/pages/admin/AdminSellersPage.tsx"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport {Ban, CheckCircle, Eye} from \"lucide-react\";\r\n\r\ninterface StatusUpdateModalProps {\r\n\tisOpen: boolean;\r\n\tonClose: () => void;\r\n\tonConfirm: (status: string, reason: string) => void;\r\n\tsellerName: string;\r\n}\r\n\r\nconst StatusUpdateModal: React.FC<StatusUpdateModalProps> = ({\r\n\tisOpen,\r\n\tonClose,\r\n\tonConfirm,\r\n\tsellerName,\r\n}) => {\r\n\tconst [selectedStatus, setSelectedStatus] = useState(\"active\");\r\n\tconst [reason, setReason] = useState(\"\");\r\n\r\n\tif (!isOpen) return null;\r\n\r\n\tconst handleConfirm = () => {\r\n\t\tonConfirm(selectedStatus, selectedStatus === \"active\" ? \"\" : reason);\r\n\t\tsetReason(\"\");\r\n\t\tsetSelectedStatus(\"active\");\r\n\t\tonClose();\r\n\t};\r\n\r\n\tconst getStatusIcon = () => {\r\n\t\tswitch (selectedStatus) {\r\n\t\t\tcase \"suspended\":\r\n\t\t\t\treturn <Ban className=\"h-12 w-12 text-yellow-500\" />;\r\n\t\t\tcase \"inactive\":\r\n\t\t\t\treturn <Eye className=\"h-12 w-12 text-red-500\" />;\r\n\t\t\tcase \"active\":\r\n\t\t\t\treturn <CheckCircle className=\"h-12 w-12 text-green-500\" />;\r\n\t\t\tdefault:\r\n\t\t\t\treturn <CheckCircle className=\"h-12 w-12 text-green-500\" />;\r\n\t\t}\r\n\t};\r\n\r\n\tconst getButtonClass = () => {\r\n\t\tswitch (selectedStatus) {\r\n\t\t\tcase \"suspended\":\r\n\t\t\t\treturn \"bg-yellow-600 hover:bg-yellow-700\";\r\n\t\t\tcase \"inactive\":\r\n\t\t\t\treturn \"bg-red-600 hover:bg-red-700\";\r\n\t\t\tcase \"active\":\r\n\t\t\t\treturn \"bg-green-600 hover:bg-green-700\";\r\n\t\t\tdefault:\r\n\t\t\t\treturn \"bg-blue-600 hover:bg-blue-700\";\r\n\t\t}\r\n\t};\r\n\r\n\tconst getStatusInfo = () => {\r\n\t\tswitch (selectedStatus) {\r\n\t\t\tcase \"active\":\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: \"Estado Activo\",\r\n\t\t\t\t\tdescription: \"El vendedor tendrá acceso completo. Sus productos aparecerán en la tienda y podrá vender normalmente.\"\r\n\t\t\t\t};\r\n\t\t\tcase \"suspended\":\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: \"Estado Suspendido\", \r\n\t\t\t\t\tdescription: \"El vendedor podrá ver su información histórica pero sus productos no aparecerán en la tienda. No podrá realizar ventas.\"\r\n\t\t\t\t};\r\n\t\t\tcase \"inactive\":\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: \"Estado Inactivo\",\r\n\t\t\t\t\tdescription: \"El vendedor podrá ingresar pero verá todos sus datos en cero. Sus productos no aparecerán en la tienda.\"\r\n\t\t\t\t};\r\n\t\t\tdefault:\r\n\t\t\t\treturn {title: \"\", description: \"\"};\r\n\t\t}\r\n\t};\r\n\r\n\tconst statusOptions = [\r\n\t\t{ value: \"active\", label: \"Activo\" },\r\n\t\t{ value: \"suspended\", label: \"Suspendido\" },\r\n\t\t{ value: \"inactive\", label: \"Inactivo\" }\r\n\t];\r\n\r\n\tconst statusInfo = getStatusInfo();\r\n\r\n\treturn (\r\n\t\t<div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n\t\t\t{/* Overlay */}\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"fixed inset-0 bg-black bg-opacity-50\"\r\n\t\t\t\tonClick={onClose}\r\n\t\t\t></div>\r\n\r\n\t\t\t{/* Modal */}\r\n\t\t\t<div className=\"bg-white rounded-lg p-6 w-full max-w-md z-10\">\r\n\t\t\t\t<div className=\"flex flex-col items-center mb-4\">\r\n\t\t\t\t\t{getStatusIcon()}\r\n\t\t\t\t\t<h3 className=\"text-xl font-semibold mt-2 text-gray-900\">\r\n\t\t\t\t\t\tCambiar Estado de Vendedor\r\n\t\t\t\t\t</h3>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<p className=\"text-gray-700 mb-4 text-center\">\r\n\t\t\t\t\tVendedor: <strong>{sellerName}</strong>\r\n\t\t\t\t</p>\r\n\r\n\t\t\t\t{/* Dropdown de Estado */}\r\n\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n\t\t\t\t\t\tNuevo Estado:\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<select\r\n\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\tvalue={selectedStatus}\r\n\t\t\t\t\t\tonChange={(e) => setSelectedStatus(e.target.value)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{statusOptions.map(option => (\r\n\t\t\t\t\t\t\t<option key={option.value} value={option.value}>\r\n\t\t\t\t\t\t\t\t{option.label}\r\n\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Información del Estado Seleccionado */}\r\n\t\t\t\t{statusInfo.title && (\r\n\t\t\t\t\t<div className=\"mb-4 p-3 bg-gray-50 rounded-md border\">\r\n\t\t\t\t\t\t<h4 className=\"font-medium text-gray-900 mb-1\">{statusInfo.title}</h4>\r\n\t\t\t\t\t\t<p className=\"text-sm text-gray-600\">{statusInfo.description}</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t{/* Campo de Motivo (solo si no es activo) */}\r\n\t\t\t\t{selectedStatus !== \"active\" && (\r\n\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tMotivo <span className=\"text-red-500\">*</span>:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tvalue={reason}\r\n\t\t\t\t\t\t\tonChange={(e) => setReason(e.target.value)}\r\n\t\t\t\t\t\t\tplaceholder=\"Explique brevemente la razón de esta acción...\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<div className=\"flex justify-end space-x-3\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors\"\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclassName={`px-4 py-2 text-white rounded-md transition-colors ${getButtonClass()}`}\r\n\t\t\t\t\t\tonClick={handleConfirm}\r\n\t\t\t\t\t\tdisabled={selectedStatus !== \"active\" && !reason.trim()}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tConfirmar Cambio\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default StatusUpdateModal;\r\n","import React, {useState, useEffect} from \"react\";\r\nimport {Store, X} from \"lucide-react\";\r\nimport type {Seller} from \"../../../core/domain/entities/Seller\";\r\nimport type {\r\n\tCreateSellerData,\r\n\tUpdateSellerData,\r\n} from \"../../../core/services/SellerAdminService\";\r\n\r\ninterface SellerFormModalProps {\r\n\tisOpen: boolean;\r\n\tonClose: () => void;\r\n\tonSubmit: (data: CreateSellerData | UpdateSellerData) => Promise<void>;\r\n\tseller?: Seller | null;\r\n\ttitle: string;\r\n\tisCreate?: boolean;\r\n\tusers?: {id: number; name: string; email: string}[];\r\n}\r\n\r\nconst SellerFormModal: React.FC<SellerFormModalProps> = ({\r\n\tisOpen,\r\n\tonClose,\r\n\tonSubmit,\r\n\tseller,\r\n\ttitle,\r\n\tisCreate = false,\r\n\tusers = [],\r\n}) => {\r\n\tconst [formData, setFormData] = useState<CreateSellerData | UpdateSellerData>(\r\n\t\t{\r\n\t\t\tstore_name: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tstatus: \"pending\",\r\n\t\t\t// commission_rate: 10, // TODO: Implementar comisiones individuales en el futuro\r\n\t\t\tis_featured: false,\r\n\t\t\tuser_id: 0,\r\n\t\t}\r\n\t);\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\r\n\t// Cargar datos del vendedor si es edición\r\n\tuseEffect(() => {\r\n\t\tif (seller && !isCreate) {\r\n\t\t\tsetFormData({\r\n\t\t\t\tstore_name: seller.storeName,\r\n\t\t\t\tdescription: seller.description || \"\",\r\n\t\t\t\t// commission_rate: seller.commissionRate, // TODO: Implementar comisiones individuales en el futuro\r\n\t\t\t\tis_featured: seller.isFeatured,\r\n\t\t\t});\r\n\t\t} else if (isCreate) {\r\n\t\t\t// Valores por defecto para creación\r\n\t\t\tsetFormData({\r\n\t\t\t\tuser_id: users.length > 0 ? users[0].id : 0,\r\n\t\t\t\tstore_name: \"\",\r\n\t\t\t\tdescription: \"\",\r\n\t\t\t\tstatus: \"pending\",\r\n\t\t\t\t// commission_rate: 10, // TODO: Implementar comisiones individuales en el futuro\r\n\t\t\t\tis_featured: false,\r\n\t\t\t});\r\n\t\t}\r\n\t}, [seller, isCreate, users]);\r\n\r\n\tif (!isOpen) return null;\r\n\r\n\tconst handleChange = (\r\n\t\te: React.ChangeEvent<\r\n\t\t\tHTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\r\n\t\t>\r\n\t) => {\r\n\t\tconst {name, value, type} = e.target;\r\n\r\n\t\tif (type === \"checkbox\") {\r\n\t\t\tconst checkbox = e.target as HTMLInputElement;\r\n\t\t\tsetFormData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\t[name]: checkbox.checked,\r\n\t\t\t}));\r\n\t\t// } else if (name === \"commission_rate\") {\r\n\t\t//\tsetFormData((prev) => ({\r\n\t\t//\t\t...prev,\r\n\t\t//\t\t[name]: parseFloat(value),\r\n\t\t//\t}));\r\n\t\t} else if (name === \"user_id\") {\r\n\t\t\tsetFormData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\t[name]: parseInt(value, 10),\r\n\t\t\t}));\r\n\t\t} else {\r\n\t\t\tsetFormData((prev) => ({\r\n\t\t\t\t...prev,\r\n\t\t\t\t[name]: value,\r\n\t\t\t}));\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleSubmit = async (e: React.FormEvent) => {\r\n\t\te.preventDefault();\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\r\n\t\ttry {\r\n\t\t\tawait onSubmit(formData);\r\n\t\t\tonClose();\r\n\t\t} catch (err) {\r\n\t\t\tif (err instanceof Error) {\r\n\t\t\t\tsetError(err.message);\r\n\t\t\t} else {\r\n\t\t\t\tsetError(\"Error al procesar el formulario\");\r\n\t\t\t}\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n\t\t\t{/* Overlay */}\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"fixed inset-0 bg-black bg-opacity-50\"\r\n\t\t\t\tonClick={onClose}\r\n\t\t\t></div>\r\n\r\n\t\t\t{/* Modal */}\r\n\t\t\t<div className=\"bg-white rounded-lg p-6 w-full max-w-lg z-10 max-h-[90vh] overflow-y-auto\">\r\n\t\t\t\t<div className=\"flex justify-between items-center mb-4\">\r\n\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t<Store className=\"h-6 w-6 mr-2 text-primary-600\" />\r\n\t\t\t\t\t\t<h3 className=\"text-xl font-semibold text-gray-900\">{title}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-500\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<X className=\"h-5 w-5\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{error && (\r\n\t\t\t\t\t<div className=\"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n\t\t\t\t\t\t{error}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)}\r\n\r\n\t\t\t\t<form onSubmit={handleSubmit}>\r\n\t\t\t\t\t{/* Selección de usuario (solo para creación) */}\r\n\t\t\t\t\t{isCreate && (\r\n\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tUsuario:\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tname=\"user_id\"\r\n\t\t\t\t\t\t\t\tvalue={(formData as CreateSellerData).user_id || 0} // CORREGIDO: cast explícito y valor por defecto\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value=\"\">Seleccionar usuario</option>\r\n\t\t\t\t\t\t\t\t{users.map((user) => (\r\n\t\t\t\t\t\t\t\t\t<option key={user.id} value={user.id}>\r\n\t\t\t\t\t\t\t\t\t\t{user.name} ({user.email})\r\n\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Nombre de la tienda */}\r\n\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tNombre de la tienda:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tname=\"store_name\"\r\n\t\t\t\t\t\t\tvalue={formData.store_name}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Descripción */}\r\n\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tDescripción:\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\tname=\"description\"\r\n\t\t\t\t\t\t\tvalue={formData.description}\r\n\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Estado (solo para creación) */}\r\n\t\t\t\t\t{isCreate && (\r\n\t\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\tEstado inicial:\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\t\t\tvalue={(formData as CreateSellerData).status}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<option value=\"pending\">Pendiente</option>\r\n\t\t\t\t\t\t\t\t<option value=\"active\">Activo</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Vendedor Destacado */}\r\n\t\t\t\t\t<div className=\"mb-4\">\r\n\t\t\t\t\t\t<label className=\"flex items-center\">\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tname=\"is_featured\"\r\n\t\t\t\t\t\t\t\tchecked={formData.is_featured || false}\r\n\t\t\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span className=\"ml-2 text-sm font-medium text-gray-700\">\r\n\t\t\t\t\t\t\t\tVendedor Destacado\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\tLos vendedores destacados tienen todos sus productos automáticamente destacados\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* TODO: Implementar comisiones individuales en el futuro */}\r\n\t\t\t\t\t{/* Comisión (Solo visual) */}\r\n\t\t\t\t\t{/* <div className=\"mb-4\">\r\n\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\tTasa de comisión (%):\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\tname=\"commission_rate\"\r\n\t\t\t\t\t\t\tvalue={formData.commission_rate}\r\n\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\tmax=\"100\"\r\n\t\t\t\t\t\t\tstep=\"0.1\"\r\n\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 text-gray-500 cursor-not-allowed\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\tCampo informativo - La comisión se configurará en el futuro\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div> */}\r\n\r\n\r\n\t\t\t\t\t{/* Botones */}\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-3 mt-6\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\tonClick={onClose}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 transition-colors disabled:opacity-70 disabled:cursor-not-allowed flex items-center\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{loading ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\"\r\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<circle\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-25\"\r\n\t\t\t\t\t\t\t\t\t\t\tcx=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tcy=\"12\"\r\n\t\t\t\t\t\t\t\t\t\t\tr=\"10\"\r\n\t\t\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"4\"\r\n\t\t\t\t\t\t\t\t\t\t></circle>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"opacity-75\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n\t\t\t\t\t\t\t\t\t\t></path>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\tProcesando...\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : isCreate ? (\r\n\t\t\t\t\t\t\t\t\"Crear vendedor\"\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\"Guardar cambios\"\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default SellerFormModal;\r\n","import React, {useState, useEffect} from \"react\";\r\nimport Table from \"../../components/dashboard/Table\";\r\nimport {\r\n\tStore,\r\n\tShieldCheck,\r\n\tStar,\r\n\tDollarSign,\r\n\tFilter,\r\n\tRefreshCw,\r\n\tEye,\r\n\tBan,\r\n\tCheckCircle,\r\n\tClock,\r\n} from \"lucide-react\";\r\nimport type {Seller} from \"../../../core/domain/entities/Seller\";\r\nimport ApiClient from \"../../../infrastructure/api/apiClient\";\r\nimport adminSellerService from \"../../../infrastructure/services/AdminSellerService\";\r\nimport StatusUpdateModal from \"../../components/admin/StatusUpdateModal\";\r\nimport SellerFormModal from \"../../components/admin/SellerFormModal\";\r\nimport { formatCurrency } from \"../../../utils/formatters/formatCurrency\";\r\n\r\nconst AdminSellersPage: React.FC = () => {\r\n\tconst [sellers, setSellers] = useState<Seller[]>([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\tconst [verificationFilter, setVerificationFilter] = useState<string>(\"all\");\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tcurrentPage: 1,\r\n\t\ttotalPages: 1,\r\n\t\ttotalItems: 0,\r\n\t\titemsPerPage: 10,\r\n\t});\r\n\r\n\t// Estados para modales\r\n\tconst [statusModal, setStatusModal] = useState({\r\n\t\tisOpen: false,\r\n\t\tsellerId: 0,\r\n\t\tstatus: \"activate\" as \"activate\" | \"suspend\" | \"deactivate\",\r\n\t\ttitle: \"\",\r\n\t\tmessage: \"\",\r\n\t\tbuttonText: \"\",\r\n\t});\r\n\r\n\tconst [sellerFormModal, setSellerFormModal] = useState({\r\n\t\tisOpen: false,\r\n\t\tseller: null as Seller | null,\r\n\t\tisCreate: true,\r\n\t\ttitle: \"Crear nuevo vendedor\",\r\n\t});\r\n\r\n\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\r\n\t// Inicializar el servicio\r\n\t// Cargar datos de vendedores\r\n\tuseEffect(() => {\r\n\t\tfetchSellers();\r\n\t}, [statusFilter, verificationFilter, pagination.currentPage]);\r\n\r\n\t// Función para obtener vendedores del backend usando nuestro endpoint de admin\r\n\tconst fetchSellers = async () => {\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst params = new URLSearchParams({\r\n\t\t\t\tpage: pagination.currentPage.toString(),\r\n\t\t\t\tper_page: pagination.itemsPerPage.toString(),\r\n\t\t\t});\r\n\r\n\t\t\t// Añadir filtros si están definidos\r\n\t\t\tif (statusFilter !== \"all\") {\r\n\t\t\t\tparams.append('status', statusFilter);\r\n\t\t\t}\r\n\r\n\t\t\tif (verificationFilter !== \"all\") {\r\n\t\t\t\tparams.append('is_featured', verificationFilter === \"featured\" ? '1' : '0');\r\n\t\t\t}\r\n\r\n\t\t\tconst response = await ApiClient.get(`/admin/sellers?${params.toString()}`);\r\n\t\t\t\r\n\t\t\tconsole.log('Full response:', JSON.stringify(response, null, 2)); // Debug detallado\r\n\t\t\t\r\n\t\t\t// Manejo flexible: la respuesta puede tener o no tener el campo success\r\n\t\t\tlet sellersData = [];\r\n\t\t\t\r\n\t\t\t// Si la respuesta es exitosa O si directamente tiene data\r\n\t\t\tif ((response as any).success !== false && (response as any).data) {\r\n\t\t\t\t// Extraer los sellers de diferentes posibles ubicaciones\r\n\t\t\t\tif (Array.isArray((response as any).data.data)) {\r\n\t\t\t\t\tsellersData = (response as any).data.data; // Laravel paginated response\r\n\t\t\t\t} else if (Array.isArray((response as any).data)) {\r\n\t\t\t\t\tsellersData = (response as any).data; // Direct array in data\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log('Extracted sellers data:', sellersData);\r\n\t\t\t\tsetSellers(sellersData);\r\n\t\t\t\t\r\n\t\t\t\t// Manejar paginación si está disponible\r\n\t\t\t\tif ((response as any).data && (response as any).data.current_page) {\r\n\t\t\t\t\tsetPagination({\r\n\t\t\t\t\t\tcurrentPage: (response as any).data.current_page,\r\n\t\t\t\t\t\ttotalPages: (response as any).data.last_page,\r\n\t\t\t\t\t\ttotalItems: (response as any).data.total,\r\n\t\t\t\t\t\titemsPerPage: (response as any).data.per_page,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('Response not successful:', response);\r\n\t\t\t\tthrow new Error((response as any).message || (response as any).error || 'Error al obtener sellers');\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al obtener vendedores:\", error);\r\n\t\t\tsetError(\"Error al cargar vendedores. Por favor, inténtalo de nuevo.\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// Manejar cambio de estado de vendedor\r\n\tconst toggleSellerStatus = (sellerId: number) => {\r\n\t\t// Buscar el vendedor\r\n\t\tconst seller = sellers.find((s) => s.id === sellerId);\r\n\t\tif (!seller) return;\r\n\r\n\t\tlet status: \"activate\" | \"suspend\" | \"deactivate\";\r\n\t\tlet title = \"\";\r\n\t\tlet message = \"\";\r\n\t\tlet buttonText = \"\";\r\n\r\n\t\t// Obtener el nombre de la tienda correctamente\r\n\t\tconst sellerName = seller.store_name || seller.storeName || seller.userName || seller.name || `ID: ${seller.id}`;\r\n\t\t\r\n\t\tif (seller.status === \"active\") {\r\n\t\t\tstatus = \"suspend\";\r\n\t\t\ttitle = \"Suspender vendedor\";\r\n\t\t\tmessage = `¿Estás seguro de que deseas suspender al vendedor \"${sellerName}\"? Esta acción limitará temporalmente su capacidad para vender y no podrá acceder a su cuenta.`;\r\n\t\t\tbuttonText = \"Suspender\";\r\n\t\t} else if (seller.status === \"suspended\") {\r\n\t\t\tstatus = \"deactivate\";\r\n\t\t\ttitle = \"Desactivar vendedor\";\r\n\t\t\tmessage = `¿Estás seguro de que deseas desactivar al vendedor \"${sellerName}\"? Esta acción lo desactivará completamente.`;\r\n\t\t\tbuttonText = \"Desactivar\";\r\n\t\t} else {\r\n\t\t\tstatus = \"activate\";\r\n\t\t\ttitle = \"Activar vendedor\";\r\n\t\t\tmessage = `¿Estás seguro de que deseas activar al vendedor \"${sellerName}\"? Esta acción permitirá que vuelva a vender en la plataforma.`;\r\n\t\t\tbuttonText = \"Activar\";\r\n\t\t}\r\n\r\n\t\tsetStatusModal({\r\n\t\t\tisOpen: true,\r\n\t\t\tsellerId,\r\n\t\t\tstatus,\r\n\t\t\ttitle,\r\n\t\t\tmessage,\r\n\t\t\tbuttonText,\r\n\t\t});\r\n\t};\r\n\r\n\t// Procesar cambio de estado\r\n\tconst handleStatusUpdate = async (newStatus: string, reason: string) => {\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tconst {sellerId} = statusModal;\r\n\r\n\t\t\tawait adminSellerService.updateSellerStatus(sellerId, newStatus as \"active\" | \"suspended\" | \"inactive\", reason);\r\n\r\n\t\t\t// Actualizar el estado local para reflejar el cambio inmediatamente\r\n\t\t\tsetSellers((prevSellers) =>\r\n\t\t\t\tprevSellers.map((seller) => {\r\n\t\t\t\t\tif (seller.id === sellerId) {\r\n\t\t\t\t\t\treturn {...seller, status: newStatus as \"active\" | \"suspended\" | \"inactive\"};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn seller;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\t// Cerrar el modal\r\n\t\t\tsetStatusModal((prev) => ({...prev, isOpen: false}));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al actualizar estado:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\t\"Error al actualizar el estado del vendedor. Por favor, inténtalo de nuevo.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Aprobar vendedor pendiente\r\n\tconst approveSeller = async (sellerId: number) => {\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tawait adminSellerService.updateSellerStatus(sellerId, \"active\");\r\n\r\n\t\t\t// Actualizar el estado local\r\n\t\t\tsetSellers((prevSellers) =>\r\n\t\t\t\tprevSellers.map((seller) => {\r\n\t\t\t\t\tif (seller.id === sellerId) {\r\n\t\t\t\t\t\treturn {...seller, status: \"active\"};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn seller;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\talert(`Vendedor #${sellerId} ha sido aprobado`);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al aprobar vendedor:\", error);\r\n\t\t\tsetError(\"Error al aprobar el vendedor. Por favor, inténtalo de nuevo.\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// Destacar/Quitar destacado de vendedor y sus productos\r\n\tconst toggleFeatured = async (sellerId: number) => {\r\n\t\t// Buscar el vendedor para determinar el estado actual\r\n\t\tconst seller = sellers.find((s) => s.id === sellerId);\r\n\t\tif (!seller) return;\r\n\r\n\t\tconst newFeaturedState = !seller.isFeatured;\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\t\r\n\t\ttry {\r\n\t\t\t// Actualizar el vendedor\r\n\t\t\tawait ApiClient.put(`/admin/sellers/${sellerId}`, {\r\n\t\t\t\tis_featured: newFeaturedState,\r\n\t\t\t});\r\n\r\n\t\t\t// Si se está marcando como destacado, también actualizar todos sus productos\r\n\t\t\tif (newFeaturedState) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait ApiClient.post(`/admin/sellers/${sellerId}/feature-products`);\r\n\t\t\t\t\tconsole.log(`Todos los productos del vendedor ${sellerId} han sido marcados como destacados`);\r\n\t\t\t\t} catch (productError) {\r\n\t\t\t\t\tconsole.error(\"Error al marcar productos como destacados:\", productError);\r\n\t\t\t\t\t// No lanzamos el error para que el vendedor se marque como destacado aunque falle lo de productos\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Actualizar el estado local\r\n\t\t\tsetSellers((prevSellers) =>\r\n\t\t\t\tprevSellers.map((seller) => {\r\n\t\t\t\t\tif (seller.id === sellerId) {\r\n\t\t\t\t\t\treturn {...seller, isFeatured: newFeaturedState};\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn seller;\r\n\t\t\t\t})\r\n\t\t\t);\r\n\r\n\t\t\t// Mostrar mensaje de éxito\r\n\t\t\tconst actionText = newFeaturedState ? \"destacado\" : \"desmarcado como destacado\";\r\n\t\t\talert(`Vendedor ${actionText} correctamente${newFeaturedState ? \". Todos sus productos han sido marcados como destacados.\" : \".\"}`);\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al actualizar estado destacado:\", error);\r\n\t\t\tsetError(\r\n\t\t\t\t\"Error al actualizar estado destacado. Por favor, inténtalo de nuevo.\"\r\n\t\t\t);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t// Abrir modal para editar vendedor\r\n\tconst handleEditSeller = (seller: Seller) => {\r\n\t\tsetSellerFormModal({\r\n\t\t\tisOpen: true,\r\n\t\t\tseller,\r\n\t\t\tisCreate: false,\r\n\t\t\ttitle: `Editar vendedor: ${seller.store_name || seller.storeName || seller.userName || seller.name}`,\r\n\t\t});\r\n\t};\r\n\r\n\t// Procesar formulario de creación/edición\r\n\tconst handleSellerFormSubmit = async (formData: any) => {\r\n\t\tsetLoading(true);\r\n\t\tsetError(null);\r\n\t\ttry {\r\n\t\t\tif (sellerFormModal.isCreate) {\r\n\t\t\t\t// Crear nuevo vendedor\r\n\t\t\t\tawait ApiClient.post('/admin/sellers', formData);\r\n\t\t\t\talert(\"Vendedor creado correctamente\");\r\n\t\t\t} else if (sellerFormModal.seller) {\r\n\t\t\t\t// Actualizar vendedor existente\r\n\t\t\t\tawait ApiClient.put(`/admin/sellers/${sellerFormModal.seller.id}`, formData);\r\n\t\t\t\talert(\"Vendedor actualizado correctamente\");\r\n\t\t\t}\r\n\r\n\t\t\t// Recargar lista de vendedores\r\n\t\t\tfetchSellers();\r\n\t\t\t// Cerrar modal\r\n\t\t\tsetSellerFormModal((prev) => ({...prev, isOpen: false}));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error al procesar vendedor:\", error);\r\n\t\t\tthrow error; // Propagamos el error para que lo maneje el componente del formulario\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Manejar cambio de página\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tsetPagination((prev) => ({...prev, currentPage: page}));\r\n\t};\r\n\r\n\t// Refrescar datos\r\n\tconst refreshData = () => {\r\n\t\tfetchSellers();\r\n\t};\r\n\r\n\r\n\t// Definir columnas de la tabla\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tkey: \"store\",\r\n\t\t\theader: \"Tienda\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center overflow-hidden\">\r\n\t\t\t\t\t\t<Store className=\"h-6 w-6 text-primary-600\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"ml-4\">\r\n\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900 flex items-center\">\r\n\t\t\t\t\t\t\t{seller.store_name}\r\n\t\t\t\t\t\t\t{seller.isFeatured && (\r\n\t\t\t\t\t\t\t\t<span className=\"ml-2\">\r\n\t\t\t\t\t\t\t\t\t<Star className=\"h-4 w-4 text-yellow-500 inline\" />\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t{seller.userName} ({seller.email})\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-400\">\r\n\t\t\t\t\t\t\tID: {seller.id}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"status\",\r\n\t\t\theader: \"Estado\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => {\r\n\t\t\t\tlet statusColor = \"\";\r\n\t\t\t\tlet statusText = \"\";\r\n\t\t\t\tlet StatusIcon: any = null;\r\n\r\n\t\t\t\tswitch (seller.status) {\r\n\t\t\t\t\tcase \"active\":\r\n\t\t\t\t\t\tstatusColor =\r\n\t\t\t\t\t\t\t\"bg-green-100 text-green-800\";\r\n\t\t\t\t\t\tstatusText = \"Activo\";\r\n\t\t\t\t\t\tStatusIcon = CheckCircle;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"pending\":\r\n\t\t\t\t\t\tstatusColor =\r\n\t\t\t\t\t\t\t\"bg-yellow-100 text-yellow-800\";\r\n\t\t\t\t\t\tstatusText = \"Pendiente\";\r\n\t\t\t\t\t\tStatusIcon = Clock;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"suspended\":\r\n\t\t\t\t\t\tstatusColor =\r\n\t\t\t\t\t\t\t\"bg-red-100 text-red-800\";\r\n\t\t\t\t\t\tstatusText = \"Suspendido\";\r\n\t\t\t\t\t\tStatusIcon = Ban;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"inactive\":\r\n\t\t\t\t\t\tstatusColor =\r\n\t\t\t\t\t\t\t\"bg-gray-100 text-gray-800\";\r\n\t\t\t\t\t\tstatusText = \"Inactivo\";\r\n\t\t\t\t\t\tStatusIcon = Eye;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${statusColor}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{StatusIcon && <StatusIcon className=\"w-3 h-3 mr-1\" />}\r\n\t\t\t\t\t\t{statusText}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"verification\",\r\n\t\t\theader: \"Verificación\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => {\r\n\t\t\t\tconst isFeatured = seller.isFeatured;\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n\t\t\t\t\t\t\tisFeatured\r\n\t\t\t\t\t\t\t\t? \"bg-yellow-100 text-yellow-800\"\r\n\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-800\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{isFeatured ? \"Destacado\" : \"Normal\"}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t// Temporalmente deshabilitadas hasta que el backend envíe los datos\r\n\t\t\r\n\t\t{\r\n\t\t\tkey: \"rating\",\r\n\t\t\theader: \"Valoración\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t{seller.average_rating && seller.average_rating > 0 ? (\r\n\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t<Star className=\"h-4 w-4 text-yellow-500 mr-1\" />\r\n\t\t\t\t\t\t\t<span>{seller.average_rating.toFixed(1)}</span>\r\n\t\t\t\t\t\t</>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<span className=\"text-xs text-gray-500\">Sin valoraciones</span>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"sales\", \r\n\t\t\theader: \"Ventas\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<DollarSign className=\"h-4 w-4 text-green-500 mr-1\" />\r\n\t\t\t\t\t<span>{formatCurrency(seller.total_revenue || 0)}</span>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"createdAt\",\r\n\t\t\theader: \"Creado\", \r\n\t\t\tsortable: true,\r\n\t\t\trender: (seller: Seller) => {\r\n\t\t\t\tconst dateString = seller.created_at;\r\n\t\t\t\tif (!dateString) return \"N/A\";\r\n\t\t\t\t\r\n\t\t\t\tconst date = new Date(dateString);\r\n\t\t\t\tif (isNaN(date.getTime())) return \"Fecha inválida\";\r\n\t\t\t\t\r\n\t\t\t\treturn date.toLocaleDateString('es-ES', {\r\n\t\t\t\t\tyear: 'numeric',\r\n\t\t\t\t\tmonth: 'short',\r\n\t\t\t\t\tday: 'numeric'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\t\r\n\t\t{\r\n\t\t\tkey: \"actions\", \r\n\t\t\theader: \"Acciones\",\r\n\t\t\trender: (seller: Seller) => (\r\n\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t{/* Botón para cambiar estado */}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => toggleSellerStatus(seller.id)}\r\n\t\t\t\t\t\tclassName={`p-1 rounded-md ${\r\n\t\t\t\t\t\t\tseller.status === \"active\"\r\n\t\t\t\t\t\t\t\t? \"text-red-600 hover:bg-red-100\"\r\n\t\t\t\t\t\t\t\t: \"text-green-600 hover:bg-green-100\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\ttitle={\r\n\t\t\t\t\t\t\tseller.status === \"active\"\r\n\t\t\t\t\t\t\t\t? \"Suspender vendedor\"\r\n\t\t\t\t\t\t\t\t: seller.status === \"suspended\"\r\n\t\t\t\t\t\t\t\t\t? \"Desactivar vendedor\"\r\n\t\t\t\t\t\t\t\t\t: \"Activar vendedor\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{seller.status === \"active\" ? (\r\n\t\t\t\t\t\t\t<Ban size={18} />\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<CheckCircle size={18} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t{/* Botón de aprobación para vendedores pendientes */}\r\n\t\t\t\t\t{seller.status === \"pending\" && (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => approveSeller(seller.id)}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-green-600 hover:bg-green-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Aprobar vendedor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<CheckCircle size={18} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t{/* Botón para verificar/desverificar */}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => toggleFeatured(seller.id)}\r\n\t\t\t\t\t\tclassName={`p-1 rounded-md ${\r\n\t\t\t\t\t\t\tseller.isFeatured\r\n\t\t\t\t\t\t\t\t? \"text-yellow-600 hover:bg-yellow-100\"\r\n\t\t\t\t\t\t\t\t: \"text-gray-600 hover:bg-gray-100\"\r\n\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\ttitle={seller.isFeatured ? \"Desmarcar como destacado\" : \"Verificar\"}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{seller.isFeatured ? <Star size={18} /> : <ShieldCheck size={18} />}\r\n\t\t\t\t\t</button>\r\n\r\n\r\n\t\t\t\t\t{/* Botón para editar vendedor */}\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => handleEditSeller(seller)}\r\n\t\t\t\t\t\tclassName=\"p-1 text-blue-600 hover:bg-blue-100 rounded-md\"\r\n\t\t\t\t\t\ttitle=\"Editar vendedor\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\tclassName=\"h-4 w-4\"\r\n\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\td=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t</button>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t];\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\tGestión de Vendedores\r\n\t\t\t\t</h1>\r\n\t\t\t\t<div className=\"flex space-x-2\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={refreshData}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t\tdisabled={loading}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<RefreshCw\r\n\t\t\t\t\t\t\tsize={18}\r\n\t\t\t\t\t\t\tclassName={`inline mr-2 ${loading ? \"animate-spin\" : \"\"}`}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tActualizar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Mensaje de error */}\r\n\t\t\t{error && (\r\n\t\t\t\t<div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\">\r\n\t\t\t\t\t<span className=\"block sm:inline\">{error}</span>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Filtros */}\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-4\">\r\n\t\t\t\t<div className=\"flex flex-col md:flex-row gap-4\">\r\n\t\t\t\t\t{/* Filtro de Estado */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Filter className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={statusFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setStatusFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Estados</option>\r\n\t\t\t\t\t\t\t<option value=\"active\">Activos</option>\r\n\t\t\t\t\t\t\t<option value=\"pending\">Pendientes</option>\r\n\t\t\t\t\t\t\t<option value=\"suspended\">Suspendidos</option>\r\n\t\t\t\t\t\t\t<option value=\"inactive\">Inactivos</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Tipo de Vendedor */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={verificationFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setVerificationFilter(e.target.value)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Tipos</option>\r\n\t\t\t\t\t\t\t<option value=\"featured\">Destacados</option>\r\n\t\t\t\t\t\t\t<option value=\"normal\">Normales</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Tabla de Vendedores */}\r\n\t\t\t<Table\r\n\t\t\t\tdata={sellers}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsearchFields={[\"store_name\", \"storeName\", \"name\", \"userName\", \"email\"]}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\temptyMessage=\"No se encontraron vendedores\"\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tcurrentPage: pagination.currentPage,\r\n\t\t\t\t\ttotalPages: pagination.totalPages,\r\n\t\t\t\t\ttotalItems: pagination.totalItems,\r\n\t\t\t\t\titemsPerPage: pagination.itemsPerPage,\r\n\t\t\t\t\tonPageChange: handlePageChange,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Modal de actualización de estado */}\r\n\t\t\t<StatusUpdateModal\r\n\t\t\t\tisOpen={statusModal.isOpen}\r\n\t\t\t\tonClose={() => setStatusModal((prev) => ({...prev, isOpen: false}))}\r\n\t\t\t\tonConfirm={handleStatusUpdate}\r\n\t\t\t\tsellerName={sellers.find(s => s.id === statusModal.sellerId)?.store_name || sellers.find(s => s.id === statusModal.sellerId)?.userName || \"Vendedor\"}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Modal de creación/edición de vendedor */}\r\n\t\t\t<SellerFormModal\r\n\t\t\t\tisOpen={sellerFormModal.isOpen}\r\n\t\t\t\tonClose={() => setSellerFormModal((prev) => ({...prev, isOpen: false}))}\r\n\t\t\t\tonSubmit={handleSellerFormSubmit}\r\n\t\t\t\tseller={sellerFormModal.seller}\r\n\t\t\t\ttitle={sellerFormModal.title}\r\n\t\t\t\tisCreate={sellerFormModal.isCreate}\r\n\t\t\t\tusers={[]}\r\n\t\t\t/>\r\n\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AdminSellersPage;\r\n"],"names":["StatusUpdateModal","isOpen","onClose","onConfirm","sellerName","selectedStatus","setSelectedStatus","useState","reason","setReason","handleConfirm","getStatusIcon","jsx","Ban","Eye","CheckCircle","getButtonClass","getStatusInfo","statusOptions","statusInfo","jsxs","e","option","SellerFormModal","onSubmit","seller","title","isCreate","users","formData","setFormData","loading","setLoading","error","setError","useEffect","handleChange","name","value","type","checkbox","prev","handleSubmit","err","Store","X","user","Fragment","AdminSellersPage","sellers","setSellers","statusFilter","setStatusFilter","verificationFilter","setVerificationFilter","pagination","setPagination","statusModal","setStatusModal","sellerFormModal","setSellerFormModal","fetchSellers","params","response","ApiClient","sellersData","toggleSellerStatus","sellerId","s","status","message","buttonText","handleStatusUpdate","newStatus","adminSellerService","prevSellers","approveSeller","toggleFeatured","newFeaturedState","productError","handleEditSeller","handleSellerFormSubmit","handlePageChange","page","refreshData","columns","Star","statusColor","statusText","StatusIcon","Clock","isFeatured","DollarSign","formatCurrency","dateString","date","ShieldCheck","RefreshCw","Filter","Table"],"mappings":"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"}
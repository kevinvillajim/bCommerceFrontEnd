import{r as l,e as L,j as e,X as M,N as B,A as U,B as E,L as S,O as I}from"./index-DmNDOrWy.js";import{M as R,T as $}from"./ThemeToggle-CS9UPSSO.js";import{T as V}from"./triangle-alert-B75WTV0P.js";import{C as F}from"./chevron-down-BvY6CQlk.js";import{U as H}from"./user-nLts-VnI.js";import{S as X}from"./settings-Gi_H_p01.js";import{L as Y}from"./log-out-Doh304v_.js";const A=l.createContext(void 0),_=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),ae=({children:n,initialType:s,initialPageTitles:a={}})=>{const[o,c]=l.useState(!0),[d,u]=l.useState([]),[h,g]=l.useState(0),[p,x]=l.useState({}),[f,v]=l.useState(a),[N]=l.useState(s),b=L(),w=()=>{const{pathname:t}=b;if(f[t])return f[t];for(const[r,m]of Object.entries(f))if(t.includes(r))return m;switch(N){case"admin":return"Panel de Administración";case"seller":return"Portal del Vendedor";case"customer":return"Mi Cuenta";default:return"Dashboard"}};l.useEffect(()=>{const t=d.filter(r=>!r.read).length;g(t)},[d]);const C=()=>c(t=>!t),k=t=>{const r={...t,id:_()};u(m=>[r,...m])},P=()=>{u(t=>t.map(r=>({...r,read:!0})))},i=t=>{u(r=>r.map(m=>m.id===t?{...m,read:!0}:m))},y=(t,r)=>{x(m=>({...m,[t]:r}))},j=t=>{x(r=>({...r,[t]:(r[t]||0)+1}))},O=t=>{x(r=>({...r,[t]:Math.max(0,(r[t]||0)-1)}))},D=(t,r)=>{v(m=>({...m,[t]:r}))},z={isSidebarOpen:o,toggleSidebar:C,notifications:d,unreadNotificationsCount:h,addNotification:k,markAllNotificationsAsRead:P,markNotificationAsRead:i,pendingActions:p,setPendingAction:y,incrementPendingAction:j,decrementPendingAction:O,dashboardType:N,currentPageTitle:w(),setPageTitle:D};return e.jsx(A.Provider,{value:z,children:n})},T=()=>{const n=l.useContext(A);if(n===void 0)throw new Error("useDashboard debe ser usado dentro de un DashboardProvider");return n},q=({path:n,label:s,icon:a,isNotificated:o,notificationCount:c})=>e.jsxs(B,{to:n,className:({isActive:d})=>`flex items-center px-4 py-2 mt-2 text-sm transition-colors duration-200 rounded-lg ${d?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-200"}`,children:[a,e.jsx("span",{className:"mx-1",children:s}),o&&c&&c>0&&e.jsx("span",{className:"ml-auto inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-500 rounded-full",children:c})]}),G=({groups:n,title:s,isOpen:a=!0,toggleSidebar:o=()=>{}})=>e.jsxs("aside",{className:`bg-white fixed md:static inset-y-0 left-0 z-30 w-64 transition-transform duration-300 transform ${a?"translate-x-0":"-translate-x-full"} md:translate-x-0 overflow-y-auto`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[s.icon,e.jsx("h2",{className:"text-lg font-semibold text-gray-900 ml-2",children:s.title})]}),e.jsx("button",{onClick:o,className:"p-1 rounded-md text-gray-500 md:hidden hover:text-gray-900 hover:bg-gray-100",children:e.jsx(M,{size:20})})]}),e.jsx("div",{className:"p-4",children:n.map((c,d)=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:c.title}),e.jsx("div",{className:"mt-2",children:c.links.map((u,h)=>e.jsx(q,{...u},h))})]},d))})]}),J=({toggleSidebar:n,isAdmin:s=!1,unreadNotifications:a=0,notifications:o=[],pendingActions:c={},onReadAllNotifications:d=()=>{},visibleInMobile:u=!0})=>{const[h,g]=l.useState(!1),[p,x]=l.useState(!1),{user:f,logout:v}=l.useContext(U),{currentPageTitle:N}=T(),b=Object.values(c).reduce((i,y)=>i+(y||0),0),w=()=>{g(!h),p&&x(!1)},C=()=>{x(!p),h&&g(!1)},k=()=>f?.name?.charAt(0).toUpperCase()||(s?"A":"U");l.useEffect(()=>{const i=y=>{const j=y.target;!j.closest(".profile-menu")&&!j.closest(".profile-button")&&g(!1),!j.closest(".notifications-menu")&&!j.closest(".notifications-button")&&x(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]);const P=()=>s?"bg-red-100 text-red-600":"bg-primary-100 text-primary-600";return e.jsx("header",{className:"bg-white shadow-sm z-20",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center",children:[u&&e.jsx("button",{className:"md:hidden text-gray-600 focus:outline-none mr-3",onClick:n,children:e.jsx(R,{size:24})}),b>0&&e.jsx("div",{className:"flex items-center mr-4",children:e.jsxs("span",{className:"bg-red-500 text-white text-sm font-medium rounded-md px-2 py-1 flex items-center",children:[e.jsx(V,{size:16,className:"mr-1"}),b," acción",b===1?"":"es"," pendiente",b===1?"":"s"]})}),e.jsx("h1",{className:"text-lg font-medium text-gray-800",children:N})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx($,{}),s&&e.jsx("a",{href:"/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900 hidden md:block",children:e.jsx("span",{className:"text-sm",children:"Visitar Tienda"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"notifications-button text-gray-600 hover:text-gray-900 p-1 rounded-full relative",onClick:C,children:[e.jsx(E,{size:20}),a>0&&e.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a>9?"9+":a})]}),p&&e.jsxs("div",{className:"notifications-menu absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg py-2 z-30 border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800",children:"Notificaciones"}),a>0&&e.jsx("button",{className:"text-xs text-primary-600 hover:underline",onClick:d,children:"Marcar todas como leídas"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.length>0?o.map(i=>e.jsxs("div",{className:`px-4 py-3 hover:bg-gray-50 ${!i.read&&i.type==="warning"?"border-l-4 border-red-500":i.read?"":"border-l-4 border-primary-500"}`,children:[e.jsx("p",{className:"text-sm text-gray-800 font-medium",children:i.title}),e.jsx("p",{className:"text-xs text-gray-500",children:i.description}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i.time})]},i.id)):e.jsx("div",{className:"px-4 py-3 text-center text-gray-500",children:"No hay notificaciones para mostrar"})}),e.jsx("div",{className:"px-4 py-2 border-t border-gray-200",children:e.jsx(S,{to:s?"/admin/notifications":"/seller/notifications",className:"text-sm text-primary-600 hover:underline block text-center",children:"Ver todas las notificaciones"})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"profile-button flex items-center space-x-2 text-gray-800 focus:outline-none",onClick:w,children:[e.jsx("div",{className:`h-8 w-8 rounded-full ${P()} flex items-center justify-center font-medium`,children:k()}),e.jsx("span",{className:"hidden md:block font-medium",children:f?.name||(s?"Admin":"Usuario")}),e.jsx(F,{size:18,className:"hidden md:block"})]}),h&&e.jsxs("div",{className:"profile-menu absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-30 border border-gray-200",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:f?.name||(s?"Admin":"Usuario")}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:f?.email||(s?"admin@ejemplo.com":"usuario@ejemplo.com")})]}),e.jsx(S,{to:s?"/admin/profile":"/seller/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>g(!1),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:16,className:"mr-2"}),"Mi Perfil"]})}),e.jsx(S,{to:s?"/admin/settings":"/seller/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>g(!1),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{size:16,className:"mr-2"}),"Configuración"]})}),e.jsx("button",{onClick:v,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:16,className:"mr-2"}),"Cerrar Sesión"]})})]})]})]})]})})},K=({type:n="admin",year:s=new Date().getFullYear(),additionalText:a})=>{const o=()=>{switch(n){case"admin":return"Panel de Administración BCommerce";case"seller":return"Portal de Vendedor BCommerce";case"customer":return"BCommerce";default:return"BCommerce"}};return e.jsx("footer",{className:"bg-white py-3 px-4 text-center text-sm text-gray-500 border-t border-gray-200",children:e.jsxs("p",{children:["© ",s," ",o(),".",a?` ${a}`:" Todos los derechos reservados."]})})},ne=({sidebarGroups:n,sidebarTitle:s,headerExtras:a,footerExtras:o})=>{const{isSidebarOpen:c,toggleSidebar:d,notifications:u,unreadNotificationsCount:h,markAllNotificationsAsRead:g,pendingActions:p,dashboardType:x}=T();return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(G,{groups:n,title:s,isOpen:c,toggleSidebar:d}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(J,{toggleSidebar:d,isAdmin:x==="admin",unreadNotifications:h,notifications:u,pendingActions:p,onReadAllNotifications:g}),a&&a,e.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-4 md:p-6",children:e.jsx(I,{})}),o&&o,e.jsx(K,{type:x})]})]})};export{ne as B,ae as D};
//# sourceMappingURL=BaseDashboardLayout-Dw1ZI7dp.js.map

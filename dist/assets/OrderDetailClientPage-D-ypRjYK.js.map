{"version":3,"file":"OrderDetailClientPage-D-ypRjYK.js","sources":["../../src/presentation/pages/OrderDetailClientPage.tsx"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport {useParams, useNavigate, Link} from \"react-router-dom\";\r\nimport {ArrowLeft, FileText, Truck, Package} from \"lucide-react\";\r\nimport {formatCurrency} from \"../../utils/formatters/formatCurrency\";\r\nimport {formatDate} from \"../../utils/formatters/formatDate\";\r\nimport OrderStatusBadge from \"../components/orders/OrderStatusBadge\";\r\nimport OrderServiceAdapter from \"../../core/adapters/OrderServiceAdapter\";\r\nimport type {OrderDetail} from \"../../core/domain/entities/Order\";\r\n\r\nconst OrderDetailClientPage: React.FC = () => {\r\n\tconst {id} = useParams<{id: string}>();\r\n\tconst navigate = useNavigate();\r\n\tconst [order, setOrder] = useState<OrderDetail | null>(null);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\r\n\tconst orderAdapter = new OrderServiceAdapter();\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchOrderDetails();\r\n\t}, [id]);\r\n\r\n\tconst fetchOrderDetails = async () => {\r\n\t\tif (!id) return;\r\n\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\t// Obtener los detalles de la orden a través del adaptador\r\n\t\t\tconst orderDetail = await orderAdapter.getOrderDetails(id);\r\n\t\t\tconsole.log(\"Detalles de la orden recibidos:\", orderDetail);\r\n\t\t\tsetOrder(orderDetail);\r\n\t\t\tsetError(null);\r\n\t\t} catch (err) {\r\n\t\t\tsetError(\"No se pudo cargar el detalle de la orden\");\r\n\t\t\tconsole.error(\"Error al cargar detalles de orden:\", err);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Función auxiliar para calcular subtotales\r\n\tconst calculateSubtotal = () => {\r\n\t\tif (!order || !order.items || order.items.length === 0) return 0;\r\n\t\treturn order.items.reduce(\r\n\t\t\t(sum, item) => sum + item.price * item.quantity,\r\n\t\t\t0\r\n\t\t);\r\n\t};\r\n\r\n\t// Función auxiliar para calcular el IVA (15%)\r\n\tconst calculateTax = () => {\r\n\t\tconst subtotal = calculateSubtotal();\r\n\t\treturn subtotal * 0.15; // 15% IVA\r\n\t};\r\n\r\n\t// Función auxiliar para calcular el total (subtotal + IVA)\r\n\tconst calculateTotal = () => {\r\n\t\tconst subtotal = calculateSubtotal();\r\n\t\tconst tax = calculateTax();\r\n\t\treturn subtotal + tax;\r\n\t};\r\n\r\n\tif (loading) {\r\n\t\treturn (\r\n\t\t\t<div className=\"flex flex-col items-center justify-center min-h-screen p-4\">\r\n\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500\"></div>\r\n\t\t\t\t<p className=\"mt-4 text-gray-700\">\r\n\t\t\t\t\tCargando detalles del pedido...\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error || !order) {\r\n\t\treturn (\r\n\t\t\t<div className=\"bg-white rounded-lg shadow p-6 max-w-4xl mx-auto my-8\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<div className=\"text-red-500 text-5xl mb-4\">❌</div>\r\n\t\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n\t\t\t\t\t\tError al cargar el pedido\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p className=\"text-gray-700 mb-6\">\r\n\t\t\t\t\t\t{error || \"No se pudo encontrar el pedido solicitado\"}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => navigate(\"/orders\")}\r\n\t\t\t\t\t\tclassName=\"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tVolver a mis pedidos\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"py-8 px-4 md:px-8 max-w-7xl mx-auto\">\r\n\t\t\t<div className=\"space-y-6\">\r\n\t\t\t\t{/* Encabezado */}\r\n\t\t\t\t<div className=\"flex flex-col md:flex-row justify-between items-start md:items-center gap-4\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigate(\"/orders\")}\r\n\t\t\t\t\t\t\tclassName=\"cursor-pointer flex items-center text-gray-600 hover:text-primary-600 mb-2\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArrowLeft size={16} className=\"mr-1\" />\r\n\t\t\t\t\t\t\t<span>Volver a mis pedidos</span>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-800\">\r\n\t\t\t\t\t\t\tPedido #{order.orderNumber || order.orderNumber}\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"flex space-x-3\">\r\n\t\t\t\t\t\t{/* Botones de acción según el estado */}\r\n\t\t\t\t\t\t{[\"completed\", \"delivered\"].includes(order.status) && (\r\n\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\tto={`/invoices/${order.id}`}\r\n\t\t\t\t\t\t\t\tclassName=\"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<FileText size={18} />\r\n\t\t\t\t\t\t\t\t<span>Ver factura</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{/* Contenido principal */}\r\n\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n\t\t\t\t\t{/* Información general y estado */}\r\n\t\t\t\t\t<div className=\"col-span-3 md:col-span-1 space-y-6\">\r\n\t\t\t\t\t\t{/* Tarjeta de estado */}\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\t\tEstado del pedido\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Estado:</span>\r\n\t\t\t\t\t\t\t\t\t<OrderStatusBadge status={order.status} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Pago:</span>\r\n\t\t\t\t\t\t\t\t\t<OrderStatusBadge\r\n\t\t\t\t\t\t\t\t\t\tstatus={order.paymentStatus}\r\n\t\t\t\t\t\t\t\t\t\ttype=\"payment\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Método de pago:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"credit_card\" &&\r\n\t\t\t\t\t\t\t\t\t\t\t\"Tarjeta de crédito\"}\r\n\t\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"paypal\" && \"PayPal\"}\r\n\t\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"transfer\" && \"Transferencia\"}\r\n\t\t\t\t\t\t\t\t\t\t{order.paymentMethod === \"other\" && \"Otro\"}\r\n\t\t\t\t\t\t\t\t\t\t{!order.paymentMethod && \"No especificado\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Fecha:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t{order.createdAt\r\n\t\t\t\t\t\t\t\t\t\t\t? formatDate(order.createdAt)\r\n\t\t\t\t\t\t\t\t\t\t\t: \"Sin fecha\"}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Información de envío */}\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\t\tInformación de envío\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t{order.shippingData ? (\r\n\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm font-medium text-gray-600 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tDirección de envío:\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.address}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.city}, {order.shippingData.state}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.country},{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.postalCode}\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingData.phone && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tTeléfono:\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.phone}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingData.tracking_number && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tNúmero de seguimiento:\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-primary-600 font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.tracking_number}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingData.shipping_company && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tEmpresa de transporte:\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{order.shippingData.shipping_company}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t{order.shippingData.estimated_delivery && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"block text-sm font-medium text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tEntrega estimada:\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(order.shippingData.estimated_delivery)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\tNo hay información de envío disponible\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t{/* Mostrar iconos de estado según la fase de envío */}\r\n\t\t\t\t\t\t\t<div className=\"mt-6\">\r\n\t\t\t\t\t\t\t\t<div className=\"relative\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status !== \"pending\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Package size={20} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{order.status !== \"pending\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Procesando\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"Pendiente\"}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 h-1 mx-2 bg-gray-200\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status === \"shipped\" ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status === \"delivered\" ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status === \"completed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Truck size={20} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs mt-1\">Enviado</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1 h-1 mx-2 bg-gray-200\"></div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status === \"delivered\" ||\r\n\t\t\t\t\t\t\t\t\t\t\t\t\torder.status === \"completed\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"bg-green-100 text-green-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"bg-gray-100 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Package size={20} />\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-xs mt-1\">Entregado</span>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Productos y resumen */}\r\n\t\t\t\t\t<div className=\"col-span-3 md:col-span-2 space-y-6\">\r\n\t\t\t\t\t\t{/* Productos */}\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 p-6 pb-3\">\r\n\t\t\t\t\t\t\t\tProductos\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\r\n\t\t\t\t\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t\t<thead className=\"bg-gray-50\">\r\n\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tProducto\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t<th\r\n\t\t\t\t\t\t\t\t\t\t\t\tscope=\"col\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSubtotal\r\n\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t<tbody className=\"bg-white divide-y divide-gray-200\">\r\n\t\t\t\t\t\t\t\t\t\t{order.items.map((item) => (\r\n\t\t\t\t\t\t\t\t\t\t\t<tr key={item.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.product_image && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex-shrink-0 h-10 w-10 mr-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-10 w-10 rounded-md object-cover\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={item.product_image}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={item.product_name || \"Producto\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.product_name || \"Producto\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{/* Link al producto si es necesario */}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item.productId && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/products/${item.productId}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-xs text-primary-600 hover:underline\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tVer producto\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(item.price)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item.quantity}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formatCurrency(item.price * item.quantity)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Resumen de precios */}\r\n\t\t\t\t\t\t<div className=\"bg-white rounded-lg shadow p-6\">\r\n\t\t\t\t\t\t\t<h2 className=\"text-lg font-medium text-gray-900 mb-4\">\r\n\t\t\t\t\t\t\t\tResumen\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pb-2\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Subtotal:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(calculateSubtotal())}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t{/* Mostrar impuestos */}\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pb-2\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">IVA (15%):</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(calculateTax())}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center pt-3 border-t border-gray-200 font-medium\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-900\">Total:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-lg text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(calculateTotal())}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default OrderDetailClientPage;\r\n"],"names":["OrderDetailClientPage","id","useParams","navigate","useNavigate","order","setOrder","useState","loading","setLoading","error","setError","orderAdapter","OrderServiceAdapter","useEffect","fetchOrderDetails","orderDetail","err","calculateSubtotal","sum","item","calculateTax","calculateTotal","subtotal","tax","jsxs","jsx","ArrowLeft","Link","FileText","OrderStatusBadge","formatDate","Fragment","Package","Truck","formatCurrency"],"mappings":"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"}
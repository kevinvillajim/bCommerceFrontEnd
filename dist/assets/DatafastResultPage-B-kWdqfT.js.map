{"version":3,"file":"DatafastResultPage-B-kWdqfT.js","sources":["../../src/presentation/pages/DatafastResultPage.tsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {useNavigate, useSearchParams} from \"react-router-dom\";\r\nimport {DatafastService} from \"../../core/services/DatafastService\";\r\nimport {useCart} from \"../hooks/useCart\";\r\nimport {NotificationType} from \"../contexts/CartContext\";\r\nimport {formatCurrency} from \"../../utils/formatters/formatCurrency\";\r\nimport {CheckoutService} from \"../../core/services/CheckoutService\";\r\nimport type {PaymentMethod} from \"../../core/services/CheckoutService\";\r\nimport {CheckoutItemsService} from \"../../infrastructure/services/CheckoutItemsService\";\r\nimport {useAuth} from \"../contexts/AuthContext\";\r\nimport {validateTotalsEquality, CALCULATION_CONFIG} from \"../../constants/calculationConfig\";\r\nimport {useDatafastCSP} from \"../hooks/useDatafastCSP\";\r\n\r\ninterface ProcessingResult {\r\n\tsuccess: boolean;\r\n\tdata?: {\r\n\t\torder_id: string;\r\n\t\torder_number: string;\r\n\t\ttotal: number;\r\n\t\tpayment_status: string;\r\n\t\tpayment_id: string;\r\n\t};\r\n\tmessage: string;\r\n}\r\n\r\nconst DatafastResultPage: React.FC = () => {\r\n\t// üîì Desactivar CSP temporalmente para permitir scripts de Datafast\r\n\tuseDatafastCSP();\r\n\t\r\n\tconst navigate = useNavigate();\r\n\tconst [searchParams] = useSearchParams();\r\n\tconst {cart, clearCart, showNotification, appliedDiscount} = useCart();\r\n\tconst {user} = useAuth();\r\n\tconst [isProcessing, setIsProcessing] = useState(true);\r\n\tconst [result, setResult] = useState<ProcessingResult | null>(null);\r\n\tconst [error, setError] = useState<string | null>(null);\r\n\tconst [countdown] = useState(5);\r\n\r\n\tconst datafastService = new DatafastService();\r\n\tconst checkoutService = new CheckoutService();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst processDatafastResult = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconsole.log(\"üöÄ Iniciando procesamiento de resultado de Datafast\");\r\n\t\t\t\t\r\n\t\t\t\t// Obtener resourcePath de los par√°metros de la URL\r\n\t\t\t\tconst resourcePath = searchParams.get(\"resourcePath\");\r\n\t\t\t\tconsole.log(\"üìç ResourcePath recibido:\", resourcePath);\r\n\t\t\t\t\r\n\t\t\t\t// VERIFICACI√ìN MEJORADA: Solo usar datos guardados si NO hay resourcePath nuevo\r\n\t\t\t\t// y si los datos guardados son recientes (menos de 5 minutos)\r\n\t\t\t\tconst orderDataStr = localStorage.getItem(\"datafast_order_result\");\r\n\t\t\t\tconst orderTimestamp = localStorage.getItem(\"datafast_order_timestamp\");\r\n\t\t\t\t\r\n\t\t\t\tif (orderDataStr && !resourcePath) {\r\n\t\t\t\t\tconst now = Date.now();\r\n\t\t\t\t\tconst timestamp = orderTimestamp ? parseInt(orderTimestamp) : 0;\r\n\t\t\t\t\tconst isRecent = (now - timestamp) < 5 * 60 * 1000; // 5 minutos\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (isRecent) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tconst orderData = JSON.parse(orderDataStr);\r\n\t\t\t\t\t\t\tconsole.log(\"‚úÖ Mostrando orden ya procesada (reciente):\", orderData);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetResult({\r\n\t\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\t\tdata: orderData,\r\n\t\t\t\t\t\t\t\tmessage: \"Pago procesado exitosamente\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Limpiar datos temporales\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_order_result\");\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_order_timestamp\");\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_transaction_id\");\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_calculated_total\");\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_form_data\");\r\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_cart_backup\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tshowNotification(NotificationType.SUCCESS, \"¬°Pago completado exitosamente!\");\r\n\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tnavigate(\"/orders\");\r\n\t\t\t\t\t\t\t}, 8000);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.error(\"Error parseando datos de orden:\", e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log(\"‚ö†Ô∏è Datos de orden antiguos, procesando nuevo pago\");\r\n\t\t\t\t\t\t// Limpiar datos antiguos\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_order_result\");\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"datafast_order_timestamp\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// SEGUNDA VERIFICACI√ìN: Si hay resourcePath, procesar el pago\r\n\t\t\t\tif (!resourcePath) {\r\n\t\t\t\t\t// Si no hay resourcePath ni datos guardados, mostrar error\r\n\t\t\t\t\tthrow new Error(\r\n\t\t\t\t\t\t\"No se encontr√≥ informaci√≥n del pago\"\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(\"Procesando resultado de Datafast:\", {\r\n\t\t\t\t\tresourcePath,\r\n\t\t\t\t\tallParams: Object.fromEntries(searchParams.entries()),\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Obtener transaction_id del localStorage o generar uno de respaldo\r\n\t\t\t\tlet transactionId = localStorage.getItem(\"datafast_transaction_id\");\r\n\r\n\t\t\t\tif (!transactionId) {\r\n\t\t\t\t\t// Si no hay transaction_id guardado, generar uno basado en el resourcePath\r\n\t\t\t\t\tconst checkoutIdMatch = resourcePath.match(/\\/checkouts\\/([^\\/]+)/);\r\n\t\t\t\t\tconst checkoutId = checkoutIdMatch\r\n\t\t\t\t\t\t? checkoutIdMatch[1]\r\n\t\t\t\t\t\t: Date.now().toString();\r\n\t\t\t\t\ttransactionId = `ORDER_${Date.now()}_${checkoutId}`;\r\n\r\n\t\t\t\t\tconsole.warn(\r\n\t\t\t\t\t\t\"No se encontr√≥ transaction_id en localStorage, usando:\",\r\n\t\t\t\t\t\ttransactionId\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// ‚úÖ OBTENER TOTAL CALCULADO DEL LOCALSTORAGE (PARA PAGOS REALES)\r\n\t\t\t\tconst calculatedTotalStr = localStorage.getItem(\"datafast_calculated_total\");\r\n\t\t\t\tconst calculatedTotal = calculatedTotalStr ? parseFloat(calculatedTotalStr) : undefined;\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"Verificando pago con:\", {\r\n\t\t\t\t\tresourcePath,\r\n\t\t\t\t\ttransactionId,\r\n\t\t\t\t\tcalculatedTotal,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Verificar el pago - INCLUIR TOTAL CALCULADO\r\n\t\t\t\tconst verifyResponse = await datafastService.verifyPayment({\r\n\t\t\t\t\tresource_path: resourcePath,\r\n\t\t\t\t\ttransaction_id: transactionId,\r\n\t\t\t\t\tcalculated_total: calculatedTotal, // ‚úÖ ENVIAR TOTAL CALCULADO\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconsole.log(\"Respuesta de verificaci√≥n:\", verifyResponse);\r\n\r\n\t\t\t\tif (verifyResponse.success && verifyResponse.data) {\r\n\t\t\t\t\t// Pago exitoso - Ahora crear la orden en el sistema\r\n\t\t\t\t\tconsole.log(\"‚úÖ Pago verificado exitosamente, creando orden...\");\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Obtener datos del formulario y carrito backup\r\n\t\t\t\t\tconst formDataStr = localStorage.getItem(\"datafast_form_data\");\r\n\t\t\t\t\tconst cartBackupStr = localStorage.getItem(\"datafast_cart_backup\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet formData = {\r\n\t\t\t\t\t\tgiven_name: \"Cliente\",\r\n\t\t\t\t\t\tsurname: \"Datafast\",\r\n\t\t\t\t\t\taddress: \"N/A\",\r\n\t\t\t\t\t\tcity: \"N/A\",\r\n\t\t\t\t\t\tcountry: \"EC\",\r\n\t\t\t\t\t\tphone: \"N/A\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (formDataStr) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tformData = JSON.parse(formDataStr);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.error(\"Error parseando datos del formulario:\", e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Usar carrito actual o backup\r\n\t\t\t\t\tlet cartToProcess = cart;\r\n\t\t\t\t\tif ((!cart || cart.items.length === 0) && cartBackupStr) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tcartToProcess = JSON.parse(cartBackupStr);\r\n\t\t\t\t\t\t\tconsole.log(\"üì¶ Usando carrito backup para procesar orden\", cartToProcess);\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.error(\"Error parseando carrito backup:\", e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// üö® VALIDACI√ìN CR√çTICA #1: Verificar que tenemos un carrito v√°lido\r\n\t\t\t\t\tif (!cartToProcess || !cartToProcess.items || cartToProcess.items.length === 0) {\r\n\t\t\t\t\t\tconsole.error(\"‚ùå CR√çTICO: No hay carrito disponible para procesar\");\r\n\t\t\t\t\t\tconsole.error(\"   - cart:\", cart);\r\n\t\t\t\t\t\tconsole.error(\"   - cartBackupStr:\", cartBackupStr);\r\n\t\t\t\t\t\tthrow new Error(\"No se encontraron items para procesar la orden. Por favor, vuelva al carrito.\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"üîç VALIDACI√ìN PRE-CHECKOUT DATAFAST:\");\r\n\t\t\t\t\tconsole.log(\"   ‚úÖ Carrito encontrado con\", cartToProcess.items.length, \"items\");\r\n\t\t\t\t\tconsole.log(\"   - Items del carrito:\", cartToProcess.items);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Preparar items para el checkout con forceRefresh\r\n\t\t\t\t\tconst sellerId = cartToProcess ? CheckoutService.getSellerIdFromCart(cartToProcess) : null;\r\n\t\t\t\t\tconst items = cartToProcess ? await CheckoutItemsService.prepareItemsForCheckout(\r\n\t\t\t\t\t\tcartToProcess.items, \r\n\t\t\t\t\t\tnull, // No hay cup√≥n aplicado\r\n\t\t\t\t\t\ttrue  // forceRefresh para garantizar datos frescos\r\n\t\t\t\t\t) : [];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// üö® VALIDACI√ìN CR√çTICA #2: Verificar que los items tienen precios v√°lidos\r\n\t\t\t\t\tif (items.length === 0) {\r\n\t\t\t\t\t\tconsole.error(\"‚ùå CR√çTICO: No se pudieron preparar items para checkout\");\r\n\t\t\t\t\t\tthrow new Error(\"Error preparando items para el pago\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst invalidItems = items.filter(item => !item.price || item.price <= 0);\r\n\t\t\t\t\tif (invalidItems.length > 0) {\r\n\t\t\t\t\t\tconsole.error(\"‚ùå CR√çTICO: Items con precio inv√°lido:\", invalidItems);\r\n\t\t\t\t\t\tthrow new Error(\"Algunos productos no tienen precio v√°lido\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"   ‚úÖ Items preparados correctamente:\", items.length);\r\n\t\t\t\t\tconsole.log(\"   - Precios de items:\", items.map(i => ({ id: i.product_id, price: i.price })));\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Calcular totales con forceRefresh\r\n\t\t\t\t\tconst calculatedTotals = cartToProcess ? await CheckoutItemsService.calculateCheckoutTotals(\r\n\t\t\t\t\t\tcartToProcess.items, \r\n\t\t\t\t\t\tappliedDiscount,\r\n\t\t\t\t\t\ttrue // forceRefresh para garantizar c√°lculo correcto\r\n\t\t\t\t\t) : null;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// üö® VALIDACI√ìN CR√çTICA #3: El total NUNCA debe ser $0.00\r\n\t\t\t\t\tif (!calculatedTotals || calculatedTotals.total <= 0) {\r\n\t\t\t\t\t\tconsole.error(\"‚ùå CR√çTICO: Total calculado es $0.00 o inv√°lido\");\r\n\t\t\t\t\t\tconsole.error(\"   - calculatedTotals:\", calculatedTotals);\r\n\t\t\t\t\t\tconsole.error(\"   - cartToProcess:\", cartToProcess);\r\n\t\t\t\t\t\tconsole.error(\"   - items preparados:\", items);\r\n\t\t\t\t\t\tthrow new Error(`El total calculado es inv√°lido: $${calculatedTotals?.total || 0}`);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// üö® VALIDACI√ìN CR√çTICA #4: Verificar consistencia con monto de Datafast\r\n\t\t\t\t\tconst datafastAmount = typeof verifyResponse.data.total === 'string' \r\n\t\t\t\t\t\t? parseFloat(verifyResponse.data.total) \r\n\t\t\t\t\t\t: verifyResponse.data.total;\r\n\t\t\t\t\tconst ourTotal = calculatedTotals.total;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// ‚úÖ USAR SISTEMA DE VALIDACI√ìN CENTRALIZADO\r\n\t\t\t\t\tconst totalsMatch = validateTotalsEquality(\r\n\t\t\t\t\t\tdatafastAmount,\r\n\t\t\t\t\t\tourTotal,\r\n\t\t\t\t\t\t'Datafast vs Sistema (DatafastResultPage)',\r\n\t\t\t\t\t\tCALCULATION_CONFIG.VALIDATIONS.CHECKOUT_TOLERANCE // Usa tolerancia de 0.001 por defecto\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"üí∞ VALIDACI√ìN DE MONTOS CON SISTEMA CENTRALIZADO:\");\r\n\t\t\t\t\tconsole.log(\"   - Total de Datafast:\", datafastAmount);\r\n\t\t\t\t\tconsole.log(\"   - Total calculado (EcommerceCalculator):\", ourTotal);\r\n\t\t\t\t\tconsole.log(\"   - Tolerancia aplicada:\", CALCULATION_CONFIG.VALIDATIONS.CHECKOUT_TOLERANCE);\r\n\t\t\t\t\tconsole.log(\"   - Validaci√≥n:\", totalsMatch ? \"‚úÖ MONTOS V√ÅLIDOS\" : \"‚ö†Ô∏è DISCREPANCIA DETECTADA\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!totalsMatch) {\r\n\t\t\t\t\t\tconsole.warn(\"‚ö†Ô∏è ADVERTENCIA: Los totales tienen una discrepancia mayor a la tolerancia permitida\");\r\n\t\t\t\t\t\tconsole.warn(`   Datafast: $${datafastAmount} vs Calculado: $${ourTotal}`);\r\n\t\t\t\t\t\tconsole.warn(`   Diferencia: $${Math.abs(datafastAmount - ourTotal).toFixed(6)}`);\r\n\t\t\t\t\t\tconsole.warn(`   Tolerancia m√°xima: $${CALCULATION_CONFIG.VALIDATIONS.CHECKOUT_TOLERANCE}`);\r\n\t\t\t\t\t\t// No lanzar error, solo advertencia - El sistema proceder√° con el total de Datafast\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"‚úÖ TODAS LAS VALIDACIONES PASADAS:\");\r\n\t\t\t\t\tconsole.log(\"   - Total v√°lido: $\", calculatedTotals.total);\r\n\t\t\t\t\tconsole.log(\"   - Items v√°lidos:\", items.length);\r\n\t\t\t\t\tconsole.log(\"   - Seller ID:\", sellerId);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(\"üì¶ Preparando checkout con:\", {\r\n\t\t\t\t\t\tsellerId,\r\n\t\t\t\t\t\titems: items.length,\r\n\t\t\t\t\t\ttotal: calculatedTotals.total,\r\n\t\t\t\t\t\tformData: formData ? \"Datos de formulario presentes\" : \"Sin datos de formulario\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Crear la orden en el sistema\r\n\t\t\t\t\tconst checkoutRequestData = {\r\n\t\t\t\t\t\tpayment: {\r\n\t\t\t\t\t\t\tmethod: \"datafast\" as PaymentMethod,\r\n\t\t\t\t\t\t\ttransaction_id: verifyResponse.data.payment_id,\r\n\t\t\t\t\t\t\tamount: verifyResponse.data.total\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tshippingAddress: {\r\n\t\t\t\t\t\t\tname: formData.given_name + \" \" + formData.surname,\r\n\t\t\t\t\t\t\tstreet: formData.address,\r\n\t\t\t\t\t\t\tcity: formData.city,\r\n\t\t\t\t\t\t\tstate: formData.country,\r\n\t\t\t\t\t\t\tpostalCode: \"00000\",\r\n\t\t\t\t\t\t\tcountry: formData.country,\r\n\t\t\t\t\t\t\tphone: formData.phone,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tseller_id: sellerId || undefined,\r\n\t\t\t\t\t\titems: items,\r\n\t\t\t\t\t\tcalculated_totals: calculatedTotals ? {\r\n\t\t\t\t\t\t\tsubtotal: calculatedTotals.subtotal,\r\n\t\t\t\t\t\t\ttax: calculatedTotals.tax,\r\n\t\t\t\t\t\t\tshipping: calculatedTotals.shipping,\r\n\t\t\t\t\t\t\ttotal: calculatedTotals.total,\r\n\t\t\t\t\t\t\ttotal_discounts: calculatedTotals.totalDiscounts\r\n\t\t\t\t\t\t} : undefined\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tconst checkoutResponse = await checkoutService.processCheckout(checkoutRequestData, user?.email);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (checkoutResponse.status === \"success\") {\r\n\t\t\t\t\t\t\tconsole.log(\"‚úÖ Orden creada exitosamente:\", checkoutResponse.data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Combinar datos de Datafast y del checkout\r\n\t\t\t\t\t\t\tconst finalOrderData = {\r\n\t\t\t\t\t\t\t\t...verifyResponse.data,\r\n\t\t\t\t\t\t\t\torder_id: checkoutResponse.data.order_id || verifyResponse.data.order_id,\r\n\t\t\t\t\t\t\t\torder_number: checkoutResponse.data.order_number || verifyResponse.data.order_number\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsetResult({\r\n\t\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\t\tdata: finalOrderData,\r\n\t\t\t\t\t\t\t\tmessage: \"Pago y orden procesados exitosamente\",\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Guardar resultado para recuperaci√≥n en caso de recarga\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"datafast_order_result\", JSON.stringify(finalOrderData));\r\n\t\t\t\t\t\t\tlocalStorage.setItem(\"datafast_order_timestamp\", Date.now().toString());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// Limpiar carrito\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tclearCart();\r\n\t\t\t\t\t\t\t\tshowNotification(\r\n\t\t\t\t\t\t\t\t\tNotificationType.SUCCESS,\r\n\t\t\t\t\t\t\t\t\t\"¬°Pago y orden completados exitosamente!\"\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrow new Error(checkoutResponse.message || \"Error al crear la orden\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (checkoutError) {\r\n\t\t\t\t\t\tconsole.error(\"Error creando orden:\", checkoutError);\r\n\t\t\t\t\t\t// A√∫n as√≠ mostrar que el pago fue exitoso\r\n\t\t\t\t\t\tsetResult({\r\n\t\t\t\t\t\t\tsuccess: true,\r\n\t\t\t\t\t\t\tdata: verifyResponse.data,\r\n\t\t\t\t\t\t\tmessage: \"Pago procesado (orden pendiente de creaci√≥n)\",\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// Limpiar carrito de todas formas\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tclearCart();\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Limpiar datos temporales\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_transaction_id\");\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_calculated_total\");\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_form_data\");\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_cart_backup\");\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_checkout_id\");\r\n\t\t\t\t\tlocalStorage.removeItem(\"datafast_resource_path\");\r\n\r\n\t\t\t\t\t// Redirigir despu√©s de 8 segundos\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tnavigate(\"/orders\");\r\n\t\t\t\t\t}, 8000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Pago fallido o pendiente\r\n\t\t\t\t\tconst message = verifyResponse.message || \"El pago no fue completado\";\r\n\t\t\t\t\tconst resultCode = verifyResponse.result_code;\r\n\r\n\t\t\t\t\tconsole.warn(\"Pago no exitoso:\", {\r\n\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\tresultCode,\r\n\t\t\t\t\t\tfullResponse: verifyResponse,\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Mensajes espec√≠ficos seg√∫n el c√≥digo de resultado\r\n\t\t\t\t\tlet userMessage = message;\r\n\t\t\t\t\tif (resultCode === \"000.200.100\") {\r\n\t\t\t\t\t\tuserMessage =\r\n\t\t\t\t\t\t\t\"El checkout fue creado pero el pago no se complet√≥. Por favor, intente nuevamente.\";\r\n\t\t\t\t\t} else if (resultCode === \"200.300.404\") {\r\n\t\t\t\t\t\t// Sesi√≥n expirada - esto es normal despu√©s de un pago exitoso\r\n\t\t\t\t\t\tuserMessage =\r\n\t\t\t\t\t\t\t\"La sesi√≥n de pago expir√≥. Si el pago fue exitoso, aparecer√° en sus √≥rdenes.\";\r\n\t\t\t\t\t} else if (resultCode && resultCode.startsWith(\"800\")) {\r\n\t\t\t\t\t\tuserMessage =\r\n\t\t\t\t\t\t\t\"El pago fue rechazado por el banco. Verifique sus datos e intente nuevamente.\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthrow new Error(userMessage);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error al procesar resultado de Datafast:\", error);\r\n\r\n\t\t\t\tconst errorMessage =\r\n\t\t\t\t\terror instanceof Error\r\n\t\t\t\t\t\t? error.message\r\n\t\t\t\t\t\t: \"Error desconocido al procesar el pago\";\r\n\t\t\t\tsetError(errorMessage);\r\n\r\n\t\t\t\t// Usar setTimeout para evitar setState durante render\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tshowNotification(NotificationType.ERROR, errorMessage);\r\n\t\t\t\t}, 100);\r\n\r\n\t\t\t\t// Redirigir al carrito despu√©s de 8 segundos\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tnavigate(\"/cart\");\r\n\t\t\t\t}, 8000);\r\n\t\t\t} finally {\r\n\t\t\t\tsetIsProcessing(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tprocessDatafastResult();\r\n\t}, [searchParams, navigate, cart]);\r\n\r\n\tif (isProcessing) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4\"></div>\r\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\tProcesando pago...\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p className=\"text-gray-600\">\r\n\t\t\t\t\t\t\tEstamos verificando tu pago con Datafast. Por favor espera.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className=\"mt-4 text-sm text-gray-500\">\r\n\t\t\t\t\t\t\t<p>Este proceso puede tomar unos segundos.</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-8 h-8 text-red-500\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M6 18L18 6M6 6l12 12\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\tError en el pago\r\n\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t<p className=\"text-gray-600 mb-6\">{error}</p>\r\n\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t<p>Ser√°s redirigido al carrito en {countdown} segundos...</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/cart\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tVolver al carrito\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (result && result.success && result.data) {\r\n\t\treturn (\r\n\t\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-lg w-full mx-4\">\r\n\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t<div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\tclassName=\"w-8 h-8 text-green-500\"\r\n\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\td=\"M5 13l4 4L19 7\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<h2 className=\"text-2xl font-bold text-gray-800 mb-2\">\r\n\t\t\t\t\t\t\t¬°Pago exitoso!\r\n\t\t\t\t\t\t</h2>\r\n\r\n\t\t\t\t\t\t<p className=\"text-gray-600 mb-6\">\r\n\t\t\t\t\t\t\tTu pago ha sido procesado correctamente con Datafast.\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t{/* Detalles del pedido */}\r\n\t\t\t\t\t\t<div className=\"bg-gray-50 rounded-lg p-6 mb-6 text-left\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold text-gray-800 mb-4 text-center\">\r\n\t\t\t\t\t\t\t\tDetalles del pedido\r\n\t\t\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t\t\t<div className=\"space-y-3\">\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">N√∫mero de orden:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t{result.data.order_number}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">ID de pago:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-medium text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t{result.data.payment_id}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Total pagado:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"font-bold text-lg text-primary-600\">\r\n\t\t\t\t\t\t\t\t\t\t{formatCurrency(result.data.total)}\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"text-gray-600\">Estado del pago:</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n\t\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-3 h-3 mr-1\"\r\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t\td=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t\tCompletado\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Informaci√≥n adicional */}\r\n\t\t\t\t\t\t<div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-start\">\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-5 h-5 text-blue-500 mt-0.5 mr-2 flex-shrink-0\"\r\n\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 20\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t\td=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\"\r\n\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t<div className=\"text-sm text-blue-700\">\r\n\t\t\t\t\t\t\t\t\t<p className=\"font-medium mb-1\">¬øQu√© sigue?</p>\r\n\t\t\t\t\t\t\t\t\t<ul className=\"text-xs space-y-1\">\r\n\t\t\t\t\t\t\t\t\t\t<li>‚Ä¢ Recibir√°s un correo de confirmaci√≥n</li>\r\n\t\t\t\t\t\t\t\t\t\t<li>‚Ä¢ Procesaremos tu pedido en las pr√≥ximas 24 horas</li>\r\n\t\t\t\t\t\t\t\t\t\t<li>‚Ä¢ Te notificaremos cuando tu pedido sea enviado</li>\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Informaci√≥n de redirecci√≥n */}\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\tSer√°s redirigido a tus pedidos en{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"font-medium text-primary-600\">\r\n\t\t\t\t\t\t\t\t\t{countdown}\r\n\t\t\t\t\t\t\t\t</span>{\" \"}\r\n\t\t\t\t\t\t\t\tsegundos...\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{/* Botones de acci√≥n */}\r\n\t\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/orders\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tVer mis pedidos\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={() => navigate(\"/products\")}\r\n\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-primary-600 text-primary-600 hover:bg-primary-50 font-medium py-3 px-4 rounded-md transition-colors flex items-center justify-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\tclassName=\"w-4 h-4 mr-2\"\r\n\t\t\t\t\t\t\t\t\tfill=\"none\"\r\n\t\t\t\t\t\t\t\t\tstroke=\"currentColor\"\r\n\t\t\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinecap=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeLinejoin=\"round\"\r\n\t\t\t\t\t\t\t\t\t\tstrokeWidth={2}\r\n\t\t\t\t\t\t\t\t\t\td=\"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\tSeguir comprando\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Fallback - no deber√≠a llegar aqu√≠ normalmente\r\n\treturn (\r\n\t\t<div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<h2 className=\"text-xl font-semibold text-gray-800 mb-2\">\r\n\t\t\t\t\t\tEstado desconocido\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t<p className=\"text-gray-600 mb-6\">\r\n\t\t\t\t\t\tNo se pudo determinar el estado del pago.\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t<div className=\"flex flex-col sm:flex-row gap-3\">\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigate(\"/cart\")}\r\n\t\t\t\t\t\t\tclassName=\"flex-1 bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tVolver al carrito\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => navigate(\"/\")}\r\n\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium py-2 px-4 rounded-md transition-colors\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tIr a inicio\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DatafastResultPage;\r\n"],"names":["DatafastResultPage","useDatafastCSP","navigate","useNavigate","searchParams","useSearchParams","cart","clearCart","showNotification","appliedDiscount","useCart","user","useAuth","isProcessing","setIsProcessing","useState","result","setResult","error","setError","countdown","datafastService","DatafastService","checkoutService","CheckoutService","useEffect","resourcePath","orderDataStr","orderTimestamp","now","timestamp","orderData","NotificationType","e","transactionId","checkoutIdMatch","checkoutId","calculatedTotalStr","calculatedTotal","verifyResponse","formDataStr","cartBackupStr","formData","cartToProcess","sellerId","items","CheckoutItemsService","invalidItems","item","i","calculatedTotals","datafastAmount","ourTotal","totalsMatch","validateTotalsEquality","CALCULATION_CONFIG","checkoutRequestData","checkoutResponse","finalOrderData","checkoutError","message","resultCode","userMessage","errorMessage","jsx","jsxs"],"mappings":"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"}
{"version":3,"file":"AdminProductEditPage-uM1NGDv-.js","sources":["../../src/presentation/pages/admin/AdminProductEditPage.tsx"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport {useNavigate, useParams} from \"react-router-dom\";\nimport {\n\tSave,\n\tX,\n\tUpload,\n\tPlus,\n\tTrash2,\n\tChevronDown,\n\tChevronUp,\n\tPalette,\n\tRuler,\n\tTag,\n\tDollarSign,\n\tPackageOpen,\n\tFileText,\n\tImage,\n\tStore,\n\tLoader,\n\tUser,\n} from \"lucide-react\";\nimport {useAdminProducts} from \"../../hooks/useAdminProducts\";\nimport useCategoriesSelect from \"../../hooks/useCategoriesSelect\";\nimport appConfig from \"../../../config/appConfig\";\nimport type {ProductImage} from \"../../../core/domain/entities/Product\";\nimport ApiClient from \"../../../infrastructure/api/apiClient\";\n\n// ✅ Interfaz de estado del formulario para admin (incluye selector de vendedor)\ninterface FormDataState {\n\t// Información básica (requerida)\n\tname: string;\n\tdescription: string;\n\tshort_description: string;\n\n\t// Categorización\n\tparentCategory: string;\n\tcategory: string;\n\ttags: string[];\n\tcurrentTag: string;\n\n\t// Precios y stock\n\tprice: string;\n\tstock: string;\n\tdiscount_percentage: string;\n\n\t// Características físicas\n\tweight: string;\n\twidth: string;\n\theight: string;\n\tdepth: string;\n\tdimensions: string;\n\n\t// Variaciones\n\tcolors: string[];\n\tcurrentColor: string;\n\tsizes: string[];\n\tcurrentSize: string;\n\n\t// Atributos personalizados\n\tattributes: Array<{key: string; value: string}>;\n\tcurrentAttributeKey: string;\n\tcurrentAttributeValue: string;\n\n\t// Multimedia\n\timages: File[];\n\texistingImages: ProductImage[];\n\tpreviewImages: string[];\n\timagesToRemove: number[];\n\n\t// Configuración avanzada\n\tstatus: string;\n\tfeatured: boolean;\n\tpublished: boolean;\n\n\t// ✅ NUEVO: Selector de vendedor para admin\n\tsellerId: string;\n}\n\ninterface Seller {\n\tid: number;\n\tname: string;\n\tstore_name?: string;\n\tuser_id: number;\n\tstatus: string;\n}\n\nconst AdminProductEditPage: React.FC = () => {\n\tconst navigate = useNavigate();\n\tconst {id} = useParams<{id: string}>();\n\tconst productId = id ? parseInt(id) : 0;\n\n\tconst [isLoading, setIsLoading] = useState(true);\n\tconst [saving, setSaving] = useState(false);\n\tconst [sellers, setSellers] = useState<Seller[]>([]);\n\tconst [loadingSellers, setLoadingSellers] = useState(true);\n\t\n\tconst {updateProduct, fetchProductById} = useAdminProducts();\n\tconst {\n\t\tparentCategoryOptions,\n\t\tsubcategoryOptions,\n\t\tselectedParentId,\n\t\tsetSelectedParentId,\n\t\tloading: loadingCategories,\n\t} = useCategoriesSelect();\n\n\t// Estados para controlar las secciones expandidas\n\tconst [expandedSections, setExpandedSections] = useState({\n\t\tbasic: true,\n\t\tpricing: true,\n\t\tcategorization: true,\n\t\tphysical: false,\n\t\tvariations: false,\n\t\tmedia: true,\n\t\tseo: false,\n\t\tadvanced: false,\n\t\tseller: true, // ✅ Nueva sección para selección de vendedor\n\t});\n\n\t// Estado del formulario con tipo explícito\n\tconst [formData, setFormData] = useState<FormDataState>({\n\t\t// Información básica (requerida)\n\t\tname: \"\",\n\t\tdescription: \"\",\n\t\tshort_description: \"\",\n\n\t\t// Categorización\n\t\tparentCategory: \"\",\n\t\tcategory: \"\",\n\t\ttags: [],\n\t\tcurrentTag: \"\",\n\n\t\t// Precios y stock\n\t\tprice: \"\",\n\t\tstock: \"\",\n\t\tdiscount_percentage: \"\",\n\n\t\t// Características físicas\n\t\tweight: \"\",\n\t\twidth: \"\",\n\t\theight: \"\",\n\t\tdepth: \"\",\n\t\tdimensions: \"\",\n\n\t\t// Variaciones\n\t\tcolors: [],\n\t\tcurrentColor: \"\",\n\t\tsizes: [],\n\t\tcurrentSize: \"\",\n\n\t\t// Atributos personalizados\n\t\tattributes: [],\n\t\tcurrentAttributeKey: \"\",\n\t\tcurrentAttributeValue: \"\",\n\n\t\t// Multimedia\n\t\timages: [],\n\t\texistingImages: [],\n\t\tpreviewImages: [],\n\t\timagesToRemove: [],\n\n\t\t// Configuración avanzada\n\t\tstatus: \"active\",\n\t\tfeatured: false,\n\t\tpublished: true,\n\n\t\t// Selector de vendedor\n\t\tsellerId: \"\",\n\t});\n\n\t// Validación de campos requeridos\n\tconst requiredFields = [\"name\", \"description\", \"price\", \"stock\", \"category\", \"sellerId\"];\n\tconst [validationErrors, setValidationErrors] = useState<\n\t\tRecord<string, string>\n\t>({});\n\n\t// ✅ Cargar vendedores disponibles\n\tuseEffect(() => {\n\t\tconst loadSellers = async () => {\n\t\t\ttry {\n\t\t\t\tsetLoadingSellers(true);\n\t\t\t\tconst response = await ApiClient.get('/admin/sellers-simple');\n\t\t\t\tconsole.log('Sellers API response:', response); // Debug log\n\t\t\t\t\n\t\t\t\t// Manejo flexible de la respuesta\n\t\t\t\tif ((response as any)?.data) {\n\t\t\t\t\tconst sellersData = (response as any).data?.data || (response as any).data;\n\t\t\t\t\tconsole.log('Processed sellers data:', sellersData); // Debug log\n\t\t\t\t\tsetSellers(Array.isArray(sellersData) ? sellersData : []);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('No data in sellers response:', response);\n\t\t\t\t\tsetSellers([]);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Error loading sellers:', error);\n\t\t\t\tsetSellers([]);\n\t\t\t} finally {\n\t\t\t\tsetLoadingSellers(false);\n\t\t\t}\n\t\t};\n\n\t\tloadSellers();\n\t}, []);\n\n\t// Cargar datos del producto al montar el componente\n\tuseEffect(() => {\n\t\tconst loadProductData = async () => {\n\t\t\tif (!productId) {\n\t\t\t\tnavigate(\"/admin/products\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tsetIsLoading(true);\n\t\t\t\tconst product = await fetchProductById(productId);\n\n\t\t\t\tif (!product) {\n\t\t\t\t\tthrow new Error(\"No se pudo obtener la información del producto\");\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"Producto recibido:\", product);\n\t\t\t\tconsole.log(\"Category ID:\", product.category_id);\n\t\t\t\tconsole.log(\"Category:\", product.category);\n\n\t\t\t\t// Manejar parent_id de categoria apropiadamente\n\t\t\t\tlet parentCategoryId = product.category?.parent_id;\n\t\t\t\tlet categoryId = product.category_id;\n\n\t\t\t\t// Si la categoría no tiene padre, entonces es una categoría principal\n\t\t\t\tif (!parentCategoryId) {\n\t\t\t\t\tparentCategoryId = categoryId;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"⭐ Valores de categoría actualizados:\", {\n\t\t\t\t\tparentCategoryId,\n\t\t\t\t\tcategoryId,\n\t\t\t\t\tcategoryIdType: typeof categoryId,\n\t\t\t\t\tparentCategoryIdType: typeof parentCategoryId,\n\t\t\t\t});\n\n\t\t\t\t// Importante: Actualizar selectedParentId antes de establecer formData\n\t\t\t\tif (parentCategoryId) {\n\t\t\t\t\tsetSelectedParentId(Number(parentCategoryId));\n\t\t\t\t}\n\n\t\t\t\t// Pequeña pausa para permitir que selectedParentId se actualice\n\t\t\t\tawait new Promise((resolve) => setTimeout(resolve, 10));\n\n\t\t\t\t// Procesar arrays que vienen como strings (colores, tamaños, etiquetas)\n\t\t\t\tconst processArray = (data: any[]): string[] => {\n\t\t\t\t\tif (!Array.isArray(data) || data.length === 0) return [];\n\n\t\t\t\t\t// Para el formato específico que viene en la respuesta:\n\t\t\t\t\t// Cuando los arrays vienen fragmentados como ['[\\\"rojo\\\"', '\\\"negro\\\"', '\\\"blanco\\\"]']\n\t\t\t\t\tif (\n\t\t\t\t\t\tdata.some((item) => typeof item === \"string\" && item.includes('\"'))\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst combinedString = data.join(\"\");\n\t\t\t\t\t\tconst matches = combinedString.match(/\\\"([^\\\"]+)\\\"/g) || [];\n\t\t\t\t\t\treturn matches.map((m) => m.replace(/\"/g, \"\"));\n\t\t\t\t\t}\n\n\t\t\t\t\t// Para arrays normales\n\t\t\t\t\treturn data\n\t\t\t\t\t\t.map((item) =>\n\t\t\t\t\t\t\ttypeof item === \"string\"\n\t\t\t\t\t\t\t\t? item.replace(/[\\[\\]\"\\\\]/g, \"\").trim()\n\t\t\t\t\t\t\t\t: String(item)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.filter(Boolean);\n\t\t\t\t};\n\n\t\t\t\t// ✅ Configurar el estado inicial con tipos seguros\n\t\t\t\tsetFormData((prev) => {\n\t\t\t\t\tconsole.log(\"Actualizando formData con valores:\", {\n\t\t\t\t\t\tparentCategory: String(parentCategoryId),\n\t\t\t\t\t\tcategory: String(categoryId),\n\t\t\t\t\t\tsellerId: String(product.sellerId || product.seller_id || product.seller?.id || \"\"),\n\t\t\t\t\t});\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tname: product.name || \"\",\n\t\t\t\t\t\tdescription: product.description || \"\",\n\t\t\t\t\t\tshort_description: product.shortDescription || \"\",\n\t\t\t\t\t\tprice: product.price ? product.price.toString() : \"\",\n\t\t\t\t\t\tstock: product.stock ? product.stock.toString() : \"\",\n\t\t\t\t\t\tdiscount_percentage: product.discount_percentage\n\t\t\t\t\t\t\t? product.discount_percentage.toString()\n\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\tweight: product.weight ? product.weight.toString() : \"\",\n\t\t\t\t\t\twidth: product.width ? product.width.toString() : \"\",\n\t\t\t\t\t\theight: product.height ? product.height.toString() : \"\",\n\t\t\t\t\t\tdepth: product.depth ? product.depth.toString() : \"\",\n\t\t\t\t\t\tdimensions: product.dimensions || \"\",\n\t\t\t\t\t\tstatus: product.status || \"active\",\n\t\t\t\t\t\tfeatured: !!product.featured,\n\t\t\t\t\t\tpublished: !!product.published,\n\t\t\t\t\t\tparentCategory: parentCategoryId ? String(parentCategoryId) : \"\",\n\t\t\t\t\t\tcategory: categoryId ? String(categoryId) : \"\",\n\t\t\t\t\t\tsellerId: String(product.sellerId || product.seller_id || product.seller?.id || \"\"),\n\t\t\t\t\t\t// Procesar arrays que podrían venir en formato incorrecto\n\t\t\t\t\t\ttags: processArray(product.tags || []),\n\t\t\t\t\t\tcolors: processArray(product.colors || []),\n\t\t\t\t\t\tsizes: processArray(product.sizes || []),\n\t\t\t\t\t\t// Parsear los atributos correctamente\n\t\t\t\t\t\tattributes: Array.isArray(product.attributes)\n\t\t\t\t\t\t\t? product.attributes\n\t\t\t\t\t\t\t: typeof product.attributes === \"string\" && product.attributes\n\t\t\t\t\t\t\t\t? (() => {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\treturn JSON.parse(product.attributes);\n\t\t\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\t\t\tconsole.error(\"Error al parsear atributos:\", e);\n\t\t\t\t\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})()\n\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t// Procesar imágenes existentes de manera segura\n\t\t\t\t\t\texistingImages: Array.isArray(product.images)\n\t\t\t\t\t\t\t? product.images.map((img): ProductImage => {\n\t\t\t\t\t\t\t\t\tif (typeof img === \"string\") {\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\toriginal: img,\n\t\t\t\t\t\t\t\t\t\t\tthumbnail: img,\n\t\t\t\t\t\t\t\t\t\t\tmedium: img,\n\t\t\t\t\t\t\t\t\t\t\tlarge: img,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// img ya es ProductImage, asegurar que tiene todas las propiedades\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\tid: img.id,\n\t\t\t\t\t\t\t\t\t\t\toriginal: img.original || \"\",\n\t\t\t\t\t\t\t\t\t\t\tthumbnail: img.thumbnail || img.original || \"\",\n\t\t\t\t\t\t\t\t\t\t\tmedium: img.medium || img.original || \"\",\n\t\t\t\t\t\t\t\t\t\t\tlarge: img.large || img.original || \"\",\n\t\t\t\t\t\t\t\t\t\t\talt: img.alt,\n\t\t\t\t\t\t\t\t\t\t\tposition: img.position,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\timages: [],\n\t\t\t\t\t\tpreviewImages: Array.isArray(product.images)\n\t\t\t\t\t\t\t? product.images.map((img) => {\n\t\t\t\t\t\t\t\t\tconst baseUrl = appConfig.imageBaseUrl; // URL base para imágenes\n\t\t\t\t\t\t\t\t\tlet imagePath;\n\n\t\t\t\t\t\t\t\t\tif (typeof img === \"string\") {\n\t\t\t\t\t\t\t\t\t\timagePath = img;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Obtener ruta de imagen\n\t\t\t\t\t\t\t\t\t\timagePath = img.original || img.medium || img.thumbnail;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Asegurarnos de que la ruta esté completa\n\t\t\t\t\t\t\t\t\tif (imagePath && !imagePath.startsWith(\"http\")) {\n\t\t\t\t\t\t\t\t\t\treturn `${baseUrl}${imagePath}`;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn imagePath || \"\";\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\timagesToRemove: [],\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"Error al cargar los datos del producto:\", error);\n\t\t\t\talert(\"No se pudo cargar el producto. Inténtalo de nuevo más tarde.\");\n\t\t\t\tnavigate(\"/admin/products\");\n\t\t\t} finally {\n\t\t\t\tsetIsLoading(false);\n\t\t\t}\n\t\t};\n\n\t\tloadProductData();\n\t}, [productId, navigate, fetchProductById]);\n\n\tuseEffect(() => {\n\t\t// Solo ejecutar si tenemos la categoría ya cargada y selectedParentId cambia\n\t\tif (!isLoading && formData.category) {\n\t\t\tconsole.log(\"selectedParentId cambió a:\", selectedParentId);\n\n\t\t\t// Actualiza el formData con el nuevo selectedParentId como categoría padre\n\t\t\tif (selectedParentId) {\n\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tparentCategory: String(selectedParentId),\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}, [selectedParentId, isLoading]);\n\n\t// Toggle para expandir/colapsar secciones\n\tconst toggleSection = (section: keyof typeof expandedSections) => {\n\t\tsetExpandedSections((prev) => ({\n\t\t\t...prev,\n\t\t\t[section]: !prev[section],\n\t\t}));\n\t};\n\n\t// Agregar console.log en handleInputChange para verificar actualizaciones\n\tconst handleInputChange = (\n\t\te: React.ChangeEvent<\n\t\t\tHTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\n\t\t>\n\t) => {\n\t\tconst {name, value, type} = e.target;\n\n\t\t// Manejar checkboxes\n\t\tif (type === \"checkbox\") {\n\t\t\tconst checked = (e.target as HTMLInputElement).checked;\n\t\t\tsetFormData((prev) => {\n\t\t\t\tconst updatedFormData = {...prev, [name]: checked};\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"handleInputChange - Checkbox actualizado:\",\n\t\t\t\t\tupdatedFormData\n\t\t\t\t);\n\t\t\t\treturn updatedFormData;\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\t// Usar type assertion para acceder a propiedades del estado\n\t\tsetFormData((prev) => {\n\t\t\tconst updatedFormData = {...prev, [name as keyof FormDataState]: value};\n\t\t\tconsole.log(\"handleInputChange - Input actualizado:\", updatedFormData);\n\t\t\treturn updatedFormData;\n\t\t});\n\n\t\t// Si cambia la categoría padre, actualizar el estado para el filtrado de subcategorías\n\t\tif (name === \"parentCategory\" && value) {\n\t\t\tsetSelectedParentId(parseInt(value));\n\t\t\t// Resetear la selección de subcategoría\n\t\t\tsetFormData((prev) => {\n\t\t\t\tconst updatedFormData = {...prev, category: \"\"};\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"handleInputChange - parentCategory cambiado, subcategoría reseteada:\",\n\t\t\t\t\tupdatedFormData\n\t\t\t\t);\n\t\t\t\treturn updatedFormData;\n\t\t\t});\n\t\t}\n\n\t\t// Limpiar errores de validación al cambiar un campo\n\t\tif (validationErrors[name]) {\n\t\t\tsetValidationErrors((prev) => {\n\t\t\t\tconst newErrors = {...prev};\n\t\t\t\tdelete newErrors[name];\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"handleInputChange - Error de validación eliminado para:\",\n\t\t\t\t\tname\n\t\t\t\t);\n\t\t\t\treturn newErrors;\n\t\t\t});\n\t\t}\n\t};\n\n\t// Handle image upload\n\tconst handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (e.target.files && e.target.files.length > 0) {\n\t\t\tconst newImages = Array.from(e.target.files);\n\t\t\tconst newPreviews = newImages.map((file) => URL.createObjectURL(file));\n\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\timages: [...prev.images, ...newImages],\n\t\t\t\tpreviewImages: [...prev.previewImages, ...newPreviews],\n\t\t\t}));\n\t\t}\n\t};\n\n\t// Remove new image\n\tconst removeNewImage = (index: number) => {\n\t\tconst newImages = [...formData.images];\n\t\tconst newPreviews = [...formData.previewImages];\n\n\t\t// Revoke object URL to prevent memory leaks\n\t\tURL.revokeObjectURL(newPreviews[index]);\n\n\t\tnewImages.splice(index, 1);\n\t\tnewPreviews.splice(index, 1);\n\n\t\tsetFormData((prev) => ({\n\t\t\t...prev,\n\t\t\timages: newImages,\n\t\t\tpreviewImages: newPreviews,\n\t\t}));\n\t};\n\n\t// Remove existing image\n\tconst removeExistingImage = (index: number) => {\n\t\tconst updatedExistingImages = [...formData.existingImages];\n\t\tconst removedImage = updatedExistingImages[index];\n\n\t\t// Si la imagen tiene ID, la añadimos a la lista para eliminarla en el servidor\n\t\tif (removedImage.id) {\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\timagesToRemove: [...prev.imagesToRemove, removedImage.id as number],\n\t\t\t}));\n\t\t}\n\n\t\tupdatedExistingImages.splice(index, 1);\n\n\t\tsetFormData((prev) => ({\n\t\t\t...prev,\n\t\t\texistingImages: updatedExistingImages,\n\t\t}));\n\t};\n\n\t// Add tag\n\tconst addTag = () => {\n\t\tif (\n\t\t\tformData.currentTag.trim() &&\n\t\t\t!formData.tags.includes(formData.currentTag.trim())\n\t\t) {\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\ttags: [...prev.tags, prev.currentTag.trim()],\n\t\t\t\tcurrentTag: \"\",\n\t\t\t}));\n\t\t}\n\t};\n\n\t// Remove tag\n\tconst removeTag = (tag: string) => {\n\t\tsetFormData((prev) => ({\n\t\t\t...prev,\n\t\t\ttags: prev.tags.filter((t) => t !== tag),\n\t\t}));\n\t};\n\n\t// Handle tag input keydown\n\tconst handleTagKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\taddTag();\n\t\t}\n\t};\n\n\t// Add color\n\tconst addColor = () => {\n\t\tif (\n\t\t\tformData.currentColor.trim() &&\n\t\t\t!formData.colors.includes(formData.currentColor.trim())\n\t\t) {\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tcolors: [...prev.colors, formData.currentColor.trim()],\n\t\t\t\tcurrentColor: \"\",\n\t\t\t}));\n\t\t}\n\t};\n\n\t// Remove color\n\tconst removeColor = (color: string) => {\n\t\tsetFormData((prev) => ({\n\t\t\t...prev,\n\t\t\tcolors: prev.colors.filter((c) => c !== color),\n\t\t}));\n\t};\n\n\t// Handle color input keydown\n\tconst handleColorKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\taddColor();\n\t\t}\n\t};\n\n\t// Add size\n\tconst addSize = () => {\n\t\tif (\n\t\t\tformData.currentSize.trim() &&\n\t\t\t!formData.sizes.includes(formData.currentSize.trim())\n\t\t) {\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tsizes: [...prev.sizes, formData.currentSize.trim()],\n\t\t\t\tcurrentSize: \"\",\n\t\t\t}));\n\t\t}\n\t};\n\n\t// Remove size\n\tconst removeSize = (size: string) => {\n\t\tsetFormData((prev) => ({\n\t\t\t...prev,\n\t\t\tsizes: prev.sizes.filter((s) => s !== size),\n\t\t}));\n\t};\n\n\t// Handle size input keydown\n\tconst handleSizeKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\taddSize();\n\t\t}\n\t};\n\n\t// Add attribute\n\tconst addAttribute = () => {\n\t\tconst key = formData.currentAttributeKey.trim();\n\t\tconst value = formData.currentAttributeValue.trim();\n\n\t\tif (key && value) {\n\t\t\tsetFormData((prev) => ({\n\t\t\t\t...prev,\n\t\t\t\tattributes: [...prev.attributes, {key, value}],\n\t\t\t\tcurrentAttributeKey: \"\",\n\t\t\t\tcurrentAttributeValue: \"\",\n\t\t\t}));\n\t\t}\n\t};\n\n\t// Remove attribute\n\tconst removeAttribute = (index: number) => {\n\t\tsetFormData((prev) => {\n\t\t\tconst newAttributes = [...prev.attributes];\n\t\t\tnewAttributes.splice(index, 1);\n\t\t\treturn {\n\t\t\t\t...prev,\n\t\t\t\tattributes: newAttributes,\n\t\t\t};\n\t\t});\n\t};\n\n\t// Handle attribute input keydown\n\tconst handleAttributeKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\t// Mover el foco al campo de valor\n\t\t\tconst valueInput = document.getElementById(\"attributeValue\");\n\t\t\tif (valueInput) {\n\t\t\t\tvalueInput.focus();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst handleAttributeValueKeyDown = (\n\t\te: React.KeyboardEvent<HTMLInputElement>\n\t) => {\n\t\tif (e.key === \"Enter\") {\n\t\t\te.preventDefault();\n\t\t\taddAttribute();\n\t\t}\n\t};\n\n\t// Validar el formulario\n\tconst validateForm = (): boolean => {\n\t\tconst errors: Record<string, string> = {};\n\n\t\t// Validar campos requeridos\n\t\trequiredFields.forEach((field) => {\n\t\t\tconst value = formData[field as keyof FormDataState];\n\t\t\tif (!value) {\n\t\t\t\terrors[field] = `El campo ${field} es obligatorio`;\n\t\t\t}\n\t\t});\n\n\t\t// Validar que el precio sea un número positivo\n\t\tif (\n\t\t\tformData.price &&\n\t\t\t(isNaN(Number(formData.price)) || Number(formData.price) <= 0)\n\t\t) {\n\t\t\terrors.price = \"El precio debe ser un número mayor que cero\";\n\t\t}\n\n\t\t// Validar que el stock sea un número no negativo\n\t\tif (\n\t\t\tformData.stock &&\n\t\t\t(isNaN(Number(formData.stock)) || Number(formData.stock) < 0)\n\t\t) {\n\t\t\terrors.stock = \"El stock debe ser un número no negativo\";\n\t\t}\n\n\t\t// Validar que el descuento sea un número entre 0 y 100\n\t\tif (\n\t\t\tformData.discount_percentage &&\n\t\t\t(isNaN(Number(formData.discount_percentage)) ||\n\t\t\t\tNumber(formData.discount_percentage) < 0 ||\n\t\t\t\tNumber(formData.discount_percentage) > 100)\n\t\t) {\n\t\t\terrors.discount_percentage =\n\t\t\t\t\"El descuento debe ser un porcentaje entre 0 y 100\";\n\t\t}\n\n\t\t// Validar dimensiones numéricas si se proporcionan\n\t\t([\"weight\", \"width\", \"height\", \"depth\"] as const).forEach((field) => {\n\t\t\tconst value = formData[field];\n\t\t\tif (value && isNaN(Number(value))) {\n\t\t\t\terrors[field] = `El campo ${field} debe ser un número`;\n\t\t\t}\n\t\t});\n\n\t\tsetValidationErrors(errors);\n\t\treturn Object.keys(errors).length === 0;\n\t};\n\n\t// Asegurar que los datos enviados al backend estén completos y en el formato correcto\n\tconst handleSubmit = async (e: React.FormEvent) => {\n\t\te.preventDefault();\n\n\t\t// Validar formulario\n\t\tif (!validateForm()) {\n\t\t\tconst firstErrorField = Object.keys(validationErrors)[0];\n\t\t\tconst errorElement = document.getElementById(firstErrorField);\n\t\t\tif (errorElement) {\n\t\t\t\terrorElement.scrollIntoView({behavior: \"smooth\", block: \"center\"});\n\t\t\t\terrorElement.focus();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tsetSaving(true);\n\n\t\ttry {\n\t\t\t// Preparar datos para enviar a la API\n\t\t\tconst productData = {\n\t\t\t\tid: productId,\n\t\t\t\tname: formData.name,\n\t\t\t\tdescription: formData.description,\n\t\t\t\tshort_description: formData.short_description || undefined,\n\t\t\t\tprice: parseFloat(formData.price),\n\t\t\t\tstock: parseInt(formData.stock),\n\t\t\t\tcategory_id: parseInt(formData.category),\n\t\t\t\tseller_id: parseInt(formData.sellerId), // ✅ Incluir seller_id para admin\n\t\t\t\tstatus: formData.status,\n\t\t\t\ttags: formData.tags,\n\t\t\t\tdiscount_percentage: formData.discount_percentage\n\t\t\t\t\t? parseFloat(formData.discount_percentage)\n\t\t\t\t\t: undefined,\n\t\t\t\tweight: formData.weight ? parseFloat(formData.weight) : undefined,\n\t\t\t\twidth: formData.width ? parseFloat(formData.width) : undefined,\n\t\t\t\theight: formData.height ? parseFloat(formData.height) : undefined,\n\t\t\t\tdepth: formData.depth ? parseFloat(formData.depth) : undefined,\n\t\t\t\tcolors: formData.colors,\n\t\t\t\tsizes: formData.sizes,\n\t\t\t\tfeatured: formData.featured,\n\t\t\t\tpublished: formData.published,\n\t\t\t\treplace_images: false, // Asegurar que este campo esté presente\n\t\t\t};\n\n\t\t\t// Log para depuración\n\t\t\tconsole.log(\"Datos enviados al backend:\", productData);\n\n\t\t\t// Actualizar producto\n\t\t\tconst result = await updateProduct(productData);\n\n\t\t\tif (result) {\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"Respuesta del servidor después de la actualización:\",\n\t\t\t\t\tresult\n\t\t\t\t);\n\t\t\t\tnavigate(\"/admin/products\");\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"No se pudo actualizar el producto\");\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error al actualizar producto:\", error);\n\t\t\talert(\n\t\t\t\terror instanceof Error ? error.message : \"Error al actualizar producto\"\n\t\t\t);\n\t\t} finally {\n\t\t\tsetSaving(false);\n\t\t}\n\t};\n\n\tconst SectionHeader = ({\n\t\ttitle,\n\t\tsection,\n\t\ticon: Icon,\n\t}: {\n\t\ttitle: string;\n\t\tsection: keyof typeof expandedSections;\n\t\ticon: React.ElementType;\n\t}) => (\n\t\t<div\n\t\t\tclassName=\"flex items-center justify-between cursor-pointer py-3 border-b border-gray-200\"\n\t\t\tonClick={() => toggleSection(section)}\n\t\t>\n\t\t\t<div className=\"flex items-center\">\n\t\t\t\t<Icon className=\"w-5 h-5 text-primary-600 mr-2\" />\n\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\n\t\t\t</div>\n\t\t\t{expandedSections[section] ? (\n\t\t\t\t<ChevronUp className=\"w-5 h-5 text-gray-500\" />\n\t\t\t) : (\n\t\t\t\t<ChevronDown className=\"w-5 h-5 text-gray-500\" />\n\t\t\t)}\n\t\t</div>\n\t);\n\n\t// Si está cargando, mostrar pantalla de carga\n\tif (isLoading) {\n\t\treturn (\n\t\t\t<div className=\"flex flex-col items-center justify-center h-64\">\n\t\t\t\t<Loader className=\"w-12 h-12 text-primary-600 animate-spin mb-4\" />\n\t\t\t\t<p className=\"text-gray-600 text-lg\">Cargando datos del producto...</p>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\n\t\t\t\t\tEditar Producto (Admin): {formData.name}\n\t\t\t\t</h1>\n\t\t\t\t<div className=\"flex space-x-2\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={() => navigate(\"/admin/products\")}\n\t\t\t\t\t\tclassName=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<X size={18} className=\"inline mr-1\" /> Cancelar\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{saving ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<span className=\"inline-block animate-spin mr-1\">⟳</span>{\" \"}\n\t\t\t\t\t\t\t\tGuardando...\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Save size={18} className=\"inline mr-1\" /> Guardar Cambios\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* Formulario de edición */}\n\t\t\t<form onSubmit={handleSubmit} className=\"space-y-6\">\n\t\t\t\t{/* ✅ NUEVA SECCIÓN: Asignación de Vendedor */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Asignación de Vendedor\"\n\t\t\t\t\t\tsection=\"seller\"\n\t\t\t\t\t\ticon={User}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.seller && (\n\t\t\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"sellerId\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tVendedor Asignado <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t{loadingSellers ? (\n\t\t\t\t\t\t\t\t\t<div className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 text-gray-400\">\n\t\t\t\t\t\t\t\t\t\tCargando vendedores...\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"sellerId\"\n\t\t\t\t\t\t\t\t\t\tname=\"sellerId\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.sellerId}\n\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\t\tvalidationErrors.sellerId ? \"border-red-500\" : \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<option value=\"\">Seleccionar Vendedor</option>\n\t\t\t\t\t\t\t\t\t\t{sellers.map((seller) => (\n\t\t\t\t\t\t\t\t\t\t\t<option key={seller.id} value={seller.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t{seller.store_name || seller.name || `Vendedor ${seller.id}`}\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{validationErrors.sellerId && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.sellerId}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Información básica */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Información Básica\"\n\t\t\t\t\t\tsection=\"basic\"\n\t\t\t\t\t\ticon={FileText}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.basic && (\n\t\t\t\t\t\t<div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-6\">\n\t\t\t\t\t\t\t{/* Nombre del Producto */}\n\t\t\t\t\t\t\t<div className=\"md:col-span-2\">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"name\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tNombre del Producto <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"name\"\n\t\t\t\t\t\t\t\t\tname=\"name\"\n\t\t\t\t\t\t\t\t\tvalue={formData.name}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.name ? \"border-red-500\" : \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.name && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.name}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Descripción Corta */}\n\t\t\t\t\t\t\t<div className=\"md:col-span-2\">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"short_description\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDescripción Corta\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"short_description\"\n\t\t\t\t\t\t\t\t\tname=\"short_description\"\n\t\t\t\t\t\t\t\t\tvalue={formData.short_description}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tplaceholder=\"Resumen breve del producto (para listados y búsquedas)\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Descripción Completa */}\n\t\t\t\t\t\t\t<div className=\"md:col-span-2\">\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"description\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDescripción Completa <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\t\tname=\"description\"\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tvalue={formData.description}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.description\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.description && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.description}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Precios y Stock */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Precios y Stock\"\n\t\t\t\t\t\tsection=\"pricing\"\n\t\t\t\t\t\ticon={DollarSign}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.pricing && (\n\t\t\t\t\t\t<div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n\t\t\t\t\t\t\t{/* Precio */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"price\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPrecio ($) <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"price\"\n\t\t\t\t\t\t\t\t\tname=\"price\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tstep=\"0.01\"\n\t\t\t\t\t\t\t\t\tvalue={formData.price}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.price\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.price && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.price}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Descuento */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"discount_percentage\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tDescuento (%)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"discount_percentage\"\n\t\t\t\t\t\t\t\t\tname=\"discount_percentage\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\t\t\t\tvalue={formData.discount_percentage}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.discount_percentage\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.discount_percentage && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.discount_percentage}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Stock */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"stock\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tCantidad en Stock <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"stock\"\n\t\t\t\t\t\t\t\t\tname=\"stock\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tvalue={formData.stock}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.stock\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.stock && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.stock}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Estado del producto */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"status\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tEstado del Producto\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\tid=\"status\"\n\t\t\t\t\t\t\t\t\tname=\"status\"\n\t\t\t\t\t\t\t\t\tvalue={formData.status}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<option value=\"active\">Activo</option>\n\t\t\t\t\t\t\t\t\t<option value=\"inactive\">Inactivo</option>\n\t\t\t\t\t\t\t\t\t<option value=\"draft\">Borrador</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Configuración avanzada */}\n\t\t\t\t\t\t\t<div className=\"lg:col-span-2\">\n\t\t\t\t\t\t\t\t<div className=\"flex space-x-6\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"featured\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"featured\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={formData.featured}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"featured\" className=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\tProducto Destacado\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tid=\"published\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"published\"\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tchecked={formData.published}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<label htmlFor=\"published\" className=\"ml-2 block text-sm text-gray-900\">\n\t\t\t\t\t\t\t\t\t\t\tPublicado\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Categorización */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Categorización\"\n\t\t\t\t\t\tsection=\"categorization\"\n\t\t\t\t\t\ticon={Tag}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.categorization && (\n\t\t\t\t\t\t<div className=\"mt-4 space-y-6\">\n\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n\t\t\t\t\t\t\t\t{/* Categoría Principal */}\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"parentCategory\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tCategoría Principal <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t{loadingCategories ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 text-gray-400\">\n\t\t\t\t\t\t\t\t\t\t\tCargando categorías...\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\t\tid=\"parentCategory\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"parentCategory\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={formData.parentCategory}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\t\t\tvalidationErrors.parentCategory\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">Seleccionar Categoría Principal</option>\n\t\t\t\t\t\t\t\t\t\t\t{parentCategoryOptions.map((option) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<option key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{validationErrors.parentCategory && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t\t{validationErrors.parentCategory}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Subcategoría */}\n\t\t\t\t\t\t\t\t<div className={formData.parentCategory ? \"\" : \"opacity-50\"}>\n\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\thtmlFor=\"category\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tSubcategoría <span className=\"text-red-500\">*</span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tid=\"category\"\n\t\t\t\t\t\t\t\t\t\tname=\"category\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.category}\n\t\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\t\tdisabled={!formData.parentCategory}\n\t\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\t\tvalidationErrors.category\n\t\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 disabled:bg-gray-100 disabled:cursor-not-allowed`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{!formData.category && (\n\t\t\t\t\t\t\t\t\t\t\t<option value=\"\">\n\t\t\t\t\t\t\t\t\t\t\t\t{!formData.parentCategory\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Primero selecciona una categoría principal\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t: subcategoryOptions.length > 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"Seleccionar Subcategoría\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"No hay subcategorías disponibles\"}\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t\t{/* Opciones de subcategorías */}\n\t\t\t\t\t\t\t\t\t\t{subcategoryOptions.map((option) => (\n\t\t\t\t\t\t\t\t\t\t\t<option key={option.value} value={option.value}>\n\t\t\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t\t\t\t\t{/* Opción de usar categoría principal */}\n\t\t\t\t\t\t\t\t\t\t{formData.parentCategory && (\n\t\t\t\t\t\t\t\t\t\t\t<option value={formData.parentCategory}>\n\t\t\t\t\t\t\t\t\t\t\t\tUsar categoría principal\n\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t{validationErrors.category && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t\t{validationErrors.category}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Etiquetas (Tags) */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-2\">\n\t\t\t\t\t\t\t\t\tEtiquetas (Tags)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Añade una etiqueta y presiona Enter\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.currentTag}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentTag: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleTagKeyDown}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={addTag}\n\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Plus size={18} />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2 mt-2\">\n\t\t\t\t\t\t\t\t\t{formData.tags.map((tag) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={tag}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-gray-100 text-gray-800 px-2 py-1 rounded-md flex items-center\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span>{tag}</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeTag(tag)}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-1 text-gray-500 hover:text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X size={14} />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{formData.tags.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tAún no se han añadido etiquetas\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Características Físicas */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Características Físicas\"\n\t\t\t\t\t\tsection=\"physical\"\n\t\t\t\t\t\ticon={PackageOpen}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.physical && (\n\t\t\t\t\t\t<div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n\t\t\t\t\t\t\t{/* Peso */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"weight\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tPeso (kg)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"weight\"\n\t\t\t\t\t\t\t\t\tname=\"weight\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tstep=\"0.001\"\n\t\t\t\t\t\t\t\t\tvalue={formData.weight}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.weight\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.weight && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.weight}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Ancho */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"width\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tAncho (cm)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"width\"\n\t\t\t\t\t\t\t\t\tname=\"width\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\t\t\t\tvalue={formData.width}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.width\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.width && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.width}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Alto */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"height\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tAlto (cm)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"height\"\n\t\t\t\t\t\t\t\t\tname=\"height\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\t\t\t\tvalue={formData.height}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.height\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.height && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.height}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Profundidad */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"depth\"\n\t\t\t\t\t\t\t\t\tclassName=\"block text-sm font-medium text-gray-700 mb-1\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tProfundidad (cm)\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tid=\"depth\"\n\t\t\t\t\t\t\t\t\tname=\"depth\"\n\t\t\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\t\t\tstep=\"0.1\"\n\t\t\t\t\t\t\t\t\tvalue={formData.depth}\n\t\t\t\t\t\t\t\t\tonChange={handleInputChange}\n\t\t\t\t\t\t\t\t\tclassName={`w-full px-3 py-2 border ${\n\t\t\t\t\t\t\t\t\t\tvalidationErrors.depth\n\t\t\t\t\t\t\t\t\t\t\t? \"border-red-500\"\n\t\t\t\t\t\t\t\t\t\t\t: \"border-gray-300\"\n\t\t\t\t\t\t\t\t\t} rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{validationErrors.depth && (\n\t\t\t\t\t\t\t\t\t<p className=\"mt-1 text-sm text-red-500\">\n\t\t\t\t\t\t\t\t\t\t{validationErrors.depth}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Variaciones */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Variaciones y Atributos\"\n\t\t\t\t\t\tsection=\"variations\"\n\t\t\t\t\t\ticon={Palette}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.variations && (\n\t\t\t\t\t\t<div className=\"mt-4 space-y-8\">\n\t\t\t\t\t\t\t{/* Colores */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h4 className=\"text-md font-medium text-gray-800 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t\t<Palette className=\"w-4 h-4 mr-1\" /> Colores Disponibles\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Añade un color y presiona Enter\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.currentColor}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentColor: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleColorKeyDown}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={addColor}\n\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Plus size={18} />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2 mt-2\">\n\t\t\t\t\t\t\t\t\t{formData.colors.map((color) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={color}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-gray-100 text-gray-800 px-2 py-1 rounded-md flex items-center\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span>{color}</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeColor(color)}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-1 text-gray-500 hover:text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X size={14} />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{formData.colors.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tAún no se han añadido colores\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Tallas */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h4 className=\"text-md font-medium text-gray-800 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t\t<Ruler className=\"w-4 h-4 mr-1\" /> Tallas Disponibles\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Añade una talla y presiona Enter\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.currentSize}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentSize: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleSizeKeyDown}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\tonClick={addSize}\n\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Plus size={18} />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"flex flex-wrap gap-2 mt-2\">\n\t\t\t\t\t\t\t\t\t{formData.sizes.map((size) => (\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tkey={size}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-gray-100 text-gray-800 px-2 py-1 rounded-md flex items-center\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<span>{size}</span>\n\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeSize(size)}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-1 text-gray-500 hover:text-gray-700\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<X size={14} />\n\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t{formData.sizes.length === 0 && (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500\">\n\t\t\t\t\t\t\t\t\t\t\tAún no se han añadido tallas\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Atributos personalizados */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h4 className=\"text-md font-medium text-gray-800 mb-2 flex items-center\">\n\t\t\t\t\t\t\t\t\t<Store className=\"w-4 h-4 mr-1\" /> Atributos Personalizados\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\tid=\"attributeKey\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Nombre del atributo (ej: Material)\"\n\t\t\t\t\t\t\t\t\t\tvalue={formData.currentAttributeKey}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\tcurrentAttributeKey: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={handleAttributeKeyDown}\n\t\t\t\t\t\t\t\t\t\tclassName=\"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<div className=\"flex\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"attributeValue\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Valor (ej: Algodón)\"\n\t\t\t\t\t\t\t\t\t\t\tvalue={formData.currentAttributeValue}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\t\t\t\t\t\tsetFormData((prev) => ({\n\t\t\t\t\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentAttributeValue: e.target.value,\n\t\t\t\t\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonKeyDown={handleAttributeValueKeyDown}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-grow px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={addAttribute}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-r-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Plus size={18} />\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t{/* Lista de atributos */}\n\t\t\t\t\t\t\t\t<div className=\"mt-4\">\n\t\t\t\t\t\t\t\t\t{formData.attributes.length > 0 ? (\n\t\t\t\t\t\t\t\t\t\t<div className=\"bg-gray-50 p-4 rounded-md\">\n\t\t\t\t\t\t\t\t\t\t\t<table className=\"min-w-full divide-y divide-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAtributo\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tValor\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th className=\"px-3 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAcción\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t\t\t\t\t\t<tbody className=\"divide-y divide-gray-200\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{formData.attributes.map((attr, index) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-sm text-gray-800\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{attr.key}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-sm text-gray-600\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{attr.value}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td className=\"px-3 py-2 text-right\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeAttribute(index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-800\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<X size={16} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mt-2\">\n\t\t\t\t\t\t\t\t\t\t\tAún no se han añadido atributos personalizados\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Imágenes */}\n\t\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-6\">\n\t\t\t\t\t<SectionHeader\n\t\t\t\t\t\ttitle=\"Imágenes del Producto\"\n\t\t\t\t\t\tsection=\"media\"\n\t\t\t\t\t\ticon={Image}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{expandedSections.media && (\n\t\t\t\t\t\t<div className=\"mt-4 space-y-4\">\n\t\t\t\t\t\t\t{/* Image Uploader */}\n\t\t\t\t\t\t\t<div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t\tid=\"images\"\n\t\t\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\tonChange={handleImageUpload}\n\t\t\t\t\t\t\t\t\tclassName=\"hidden\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\thtmlFor=\"images\"\n\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer flex flex-col items-center justify-center\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Upload className=\"h-12 w-12 text-gray-400 mb-2\" />\n\t\t\t\t\t\t\t\t\t<p className=\"text-gray-600 mb-1\">\n\t\t\t\t\t\t\t\t\t\tArrastra y suelta imágenes aquí o haz clic para subir\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500\">\n\t\t\t\t\t\t\t\t\t\tJPEG, PNG, WebP hasta 2MB\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Imágenes existentes */}\n\t\t\t\t\t\t\t{formData.existingImages.length > 0 && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-md font-medium text-gray-800 mb-3\">\n\t\t\t\t\t\t\t\t\t\tImágenes actuales\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n\t\t\t\t\t\t\t\t\t\t{formData.existingImages.map((image, index) => {\n\t\t\t\t\t\t\t\t\t\t\t// Construir URL de imagen completa\n\t\t\t\t\t\t\t\t\t\t\tconst baseUrl = appConfig.imageBaseUrl;\n\t\t\t\t\t\t\t\t\t\t\tlet imagePath =\n\t\t\t\t\t\t\t\t\t\t\t\timage.original || image.medium || image.thumbnail;\n\t\t\t\t\t\t\t\t\t\t\tconst imageUrl =\n\t\t\t\t\t\t\t\t\t\t\t\timagePath && imagePath.startsWith(\"http\")\n\t\t\t\t\t\t\t\t\t\t\t\t\t? imagePath\n\t\t\t\t\t\t\t\t\t\t\t\t\t: `${baseUrl}${imagePath}`;\n\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`existing-${index}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"relative group\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tformData.name || `Imagen existente ${index + 1}`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeExistingImage(index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 size={14} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{index === 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"absolute bottom-2 left-2 bg-primary-500 text-white text-xs py-1 px-2 rounded-md\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPrincipal\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Nuevas imágenes */}\n\t\t\t\t\t\t\t{formData.images.length > 0 && (\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-md font-medium text-gray-800 mb-3\">\n\t\t\t\t\t\t\t\t\t\tNuevas imágenes a agregar\n\t\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4\">\n\t\t\t\t\t\t\t\t\t\t{formData.images.map((_, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<div key={`new-${index}`} className=\"relative group\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-100\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={formData.previewImages[index]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\talt={formData.name || `Nueva imagen ${index + 1}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeNewImage(index)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 size={14} />\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{formData.existingImages.length === 0 &&\n\t\t\t\t\t\t\t\tformData.images.length === 0 && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500 text-center mt-4\">\n\t\t\t\t\t\t\t\t\t\tNo hay imágenes para este producto. Agrega al menos una\n\t\t\t\t\t\t\t\t\t\timagen.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t{/* Submit Button - Bottom */}\n\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t<button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={saving}\n\t\t\t\t\t\tclassName=\"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{saving ? \"Guardando...\" : \"Guardar Producto\"}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nexport default AdminProductEditPage;"],"names":["AdminProductEditPage","navigate","useNavigate","id","useParams","productId","isLoading","setIsLoading","useState","saving","setSaving","sellers","setSellers","loadingSellers","setLoadingSellers","updateProduct","fetchProductById","useAdminProducts","parentCategoryOptions","subcategoryOptions","selectedParentId","setSelectedParentId","loadingCategories","useCategoriesSelect","expandedSections","setExpandedSections","formData","setFormData","requiredFields","validationErrors","setValidationErrors","useEffect","response","ApiClient","sellersData","error","product","parentCategoryId","categoryId","resolve","processArray","data","item","m","prev","e","img","baseUrl","appConfig","imagePath","toggleSection","section","handleInputChange","name","value","type","checked","updatedFormData","newErrors","handleImageUpload","newImages","newPreviews","file","removeNewImage","index","removeExistingImage","updatedExistingImages","removedImage","addTag","removeTag","tag","t","handleTagKeyDown","addColor","removeColor","color","c","handleColorKeyDown","addSize","removeSize","size","s","handleSizeKeyDown","addAttribute","key","removeAttribute","newAttributes","handleAttributeKeyDown","valueInput","handleAttributeValueKeyDown","validateForm","errors","field","handleSubmit","firstErrorField","errorElement","productData","result","SectionHeader","title","Icon","jsxs","jsx","ChevronUp","ChevronDown","Loader","X","Fragment","Save","User","seller","FileText","DollarSign","Tag","option","Plus","PackageOpen","Palette","Ruler","Store","attr","Image","Upload","image","imageUrl","Trash2","_"],"mappings":"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"}
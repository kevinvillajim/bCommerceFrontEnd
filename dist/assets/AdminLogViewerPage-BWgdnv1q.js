import{c as E,r as l,j as e,w as R,q as U}from"./index-DmNDOrWy.js";import{T}from"./Table-BdEePeKQ.js";import{S as P}from"./StatCardList-BKb18NhN.js";import{R as $}from"./refresh-cw-BOPCg90x.js";import{D as z}from"./download-BLI8iYU4.js";import{I as O}from"./info-B048AovY.js";import{C as H}from"./circle-x-BwsT4AZ5.js";import{T as N}from"./triangle-alert-B75WTV0P.js";import{U as W}from"./user-nLts-VnI.js";import{E as _}from"./eye-CldZNoIz.js";import"./chevron-left-Dl3DF2OO.js";import"./search-CbEKe7UQ.js";import"./arrow-up-DQySjn32.js";/**
 * @license lucide-react v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],K=E("server",q),ae=()=>{const[n,f]=l.useState([]),[w,d]=l.useState(!0),[C,k]=l.useState(1),[r,g]=l.useState(null),[u,y]=l.useState("all"),[h,b]=l.useState("all"),[p,j]=l.useState(""),M=["all","info","warning","error","critical"],F=["all","backend","frontend","database","auth","payment"],S=[{key:"id",header:"ID",sortable:!0},{key:"timestamp",header:"Fecha y Hora",sortable:!0,render:t=>{const s=new Date(t.timestamp);return e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 mr-1 text-gray-400"}),e.jsx("span",{children:s.toLocaleString()})]})}},{key:"level",header:"Nivel",sortable:!0,render:t=>{const s={info:"bg-blue-100 text-blue-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",critical:"bg-purple-100 text-purple-800"};return e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s[t.level]}`,children:t.level.toUpperCase()})}},{key:"message",header:"Mensaje",sortable:!0},{key:"source",header:"Origen",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(K,{className:"w-4 h-4 mr-1 text-gray-400"}),e.jsx("span",{children:t.source})]})},{key:"userId",header:"Usuario",sortable:!0,render:t=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-4 h-4 mr-1 text-gray-400"}),e.jsx("span",{children:t.userId||"N/A"})]})},{key:"actions",header:"Acciones",render:t=>e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>g(t),className:"text-primary-600 hover:text-primary-900",title:"Ver detalles",children:e.jsx(_,{size:18})})})}],v=()=>{const t=[],s=["info","warning","error","critical"],a=["backend","frontend","database","auth","payment"],o=["Error al procesar el pago","Usuario no encontrado","Fallo de conexión a la base de datos","Tiempo de espera excedido","Error de autenticación","Solicitud incorrecta","Recurso no encontrado","Error interno del servidor","Error en la validación de datos","Producto no disponible"];for(let i=1;i<=100;i++){const c=new Date;c.setDate(c.getDate()-Math.floor(Math.random()*30)),t.push({id:i,timestamp:c.toISOString(),level:s[Math.floor(Math.random()*s.length)],message:o[Math.floor(Math.random()*o.length)],source:a[Math.floor(Math.random()*a.length)],details:`Detalles completos del error #${i}. Incluye información adicional y stack trace.`,userId:Math.random()>.3?Math.floor(Math.random()*1e3)+1:void 0,ip:`192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,userAgent:`Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/${Math.floor(Math.random()*10)+90}.0.${Math.floor(Math.random()*1e3)+4e3}.${Math.floor(Math.random()*100)}`})}return t.sort((i,c)=>c.id-i.id)};l.useEffect(()=>{d(!0),setTimeout(()=>{f(v()),d(!1)},800)},[]);const m=n.filter(t=>{if(u!=="all"&&t.level!==u||h!=="all"&&t.source!==h)return!1;if(p){const s=new Date(p).setHours(0,0,0,0),a=new Date(t.timestamp).setHours(0,0,0,0);if(s!==a)return!1}return!0}),D=()=>{d(!0),setTimeout(()=>{f(v()),d(!1)},800)},L=()=>{y("all"),b("all"),j("")},A=()=>{const t=JSON.stringify(m,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(t),a=`logs_export_${new Date().toISOString().slice(0,10)}.json`,o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download",a),o.click()},x={info:n.filter(t=>t.level==="info").length,warning:n.filter(t=>t.level==="warning").length,error:n.filter(t=>t.level==="error").length,critical:n.filter(t=>t.level==="critical").length},I=[{title:"Info",value:x.info,description:"Registros informativos",icon:O,bgColor:"bg-blue-50/20",textColor:"text-blue-700",valueColor:"text-blue-800",descriptionColor:"text-blue-600",iconColor:"text-blue-600"},{title:"Advertencias",value:x.warning,description:"Registros de advertencia",icon:R,bgColor:"bg-yellow-50/20",textColor:"text-yellow-700",valueColor:"text-yellow-800",descriptionColor:"text-yellow-600",iconColor:"text-yellow-600"},{title:"Errores",value:x.error,description:"Registros de error",icon:H,bgColor:"bg-red-50/20",textColor:"text-red-700",valueColor:"text-red-800",descriptionColor:"text-red-600",iconColor:"text-red-600"},{title:"Críticos",value:x.critical,description:"Registros críticos",icon:N,bgColor:"bg-purple-50/20",textColor:"text-purple-700",valueColor:"text-purple-800",descriptionColor:"text-purple-600",iconColor:"text-purple-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Registros de Errores"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:D,className:"px-3 py-2 bg-primary-100 text-primary-700 rounded-md hover:bg-primary-200",title:"Refrescar datos",children:e.jsx($,{size:20})}),e.jsx("button",{onClick:A,className:"px-3 py-2 bg-green-100 text-green-700 rounded-md hover:bg-green-200",title:"Exportar registros",children:e.jsx(z,{size:20})})]})]}),e.jsx(P,{items:I}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(N,{className:"w-5 h-5 text-gray-500 mr-2"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"levelFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nivel"}),e.jsx("select",{id:"levelFilter",value:u,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:M.map(t=>e.jsx("option",{value:t,children:t==="all"?"Todos los niveles":t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sourceFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Origen"}),e.jsx("select",{id:"sourceFilter",value:h,onChange:t=>b(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:F.map(t=>e.jsx("option",{value:t,children:t==="all"?"Todos los orígenes":t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"dateFilter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),e.jsx("input",{type:"date",id:"dateFilter",value:p,onChange:t=>j(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:L,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200",children:"Limpiar filtros"})})]}),e.jsx(T,{data:m,columns:S,loading:w,searchFields:["message","source"],emptyMessage:"No se encontraron registros de errores",pagination:{currentPage:C,totalPages:Math.ceil(m.length/10),totalItems:m.length,itemsPerPage:10,onPageChange:k}}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-3xl max-h-[80vh] overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Detalles del Registro #",r.id]}),e.jsx("button",{onClick:()=>g(null),className:"text-gray-500 hover:text-gray-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh]",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nivel"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.level.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Fecha y Hora"}),e.jsx("p",{className:"font-semibold text-gray-900",children:new Date(r.timestamp).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Origen"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.source})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Usuario ID"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.userId||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dirección IP"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.ip||"N/A"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Mensaje"}),e.jsx("p",{className:"font-semibold text-gray-900",children:r.message})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"User Agent"}),e.jsx("p",{className:"font-semibold text-gray-900 break-words",children:r.userAgent||"N/A"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Detalles"}),e.jsx("pre",{className:"mt-2 p-3 bg-gray-100 rounded-md text-sm text-gray-900 overflow-x-auto",children:r.details||"Sin detalles adicionales."})]})]})}),e.jsx("div",{className:"px-6 py-3 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700",children:"Cerrar"})})]})})]})};export{ae as default};
//# sourceMappingURL=AdminLogViewerPage-BWgdnv1q.js.map

{"version":3,"file":"AdminDiscountsPage-Cd1_KgDF.js","sources":["../../src/core/services/AdminDiscountService.ts","../../src/presentation/pages/admin/AdminDiscountsPage.tsx"],"sourcesContent":["// src/core/services/AdminDiscountService.ts\r\n\r\nimport ApiClient from \"../../infrastructure/api/apiClient\";\r\nimport { API_ENDPOINTS } from \"../../constants/apiEndpoints\";\r\nimport type {\r\n  AdminDiscountCode,\r\n  AdminDiscountCodeListResponse,\r\n  AdminDiscountCodeStatsResponse,\r\n  AdminDiscountCodeCreationData,\r\n  AdminDiscountCodeUpdateData,\r\n  AdminDiscountCodeValidationRequest,\r\n  AdminDiscountCodeValidationResponse,\r\n  AdminDiscountCodeApplicationRequest,\r\n  AdminDiscountCodeApplicationResponse,\r\n  AdminDiscountCodeFilterParams,\r\n  GenerateCodeResponse,\r\n} from \"../domain/entities/AdminDiscountCode\";\r\n\r\n/**\r\n * Admin Discount Code Service - For managing promotional discount codes\r\n * Only accessible by administrators\r\n */\r\nexport class AdminDiscountService {\r\n  /**\r\n   * Get all admin discount codes with filters and pagination\r\n   */\r\n  async getDiscountCodes(\r\n    filterParams?: AdminDiscountCodeFilterParams\r\n  ): Promise<AdminDiscountCodeListResponse | null> {\r\n    try {\r\n      console.log(\r\n        \"üì§ AdminDiscountService: Fetching discount codes:\",\r\n        filterParams\r\n      );\r\n\r\n      const response = await ApiClient.get<AdminDiscountCodeListResponse>(\r\n        API_ENDPOINTS.ADMIN.DISCOUNT_CODES.LIST,\r\n        filterParams\r\n      );\r\n\r\n      console.log(\"üì• AdminDiscountService: Discount codes response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.getDiscountCodes:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get discount code statistics\r\n   */\r\n  async getDiscountCodeStats(): Promise<AdminDiscountCodeStatsResponse | null> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Fetching discount code stats\");\r\n\r\n      const response = await ApiClient.get<AdminDiscountCodeStatsResponse>(\r\n        API_ENDPOINTS.ADMIN.DISCOUNT_CODES.STATS\r\n      );\r\n\r\n      console.log(\"üì• AdminDiscountService: Stats response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.getDiscountCodeStats:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate a random discount code\r\n   */\r\n  async generateRandomCode(): Promise<GenerateCodeResponse | null> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Generating random code\");\r\n\r\n      const response = await ApiClient.get<GenerateCodeResponse>(\r\n        API_ENDPOINTS.ADMIN.DISCOUNT_CODES.GENERATE_CODE\r\n      );\r\n\r\n      console.log(\"üì• AdminDiscountService: Generated code response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.generateRandomCode:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a new discount code\r\n   */\r\n  async createDiscountCode(\r\n    data: AdminDiscountCodeCreationData\r\n  ): Promise<{ success: boolean; message: string; data?: AdminDiscountCode }> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Creating discount code:\", data);\r\n\r\n      const response = await ApiClient.post<{\r\n        status: string;\r\n        message: string;\r\n        data: AdminDiscountCode;\r\n      }>(API_ENDPOINTS.ADMIN.DISCOUNT_CODES.CREATE, data);\r\n\r\n      console.log(\"üì• AdminDiscountService: Create response:\", response);\r\n\r\n      if (response && response.status === \"success\") {\r\n        return {\r\n          success: true,\r\n          message: response.message,\r\n          data: response.data,\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response?.message || \"Error creating discount code\",\r\n        };\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.createDiscountCode:\", error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || \"Error creating discount code\",\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get a specific discount code by ID\r\n   */\r\n  async getDiscountCodeById(id: number): Promise<AdminDiscountCode | null> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Fetching discount code by ID:\", id);\r\n\r\n      const response = await ApiClient.get<{\r\n        status: string;\r\n        data: AdminDiscountCode;\r\n      }>(API_ENDPOINTS.ADMIN.DISCOUNT_CODES.DETAILS(id));\r\n\r\n      console.log(\"üì• AdminDiscountService: Discount code response:\", response);\r\n\r\n      if (response && response.status === \"success\") {\r\n        return response.data;\r\n      }\r\n      return null;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.getDiscountCodeById:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a discount code\r\n   */\r\n  async updateDiscountCode(\r\n    id: number,\r\n    data: AdminDiscountCodeUpdateData\r\n  ): Promise<{ success: boolean; message: string; data?: AdminDiscountCode }> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Updating discount code:\", id, data);\r\n\r\n      const response = await ApiClient.put<{\r\n        status: string;\r\n        message: string;\r\n        data: AdminDiscountCode;\r\n      }>(API_ENDPOINTS.ADMIN.DISCOUNT_CODES.UPDATE(id), data);\r\n\r\n      console.log(\"üì• AdminDiscountService: Update response:\", response);\r\n\r\n      if (response && response.status === \"success\") {\r\n        return {\r\n          success: true,\r\n          message: response.message,\r\n          data: response.data,\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response?.message || \"Error updating discount code\",\r\n        };\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.updateDiscountCode:\", error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || \"Error updating discount code\",\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a discount code\r\n   */\r\n  async deleteDiscountCode(\r\n    id: number\r\n  ): Promise<{ success: boolean; message: string }> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Deleting discount code:\", id);\r\n\r\n      const response = await ApiClient.delete<{\r\n        status: string;\r\n        message: string;\r\n      }>(API_ENDPOINTS.ADMIN.DISCOUNT_CODES.DELETE(id));\r\n\r\n      console.log(\"üì• AdminDiscountService: Delete response:\", response);\r\n\r\n      if (response && response.status === \"success\") {\r\n        return {\r\n          success: true,\r\n          message: response.message,\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response?.message || \"Error deleting discount code\",\r\n        };\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.deleteDiscountCode:\", error);\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || \"Error deleting discount code\",\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Validate a discount code (for public use)\r\n   */\r\n  async validateDiscountCode(\r\n    data: AdminDiscountCodeValidationRequest\r\n  ): Promise<AdminDiscountCodeValidationResponse | null> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Validating discount code:\", data);\r\n\r\n      const response = await ApiClient.post<AdminDiscountCodeValidationResponse>(\r\n        API_ENDPOINTS.ADMIN.DISCOUNT_CODES.VALIDATE,\r\n        data\r\n      );\r\n\r\n      console.log(\"üì• AdminDiscountService: Validation response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.validateDiscountCode:\", error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply a discount code (for checkout process)\r\n   */\r\n  async applyDiscountCode(\r\n    data: AdminDiscountCodeApplicationRequest\r\n  ): Promise<AdminDiscountCodeApplicationResponse | null> {\r\n    try {\r\n      console.log(\"üì§ AdminDiscountService: Applying discount code:\", data);\r\n\r\n      const response = await ApiClient.post<AdminDiscountCodeApplicationResponse>(\r\n        API_ENDPOINTS.ADMIN.DISCOUNT_CODES.APPLY,\r\n        data\r\n      );\r\n\r\n      console.log(\"üì• AdminDiscountService: Application response:\", response);\r\n      return response;\r\n    } catch (error) {\r\n      console.error(\"‚ùå Error in AdminDiscountService.applyDiscountCode:\", error);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const adminDiscountService = new AdminDiscountService();","import React, { useState, useEffect } from \"react\";\r\nimport Table from \"../../components/dashboard/Table\";\r\nimport {\r\n  Tag,\r\n  Percent,\r\n  CheckCircle,\r\n  XCircle,\r\n  AlertTriangle,\r\n  RefreshCw,\r\n  Filter,\r\n  Eye,\r\n  Trash2,\r\n  Plus,\r\n  Clock,\r\n  Check,\r\n} from \"lucide-react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport type { AdminDiscountCode, AdminDiscountCodeFilterParams, AdminDiscountCodeCreationData } from \"../../../core/domain/entities/AdminDiscountCode\";\r\nimport { adminDiscountService } from \"../../../core/services/AdminDiscountService\";\r\nimport StatCardList from \"../../components/dashboard/StatCardList\";\r\n\r\n\r\nconst AdminDiscountsPage: React.FC = () => {\r\n\tconst [discounts, setDiscounts] = useState<AdminDiscountCode[]>([]);\r\n\tconst [loading, setLoading] = useState(true);\r\n\tconst [validityFilter, setValidityFilter] = useState<\"all\" | \"valid\" | \"expired\">(\"all\");\r\n\tconst [usageFilter, setUsageFilter] = useState<\"all\" | \"used\" | \"unused\">(\"all\");\r\n\tconst [percentageFilter, setPercentageFilter] = useState<\"all\" | \"10\" | \"20\" | \"30\" | \"50+\">(\"all\");\r\n\tconst [showDiscountModal, setShowDiscountModal] = useState(false);\r\n\tconst [selectedDiscount, setSelectedDiscount] = useState<AdminDiscountCode | null>(\r\n\t\tnull\r\n\t);\r\n\tconst [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tcurrentPage: 1,\r\n\t\ttotalPages: 1,\r\n\t\ttotalItems: 0,\r\n\t\titemsPerPage: 10,\r\n\t});\r\n\tconst [stats, setStats] = useState({\r\n\t\ttotal: 0,\r\n\t\tvalid: 0,\r\n\t\texpired: 0,\r\n\t\tused: 0,\r\n\t\tunused: 0,\r\n\t\tactive: 0,\r\n\t});\r\n\r\n\t// Formulario para nuevo descuento\r\n\tconst [newDiscount, setNewDiscount] = useState({\r\n\t\tcode: \"\",\r\n\t\tdiscount_percentage: 10,\r\n\t\texpirationDays: 30,\r\n\t\tdescription: \"\",\r\n\t});\r\n\r\n\t// Load data\r\n\tuseEffect(() => {\r\n\t\tfetchDiscounts();\r\n\t\tfetchStats();\r\n\t}, [validityFilter, usageFilter, percentageFilter, pagination.currentPage]);\r\n\r\n\t// Fetch discount codes from API\r\n\tconst fetchDiscounts = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst filterParams: AdminDiscountCodeFilterParams = {\r\n\t\t\t\tvalidity: validityFilter,\r\n\t\t\t\tusage: usageFilter,\r\n\t\t\t\tpercentage: percentageFilter,\r\n\t\t\t\tlimit: pagination.itemsPerPage,\r\n\t\t\t\toffset: (pagination.currentPage - 1) * pagination.itemsPerPage,\r\n\t\t\t};\r\n\r\n\t\t\tconst response = await adminDiscountService.getDiscountCodes(filterParams);\r\n\t\t\tif (response && response.status === 'success') {\r\n\t\t\t\tsetDiscounts(response.data);\r\n\t\t\t\tsetPagination(prev => ({\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\ttotalItems: response.meta.total,\r\n\t\t\t\t\ttotalPages: response.meta.total_pages,\r\n\t\t\t\t\tcurrentPage: response.meta.current_page,\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching discounts:', error);\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\t// Fetch statistics\r\n\tconst fetchStats = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await adminDiscountService.getDiscountCodeStats();\r\n\t\t\tif (response && response.status === 'success') {\r\n\t\t\t\tsetStats(response.data);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching stats:', error);\r\n\t\t}\r\n\t};\r\n\r\n\t// Filtering is now handled on the backend, so we just use the discounts as-is\r\n\tconst filteredDiscounts = discounts;\r\n\r\n\t// Open modal to view/edit discount\r\n\tconst openDiscountModal = async (discount?: AdminDiscountCode) => {\r\n\t\tif (discount) {\r\n\t\t\tsetSelectedDiscount(discount);\r\n\t\t} else {\r\n\t\t\tsetSelectedDiscount(null);\r\n\t\t\t// Generate a random code\r\n\t\t\ttry {\r\n\t\t\t\tconst codeResponse = await adminDiscountService.generateRandomCode();\r\n\t\t\t\tconst generatedCode = codeResponse?.data?.code || generateRandomCode();\r\n\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\tcode: generatedCode,\r\n\t\t\t\t\tdiscount_percentage: 10,\r\n\t\t\t\t\texpirationDays: 30,\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t});\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error generating code:', error);\r\n\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\tcode: generateRandomCode(),\r\n\t\t\t\t\tdiscount_percentage: 10,\r\n\t\t\t\t\texpirationDays: 30,\r\n\t\t\t\t\tdescription: \"\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetShowDiscountModal(true);\r\n\t};\r\n\r\n\t// Cerrar modal\r\n\tconst closeDiscountModal = () => {\r\n\t\tsetShowDiscountModal(false);\r\n\t\tsetSelectedDiscount(null);\r\n\t\tsetShowDeleteConfirmation(false);\r\n\t};\r\n\r\n\t// Generar c√≥digo aleatorio\r\n\tconst generateRandomCode = () => {\r\n\t\tconst prefix = [\"PROMO\", \"DESCUENTO\", \"OFERTA\", \"REGALO\", \"COMERSIA\"][\r\n\t\t\tMath.floor(Math.random() * 5)\r\n\t\t];\r\n\t\tconst chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\r\n\t\tlet result = prefix;\r\n\t\tfor (let i = 0; i < 5; i++) {\r\n\t\t\tresult += chars.charAt(Math.floor(Math.random() * chars.length));\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\r\n\t// Save discount (new or edited)\r\n\tconst saveDiscount = async () => {\r\n\t\ttry {\r\n\t\t\tif (selectedDiscount) {\r\n\t\t\t\t// Update existing discount\r\n\t\t\t\tconst updateData = {\r\n\t\t\t\t\tcode: selectedDiscount.code,\r\n\t\t\t\t\tdiscount_percentage: selectedDiscount.discount_percentage,\r\n\t\t\t\t\texpires_at: selectedDiscount.expires_at,\r\n\t\t\t\t\tdescription: selectedDiscount.description || undefined,\r\n\t\t\t\t};\r\n\t\t\t\tconst result = await adminDiscountService.updateDiscountCode(selectedDiscount.id!, updateData);\r\n\t\t\t\tif (result.success) {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t\tfetchDiscounts();\r\n\t\t\t\t\tfetchStats();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// Create new discount\r\n\t\t\t\tconst expirationDate = new Date(\r\n\t\t\t\t\tDate.now() + newDiscount.expirationDays * 24 * 60 * 60 * 1000\r\n\t\t\t\t).toISOString();\r\n\t\t\t\t\r\n\t\t\t\tconst createData: AdminDiscountCodeCreationData = {\r\n\t\t\t\t\tcode: newDiscount.code,\r\n\t\t\t\t\tdiscount_percentage: newDiscount.discount_percentage,\r\n\t\t\t\t\texpires_at: expirationDate,\r\n\t\t\t\t\tdescription: newDiscount.description || undefined,\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tconst result = await adminDiscountService.createDiscountCode(createData);\r\n\t\t\t\tif (result.success) {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t\tfetchDiscounts();\r\n\t\t\t\t\tfetchStats();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error saving discount:', error);\r\n\t\t\talert('Error saving discount code');\r\n\t\t}\r\n\t\tcloseDiscountModal();\r\n\t};\r\n\r\n\t// Delete discount\r\n\tconst deleteDiscount = async () => {\r\n\t\tif (selectedDiscount && selectedDiscount.id) {\r\n\t\t\ttry {\r\n\t\t\t\tconst result = await adminDiscountService.deleteDiscountCode(selectedDiscount.id);\r\n\t\t\t\tif (result.success) {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t\tfetchDiscounts();\r\n\t\t\t\t\tfetchStats();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert(result.message);\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error('Error deleting discount:', error);\r\n\t\t\t\talert('Error deleting discount code');\r\n\t\t\t}\r\n\t\t}\r\n\t\tcloseDiscountModal();\r\n\t};\r\n\r\n\t// Formatear fecha\r\n\tconst formatDate = (dateString: string | undefined) => {\r\n\t\tif (!dateString) return \"N/A\";\r\n\r\n\t\tconst date = new Date(dateString);\r\n\t\treturn new Intl.DateTimeFormat(\"es-ES\", {\r\n\t\t\tday: \"2-digit\",\r\n\t\t\tmonth: \"2-digit\",\r\n\t\t\tyear: \"numeric\",\r\n\t\t\thour: \"2-digit\",\r\n\t\t\tminute: \"2-digit\",\r\n\t\t}).format(date);\r\n\t};\r\n\r\n\t// Manejar cambio de p√°gina\r\n\tconst handlePageChange = (page: number) => {\r\n\t\tsetPagination((prev) => ({...prev, currentPage: page}));\r\n\t\t// En una app real, aqu√≠ obtendr√≠as los datos para la nueva p√°gina\r\n\t};\r\n\r\n\r\n\t// Verificar si una fecha est√° expirada\r\n\tconst isDateExpired = (dateString: string | undefined): boolean => {\r\n\t\tif (!dateString) return false;\r\n\r\n\t\tconst date = new Date(dateString);\r\n\t\treturn date < new Date();\r\n\t};\r\n\r\n\t// Calcular d√≠as restantes\r\n\tconst getDaysRemaining = (dateString: string | undefined): number => {\r\n\t\tif (!dateString) return 0;\r\n\r\n\t\tconst expiryDate = new Date(dateString);\r\n\t\tconst today = new Date();\r\n\r\n\t\tconst diffTime = expiryDate.getTime() - today.getTime();\r\n\t\tconst diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n\t\treturn diffDays;\r\n\t};\r\n\r\n\t// Define table columns\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tkey: \"code\",\r\n\t\t\theader: \"C√≥digo\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<div className=\"flex-shrink-0 h-8 w-8 bg-primary-100 rounded-md flex items-center justify-center\">\r\n\t\t\t\t\t\t<Tag className=\"h-4 w-4 text-primary-600\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"ml-3\">\r\n\t\t\t\t\t\t<div className=\"text-sm font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t{discount.code}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\tID: {discount.id}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"percentage\",\r\n\t\t\theader: \"Descuento\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => (\r\n\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t<div className=\"flex-shrink-0 h-8 w-8 bg-green-100 rounded-md flex items-center justify-center\">\r\n\t\t\t\t\t\t<Percent className=\"h-4 w-4 text-green-600\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"ml-3 text-lg font-semibold text-gray-900\">\r\n\t\t\t\t\t\t{discount.discount_percentage}%\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"validity\",\r\n\t\t\theader: \"Validez\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => {\r\n\t\t\t\tconst isExpired = isDateExpired(discount.expires_at);\r\n\t\t\t\tconst daysRemaining = getDaysRemaining(discount.expires_at);\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{isExpired ? (\r\n\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800\">\r\n\t\t\t\t\t\t\t\t<XCircle className=\"w-3 h-3 mr-1\" />\r\n\t\t\t\t\t\t\t\tExpirado\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n\t\t\t\t\t\t\t\t<CheckCircle className=\"w-3 h-3 mr-1\" />\r\n\t\t\t\t\t\t\t\tV√°lido\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\t{isExpired\r\n\t\t\t\t\t\t\t\t? `Expir√≥ hace ${Math.abs(daysRemaining)} d√≠a${Math.abs(daysRemaining) !== 1 ? \"s\" : \"\"}`\r\n\t\t\t\t\t\t\t\t: `Expira en ${daysRemaining} d√≠a${daysRemaining !== 1 ? \"s\" : \"\"}`}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t{formatDate(discount.expires_at)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"usage\",\r\n\t\t\theader: \"Uso\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{discount.is_used ? (\r\n\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800\">\r\n\t\t\t\t\t\t\t\t<Check className=\"w-3 h-3 mr-1\" />\r\n\t\t\t\t\t\t\t\tUtilizado\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\r\n\t\t\t\t\t\t\t\t<Clock className=\"w-3 h-3 mr-1\" />\r\n\t\t\t\t\t\t\t\tSin usar\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{discount.is_used && discount.used_by_user && (\r\n\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\t\tPor: {discount.used_by_user.name}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t{discount.is_used && discount.used_at && (\r\n\t\t\t\t\t\t\t<div className=\"text-xs text-gray-500\">\r\n\t\t\t\t\t\t\t\t{formatDate(discount.used_at)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"description\",\r\n\t\t\theader: \"Descripci√≥n\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => {\r\n\t\t\t\tif (discount.description) {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"text-sm text-gray-900 max-w-xs truncate\" title={discount.description}>\r\n\t\t\t\t\t\t\t{discount.description}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<span className=\"text-gray-500 text-sm\">Sin descripci√≥n</span>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"created\",\r\n\t\t\theader: \"Creado\",\r\n\t\t\tsortable: true,\r\n\t\t\trender: (discount: AdminDiscountCode) => (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"text-sm text-gray-500\">\r\n\t\t\t\t\t\t{formatDate(discount.created_at)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{discount.created_by_user && (\r\n\t\t\t\t\t\t<div className=\"text-xs text-gray-400\">\r\n\t\t\t\t\t\t\tPor: {discount.created_by_user.name}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t),\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"actions\",\r\n\t\t\theader: \"Acciones\",\r\n\t\t\trender: (discount: AdminDiscountCode) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<div className=\"flex justify-end space-x-2\">\r\n\t\t\t\t\t\t{/* Ver detalles / Editar */}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => openDiscountModal(discount)}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-blue-600 hover:bg-blue-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Ver/Editar c√≥digo\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Eye size={18} />\r\n\t\t\t\t\t\t</button>\r\n\r\n\t\t\t\t\t\t{/* Eliminar c√≥digo */}\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetSelectedDiscount(discount);\r\n\t\t\t\t\t\t\t\tsetShowDeleteConfirmation(true);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tclassName=\"p-1 text-red-600 hover:bg-red-100 rounded-md\"\r\n\t\t\t\t\t\t\ttitle=\"Eliminar c√≥digo\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Trash2 size={18} />\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t},\r\n\t];\r\n\r\n\tconst statItems = [\r\n\t\t{ \r\n\t\t  title: \"Total\", \r\n\t\t  value: discounts.length, \r\n\t\t  description: \"C√≥digos de descuento\", \r\n\t\t  icon: Tag, \r\n\t\t  bgColor: \"bg-blue-50/20\", \r\n\t\t  textColor: \"text-blue-800\", \r\n\t\t  valueColor: \"text-blue-900\", \r\n\t\t  descriptionColor: \"text-blue-700\", \r\n\t\t  iconColor: \"text-blue-600\", \r\n\t\t},\r\n\t\t{ \r\n\t\t  title: \"Activos\", \r\n\t\t  value: stats.active, \r\n\t\t  description: \"Disponibles para uso\", \r\n\t\t  icon: CheckCircle, \r\n\t\t  bgColor: \"bg-green-50/20\", \r\n\t\t  textColor: \"text-green-800\", \r\n\t\t  valueColor: \"text-green-900\", \r\n\t\t  descriptionColor: \"text-green-700\", \r\n\t\t  iconColor: \"text-green-600\", \r\n\t\t},\r\n\t\t{ \r\n\t\t  title: \"Utilizados\", \r\n\t\t  value: stats.used, \r\n\t\t  description: \"Ya redimidos\", \r\n\t\t  icon: Check, \r\n\t\t  bgColor: \"bg-yellow-50\", \r\n\t\t  textColor: \"text-yellow-800\", \r\n\t\t  valueColor: \"text-yellow-900\", \r\n\t\t  descriptionColor: \"text-yellow-700\", \r\n\t\t  iconColor: \"text-yellow-600\", \r\n\t\t},\r\n\t\t{ \r\n\t\t  title: \"Expirados\", \r\n\t\t  value: stats.expired, \r\n\t\t  description: \"Ya no v√°lidos\", \r\n\t\t  icon: XCircle, \r\n\t\t  bgColor: \"bg-red-50/20\", \r\n\t\t  textColor: \"text-red-800\", \r\n\t\t  valueColor: \"text-red-900\", \r\n\t\t  descriptionColor: \"text-red-700\", \r\n\t\t  iconColor: \"text-red-600\", \r\n\t\t}\r\n\t  ];\r\n\r\n\treturn (\r\n\t\t<div className=\"space-y-6\">\r\n\t\t\t<div className=\"flex justify-between items-center\">\r\n\t\t\t\t<h1 className=\"text-2xl font-bold text-gray-900\">\r\n\t\t\t\t\tGesti√≥n de C√≥digos de Descuento\r\n\t\t\t\t</h1>\r\n\t\t\t\t<div className=\"flex space-x-2\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => openDiscountModal()}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Plus size={18} className=\"inline mr-2\" />\r\n\t\t\t\t\t\tNuevo C√≥digo\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => { fetchDiscounts(); fetchStats(); }}\r\n\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<RefreshCw size={18} className=\"inline mr-2\" />\r\n\t\t\t\t\t\tActualizar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Panel de estad√≠sticas */}\r\n\t\t\t<StatCardList items={statItems} />\r\n\r\n\t\t\t{/* Filtros */}\r\n\t\t\t<div className=\"bg-white rounded-lg shadow-sm p-4\">\r\n\t\t\t\t<div className=\"flex flex-col md:flex-row gap-4\">\r\n\t\t\t\t\t{/* Filtro de Validez */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Filter className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={validityFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setValidityFilter(e.target.value as \"all\" | \"valid\" | \"expired\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todas las Validez</option>\r\n\t\t\t\t\t\t\t<option value=\"valid\">V√°lidos</option>\r\n\t\t\t\t\t\t\t<option value=\"expired\">Expirados</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Uso */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={usageFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setUsageFilter(e.target.value as \"all\" | \"used\" | \"unused\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Usos</option>\r\n\t\t\t\t\t\t\t<option value=\"used\">Utilizados</option>\r\n\t\t\t\t\t\t\t<option value=\"unused\">Sin Usar</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t{/* Filtro de Porcentaje */}\r\n\t\t\t\t\t<div className=\"flex items-center space-x-2\">\r\n\t\t\t\t\t\t<Percent className=\"h-5 w-5 text-gray-500\" />\r\n\t\t\t\t\t\t<select\r\n\t\t\t\t\t\t\tclassName=\"border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\tvalue={percentageFilter}\r\n\t\t\t\t\t\t\tonChange={(e) => setPercentageFilter(e.target.value as \"all\" | \"10\" | \"20\" | \"30\" | \"50+\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option value=\"all\">Todos los Porcentajes</option>\r\n\t\t\t\t\t\t\t<option value=\"10\">Hasta 10%</option>\r\n\t\t\t\t\t\t\t<option value=\"20\">11% - 20%</option>\r\n\t\t\t\t\t\t\t<option value=\"30\">21% - 30%</option>\r\n\t\t\t\t\t\t\t<option value=\"50+\">M√°s de 30%</option>\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* Tabla de C√≥digos de Descuento */}\r\n\t\t\t<Table\r\n\t\t\t\tdata={filteredDiscounts}\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\tsearchFields={[\"code\"]}\r\n\t\t\t\tloading={loading}\r\n\t\t\t\temptyMessage=\"No se encontraron c√≥digos de descuento\"\r\n\t\t\t\tpagination={{\r\n\t\t\t\t\tcurrentPage: pagination.currentPage,\r\n\t\t\t\t\ttotalPages: pagination.totalPages,\r\n\t\t\t\t\ttotalItems: pagination.totalItems,\r\n\t\t\t\t\titemsPerPage: pagination.itemsPerPage,\r\n\t\t\t\t\tonPageChange: handlePageChange,\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\r\n\t\t\t{/* Modal para Crear/Editar Descuento */}\r\n\t\t\t{showDiscountModal && (\r\n\t\t\t\t<div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full\">\r\n\t\t\t\t\t\t<div className=\"px-6 py-4 border-b border-gray-200 flex justify-between items-center\">\r\n\t\t\t\t\t\t\t<h3 className=\"text-lg font-medium text-gray-900\">\r\n\t\t\t\t\t\t\t\t{selectedDiscount\r\n\t\t\t\t\t\t\t\t\t? \"Editar C√≥digo de Descuento\"\r\n\t\t\t\t\t\t\t\t\t: \"Crear Nuevo C√≥digo de Descuento\"}\r\n\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tonClick={closeDiscountModal}\r\n\t\t\t\t\t\t\t\tclassName=\"text-gray-400 hover:text-gray-500\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<XCircle className=\"h-5 w-5\" />\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"p-6\">\r\n\t\t\t\t\t\t\t{/* Formulario */}\r\n\t\t\t\t\t\t\t{showDeleteConfirmation ? (\r\n\t\t\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t\t\t<AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n\t\t\t\t\t\t\t\t\t<h4 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t¬øEst√°s seguro de eliminar este c√≥digo?\r\n\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t\t\t\tEsta acci√≥n no se puede deshacer y el c√≥digo{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-bold\">{selectedDiscount?.code}</span>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\tser√° eliminado permanentemente.\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-center space-x-3\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => setShowDeleteConfirmation(false)}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={deleteDiscount}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : selectedDiscount ? (\r\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t\t\t\t{/* Detalles del c√≥digo */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tC√≥digo\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDiscount.code}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...selectedDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tPorcentaje de Descuento\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"range\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"50\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep=\"5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDiscount.discount_percentage}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...selectedDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiscount_percentage: parseInt(e.target.value),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full mr-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-lg font-semibold text-gray-900 min-w-[50px] text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.discount_percentage}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Campos de expiraci√≥n y feedback relacionado */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tFecha de Expiraci√≥n\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"date\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectedDiscount.expires_at\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? new Date(selectedDiscount.expires_at)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.toISOString()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(\"T\")[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst date = new Date(e.target.value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdate.setHours(23, 59, 59, 999);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...selectedDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texpires_at: date.toISOString(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tDescripci√≥n\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={selectedDiscount.description || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetSelectedDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...selectedDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdescription: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Descripci√≥n opcional del c√≥digo de descuento...\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Estado de uso */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"bg-gray-50 p-4 rounded-lg\">\r\n\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-700 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\tEstado de Uso\r\n\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.is_used ? (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Check className=\"w-4 h-4 mr-1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tUtilizado\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-4 h-4 mr-1\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tSin Usar\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t{selectedDiscount.is_used && (\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.used_by_user && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tUsado por:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/admin/users/${selectedDiscount.used_by_user.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-2 text-primary-600 hover:text-primary-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.used_by_user.name} ({selectedDiscount.used_by_user.email})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.used_at && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFecha de uso:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"ml-2 text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{formatDate(selectedDiscount.used_at)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.used_on_product && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"col-span-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-sm text-gray-600\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAplicado en:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Link\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tto={`/admin/products/${selectedDiscount.used_on_product.id}`}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"ml-2 text-primary-600 hover:text-primary-800\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{selectedDiscount.used_on_product.name} (${selectedDiscount.used_on_product.price})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Botones de acci√≥n */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-end space-x-2 mt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={closeDiscountModal}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={saveDiscount}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tGuardar Cambios\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\r\n\t\t\t\t\t\t\t\t\t{/* Crear nuevo c√≥digo */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tC√≥digo\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex-1 border border-gray-300 rounded-l-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newDiscount.code}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...newDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Ej. WELCOME20\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...newDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode: generateRandomCode(),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"bg-gray-200 text-gray-800 hover:bg-gray-300 px-3 py-2 rounded-r-lg\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttitle=\"Generar c√≥digo aleatorio\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<RefreshCw size={16} />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tPorcentaje de Descuento\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"range\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin=\"5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax=\"50\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep=\"5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={newDiscount.discount_percentage}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t...newDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdiscount_percentage: parseInt(e.target.value),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full mr-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-lg font-semibold text-gray-900 min-w-[50px] text-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.discount_percentage}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Duraci√≥n y relaci√≥n con feedback */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tDuraci√≥n (d√≠as)\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin=\"1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tmax=\"365\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={newDiscount.expirationDays}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...newDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texpirationDays: parseInt(e.target.value),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-gray-500 mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tEl c√≥digo expirar√° despu√©s de{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.expirationDays} d√≠as.\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\tDescripci√≥n (Opcional)\r\n\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={newDiscount.description || \"\"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetNewDiscount({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t...newDiscount,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdescription: e.target.value,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Describe el prop√≥sito de este c√≥digo de descuento...\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Resumen */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"bg-gray-50 p-4 rounded-lg mt-4\">\r\n\t\t\t\t\t\t\t\t\t\t<h4 className=\"text-sm font-medium text-gray-700 mb-2\">\r\n\t\t\t\t\t\t\t\t\t\t\tResumen\r\n\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-sm text-gray-900\">\r\n\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\tSe crear√° un c√≥digo de descuento{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.code}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tcon un valor del{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.discount_percentage}%\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\tv√°lido por\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.expirationDays} d√≠as\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t.\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t{newDiscount.description && (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"mt-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tDescripci√≥n: \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{newDiscount.description}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t{/* Botones de acci√≥n */}\r\n\t\t\t\t\t\t\t\t\t<div className=\"flex justify-end space-x-2 mt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={closeDiscountModal}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={saveDiscount}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tCrear C√≥digo\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\r\n\t\t\t{/* Modal Confirmaci√≥n de Eliminaci√≥n */}\r\n\t\t\t{showDeleteConfirmation && selectedDiscount && (\r\n\t\t\t\t<div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n\t\t\t\t\t<div className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\">\r\n\t\t\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t\t\t<AlertTriangle className=\"h-12 w-12 text-red-500 mx-auto mb-4\" />\r\n\t\t\t\t\t\t\t<h4 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n\t\t\t\t\t\t\t\t¬øEst√°s seguro de eliminar este c√≥digo?\r\n\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t<p className=\"text-sm text-gray-500 mb-6\">\r\n\t\t\t\t\t\t\t\tEsta acci√≥n no se puede deshacer y el c√≥digo{\" \"}\r\n\t\t\t\t\t\t\t\t<span className=\"font-bold\">{selectedDiscount?.code}</span> ser√°\r\n\t\t\t\t\t\t\t\teliminado permanentemente.\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t<div className=\"flex justify-center space-x-3\">\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => setShowDeleteConfirmation(false)}\r\n\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tCancelar\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={deleteDiscount}\r\n\t\t\t\t\t\t\t\t\tclassName=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tEliminar\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AdminDiscountsPage;"],"names":["AdminDiscountService","filterParams","response","ApiClient","API_ENDPOINTS","error","data","id","adminDiscountService","AdminDiscountsPage","discounts","setDiscounts","useState","loading","setLoading","validityFilter","setValidityFilter","usageFilter","setUsageFilter","percentageFilter","setPercentageFilter","showDiscountModal","setShowDiscountModal","selectedDiscount","setSelectedDiscount","showDeleteConfirmation","setShowDeleteConfirmation","pagination","setPagination","stats","setStats","newDiscount","setNewDiscount","useEffect","fetchDiscounts","fetchStats","prev","filteredDiscounts","openDiscountModal","discount","generatedCode","generateRandomCode","closeDiscountModal","prefix","chars","result","i","saveDiscount","updateData","expirationDate","createData","deleteDiscount","formatDate","dateString","date","handlePageChange","page","isDateExpired","getDaysRemaining","expiryDate","today","diffTime","columns","jsxs","jsx","Tag","Percent","isExpired","daysRemaining","XCircle","CheckCircle","Check","Clock","Eye","Trash2","statItems","Plus","RefreshCw","StatCardList","Filter","e","Table","AlertTriangle","Link"],"mappings":"ySAsBO,MAAMA,EAAqB,CAIhC,MAAM,iBACJC,EAC+C,CAC3C,GAAA,CACM,QAAA,IACN,oDACAA,CACF,EAEM,MAAAC,EAAW,MAAMC,EAAU,IAC/BC,EAAc,MAAM,eAAe,KACnCH,CACF,EAEQ,eAAA,IAAI,oDAAqDC,CAAQ,EAClEA,QACAG,EAAO,CACN,eAAA,MAAM,oDAAqDA,CAAK,EACjE,IAAA,CACT,CAMF,MAAM,sBAAuE,CACvE,GAAA,CACF,QAAQ,IAAI,uDAAuD,EAE7D,MAAAH,EAAW,MAAMC,EAAU,IAC/BC,EAAc,MAAM,eAAe,KACrC,EAEQ,eAAA,IAAI,2CAA4CF,CAAQ,EACzDA,QACAG,EAAO,CACN,eAAA,MAAM,wDAAyDA,CAAK,EACrE,IAAA,CACT,CAMF,MAAM,oBAA2D,CAC3D,GAAA,CACF,QAAQ,IAAI,iDAAiD,EAEvD,MAAAH,EAAW,MAAMC,EAAU,IAC/BC,EAAc,MAAM,eAAe,aACrC,EAEQ,eAAA,IAAI,oDAAqDF,CAAQ,EAClEA,QACAG,EAAO,CACN,eAAA,MAAM,sDAAuDA,CAAK,EACnE,IAAA,CACT,CAMF,MAAM,mBACJC,EAC0E,CACtE,GAAA,CACM,QAAA,IAAI,mDAAoDA,CAAI,EAE9D,MAAAJ,EAAW,MAAMC,EAAU,KAI9BC,EAAc,MAAM,eAAe,OAAQE,CAAI,EAI9C,OAFI,QAAA,IAAI,4CAA6CJ,CAAQ,EAE7DA,GAAYA,EAAS,SAAW,UAC3B,CACL,QAAS,GACT,QAASA,EAAS,QAClB,KAAMA,EAAS,IACjB,EAEO,CACL,QAAS,GACT,QAASA,GAAU,SAAW,8BAChC,QAEKG,EAAY,CACX,eAAA,MAAM,sDAAuDA,CAAK,EACnE,CACL,QAAS,GACT,QAASA,EAAM,UAAU,MAAM,SAAW,8BAC5C,CAAA,CACF,CAMF,MAAM,oBAAoBE,EAA+C,CACnE,GAAA,CACM,QAAA,IAAI,yDAA0DA,CAAE,EAElE,MAAAL,EAAW,MAAMC,EAAU,IAG9BC,EAAc,MAAM,eAAe,QAAQG,CAAE,CAAC,EAI7C,OAFI,QAAA,IAAI,mDAAoDL,CAAQ,EAEpEA,GAAYA,EAAS,SAAW,UAC3BA,EAAS,KAEX,WACAG,EAAO,CACN,eAAA,MAAM,uDAAwDA,CAAK,EACpE,IAAA,CACT,CAMF,MAAM,mBACJE,EACAD,EAC0E,CACtE,GAAA,CACM,QAAA,IAAI,mDAAoDC,EAAID,CAAI,EAElE,MAAAJ,EAAW,MAAMC,EAAU,IAI9BC,EAAc,MAAM,eAAe,OAAOG,CAAE,EAAGD,CAAI,EAIlD,OAFI,QAAA,IAAI,4CAA6CJ,CAAQ,EAE7DA,GAAYA,EAAS,SAAW,UAC3B,CACL,QAAS,GACT,QAASA,EAAS,QAClB,KAAMA,EAAS,IACjB,EAEO,CACL,QAAS,GACT,QAASA,GAAU,SAAW,8BAChC,QAEKG,EAAY,CACX,eAAA,MAAM,sDAAuDA,CAAK,EACnE,CACL,QAAS,GACT,QAASA,EAAM,UAAU,MAAM,SAAW,8BAC5C,CAAA,CACF,CAMF,MAAM,mBACJE,EACgD,CAC5C,GAAA,CACM,QAAA,IAAI,mDAAoDA,CAAE,EAE5D,MAAAL,EAAW,MAAMC,EAAU,OAG9BC,EAAc,MAAM,eAAe,OAAOG,CAAE,CAAC,EAI5C,OAFI,QAAA,IAAI,4CAA6CL,CAAQ,EAE7DA,GAAYA,EAAS,SAAW,UAC3B,CACL,QAAS,GACT,QAASA,EAAS,OACpB,EAEO,CACL,QAAS,GACT,QAASA,GAAU,SAAW,8BAChC,QAEKG,EAAY,CACX,eAAA,MAAM,sDAAuDA,CAAK,EACnE,CACL,QAAS,GACT,QAASA,EAAM,UAAU,MAAM,SAAW,8BAC5C,CAAA,CACF,CAMF,MAAM,qBACJC,EACqD,CACjD,GAAA,CACM,QAAA,IAAI,qDAAsDA,CAAI,EAEhE,MAAAJ,EAAW,MAAMC,EAAU,KAC/BC,EAAc,MAAM,eAAe,SACnCE,CACF,EAEQ,eAAA,IAAI,gDAAiDJ,CAAQ,EAC9DA,QACAG,EAAO,CACN,eAAA,MAAM,wDAAyDA,CAAK,EACrE,IAAA,CACT,CAMF,MAAM,kBACJC,EACsD,CAClD,GAAA,CACM,QAAA,IAAI,mDAAoDA,CAAI,EAE9D,MAAAJ,EAAW,MAAMC,EAAU,KAC/BC,EAAc,MAAM,eAAe,MACnCE,CACF,EAEQ,eAAA,IAAI,iDAAkDJ,CAAQ,EAC/DA,QACAG,EAAO,CACN,eAAA,MAAM,qDAAsDA,CAAK,EAClE,IAAA,CACT,CAEJ,CAGa,MAAAG,EAAuB,IAAIR,GCvPlCS,GAA+B,IAAM,CAC1C,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAAA,SAA8B,CAAA,CAAE,EAC5D,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAgBC,CAAiB,EAAIJ,EAAAA,SAAsC,KAAK,EACjF,CAACK,EAAaC,CAAc,EAAIN,EAAAA,SAAoC,KAAK,EACzE,CAACO,EAAkBC,CAAmB,EAAIR,EAAAA,SAA6C,KAAK,EAC5F,CAACS,EAAmBC,CAAoB,EAAIV,EAAAA,SAAS,EAAK,EAC1D,CAACW,EAAkBC,CAAmB,EAAIZ,EAAA,SAC/C,IACD,EACM,CAACa,EAAwBC,CAAyB,EAAId,EAAAA,SAAS,EAAK,EACpE,CAACe,EAAYC,CAAa,EAAIhB,WAAS,CAC5C,YAAa,EACb,WAAY,EACZ,WAAY,EACZ,aAAc,EAAA,CACd,EACK,CAACiB,EAAOC,CAAQ,EAAIlB,WAAS,CAClC,MAAO,EACP,MAAO,EACP,QAAS,EACT,KAAM,EACN,OAAQ,EACR,OAAQ,CAAA,CACR,EAGK,CAACmB,EAAaC,CAAc,EAAIpB,WAAS,CAC9C,KAAM,GACN,oBAAqB,GACrB,eAAgB,GAChB,YAAa,EAAA,CACb,EAGDqB,EAAAA,UAAU,IAAM,CACAC,EAAA,EACJC,EAAA,CAAA,EACT,CAACpB,EAAgBE,EAAaE,EAAkBQ,EAAW,WAAW,CAAC,EAG1E,MAAMO,EAAiB,SAAY,CAClCpB,EAAW,EAAI,EACX,GAAA,CACH,MAAMb,EAA8C,CACnD,SAAUc,EACV,MAAOE,EACP,WAAYE,EACZ,MAAOQ,EAAW,aAClB,QAASA,EAAW,YAAc,GAAKA,EAAW,YACnD,EAEMzB,EAAW,MAAMM,EAAqB,iBAAiBP,CAAY,EACrEC,GAAYA,EAAS,SAAW,YACnCS,EAAaT,EAAS,IAAI,EAC1B0B,EAAuBQ,IAAA,CACtB,GAAGA,EACH,WAAYlC,EAAS,KAAK,MAC1B,WAAYA,EAAS,KAAK,YAC1B,YAAaA,EAAS,KAAK,YAAA,EAC1B,SAEKG,EAAO,CACP,QAAA,MAAM,4BAA6BA,CAAK,CAAA,QAC/C,CACDS,EAAW,EAAK,CAAA,CAElB,EAGMqB,EAAa,SAAY,CAC1B,GAAA,CACG,MAAAjC,EAAW,MAAMM,EAAqB,qBAAqB,EAC7DN,GAAYA,EAAS,SAAW,WACnC4B,EAAS5B,EAAS,IAAI,QAEfG,EAAO,CACP,QAAA,MAAM,wBAAyBA,CAAK,CAAA,CAE9C,EAGMgC,EAAoB3B,EAGpB4B,EAAoB,MAAOC,GAAiC,CACjE,GAAIA,EACHf,EAAoBe,CAAQ,MACtB,CACNf,EAAoB,IAAI,EAEpB,GAAA,CAEH,MAAMgB,GADe,MAAMhC,EAAqB,mBAAmB,IAC/B,MAAM,MAAQiC,EAAmB,EACtDT,EAAA,CACd,KAAMQ,EACN,oBAAqB,GACrB,eAAgB,GAChB,YAAa,EAAA,CACb,QACOnC,EAAO,CACP,QAAA,MAAM,yBAA0BA,CAAK,EAC9B2B,EAAA,CACd,KAAMS,EAAmB,EACzB,oBAAqB,GACrB,eAAgB,GAChB,YAAa,EAAA,CACb,CAAA,CACF,CAEDnB,EAAqB,EAAI,CAC1B,EAGMoB,EAAqB,IAAM,CAChCpB,EAAqB,EAAK,EAC1BE,EAAoB,IAAI,EACxBE,EAA0B,EAAK,CAChC,EAGMe,EAAqB,IAAM,CAChC,MAAME,EAAS,CAAC,QAAS,YAAa,SAAU,SAAU,UAAU,EACnE,KAAK,MAAM,KAAK,OAAO,EAAI,CAAC,CAC7B,EACMC,EAAQ,uCACd,IAAIC,EAASF,EACb,QAASG,EAAI,EAAGA,EAAI,EAAGA,IACZD,GAAAD,EAAM,OAAO,KAAK,MAAM,KAAK,OAAO,EAAIA,EAAM,MAAM,CAAC,EAEzD,OAAAC,CACR,EAGME,EAAe,SAAY,CAC5B,GAAA,CACH,GAAIxB,EAAkB,CAErB,MAAMyB,EAAa,CAClB,KAAMzB,EAAiB,KACvB,oBAAqBA,EAAiB,oBACtC,WAAYA,EAAiB,WAC7B,YAAaA,EAAiB,aAAe,MAC9C,EACMsB,EAAS,MAAMrC,EAAqB,mBAAmBe,EAAiB,GAAKyB,CAAU,EACzFH,EAAO,SACV,MAAMA,EAAO,OAAO,EACLX,EAAA,EACJC,EAAA,GAEX,MAAMU,EAAO,OAAO,CACrB,KACM,CAEN,MAAMI,EAAiB,IAAI,KAC1B,KAAK,IAAI,EAAIlB,EAAY,eAAiB,GAAK,GAAK,GAAK,KACxD,YAAY,EAERmB,EAA4C,CACjD,KAAMnB,EAAY,KAClB,oBAAqBA,EAAY,oBACjC,WAAYkB,EACZ,YAAalB,EAAY,aAAe,MACzC,EAEMc,EAAS,MAAMrC,EAAqB,mBAAmB0C,CAAU,EACnEL,EAAO,SACV,MAAMA,EAAO,OAAO,EACLX,EAAA,EACJC,EAAA,GAEX,MAAMU,EAAO,OAAO,CACrB,QAEOxC,EAAO,CACP,QAAA,MAAM,yBAA0BA,CAAK,EAC7C,MAAM,4BAA4B,CAAA,CAEhBqC,EAAA,CACpB,EAGMS,EAAiB,SAAY,CAC9B,GAAA5B,GAAoBA,EAAiB,GACpC,GAAA,CACH,MAAMsB,EAAS,MAAMrC,EAAqB,mBAAmBe,EAAiB,EAAE,EAC5EsB,EAAO,SACV,MAAMA,EAAO,OAAO,EACLX,EAAA,EACJC,EAAA,GAEX,MAAMU,EAAO,OAAO,QAEbxC,EAAO,CACP,QAAA,MAAM,2BAA4BA,CAAK,EAC/C,MAAM,8BAA8B,CAAA,CAGnBqC,EAAA,CACpB,EAGMU,EAAcC,GAAmC,CAClD,GAAA,CAACA,EAAmB,MAAA,MAElB,MAAAC,EAAO,IAAI,KAAKD,CAAU,EACzB,OAAA,IAAI,KAAK,eAAe,QAAS,CACvC,IAAK,UACL,MAAO,UACP,KAAM,UACN,KAAM,UACN,OAAQ,SAAA,CACR,EAAE,OAAOC,CAAI,CACf,EAGMC,EAAoBC,GAAiB,CAC1C5B,EAAeQ,IAAU,CAAC,GAAGA,EAAM,YAAaoB,GAAM,CAEvD,EAIMC,EAAiBJ,GACjBA,EAEQ,IAAI,KAAKA,CAAU,MACd,KAHM,GAOnBK,EAAoBL,GAA2C,CAChE,GAAA,CAACA,EAAmB,MAAA,GAElB,MAAAM,EAAa,IAAI,KAAKN,CAAU,EAChCO,MAAY,KAEZC,EAAWF,EAAW,QAAQ,EAAIC,EAAM,QAAQ,EAG/C,OAFU,KAAK,KAAKC,GAAY,IAAO,GAAK,GAAK,GAAG,CAG5D,EAGMC,EAAU,CACf,CACC,IAAK,OACL,OAAQ,SACR,SAAU,GACV,OAASvB,GACPwB,EAAA,KAAA,MAAA,CAAI,UAAU,oBACd,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACd,eAACC,EAAI,CAAA,UAAU,2BAA2B,CAC3C,CAAA,EACAF,EAAAA,KAAC,MAAI,CAAA,UAAU,OACd,SAAA,CAAAC,EAAA,IAAC,MAAI,CAAA,UAAU,oCACb,SAAAzB,EAAS,KACX,EACAwB,EAAAA,KAAC,MAAI,CAAA,UAAU,wBAAwB,SAAA,CAAA,OACjCxB,EAAS,EAAA,CACf,CAAA,CAAA,CACD,CAAA,CAAA,CACD,CAAA,CAEF,EACA,CACC,IAAK,aACL,OAAQ,YACR,SAAU,GACV,OAASA,GACPwB,EAAA,KAAA,MAAA,CAAI,UAAU,oBACd,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,iFACd,eAACE,EAAQ,CAAA,UAAU,yBAAyB,CAC7C,CAAA,EACAH,EAAAA,KAAC,MAAI,CAAA,UAAU,2CACb,SAAA,CAASxB,EAAA,oBAAoB,GAAA,CAC/B,CAAA,CAAA,CACD,CAAA,CAEF,EACA,CACC,IAAK,WACL,OAAQ,UACR,SAAU,GACV,OAASA,GAAgC,CAClC,MAAA4B,EAAYV,EAAclB,EAAS,UAAU,EAC7C6B,EAAgBV,EAAiBnB,EAAS,UAAU,EAE1D,cACE,MACC,CAAA,SAAA,CACA4B,EAAAJ,EAAA,KAAC,OAAK,CAAA,UAAU,kGACf,SAAA,CAACC,EAAAA,IAAAK,EAAA,CAAQ,UAAU,cAAe,CAAA,EAAE,UAAA,CAErC,CAAA,EAEAN,EAAAA,KAAC,OAAK,CAAA,UAAU,sGACf,SAAA,CAACC,EAAAA,IAAAM,EAAA,CAAY,UAAU,cAAe,CAAA,EAAE,QAAA,EAEzC,EAEDN,EAAAA,IAAC,MAAI,CAAA,UAAU,6BACb,SAAAG,EACE,eAAe,KAAK,IAAIC,CAAa,CAAC,OAAO,KAAK,IAAIA,CAAa,IAAM,EAAI,IAAM,EAAE,GACrF,aAAaA,CAAa,OAAOA,IAAkB,EAAI,IAAM,EAAE,EACnE,CAAA,QACC,MAAI,CAAA,UAAU,wBACb,SAAWhB,EAAAb,EAAS,UAAU,CAChC,CAAA,CAAA,EACD,CAAA,CAGH,EACA,CACC,IAAK,QACL,OAAQ,MACR,SAAU,GACV,OAASA,UAEN,MACC,CAAA,SAAA,CAAAA,EAAS,QACTwB,OAAC,OAAK,CAAA,UAAU,oGACf,SAAA,CAACC,EAAAA,IAAAO,EAAA,CAAM,UAAU,cAAe,CAAA,EAAE,WAAA,CAEnC,CAAA,EAEAR,EAAAA,KAAC,OAAK,CAAA,UAAU,oGACf,SAAA,CAACC,EAAAA,IAAAQ,EAAA,CAAM,UAAU,cAAe,CAAA,EAAE,UAAA,EAEnC,EAEAjC,EAAS,SAAWA,EAAS,cAC5BwB,EAAAA,KAAA,MAAA,CAAI,UAAU,6BAA6B,SAAA,CAAA,QACrCxB,EAAS,aAAa,IAAA,EAC7B,EAEAA,EAAS,SAAWA,EAAS,SAC7ByB,EAAA,IAAC,MAAI,CAAA,UAAU,wBACb,SAAAZ,EAAWb,EAAS,OAAO,CAC7B,CAAA,CAAA,EAEF,CAGH,EACA,CACC,IAAK,cACL,OAAQ,cACR,SAAU,GACV,OAASA,GACJA,EAAS,YAEXyB,MAAC,OAAI,UAAU,0CAA0C,MAAOzB,EAAS,YACvE,WAAS,WACX,CAAA,EAIAyB,EAAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAAe,kBAAA,CAG1D,EACA,CACC,IAAK,UACL,OAAQ,SACR,SAAU,GACV,OAASzB,GACRwB,EAAA,KAAC,MACA,CAAA,SAAA,CAAAC,MAAC,OAAI,UAAU,wBACb,SAAWZ,EAAAb,EAAS,UAAU,EAChC,EACCA,EAAS,iBACRwB,OAAA,MAAA,CAAI,UAAU,wBAAwB,SAAA,CAAA,QAChCxB,EAAS,gBAAgB,IAAA,CAChC,CAAA,CAAA,CAEF,CAAA,CAEF,EACA,CACC,IAAK,UACL,OAAQ,WACR,OAASA,GAEPwB,EAAA,KAAC,MAAI,CAAA,UAAU,6BAEd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAS,IAAM1B,EAAkBC,CAAQ,EACzC,UAAU,iDACV,MAAM,oBAEN,SAAAyB,EAAAA,IAACS,GAAI,CAAA,KAAM,EAAI,CAAA,CAAA,CAChB,EAGAT,EAAA,IAAC,SAAA,CACA,QAAS,IAAM,CACdxC,EAAoBe,CAAQ,EAC5Bb,EAA0B,EAAI,CAC/B,EACA,UAAU,+CACV,MAAM,kBAEN,SAAAsC,EAAAA,IAACU,GAAO,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CACnB,EACD,CAEF,CAEF,EAEMC,EAAY,CACjB,CACE,MAAO,QACP,MAAOjE,EAAU,OACjB,YAAa,uBACb,KAAMuD,EACN,QAAS,gBACT,UAAW,gBACX,WAAY,gBACZ,iBAAkB,gBAClB,UAAW,eACb,EACA,CACE,MAAO,UACP,MAAOpC,EAAM,OACb,YAAa,uBACb,KAAMyC,EACN,QAAS,iBACT,UAAW,iBACX,WAAY,iBACZ,iBAAkB,iBAClB,UAAW,gBACb,EACA,CACE,MAAO,aACP,MAAOzC,EAAM,KACb,YAAa,eACb,KAAM0C,EACN,QAAS,eACT,UAAW,kBACX,WAAY,kBACZ,iBAAkB,kBAClB,UAAW,iBACb,EACA,CACE,MAAO,YACP,MAAO1C,EAAM,QACb,YAAa,gBACb,KAAMwC,EACN,QAAS,eACT,UAAW,eACX,WAAY,eACZ,iBAAkB,eAClB,UAAW,cAAA,CAEZ,EAGD,OAAAN,EAAA,KAAC,MAAI,CAAA,UAAU,YACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,oCACd,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,mCAAmC,SAEjD,kCAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACd,SAAA,CAAAA,EAAA,KAAC,SAAA,CACA,QAAS,IAAMzB,EAAkB,EACjC,UAAU,oFAEV,SAAA,CAAA0B,EAAA,IAACY,GAAK,CAAA,KAAM,GAAI,UAAU,cAAc,EAAE,cAAA,CAAA,CAE3C,EACAb,EAAA,KAAC,SAAA,CACA,QAAS,IAAM,CAAiB7B,EAAA,EAAcC,EAAA,CAAG,EACjD,UAAU,wFAEV,SAAA,CAAA6B,EAAA,IAACa,EAAU,CAAA,KAAM,GAAI,UAAU,cAAc,EAAE,YAAA,CAAA,CAAA,CAEhD,CACD,CAAA,CAAA,EACD,EAGAb,EAAAA,IAACc,GAAa,CAAA,MAAOH,CAAW,CAAA,QAG/B,MAAI,CAAA,UAAU,oCACd,SAACZ,EAAA,KAAA,MAAA,CAAI,UAAU,kCAEd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,8BACd,SAAA,CAACC,EAAAA,IAAAe,GAAA,CAAO,UAAU,uBAAwB,CAAA,EAC1ChB,EAAA,KAAC,SAAA,CACA,UAAU,qGACV,MAAOhD,EACP,SAAWiE,GAAMhE,EAAkBgE,EAAE,OAAO,KAAoC,EAEhF,SAAA,CAAChB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAiB,oBAAA,EACpCA,EAAA,IAAA,SAAA,CAAO,MAAM,QAAQ,SAAO,UAAA,EAC5BA,EAAA,IAAA,SAAA,CAAO,MAAM,UAAU,SAAS,WAAA,CAAA,CAAA,CAAA,CAAA,CAClC,EACD,EAGAA,EAAAA,IAAC,MAAI,CAAA,UAAU,8BACd,SAAAD,EAAA,KAAC,SAAA,CACA,UAAU,qGACV,MAAO9C,EACP,SAAW+D,GAAM9D,EAAe8D,EAAE,OAAO,KAAkC,EAE3E,SAAA,CAAChB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAc,iBAAA,EACjCA,EAAA,IAAA,SAAA,CAAO,MAAM,OAAO,SAAU,aAAA,EAC9BA,EAAA,IAAA,SAAA,CAAO,MAAM,SAAS,SAAQ,UAAA,CAAA,CAAA,CAAA,CAAA,EAEjC,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,8BACd,SAAA,CAACC,EAAAA,IAAAE,EAAA,CAAQ,UAAU,uBAAwB,CAAA,EAC3CH,EAAA,KAAC,SAAA,CACA,UAAU,qGACV,MAAO5C,EACP,SAAW6D,GAAM5D,EAAoB4D,EAAE,OAAO,KAA2C,EAEzF,SAAA,CAAChB,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAqB,wBAAA,EACxCA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAS,YAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAS,YAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,KAAK,SAAS,YAAA,EAC3BA,EAAA,IAAA,SAAA,CAAO,MAAM,MAAM,SAAU,YAAA,CAAA,CAAA,CAAA,CAAA,CAC/B,CACD,CAAA,CAAA,CAAA,CACD,CACD,CAAA,EAGAA,EAAA,IAACiB,GAAA,CACA,KAAM5C,EACN,QAAAyB,EACA,aAAc,CAAC,MAAM,EACrB,QAAAjD,EACA,aAAa,yCACb,WAAY,CACX,YAAac,EAAW,YACxB,WAAYA,EAAW,WACvB,WAAYA,EAAW,WACvB,aAAcA,EAAW,aACzB,aAAc4B,CAAA,CACf,CACD,EAGClC,SACC,MAAI,CAAA,UAAU,iFACd,SAAC0C,EAAAA,KAAA,MAAA,CAAI,UAAU,iDACd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,uEACd,SAAA,CAAAC,MAAC,KAAG,CAAA,UAAU,oCACZ,SAAAzC,EACE,6BACA,kCACJ,EACAyC,EAAA,IAAC,SAAA,CACA,QAAStB,EACT,UAAU,oCAEV,SAAAsB,EAAAA,IAACK,EAAQ,CAAA,UAAU,SAAU,CAAA,CAAA,CAAA,CAC9B,EACD,EACAL,EAAAA,IAAC,OAAI,UAAU,MAEb,WACCD,EAAAA,KAAA,MAAA,CAAI,UAAU,cACd,SAAA,CAACC,EAAAA,IAAAkB,EAAA,CAAc,UAAU,qCAAsC,CAAA,EAC9DlB,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,yCAAA,EACAD,EAAAA,KAAC,IAAE,CAAA,UAAU,6BAA6B,SAAA,CAAA,+CACI,IAC5CC,EAAA,IAAA,OAAA,CAAK,UAAU,YAAa,YAAkB,KAAK,EAAQ,IAAI,iCAAA,EAEjE,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,gCACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAS,IAAMtC,EAA0B,EAAK,EAC9C,UAAU,qFACV,SAAA,UAAA,CAED,EACAsC,EAAA,IAAC,SAAA,CACA,QAASb,EACT,UAAU,gFACV,SAAA,UAAA,CAAA,CAED,CACD,CAAA,CAAA,CACD,CAAA,EACG5B,EACFwC,EAAA,KAAA,MAAA,CAAI,UAAU,YAEd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACd,SAAA,CAAAA,OAAC,MACA,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAA,EAAA,IAAC,QAAA,CACA,KAAK,OACL,UAAU,4GACV,MAAOzC,EAAiB,KACxB,SAAWyD,GACVxD,EAAoB,CACnB,GAAGD,EACH,KAAMyD,EAAE,OAAO,KACf,CAAA,CAAA,CAAA,CAEH,EACD,SACC,MACA,CAAA,SAAA,CAAChB,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,0BAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACd,SAAA,CAAAC,EAAA,IAAC,QAAA,CACA,KAAK,QACL,IAAI,IACJ,IAAI,KACJ,KAAK,IACL,MAAOzC,EAAiB,oBACxB,SAAWyD,GACVxD,EAAoB,CACnB,GAAGD,EACH,oBAAqB,SAASyD,EAAE,OAAO,KAAK,CAAA,CAC5C,EAEF,UAAU,aAAA,CACX,EACAjB,EAAAA,KAAC,OAAK,CAAA,UAAU,+DACd,SAAA,CAAiBxC,EAAA,oBAAoB,GAAA,CACvC,CAAA,CAAA,CACD,CAAA,CAAA,CACD,CAAA,CAAA,EACD,EAGAwC,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACd,SAAA,CAAAA,OAAC,MACA,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,sBAAA,EACAA,EAAA,IAAC,QAAA,CACA,KAAK,OACL,UAAU,4GACV,MACCzC,EAAiB,WACd,IAAI,KAAKA,EAAiB,UAAU,EACnC,YACA,EAAA,MAAM,GAAG,EAAE,CAAC,EACb,GAEJ,SAAWyD,GAAM,CAChB,MAAM1B,EAAO,IAAI,KAAK0B,EAAE,OAAO,KAAK,EACpC1B,EAAK,SAAS,GAAI,GAAI,GAAI,GAAG,EACT9B,EAAA,CACnB,GAAGD,EACH,WAAY+B,EAAK,YAAY,CAAA,CAC7B,CAAA,CACF,CAAA,CACD,EACD,SACC,MACA,CAAA,SAAA,CAACU,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,cAAA,EACAA,EAAA,IAAC,WAAA,CACA,UAAU,4GACV,KAAM,EACN,MAAOzC,EAAiB,aAAe,GACvC,SAAWyD,GACVxD,EAAoB,CACnB,GAAGD,EACH,YAAayD,EAAE,OAAO,KAAA,CACtB,EAEF,YAAY,iDAAA,CAAA,CACb,CACD,CAAA,CAAA,EACD,EAGAjB,EAAAA,KAAC,MAAI,CAAA,UAAU,4BACd,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,gBAAA,EACAA,EAAAA,IAAC,OAAI,UAAU,yBACb,WAAiB,QACjBD,EAAA,KAAC,OAAK,CAAA,UAAU,gGACf,SAAA,CAACC,EAAAA,IAAAO,EAAA,CAAM,UAAU,cAAe,CAAA,EAAE,WAAA,CAEnC,CAAA,EAEAR,EAAAA,KAAC,OAAK,CAAA,UAAU,gGACf,SAAA,CAACC,EAAAA,IAAAQ,EAAA,CAAM,UAAU,cAAe,CAAA,EAAE,UAAA,CAAA,CAEnC,CAEF,CAAA,EACCjD,EAAiB,SAChBwC,OAAA,MAAA,CAAI,UAAU,6CACb,SAAA,CAAiBxC,EAAA,qBAChB,MACA,CAAA,SAAA,CAACyC,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAExC,aAAA,EACAD,EAAA,KAACoB,EAAA,CACA,GAAI,gBAAgB5D,EAAiB,aAAa,EAAE,GACpD,UAAU,+CAET,SAAA,CAAAA,EAAiB,aAAa,KAAK,KAAGA,EAAiB,aAAa,MAAM,GAAA,CAAA,CAAA,CAC5E,EACD,EAEAA,EAAiB,SACjBwC,EAAAA,KAAC,MACA,CAAA,SAAA,CAACC,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAExC,gBAAA,QACC,OAAK,CAAA,UAAU,qBACd,SAAWZ,EAAA7B,EAAiB,OAAO,CACrC,CAAA,CAAA,EACD,EAEAA,EAAiB,iBAChBwC,OAAA,MAAA,CAAI,UAAU,aACd,SAAA,CAACC,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAwB,SAExC,eAAA,EACAD,EAAA,KAACoB,EAAA,CACA,GAAI,mBAAmB5D,EAAiB,gBAAgB,EAAE,GAC1D,UAAU,+CAET,SAAA,CAAAA,EAAiB,gBAAgB,KAAK,MAAIA,EAAiB,gBAAgB,MAAM,GAAA,CAAA,CAAA,CACnF,CACD,CAAA,CAAA,CAEF,CAAA,CAAA,EAEF,EAGAwC,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAStB,EACT,UAAU,qFACV,SAAA,UAAA,CAED,EACAsB,EAAA,IAAC,SAAA,CACA,QAASjB,EACT,UAAU,wFACV,SAAA,iBAAA,CAAA,CAED,CACD,CAAA,CAAA,CACD,CAAA,EAEAgB,EAAAA,KAAC,MAAI,CAAA,UAAU,YAEd,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,wCACd,SAAA,CAAAA,OAAC,MACA,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,SAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,OACd,SAAA,CAAAC,EAAA,IAAC,QAAA,CACA,KAAK,OACL,UAAU,8GACV,MAAOjC,EAAY,KACnB,SAAWiD,GACVhD,EAAe,CACd,GAAGD,EACH,KAAMiD,EAAE,OAAO,KAAA,CACf,EAEF,YAAY,eAAA,CACb,EACAhB,EAAA,IAAC,SAAA,CACA,QAAS,IACRhC,EAAe,CACd,GAAGD,EACH,KAAMU,EAAmB,CAAA,CACzB,EAEF,UAAU,qEACV,MAAM,2BAEN,SAAAuB,EAAAA,IAACa,EAAU,CAAA,KAAM,EAAI,CAAA,CAAA,CAAA,CACtB,CACD,CAAA,CAAA,EACD,SACC,MACA,CAAA,SAAA,CAACb,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,0BAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,oBACd,SAAA,CAAAC,EAAA,IAAC,QAAA,CACA,KAAK,QACL,IAAI,IACJ,IAAI,KACJ,KAAK,IACL,MAAOjC,EAAY,oBACnB,SAAWiD,GACVhD,EAAe,CACd,GAAGD,EACH,oBAAqB,SAASiD,EAAE,OAAO,KAAK,CAAA,CAC5C,EAEF,UAAU,aAAA,CACX,EACAjB,EAAAA,KAAC,OAAK,CAAA,UAAU,+DACd,SAAA,CAAYhC,EAAA,oBAAoB,GAAA,CAClC,CAAA,CAAA,CACD,CAAA,CAAA,CACD,CAAA,CAAA,EACD,EAGAgC,EAAAA,KAAC,MAAI,CAAA,UAAU,wCACd,SAAA,CAAAA,OAAC,MACA,CAAA,SAAA,CAACC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,kBAAA,EACAA,EAAA,IAAC,QAAA,CACA,KAAK,SACL,IAAI,IACJ,IAAI,MACJ,UAAU,4GACV,MAAOjC,EAAY,eACnB,SAAWiD,GACVhD,EAAe,CACd,GAAGD,EACH,eAAgB,SAASiD,EAAE,OAAO,KAAK,CACvC,CAAA,CAAA,CAEH,EACAjB,EAAAA,KAAC,IAAE,CAAA,UAAU,6BAA6B,SAAA,CAAA,gCACX,IAC7BhC,EAAY,eAAe,QAAA,CAC7B,CAAA,CAAA,EACD,SACC,MACA,CAAA,SAAA,CAACiC,EAAA,IAAA,QAAA,CAAM,UAAU,+CAA+C,SAEhE,yBAAA,EACAA,EAAA,IAAC,WAAA,CACA,UAAU,4GACV,KAAM,EACN,MAAOjC,EAAY,aAAe,GAClC,SAAWiD,GACVhD,EAAe,CACd,GAAGD,EACH,YAAaiD,EAAE,OAAO,KAAA,CACtB,EAEF,YAAY,sDAAA,CAAA,CACb,CACD,CAAA,CAAA,EACD,EAGAjB,EAAAA,KAAC,MAAI,CAAA,UAAU,iCACd,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,UAAA,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,wBACd,SAAA,CAAAA,OAAC,IAAE,CAAA,SAAA,CAAA,mCAC+B,IAChCC,EAAA,IAAA,OAAA,CAAK,UAAU,gBACd,WAAY,KACd,EAAQ,IAAI,mBACK,IACjBD,EAAAA,KAAC,OAAK,CAAA,UAAU,gBACd,SAAA,CAAYhC,EAAA,oBAAoB,GAAA,EAClC,EAAQ,IAAI,aAEZgC,EAAAA,KAAC,OAAK,CAAA,UAAU,gBACd,SAAA,CAAA,IACAhC,EAAY,eAAe,OAAA,EAC7B,EAAO,GAAA,EAER,EACCA,EAAY,aACXgC,OAAA,IAAA,CAAE,UAAU,OAAO,SAAA,CAAA,eAEnBA,EAAAA,KAAC,OAAK,CAAA,UAAU,gBACd,SAAA,CAAA,IACAhC,EAAY,WAAA,CACd,CAAA,CAAA,CACD,CAAA,CAAA,CAEF,CAAA,CAAA,EACD,EAGAgC,EAAAA,KAAC,MAAI,CAAA,UAAU,kCACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAStB,EACT,UAAU,qFACV,SAAA,UAAA,CAED,EACAsB,EAAA,IAAC,SAAA,CACA,QAASjB,EACT,UAAU,wFACV,SAAA,cAAA,CAAA,CAED,CACD,CAAA,CAAA,CAAA,CACD,CAEF,CAAA,CAAA,CAAA,CACD,CACD,CAAA,EAIAtB,GAA0BF,GACzByC,EAAAA,IAAA,MAAA,CAAI,UAAU,iFACd,SAACA,MAAA,MAAA,CAAI,UAAU,oDACd,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,cACd,SAAA,CAACC,EAAAA,IAAAkB,EAAA,CAAc,UAAU,qCAAsC,CAAA,EAC9DlB,EAAA,IAAA,KAAA,CAAG,UAAU,yCAAyC,SAEvD,yCAAA,EACAD,EAAAA,KAAC,IAAE,CAAA,UAAU,6BAA6B,SAAA,CAAA,+CACI,IAC5CC,EAAA,IAAA,OAAA,CAAK,UAAU,YAAa,YAAkB,KAAK,EAAO,kCAAA,EAE5D,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,gCACd,SAAA,CAAAC,EAAA,IAAC,SAAA,CACA,QAAS,IAAMtC,EAA0B,EAAK,EAC9C,UAAU,qFACV,SAAA,UAAA,CAED,EACAsC,EAAA,IAAC,SAAA,CACA,QAASb,EACT,UAAU,gFACV,SAAA,UAAA,CAAA,CAED,CACD,CAAA,CAAA,CACD,CAAA,CACD,CAAA,CACD,CAAA,CAAA,EAEF,CAEF"}
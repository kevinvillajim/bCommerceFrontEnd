{"version":3,"file":"PaymentDashboard-D-SV4hKN.js","sources":["../../src/presentation/pages/Payment/PaymentDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BarChart2, TrendingUp, DollarSign, Link, Clock, CheckCircle, XCircle, Timer } from 'lucide-react';\nimport { ApiClient } from '../../../infrastructure/api/apiClient';\nimport { API_ENDPOINTS } from '../../../constants/apiEndpoints';\n\ninterface PaymentStats {\n  total_links: number;\n  pending_links: number;\n  paid_links: number;\n  expired_links: number;\n  total_amount_collected: number;\n  active_links: number;\n}\n\n/**\n * Dashboard para usuarios con rol payment\n * Muestra estadísticas simples de sus links de pago\n */\nconst PaymentDashboard: React.FC = () => {\n  const [stats, setStats] = useState<PaymentStats | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadStats();\n  }, []);\n\n  const loadStats = async () => {\n    try {\n      setLoading(true);\n      const response = await ApiClient.get<{ success: boolean; data: PaymentStats }>(\n        API_ENDPOINTS.EXTERNAL_PAYMENT.DASHBOARD\n      );\n\n      if (response.success) {\n        setStats(response.data);\n      } else {\n        setError('Error cargando estadísticas');\n      }\n    } catch (err: any) {\n      console.error('Error loading payment stats:', err);\n      setError(err.response?.data?.message || 'Error cargando estadísticas');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <XCircle className=\"h-16 w-16 text-red-500 mx-auto mb-4\" />\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Error</h2>\n          <p className=\"text-gray-600 mb-4\">{error}</p>\n          <button\n            onClick={loadStats}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n          >\n            Reintentar\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!stats) return null;\n\n  const conversionRate = stats.total_links > 0\n    ? ((stats.paid_links / stats.total_links) * 100).toFixed(1)\n    : '0.0';\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <div className=\"flex items-center\">\n          <BarChart2 className=\"h-8 w-8 text-blue-600 mr-3\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard de Pagos</h1>\n            <p className=\"text-gray-600\">Resumen de tus links de pago</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Estadísticas principales */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {/* Total Links */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <Link className=\"h-8 w-8 text-blue-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Total Links</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.total_links}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Links Pagados */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <CheckCircle className=\"h-8 w-8 text-green-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Pagados</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.paid_links}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Links Pendientes */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <Clock className=\"h-8 w-8 text-yellow-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Pendientes</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.pending_links}</p>\n            </div>\n          </div>\n        </div>\n\n        {/* Total Recaudado */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <DollarSign className=\"h-8 w-8 text-green-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-500\">Recaudado</p>\n              <p className=\"text-2xl font-bold text-gray-900\">${Number(stats.total_amount_collected || 0).toFixed(2)}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Estadísticas adicionales */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Links Activos */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-500\">Links Activos</p>\n              <p className=\"text-3xl font-bold text-blue-600\">{stats.active_links}</p>\n              <p className=\"text-sm text-gray-500 mt-1\">Disponibles para pago</p>\n            </div>\n            <Timer className=\"h-12 w-12 text-blue-600\" />\n          </div>\n        </div>\n\n        {/* Links Expirados */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-500\">Expirados</p>\n              <p className=\"text-3xl font-bold text-red-600\">{stats.expired_links}</p>\n              <p className=\"text-sm text-gray-500 mt-1\">Ya no válidos</p>\n            </div>\n            <XCircle className=\"h-12 w-12 text-red-600\" />\n          </div>\n        </div>\n\n        {/* Tasa de Conversión */}\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-gray-500\">Conversión</p>\n              <p className=\"text-3xl font-bold text-green-600\">{conversionRate}%</p>\n              <p className=\"text-sm text-gray-500 mt-1\">Links pagados vs total</p>\n            </div>\n            <TrendingUp className=\"h-12 w-12 text-green-600\" />\n          </div>\n        </div>\n      </div>\n\n      {/* Acciones rápidas */}\n      <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Acciones Rápidas</h3>\n        <div className=\"flex flex-wrap gap-4\">\n          <button\n            onClick={() => window.location.href = '/payment/create'}\n            className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center\"\n          >\n            <Link className=\"h-5 w-5 mr-2\" />\n            Crear Nuevo Link\n          </button>\n          <button\n            onClick={() => window.location.href = '/payment/links'}\n            className=\"bg-white text-blue-600 border border-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50 transition-colors inline-flex items-center\"\n          >\n            <BarChart2 className=\"h-5 w-5 mr-2\" />\n            Ver Mis Links\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PaymentDashboard;"],"names":["PaymentDashboard","stats","setStats","useState","loading","setLoading","error","setError","useEffect","loadStats","response","ApiClient","API_ENDPOINTS","err","jsx","jsxs","XCircle","conversionRate","BarChart2","Link","CheckCircle","Clock","DollarSign","Timer","TrendingUp"],"mappings":"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"}
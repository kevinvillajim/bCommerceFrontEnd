import{h as b,d as w,r as i,j as e,L as p}from"./index-DmNDOrWy.js";import{f as a}from"./formatCurrency-CXuiUHwQ.js";import{f as h}from"./formatDate-DOKfBcN0.js";import{O as g}from"./OrderStatusBadge-CE0y32qI.js";import{O as D}from"./OrderServiceAdapter-DWn3IDlZ.js";import{A as k}from"./arrow-left-sVt-VeaA.js";import{F as P}from"./file-text-DT6_O-Nw.js";import{P as j}from"./package-CIRlwNqy.js";import{T as E}from"./truck-DP84WB3Y.js";import"./Order-YtLC4nUV.js";const F=()=>{const{id:l}=b(),c=w(),[s,u]=i.useState(null),[y,n]=i.useState(!0),[x,m]=i.useState(null),N=new D;i.useEffect(()=>{f()},[l]);const f=async()=>{if(l){n(!0);try{const t=await N.getOrderDetails(l);console.log("Detalles de la orden recibidos:",t),u(t),m(null)}catch(t){m("No se pudo cargar el detalle de la orden"),console.error("Error al cargar detalles de orden:",t)}finally{n(!1)}}},d=()=>!s||!s.items||s.items.length===0?0:s.items.reduce((t,r)=>t+r.price*r.quantity,0),o=()=>d()*.15,v=()=>{const t=d(),r=o();return t+r};return y?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"}),e.jsx("p",{className:"mt-4 text-gray-700",children:"Cargando detalles del pedido..."})]}):x||!s?e.jsx("div",{className:"bg-white rounded-lg shadow p-6 max-w-4xl mx-auto my-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"❌"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error al cargar el pedido"}),e.jsx("p",{className:"text-gray-700 mb-6",children:x||"No se pudo encontrar el pedido solicitado"}),e.jsx("button",{onClick:()=>c("/orders"),className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Volver a mis pedidos"})]})}):e.jsx("div",{className:"py-8 px-4 md:px-8 max-w-7xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>c("/orders"),className:"cursor-pointer flex items-center text-gray-600 hover:text-primary-600 mb-2",children:[e.jsx(k,{size:16,className:"mr-1"}),e.jsx("span",{children:"Volver a mis pedidos"})]}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Pedido #",s.orderNumber||s.orderNumber]})]}),e.jsx("div",{className:"flex space-x-3",children:["completed","delivered"].includes(s.status)&&e.jsxs(p,{to:`/invoices/${s.id}`,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(P,{size:18}),e.jsx("span",{children:"Ver factura"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"col-span-3 md:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado del pedido"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Estado:"}),e.jsx(g,{status:s.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Pago:"}),e.jsx(g,{status:s.paymentStatus,type:"payment"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Método de pago:"}),e.jsxs("span",{className:"text-gray-900",children:[s.paymentMethod==="credit_card"&&"Tarjeta de crédito",s.paymentMethod==="paypal"&&"PayPal",s.paymentMethod==="transfer"&&"Transferencia",s.paymentMethod==="other"&&"Otro",!s.paymentMethod&&"No especificado"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Fecha:"}),e.jsx("span",{className:"text-gray-900",children:s.createdAt?h(s.createdAt):"Sin fecha"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información de envío"}),e.jsx("div",{className:"space-y-3",children:s.shippingData?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Dirección de envío:"}),e.jsx("p",{className:"text-gray-900",children:s.shippingData.address}),e.jsxs("p",{className:"text-gray-900",children:[s.shippingData.city,", ",s.shippingData.state]}),e.jsxs("p",{className:"text-gray-900",children:[s.shippingData.country,","," ",s.shippingData.postalCode]})]}),s.shippingData.phone&&e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600",children:"Teléfono:"}),e.jsx("p",{className:"text-gray-900",children:s.shippingData.phone})]}),s.shippingData.tracking_number&&e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600",children:"Número de seguimiento:"}),e.jsx("p",{className:"text-primary-600 font-medium",children:s.shippingData.tracking_number})]}),s.shippingData.shipping_company&&e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600",children:"Empresa de transporte:"}),e.jsx("p",{className:"text-gray-900",children:s.shippingData.shipping_company})]}),s.shippingData.estimated_delivery&&e.jsxs("div",{children:[e.jsx("span",{className:"block text-sm font-medium text-gray-600",children:"Entrega estimada:"}),e.jsx("p",{className:"text-gray-900",children:h(s.shippingData.estimated_delivery)})]})]}):e.jsx("p",{className:"text-gray-600",children:"No hay información de envío disponible"})}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.status!=="pending"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(j,{size:20})}),e.jsx("span",{className:"text-xs mt-1",children:s.status!=="pending"?"Procesando":"Pendiente"})]}),e.jsx("div",{className:"flex-1 h-1 mx-2 bg-gray-200"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.status==="shipped"||s.status==="delivered"||s.status==="completed"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(E,{size:20})}),e.jsx("span",{className:"text-xs mt-1",children:"Enviado"})]}),e.jsx("div",{className:"flex-1 h-1 mx-2 bg-gray-200"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.status==="delivered"||s.status==="completed"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(j,{size:20})}),e.jsx("span",{className:"text-xs mt-1",children:"Entregado"})]})]})})})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 p-6 pb-3",children:"Productos"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Producto"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subtotal"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.items.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[t.product_image&&e.jsx("div",{className:"flex-shrink-0 h-10 w-10 mr-3",children:e.jsx("img",{className:"h-10 w-10 rounded-md object-cover",src:t.product_image,alt:t.product_name||"Producto"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.product_name||"Producto"}),t.productId&&e.jsx(p,{to:`/products/${t.productId}`,className:"text-xs text-primary-600 hover:underline",children:"Ver producto"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:a(t.price)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:t.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:a(t.price*t.quantity)})]},t.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resumen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center pb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),e.jsx("span",{className:"text-gray-900",children:a(d())})]}),e.jsxs("div",{className:"flex justify-between items-center pb-2",children:[e.jsx("span",{className:"text-gray-600",children:"IVA (15%):"}),e.jsx("span",{className:"text-gray-900",children:a(o())})]}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200 font-medium",children:[e.jsx("span",{className:"text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-lg text-gray-900",children:a(v())})]})]})]})]})]})]})})};export{F as default};
//# sourceMappingURL=OrderDetailClientPage-D-ypRjYK.js.map

{"version":3,"file":"CategoryPage-DGKgsMEv.js","sources":["../../src/presentation/pages/CategoryPage.tsx"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\nimport {ChevronRight} from \"lucide-react\";\r\nimport useCategories from \"../hooks/useCategories\";\r\n\r\ninterface Subtitle {\r\n\tlabel: string;\r\n\tlink: string;\r\n}\r\n\r\ninterface Section {\r\n\ttitle: string;\r\n\tdescription: string;\r\n\tsubtitles: Subtitle[];\r\n}\r\n\r\nconst CategoryPage = () => {\r\n\tconst {loading, error, mainCategories, fetchMainCategories} = useCategories();\r\n\tconst [secciones, setSecciones] = useState<Section[]>([]);\r\n\r\n\t// Fetch main categories on component mount\r\n\tuseEffect(() => {\r\n\t\tconst loadCategories = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tawait fetchMainCategories(true, false); // withCounts=true, forceRefresh=false\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error loading main categories:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (mainCategories.length === 0) {\r\n\t\t\tloadCategories();\r\n\t\t}\r\n\t}, [fetchMainCategories, mainCategories.length]);\r\n\r\n\t// Transform API categories to component format\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\r\n\t\t\t\"üîÑ CategoryPage: transformando categor√≠as principales:\",\r\n\t\t\tmainCategories\r\n\t\t);\r\n\r\n\t\tif (mainCategories && mainCategories.length > 0) {\r\n\t\t\tconst transformedSections: Section[] = mainCategories.map((category) => {\r\n\t\t\t\t// Get subcategories if available\r\n\t\t\t\tconst subtitles: Subtitle[] = category.subcategories\r\n\t\t\t\t\t? category.subcategories\r\n\t\t\t\t\t\t\t.filter((subcategory) => subcategory.is_active !== false) // Solo subcategor√≠as activas\r\n\t\t\t\t\t\t\t.slice(0, 5) // Limit to 5 subcategories per section\r\n\t\t\t\t\t\t\t.map((subcategory) => ({\r\n\t\t\t\t\t\t\t\tlabel: subcategory.name,\r\n\t\t\t\t\t\t\t\tlink: `/categoria/${subcategory.slug}`,\r\n\t\t\t\t\t\t\t}))\r\n\t\t\t\t\t: [];\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: category.name,\r\n\t\t\t\t\tdescription:\r\n\t\t\t\t\t\tcategory.description || \"Descubre nuestra selecci√≥n de productos\",\r\n\t\t\t\t\tsubtitles: subtitles,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\t\tconsole.log(\r\n\t\t\t\t\"‚úÖ CategoryPage: secciones transformadas:\",\r\n\t\t\t\ttransformedSections\r\n\t\t\t);\r\n\t\t\tsetSecciones(transformedSections);\r\n\t\t} else {\r\n\t\t\tconsole.log(\"‚ö†Ô∏è CategoryPage: No hay categor√≠as principales disponibles\");\r\n\t\t\tsetSecciones([]);\r\n\t\t}\r\n\t}, [mainCategories]);\r\n\r\n\t// Show loading state\r\n\tif (loading) {\r\n\t\treturn (\r\n\t\t\t<div className=\"max-w-6xl mx-auto px-4 py-12\">\r\n\t\t\t\t<div className=\"flex justify-center items-center h-64\">\r\n\t\t\t\t\t<div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Show error state\r\n\tif (error) {\r\n\t\treturn (\r\n\t\t\t<div className=\"max-w-6xl mx-auto px-4 py-12\">\r\n\t\t\t\t<div className=\"bg-red-50 border-l-4 border-red-500 p-4 rounded\">\r\n\t\t\t\t\t<p className=\"text-red-700\">Error al cargar categor√≠as: {error}</p>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => fetchMainCategories(true, true)} // Force refresh\r\n\t\t\t\t\t\tclassName=\"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tReintentar\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\t// Show empty state\r\n\tif (secciones.length === 0) {\r\n\t\treturn (\r\n\t\t\t<div className=\"max-w-6xl mx-auto px-4 py-12\">\r\n\t\t\t\t<div className=\"text-center\">\r\n\t\t\t\t\t<h1 className=\"text-4xl font-bold mb-4 text-gray-800\">\r\n\t\t\t\t\t\tExplora Nuestras Categor√≠as\r\n\t\t\t\t\t</h1>\r\n\t\t\t\t\t<p className=\"text-gray-600 max-w-2xl mx-auto mb-8\">\r\n\t\t\t\t\t\tDescubre contenido relevante organizado por temas.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div className=\"bg-gray-50 border border-gray-200 p-8 rounded-lg\">\r\n\t\t\t\t\t\t<p className=\"text-gray-500\">\r\n\t\t\t\t\t\t\tNo hay categor√≠as disponibles en este momento.\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tonClick={() => fetchMainCategories(true, true)}\r\n\t\t\t\t\t\t\tclassName=\"mt-3 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tRecargar categor√≠as\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"max-w-6xl mx-auto px-4 py-12\">\r\n\t\t\t<header className=\"text-center mb-16\">\r\n\t\t\t\t<h1 className=\"text-4xl font-bold mb-4 text-gray-800\">\r\n\t\t\t\t\tExplora Nuestras Categor√≠as\r\n\t\t\t\t</h1>\r\n\t\t\t\t<p className=\"text-gray-600 max-w-2xl mx-auto\">\r\n\t\t\t\t\tDescubre contenido relevante organizado por temas. Navega por nuestras\r\n\t\t\t\t\tcategor√≠as para encontrar informaci√≥n actualizada y recursos √∫tiles.\r\n\t\t\t\t</p>\r\n\t\t\t</header>\r\n\r\n\t\t\t<div className=\"grid md:grid-cols-2 gap-8\">\r\n\t\t\t\t{secciones.map((section, index) => (\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tkey={`section-${index}-${section.title}`}\r\n\t\t\t\t\t\tclassName=\"bg-white rounded-xl shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div className=\"bg-gradient-to-bl from-primary-700 to-black px-6 py-8 opacity-90 text-white\">\r\n\t\t\t\t\t\t\t<div className=\"flex items-center mb-4\">\r\n\t\t\t\t\t\t\t\t<h2 className=\"text-2xl font-bold\">{section.title}</h2>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<p className=\"opacity-90\">{section.description}</p>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{section.subtitles.length > 0 ? (\r\n\t\t\t\t\t\t\t<ul className=\"divide-y divide-gray-100\">\r\n\t\t\t\t\t\t\t\t{section.subtitles.map((sub: Subtitle, subIndex: number) => (\r\n\t\t\t\t\t\t\t\t\t<li key={`subtitle-${subIndex}-${sub.label}`}>\r\n\t\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\t\thref={sub.link}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-gray-700 font-medium\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{sub.label}\r\n\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t<ChevronRight className=\"text-gray-400 h-5 w-5\" />\r\n\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<div className=\"p-4 text-center text-gray-500\">\r\n\t\t\t\t\t\t\t\t<p>No hay subcategor√≠as disponibles</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t\t<div className=\"px-6 py-4 bg-gray-50\">\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref={`/products?category=${encodeURIComponent(section.title)}`}\r\n\t\t\t\t\t\t\t\tclassName=\"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tVer todos los productos\r\n\t\t\t\t\t\t\t\t<ChevronRight className=\"ml-1 h-4 w-4\" />\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default CategoryPage;\r\n"],"names":["CategoryPage","loading","error","mainCategories","fetchMainCategories","useCategories","secciones","setSecciones","useState","useEffect","loadCategories","transformedSections","category","subtitles","subcategory","jsx","jsxs","section","index","sub","subIndex","ChevronRight"],"mappings":"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"}
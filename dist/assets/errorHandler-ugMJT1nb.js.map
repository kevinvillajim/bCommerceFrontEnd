{"version":3,"file":"errorHandler-ugMJT1nb.js","sources":["../../src/utils/errorHandler.ts"],"sourcesContent":["/**\r\n * Utilidad para manejar errores de la API y extraer mensajes útiles\r\n */\r\n\r\n/**\r\n * Extrae un mensaje de error legible de una respuesta de error de la API\r\n * @param error Error de la API o cualquier otro error\r\n * @param defaultMessage Mensaje por defecto si no se puede extraer uno mejor\r\n * @returns Mensaje de error legible para el usuario\r\n */\r\nexport const extractErrorMessage = (\r\n\terror: any,\r\n\tdefaultMessage: string = \"Ha ocurrido un error\"\r\n): string => {\r\n\t// Si el error es una instancia de Error, usar su mensaje\r\n\tif (error instanceof Error) {\r\n\t\treturn error.message;\r\n\t}\r\n\r\n\t// Si es un error de Axios u otro error HTTP con formato de respuesta\r\n\tif (error && typeof error === \"object\") {\r\n\t\t// Verificar si tiene una estructura de respuesta (Axios u otros clientes HTTP)\r\n\t\tif (\"response\" in error && error.response) {\r\n\t\t\tconst {response} = error;\r\n\r\n\t\t\t// Extraer mensaje del cuerpo de la respuesta\r\n\t\t\tif (response.data) {\r\n\t\t\t\t// Mensaje directo\r\n\t\t\t\tif (typeof response.data.message === \"string\") {\r\n\t\t\t\t\treturn response.data.message;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Errores de validación\r\n\t\t\t\tif (response.data.errors && typeof response.data.errors === \"object\") {\r\n\t\t\t\t\tconst validationErrors = Object.values(response.data.errors).flat();\r\n\t\t\t\t\tif (validationErrors.length > 0) {\r\n\t\t\t\t\t\treturn Array.isArray(validationErrors[0])\r\n\t\t\t\t\t\t\t? validationErrors[0].join(\". \")\r\n\t\t\t\t\t\t\t: validationErrors.join(\". \");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Si hay un mensaje de error en formato string\r\n\t\t\t\tif (typeof response.data === \"string\") {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Usar el código de estado HTTP si está disponible\r\n\t\t\tif (response.status) {\r\n\t\t\t\treturn getHttpStatusMessage(response.status);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Errores de red\r\n\t\tif (\"message\" in error && typeof error.message === \"string\") {\r\n\t\t\tif (\r\n\t\t\t\terror.message.includes(\"network\") ||\r\n\t\t\t\terror.message.includes(\"Network\")\r\n\t\t\t) {\r\n\t\t\t\treturn \"Error de conexión. Verifica tu conexión a internet.\";\r\n\t\t\t}\r\n\r\n\t\t\tif (error.message.includes(\"timeout\")) {\r\n\t\t\t\treturn \"La solicitud ha tardado demasiado tiempo. Intenta de nuevo más tarde.\";\r\n\t\t\t}\r\n\r\n\t\t\treturn error.message;\r\n\t\t}\r\n\t}\r\n\r\n\t// Si no podemos extraer un mensaje específico, devolver el mensaje por defecto\r\n\treturn defaultMessage;\r\n};\r\n\r\n/**\r\n * Obtiene un mensaje descriptivo basado en el código de estado HTTP\r\n * @param statusCode Código de estado HTTP\r\n * @returns Mensaje descriptivo\r\n */\r\nconst getHttpStatusMessage = (statusCode: number): string => {\r\n\tswitch (statusCode) {\r\n\t\tcase 400:\r\n\t\t\treturn \"Solicitud incorrecta. Verifica los datos enviados.\";\r\n\t\tcase 401:\r\n\t\t\treturn \"No estás autorizado. Inicia sesión nuevamente.\";\r\n\t\tcase 403:\r\n\t\t\treturn \"No tienes permiso para realizar esta acción.\";\r\n\t\tcase 404:\r\n\t\t\treturn \"El recurso solicitado no se ha encontrado.\";\r\n\t\tcase 422:\r\n\t\t\treturn \"Error de validación. Verifica los datos enviados.\";\r\n\t\tcase 500:\r\n\t\t\treturn \"Error en el servidor. Intenta más tarde o contacta al soporte.\";\r\n\t\tcase 503:\r\n\t\t\treturn \"Servicio no disponible. Intenta más tarde.\";\r\n\t\tdefault:\r\n\t\t\treturn `Error ${statusCode}. Por favor, intenta de nuevo.`;\r\n\t}\r\n};\r\n\r\nexport default {\r\n\textractErrorMessage,\r\n\tgetHttpStatusMessage,\r\n};\r\n"],"names":["extractErrorMessage","error","defaultMessage","response","validationErrors","getHttpStatusMessage","statusCode"],"mappings":"AAUO,MAAMA,EAAsB,CAClCC,EACAC,EAAyB,yBACb,CAEZ,GAAID,aAAiB,MACpB,OAAOA,EAAM,QAIV,GAAAA,GAAS,OAAOA,GAAU,SAAU,CAEnC,GAAA,aAAcA,GAASA,EAAM,SAAU,CACpC,KAAA,CAAC,SAAAE,GAAYF,EAGnB,GAAIE,EAAS,KAAM,CAElB,GAAI,OAAOA,EAAS,KAAK,SAAY,SACpC,OAAOA,EAAS,KAAK,QAItB,GAAIA,EAAS,KAAK,QAAU,OAAOA,EAAS,KAAK,QAAW,SAAU,CACrE,MAAMC,EAAmB,OAAO,OAAOD,EAAS,KAAK,MAAM,EAAE,KAAK,EAC9D,GAAAC,EAAiB,OAAS,EAC7B,OAAO,MAAM,QAAQA,EAAiB,CAAC,CAAC,EACrCA,EAAiB,CAAC,EAAE,KAAK,IAAI,EAC7BA,EAAiB,KAAK,IAAI,CAC9B,CAIG,GAAA,OAAOD,EAAS,MAAS,SAC5B,OAAOA,EAAS,IACjB,CAID,GAAIA,EAAS,OACL,OAAAE,EAAqBF,EAAS,MAAM,CAC5C,CAID,GAAI,YAAaF,GAAS,OAAOA,EAAM,SAAY,SAEjD,OAAAA,EAAM,QAAQ,SAAS,SAAS,GAChCA,EAAM,QAAQ,SAAS,SAAS,EAEzB,sDAGJA,EAAM,QAAQ,SAAS,SAAS,EAC5B,wEAGDA,EAAM,OACd,CAIM,OAAAC,CACR,EAOMG,EAAwBC,GAA+B,CAC5D,OAAQA,EAAY,CACnB,IAAK,KACG,MAAA,qDACR,IAAK,KACG,MAAA,iDACR,IAAK,KACG,MAAA,+CACR,IAAK,KACG,MAAA,6CACR,IAAK,KACG,MAAA,oDACR,IAAK,KACG,MAAA,iEACR,IAAK,KACG,MAAA,6CACR,QACC,MAAO,SAASA,CAAU,gCAAA,CAE7B"}
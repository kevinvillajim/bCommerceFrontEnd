import{j as e,X as _,S as ve,P as E,b as ee,c as W,aG as M,aN as Q,aO as X,aP as Y,aK as O,aH as J,aI as D,aj as B,f as Ne,aQ as Ce,aD as he,F as ue}from"./ui-vendor-DEBjJ4HS.js";import{j as we,r as m,R as te}from"./react-vendor-Cy458wKG.js";import{u as Pe}from"./useProducts-BFMKob-z.js";import{b as V,k as ke,C as q,j as Se}from"./admin-chunk-bhOJ3jtA.js";import{R as Fe,b as Re}from"./seller-chunk-B6Pjm2KH.js";import{b as Ae,u as Ie}from"./checkout-chunk-D9tWfuim.js";import{u as ze}from"./useFavorites-CRNKuI5K.js";import{P as $e}from"./ProductCardCompact-B32pVXOM.js";import"./useImageCache-CGoqKLsX.js";import"./utils-vendor-DeGC_a19.js";import"./chat-chunk-C3LrqA3R.js";import"./index-DLHbx6mE.js";const Te=(t,i=V.pagination.defaultPageSize)=>{const[l,c]=we(),d=m.useRef(!1),n=m.useRef(""),[o,x]=m.useState(()=>{const r=l.get("category"),y=l.get("minPrice"),C=l.get("maxPrice"),F=l.get("rating"),S=l.get("discount"),A=l.get("sort"),R=l.get("page"),$=l.get("search");return console.log("useProductFilters: Inicializando desde URL:",{categoryParam:r,minPriceParam:y,maxPriceParam:C,ratingParam:F,discountParam:S,sortParam:A,pageParam:R,searchParam:$}),{categories:r?r.split(",").map(P=>decodeURIComponent(P)):[],priceRange:y&&C?{min:parseInt(y),max:parseInt(C)}:null,rating:F?parseInt(F):null,discount:S==="true",sortBy:A||"featured",page:R?parseInt(R):1,searchTerm:$||""}});m.useEffect(()=>{if(!d.current)return;const r=new URLSearchParams;o.categories.length>0&&r.set("category",o.categories.map(C=>encodeURIComponent(C)).join(",")),o.priceRange&&(r.set("minPrice",o.priceRange.min.toString()),r.set("maxPrice",o.priceRange.max.toString())),o.rating&&r.set("rating",o.rating.toString()),o.discount&&r.set("discount","true"),o.sortBy!=="featured"&&r.set("sort",o.sortBy),o.page>1&&r.set("page",o.page.toString()),o.searchTerm&&r.set("search",o.searchTerm);const y=r.toString();console.log("useProductFilters: Actualizando URL:",y),c(r,{replace:!0}),setTimeout(()=>{d.current=!1},100)},[o,c]),m.useEffect(()=>{const r=l.toString();if(r===n.current)return;n.current=r,console.log("useProductFilters: URL cambi√≥, actualizando estado:",r);const y=l.get("category"),C=l.get("minPrice"),F=l.get("maxPrice"),S=l.get("rating"),A=l.get("discount"),R=l.get("sort"),$=l.get("page"),P=l.get("search");x({categories:y?y.split(",").map(I=>decodeURIComponent(I)):[],priceRange:C&&F?{min:parseInt(C),max:parseInt(F)}:null,rating:S?parseInt(S):null,discount:A==="true",sortBy:R||"featured",page:$?parseInt($):1,searchTerm:P||""})},[l]);const a=m.useCallback(r=>{d.current=!0,x(y=>({...y,...r,page:r.page!==void 0?r.page:1}))},[]),p=m.useCallback(r=>{console.log("useProductFilters: Actualizando categor√≠as:",r),a({categories:r})},[a]),j=m.useCallback(r=>{console.log("useProductFilters: Actualizando rango de precio:",r),a({priceRange:r})},[a]),b=m.useCallback(r=>{console.log("useProductFilters: Actualizando rating:",r),a({rating:r})},[a]),v=m.useCallback(r=>{console.log("useProductFilters: Actualizando descuento:",r),a({discount:r})},[a]),N=m.useCallback(r=>{console.log("useProductFilters: Actualizando ordenamiento:",r),a({sortBy:r})},[a]),g=m.useCallback(r=>{console.log("useProductFilters: Actualizando p√°gina:",r),a({page:r})},[a]),h=m.useCallback(r=>{console.log("useProductFilters: Actualizando t√©rmino de b√∫squeda:",r),a({searchTerm:r})},[a]),s=m.useCallback(()=>{console.log("useProductFilters: Limpiando todos los filtros"),a({categories:[],priceRange:null,rating:null,discount:!1,sortBy:"featured",page:1,searchTerm:""})},[a]),f=m.useCallback(r=>{console.log("useProductFilters: Alternando categor√≠a:",r),x(y=>{const F=y.categories.includes(r)?y.categories.filter(S=>S!==r):[...y.categories,r];return d.current=!0,{...y,categories:F,page:1}})},[]),k=m.useCallback(()=>{console.log("üîß useProductFilters: Construyendo par√°metros desde estado:",o);const r={limit:i,offset:(o.page-1)*i,published:!0,status:"active",sortBy:"featured",sortDir:"desc"};if(console.log("‚öôÔ∏è useProductFilters: Par√°metros base:",r),o.searchTerm&&(r.term=o.searchTerm),o.categories.length>0){const y=[];o.categories.forEach(C=>{const F=t.find(S=>S.name.toLowerCase().trim()===C.toLowerCase().trim());F?.id?y.push(F.id):(console.warn(`useProductFilters: No se encontr√≥ categor√≠a: "${C}"`),console.log("useProductFilters: Categor√≠as disponibles:",t.map(S=>S.name)))}),console.log("useProductFilters: IDs de categor√≠as encontrados:",y,"para nombres:",o.categories),y.length>0&&(r.categoryIds=y,r.categoryOperator="or")}if(o.priceRange&&(r.minPrice=o.priceRange.min,r.maxPrice=o.priceRange.max),o.rating&&(r.rating=o.rating),o.discount&&(r.minDiscount=5),o.sortBy&&o.sortBy!=="featured")switch(console.log("üîÑ useProductFilters: Aplicando ordenamiento personalizado:",o.sortBy),o.sortBy){case"price-asc":r.sortBy="price",r.sortDir="asc";break;case"price-desc":r.sortBy="price",r.sortDir="desc";break;case"name-asc":r.sortBy="name",r.sortDir="asc";break;case"name-desc":r.sortBy="name",r.sortDir="desc";break;case"newest":r.sortBy="created_at",r.sortDir="desc";break;case"rating":r.sortBy="rating",r.sortDir="desc";break}else console.log("‚≠ê useProductFilters: Usando ordenamiento por defecto (featured)");return r.calculateRatingsFromTable=!0,console.log("‚úÖ useProductFilters: Par√°metros finales para API:",r),(!r.limit||r.limit<=0)&&(r.limit=i,console.warn("‚ö†Ô∏è useProductFilters: Corrigiendo limit inv√°lido")),r.sortBy||(r.sortBy="featured",r.sortDir="desc",console.warn("‚ö†Ô∏è useProductFilters: Corrigiendo sortBy faltante")),console.log("üöÄ useProductFilters: Par√°metros VALIDADOS:",r),r},[o,t,i]);return{filters:o,buildFilterParams:k,setCategories:p,setPriceRange:j,setRating:b,setDiscount:v,setSortBy:N,setPage:g,setSearchTerm:h,clearFilters:s,toggleCategory:f}},Ee=()=>{const[t,i]=m.useState(""),[l,c]=m.useState(!1),d=m.useCallback(a=>{const p=a.target.value;i(p)},[]),n=m.useCallback(a=>{i(a)},[]),o=m.useCallback(a=>p=>{p.preventDefault(),c(!0),a(t),setTimeout(()=>{c(!1)},300)},[t]),x=m.useCallback(a=>{i(""),a()},[]);return{searchTerm:t,isSearching:l,handleSearchChange:d,handleSearchSubmit:o,clearSearch:x,setSearchTermExternal:n}},_e=({searchTerm:t,onSearchChange:i,onSearch:l,onClear:c,isLoading:d=!1})=>{const n=m.useRef(null),o=()=>{c&&(c(),setTimeout(()=>{n.current&&n.current.focus()},0))};return e.jsxs("div",{className:"mb-8",children:[e.jsxs("form",{onSubmit:l,className:"relative",children:[e.jsx("input",{ref:n,type:"text",placeholder:"Buscar productos...",className:"w-full py-3 px-4 pr-16 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-300 focus:border-transparent",value:t,onChange:i,disabled:d,autoComplete:"off"}),t&&e.jsx("button",{type:"button",onClick:o,className:"absolute right-12 top-3 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Limpiar b√∫squeda",disabled:d,children:e.jsx(_,{size:20})}),e.jsx("button",{type:"submit",className:"absolute right-3 top-3 text-gray-400 hover:text-primary-600 focus:outline-none flex items-center justify-center h-6 w-6","aria-label":"Buscar",disabled:d,children:d?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-primary-600"}):e.jsx(ve,{size:20,className:"hover:text-primary-600"})})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 text-right",children:"Presiona Enter o haz clic en la lupa para buscar"})]})},Me=te.memo(_e),xe={smartphone:B,smartphones:B,tel√©fono:B,telefono:B,m√≥vil:B,movil:B,tv:D,tvs:D,televisor:D,televisi√≥n:D,television:D,laptop:M,laptops:M,port√°til:M,portatil:M,ordenador:M,computadora:M,monitor:J,monitores:J,pantalla:J,auricular:O,auriculares:O,headphone:O,audio:O,c√°mara:Y,camara:Y,foto:Y,reloj:X,relojes:X,watch:X,altavoz:Q,altavoces:Q,speaker:Q,electr√≥nica:E,electronica:E,inform√°tica:M,informatica:M,tecnolog√≠a:E,tecnologia:E,moda:E,ropa:E,accesorios:E},Be=({categories:t,isLoading:i=!1,onCategoryClick:l})=>{const[c,d]=m.useState(0),n=()=>{if(typeof window>"u")return 8;const g=window.innerWidth;return g<640?4:g<768?6:g<1024?8:12},[o,x]=m.useState(n);te.useEffect(()=>{const g=()=>{x(n());const h=Math.ceil(t.length/n());c>=h&&h>0&&d(h-1)};return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[t.length,c]);const a=Math.ceil(t.length/o),p=()=>{const g=c*o,h=g+o;return t.slice(g,h)},j=()=>{c>0&&d(c-1)},b=()=>{c<a-1&&d(c+1)},v=(g,h)=>{h.preventDefault(),l&&l(g)},N=g=>{if(g.icon&&g.icon.match(/\p{Emoji}/u))return e.jsx("span",{className:"text-xl",children:g.icon});const h=g.name.toLowerCase(),s=Object.keys(xe).find(f=>h.includes(f)||f.includes(h));if(s){const f=xe[s];return e.jsx(f,{size:20,className:"text-gray-600"})}return e.jsx(E,{size:20,className:"text-gray-600"})};return i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})}):t.length===0?e.jsxs("div",{className:"p-6 bg-gray-50 text-gray-500 rounded-lg text-center",children:[e.jsx(E,{size:32,className:"mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No hay categor√≠as disponibles"})]}):e.jsxs("div",{className:"space-y-4",children:[a>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[t.length," categor√≠as"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:j,disabled:c===0,className:`p-2 rounded-full border transition-colors ${c>0?"cursor-pointer text-gray-700 border-gray-300 hover:bg-gray-100 hover:border-gray-400":"text-gray-400 border-gray-200 cursor-not-allowed"}`,"aria-label":"P√°gina anterior",children:e.jsx(ee,{size:18})}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:a}).map((g,h)=>e.jsx("button",{onClick:()=>d(h),className:`w-2 h-2 rounded-full transition-colors ${h===c?"bg-primary-600":"bg-gray-300 hover:bg-gray-400"}`,"aria-label":`Ir a p√°gina ${h+1}`},h))}),e.jsx("button",{onClick:b,disabled:c===a-1,className:`p-2 rounded-full border transition-colors ${c<a-1?"cursor-pointer text-gray-700 border-gray-300 hover:bg-gray-100 hover:border-gray-400":"text-gray-400 border-gray-200 cursor-not-allowed"}`,"aria-label":"P√°gina siguiente",children:e.jsx(W,{size:18})})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:p().map(g=>e.jsx("div",{className:"group block no-underline text-gray-800 cursor-pointer",onClick:h=>v(g,h),children:e.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 rounded-lg border border-gray-100 hover:border-primary-200 hover:bg-primary-50 transition-all duration-200 hover:shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 group-hover:bg-white group-hover:shadow-sm transition-all duration-200",children:N(g)}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-800 group-hover:text-primary-700 transition-colors duration-200 line-clamp-2",children:g.name}),g.product_count!==void 0&&g.product_count>0&&e.jsxs("span",{className:"text-xs text-gray-500 mt-1 block",children:[g.product_count," productos"]})]}),e.jsx(W,{className:"w-4 h-4 text-gray-400 group-hover:text-primary-600 transition-colors duration-200 opacity-0 group-hover:opacity-100"})]})},g.id))}),a>1&&e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["P√°gina ",c+1," de ",a]})]})},G=({title:t,isExpanded:i,onToggle:l,children:c})=>e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsxs("button",{className:"cursor-pointer flex justify-between items-center w-full py-2 text-left font-medium text-gray-700 hover:text-gray-900",onClick:l,children:[t,i?e.jsx(Ce,{size:16}):e.jsx(he,{size:16})]}),i&&e.jsx("div",{className:"mt-2 space-y-2",children:c})]}),De=({categories:t,selectedCategories:i,onCategoryChange:l,isExpanded:c,onToggle:d,productCountByCategory:n})=>{const o=x=>{const a=x.trim();if(i.map(j=>j.trim()).includes(a)){const j=i.filter(b=>b.trim()!==a);l(j)}else l([...i,a])};return e.jsx(G,{title:"Categor√≠as",isExpanded:c,onToggle:d,children:e.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto pr-2 scrollbar-thin",children:t.map((x,a)=>{const p=`category-${x}-${a}`,j=`category-input-${x}-${a}`;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:j,checked:i.map(b=>b.trim()).includes(x.trim()),onChange:()=>o(x),className:"cursor-pointer h-4 w-4 text-primary-600 focus:ring-primary-500 rounded border-gray-300"}),e.jsxs("label",{htmlFor:j,className:"cursor-pointer ml-2 block text-sm text-gray-700",children:[x,e.jsxs("span",{className:"ml-1 text-gray-400 text-xs",children:["(",n[x]||0,")"]})]})]},p)})})})},Le=({initialMin:t,initialMax:i,selectedRange:l,isExpanded:c,onToggle:d,onApply:n,onClear:o})=>{const[x,a]=m.useState(l?.min||t),[p,j]=m.useState(l?.max||i),[b,v]=m.useState((l?.min||t).toString()),[N,g]=m.useState((l?.max||i).toString()),[h,s]=m.useState(""),[f,k]=m.useState(""),r=(P,I)=>{if(P===""){I==="min"?(s(""),v(P)):(k(""),g(P));return}const z=parseInt(P);if(isNaN(z)||z<0){const T="Solo se permiten n√∫meros v√°lidos";I==="min"?s(T):k(T);return}I==="min"?(s(""),a(z),v(P)):(k(""),j(z),g(P))},y=P=>{r(P.target.value,"min")},C=P=>{r(P.target.value,"max")},F=()=>{(b==="0"||b===t.toString())&&v("")},S=()=>{(N==="0"||N===i.toString())&&g("")},A=()=>{b===""&&(v(t.toString()),a(t),s(""))},R=()=>{N===""&&(g(i.toString()),j(i),k(""))},$=()=>{if(h||f)return;const P=Math.min(x,p),I=Math.max(x,p);n(P,I)};return e.jsx(G,{title:"Precio",isExpanded:c,onToggle:d,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"min-price",className:"block text-sm text-gray-500 mb-1",children:"M√≠nimo"}),e.jsx("input",{type:"text",id:"min-price",value:b,onChange:y,onFocus:F,onBlur:A,placeholder:"Precio m√≠nimo",className:`w-full p-2 border rounded ${h?"border-red-300 bg-red-50":"border-gray-300"}`}),h&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:h})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"max-price",className:"block text-sm text-gray-500 mb-1",children:"M√°ximo"}),e.jsx("input",{type:"text",id:"max-price",value:N,onChange:C,onFocus:S,onBlur:R,placeholder:"Precio m√°ximo",className:`w-full p-2 border rounded ${f?"border-red-300 bg-red-50":"border-gray-300"}`}),f&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:f})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:$,disabled:!!(h||f),className:`flex-1 py-2 px-4 rounded text-sm ${h||f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"}`,children:"Aplicar"}),l&&e.jsx("button",{onClick:o,className:"bg-gray-200 text-gray-700 py-2 px-3 rounded hover:bg-gray-300 text-sm",children:e.jsx(_,{size:18})})]})]})})},Ue=({selectedRating:t,onRatingChange:i,isExpanded:l,onToggle:c})=>{const d=[5,4,3,2,1];return e.jsx(G,{title:"Valoraci√≥n",isExpanded:l,onToggle:c,children:e.jsx("div",{className:"space-y-2",children:d.map(n=>{const o=t!==null&&Number(t)===Number(n);return e.jsxs("button",{onClick:()=>{i(o?null:n)},className:`cursor-pointer flex items-center w-full p-2 rounded-md transition ${o?"bg-primary-50 text-primary-700 border border-primary-200":"hover:bg-gray-100 text-gray-700 border border-transparent"}`,children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((x,a)=>e.jsx(Ne,{size:16,fill:a<n?"currentColor":"none",className:a<n?"text-yellow-400":"text-gray-300"},`star-${n}-${a}`))}),e.jsxs("span",{className:"ml-2 text-sm",children:[n,"+ estrellas"]})]},`rating-${n}`)})})})},Oe=({selectedDiscount:t,onDiscountChange:i,isExpanded:l,onToggle:c})=>e.jsx(G,{title:"Ofertas",isExpanded:l,onToggle:c,children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"discount-filter",checked:t,onChange:()=>i(!t),className:"cursor-pointer h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"discount-filter",className:"cursor-pointer ml-2 block text-sm text-gray-700",children:"Productos con descuento"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Mostrar solo productos con ofertas especiales y descuentos"})]})}),qe=({categories:t,priceRange:i,onCategoryChange:l,onPriceRangeChange:c,onRatingChange:d,onDiscountChange:n,onClearFilters:o,selectedCategories:x,selectedPriceRange:a,selectedRating:p,selectedDiscount:j,productCountByCategory:b})=>{const[v,N]=m.useState({categories:!0,price:!0,rating:!1,discount:!1}),g=s=>{N(f=>({...f,[s]:!f[s]}))},h=x.length>0||a!==null||p!==null||j;return e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Filtros"}),h&&e.jsx("button",{onClick:o,className:"text-sm text-primary-600 hover:text-primary-700",children:"Limpiar filtros"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(De,{categories:t,selectedCategories:x,onCategoryChange:l,isExpanded:v.categories,onToggle:()=>g("categories"),productCountByCategory:b}),e.jsx(Le,{initialMin:i.min,initialMax:i.max,selectedRange:a,isExpanded:v.price,onToggle:()=>g("price"),onApply:(s,f)=>c({min:s,max:f}),onClear:()=>c(null)}),e.jsx(Ue,{selectedRating:p,onRatingChange:d,isExpanded:v.rating,onToggle:()=>g("rating")}),e.jsx(Oe,{selectedDiscount:j,onDiscountChange:n,isExpanded:v.discount,onToggle:()=>g("discount")})]})]})},Ve=t=>{if(!t||typeof t!="object")return console.error("Producto inv√°lido para adaptar:",t),{};const i=t.ratingAvg||t.rating_avg||t.rating||t.rating_data?.average_rating||0,l=t.ratingAvg_count||t.rating_avg_count||t.rating_count||t.rating_data?.average_rating_count||0;let c=[];Array.isArray(t.images)?typeof t.images[0]=="object"?c=t.images.map(x=>x.original||x.url||x.medium||x.thumbnail||"").filter(Boolean):typeof t.images[0]=="string"&&(c=t.images):typeof t.image=="string"?c=[t.image]:(typeof t.imageUrl=="string"||typeof t.image_url=="string")&&(c=[t.imageUrl||t.image_url]);const d=t.discountPercentage||t.discount_percentage||0,n=parseFloat(t.price)||0,o=t.finalPrice||t.final_price||(d>0?n*(1-d/100):n);return{id:t.id,userId:t.userId||t.user_id,categoryId:t.categoryId||t.category_id,name:t.name||"Producto sin nombre",slug:t.slug||"",description:t.description||"",price:n,stock:parseInt(t.stock)||0,weight:t.weight,width:t.width,height:t.height,depth:t.depth,dimensions:t.dimensions,colors:t.colors,sizes:t.sizes,tags:t.tags,sku:t.sku,attributes:t.attributes,images:c,featured:!!t.featured,published:!!t.published,status:t.status||"active",viewCount:t.viewCount||t.view_count||0,salesCount:t.salesCount||t.sales_count||0,discountPercentage:d,finalPrice:o,isInStock:t.isInStock||t.is_in_stock||t.stock>0,rating:parseFloat(i)||0,ratingCount:parseFloat(l)||0,createdAt:t.createdAt||t.created_at,updatedAt:t.updatedAt||t.updated_at,created_at:t.created_at||t.createdAt||new Date().toISOString(),category_name:t.category?.name||t.category_name||"Sin categor√≠a",isNew:void 0}},We=m.memo(({products:t,categories:i,isLoading:l,error:c,onRetry:d,onAddToCart:n,onAddToWishlist:o,selectedCategories:x,totalItems:a,currentPage:p,itemsPerPage:j,onResetFilters:b})=>{if(l)return e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})});if(c)return e.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:[e.jsxs("p",{className:"text-red-700",children:["Error al cargar productos: ",c]}),e.jsx("button",{onClick:d,className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reintentar"})]});if(t.length===0)return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"No se encontraron productos"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No hay productos que coincidan con los filtros actuales."}),e.jsx("button",{onClick:b,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Limpiar filtros"})]});const v=(p-1)*j+1,N=Math.min(p*j,a);return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:x.length>0?x.join(", "):"Todos los productos"}),e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("p",{className:"text-gray-600",children:["Mostrando ",v,"-",N," de ",a," productos"]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(g=>{const h=Ve(g),s=g.calculated_rating??g.rating??h.rating??null,f=g.calculated_rating_count??g.rating_count??g.ratingCount??null,k=s&&s>0?s:null,r=k&&f!==null&&f>=0?f:null,y=ke(g);return e.jsx($e,{id:h.id||0,name:h.name,price:h.price,discount:g.discountPercentage,rating:k,reviews:r,image:y,category:i.find(C=>C.id===h.categoryId)?.name,isNew:new Date(h.createdAt||"").getTime()>Date.now()-30*24*60*60*1e3,onAddToCart:n,onAddToWishlist:o},h.id)})})]})}),Ge=({options:t,selectedOption:i,onSortChange:l})=>{const[c,d]=m.useState(!1),n=m.useRef(null);m.useEffect(()=>{const a=p=>{n.current&&!n.current.contains(p.target)&&d(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const o=()=>{const a=t.find(p=>p.id===i);return a?a.label:"Ordenar por"},x=a=>{l(a),d(!1)};return e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("button",{onClick:()=>d(!c),className:"cursor-pointer flex items-center px-4 py-2 bg-white rounded-lg shadow border border-gray-200 text-gray-700 hover:bg-gray-50",children:[e.jsx("span",{className:"mr-2",children:o()}),e.jsx(he,{size:16,className:`transition-transform ${c?"transform rotate-180":""}`})]}),c&&e.jsx("div",{className:"absolute right-0 mt-2 z-10 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1",children:t.map(a=>e.jsx("button",{onClick:()=>x(a.id),className:`block w-full text-left px-4 py-2 text-sm ${i===a.id?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:a.label},a.id))})]})},Ke=({onApply:t,selectedRangeId:i})=>{const[l,c]=m.useState(!1),[d,n]=m.useState(""),[o,x]=m.useState(""),[a,p]=m.useState(""),j=()=>{const b=parseInt(d),v=parseInt(o);if(isNaN(b)||isNaN(v)||b<0||v<0){p("Ingrese n√∫meros v√°lidos");return}if(b>v){p("El precio m√≠nimo debe ser menor al m√°ximo");return}p(""),t(b,v),c(!1),n(""),x("")};return e.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:l?e.jsxs("div",{className:"space-y-3 px-3 py-2 bg-gray-50 rounded-md",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rango personalizado"}),e.jsx("button",{onClick:()=>{c(!1),p(""),n(""),x("")},className:"text-gray-400 hover:text-gray-600",children:e.jsx(_,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"M√≠n",value:d,onChange:b=>n(b.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),e.jsx("input",{type:"text",placeholder:"M√°x",value:o,onChange:b=>x(b.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"})]}),a&&e.jsx("p",{className:"text-xs text-red-500",children:a}),e.jsx("button",{onClick:j,className:"w-full bg-primary-600 text-white py-1 px-3 rounded text-sm hover:bg-primary-700",children:"Aplicar"})]}):e.jsx("button",{onClick:()=>c(!0),className:"w-full text-left px-3 py-2 rounded-md text-sm text-primary-600 hover:bg-primary-50 font-medium",children:"+ Rango personalizado"})})},He=({isOpen:t,onClose:i,categories:l,selectedCategories:c,priceRanges:d,selectedRangeId:n,selectedRating:o,showingDiscounted:x,onCategoryChange:a,onPriceRangeChange:p,onRatingChange:j,onDiscountToggle:b,onClearFilters:v,productCountByCategory:N})=>{if(!t)return null;const g=s=>{const[f,k]=s.split("-").map(Number);p(f,k)},h=c.length>0||n!==null||o!==null||x;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex md:hidden",children:e.jsxs("div",{className:"absolute inset-y-0 right-0 w-4/5 max-w-md bg-white overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800",children:"Filtros"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:e.jsx(_,{size:24})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"Categor√≠as"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`mobile-category-${s.id}`,checked:c.includes(s.name),onChange:()=>a(s.name,!c.includes(s.name)),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 rounded border-gray-300"}),e.jsxs("label",{htmlFor:`mobile-category-${s.id}`,className:"ml-2 block text-sm text-gray-700",children:[s.name,e.jsxs("span",{className:"ml-1 text-gray-400 text-xs",children:["(",N[s.name]||0,")"]})]})]},s.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"Precio"}),e.jsxs("div",{className:"space-y-2",children:[d.map(s=>e.jsx("button",{onClick:()=>g(s.id),className:`block w-full text-left px-3 py-2 rounded-md text-sm ${n===s.id?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:s.label},s.id)),e.jsx(Ke,{onApply:(s,f)=>p(s,f),selectedRangeId:n})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-3",children:"Valoraci√≥n"}),e.jsx("div",{className:"space-y-2",children:[5,4,3,2,1].map(s=>e.jsxs("button",{onClick:()=>j(o===s?null:s),className:`flex items-center w-full px-3 py-2 rounded-md text-sm ${o===s?"bg-primary-50 text-primary-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(Fe,{rating:s}),e.jsxs("span",{className:"ml-2",children:[s,"+ estrellas"]})]},s))})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"mobile-discount-filter",checked:x,onChange:b,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"mobile-discount-filter",className:"ml-2 block text-sm text-gray-700",children:"Productos con descuento"})]})})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[h&&e.jsx("button",{onClick:v,className:"w-full py-2 px-4 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 text-sm",children:"Limpiar filtros"}),e.jsx("button",{onClick:i,className:"w-full py-2 px-4 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm",children:"Ver resultados"})]})]})})},Ze=({selectedCategories:t,selectedPriceRange:i,selectedRating:l,searchTerm:c,showingDiscounted:d,onRemoveCategory:n,onClearPriceRange:o,onClearRating:x,onClearSearch:a,onToggleDiscount:p,onClearAllFilters:j,onToggleFilters:b})=>{const v=t.length>0||i!==null||l!==null||d||c!=="";return v?e.jsxs("div",{className:"w-full md:w-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mr-3",children:"Filtros Activos"}),v&&e.jsx("button",{onClick:j,className:"text-xs text-primary-600 hover:text-primary-700",children:"Limpiar todos"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:b,className:"md:hidden flex items-center px-3 py-1 bg-primary-50 text-primary-700 rounded-full text-sm",children:[e.jsx(ue,{size:14,className:"mr-1"}),e.jsx("span",{children:"Filtrar"})]}),c&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[e.jsxs("span",{className:"mr-1",children:["B√∫squeda: ",c]}),e.jsx("button",{onClick:a,className:"ml-1 text-blue-500 hover:text-blue-700",children:e.jsx(_,{size:14})})]}),t.map((N,g)=>e.jsxs("div",{className:"flex items-center px-3 py-1 bg-primary-100 text-primary-700 rounded-full text-sm",children:[e.jsxs("span",{className:"mr-1",children:["Categor√≠a: ",N]}),e.jsx("button",{onClick:()=>n(N),className:"ml-1 text-primary-500 hover:text-primary-700",children:e.jsx(_,{size:14})})]},`Active Filter - ${N} - ${g}`)),i&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-green-50 text-green-700 rounded-full text-sm",children:[e.jsxs("span",{className:"mr-1",children:["Precio: $",i.min," - $",i.max]}),e.jsx("button",{onClick:o,className:"ml-1 text-green-500 hover:text-green-700",children:e.jsx(_,{size:14})})]}),l!==null&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-yellow-50 text-yellow-700 rounded-full text-sm",children:[e.jsxs("span",{className:"mr-1",children:["Valoraci√≥n: ",l,"+ estrellas"]}),e.jsx("button",{onClick:x,className:"ml-1 text-yellow-500 hover:text-yellow-700",children:e.jsx(_,{size:14})})]}),d&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-red-50 text-red-700 rounded-full text-sm",children:[e.jsx("span",{className:"mr-1",children:"Con descuento"}),e.jsx("button",{onClick:p,className:"ml-1 text-red-500 hover:text-red-700",children:e.jsx(_,{size:14})})]})]})]}):e.jsxs("button",{onClick:b,className:"md:hidden flex items-center px-4 py-2 bg-white rounded-lg shadow border border-gray-200 text-gray-700",children:[e.jsx(ue,{size:18,className:"mr-2"}),e.jsx("span",{children:"Filtros"})]})},Qe=({currentPage:t,totalPages:i,onPageChange:l})=>{if(i<=1)return null;const d=(()=>{const n=[];n.push(1),t>3&&n.push("...");for(let o=Math.max(2,t-1);o<=Math.min(i-1,t+1);o++)o>1&&o<i&&n.push(o);return t<i-2&&n.push("..."),i>1&&n.push(i),n})();return e.jsx("div",{className:"hidden md:flex justify-center mt-6",children:e.jsxs("nav",{className:"inline-flex items-center rounded-md shadow-sm","aria-label":"Paginaci√≥n",children:[e.jsxs("button",{onClick:()=>l(t-1),disabled:t===1,className:`relative inline-flex items-center rounded-l-md border border-gray-300 bg-white px-2 py-2 text-sm ${t===1?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Anterior"}),e.jsx(ee,{size:16})]}),d.map((n,o)=>e.jsx(te.Fragment,{children:typeof n=="number"?e.jsx("button",{onClick:()=>l(n),className:`relative inline-flex items-center border border-gray-300 px-4 py-2 text-sm font-medium ${t===n?"bg-primary-50 border-primary-500 text-primary-600 z-10":"bg-white text-gray-500 hover:bg-gray-50"}`,children:n}):e.jsx("span",{className:"relative inline-flex items-center border border-gray-300 bg-white px-4 py-2 text-sm text-gray-700",children:n})},o)),e.jsxs("button",{onClick:()=>l(t+1),disabled:t===i,className:`relative inline-flex items-center rounded-r-md border border-gray-300 bg-white px-2 py-2 text-sm ${t===i?"text-gray-300 cursor-not-allowed":"text-gray-500 hover:bg-gray-50"}`,children:[e.jsx("span",{className:"sr-only",children:"Siguiente"}),e.jsx(W,{size:16})]})]})})},Xe=({currentPage:t,totalPages:i,onPageChange:l})=>{if(i<=1)return null;const c=()=>{const d=[];if(i<=5)for(let n=1;n<=i;n++)d.push(n);else{let n;t<=3?n=1:t>=i-2?n=i-4:n=t-2;for(let o=0;o<5;o++)d.push(n+o)}return d};return e.jsxs("div",{className:"flex flex-col items-center mt-6 space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["P√°gina ",e.jsx("span",{className:"font-medium text-gray-900",children:t})," ","de ",e.jsx("span",{className:"font-medium text-gray-900",children:i})]}),e.jsxs("div",{className:"flex justify-center items-center space-x-1",children:[e.jsx("button",{onClick:()=>l(t-1),disabled:t===1,className:`flex items-center justify-center w-10 h-10 rounded-lg border ${t>1?"border-gray-300 text-gray-700 hover:bg-gray-50":"border-gray-200 text-gray-400 cursor-not-allowed"}`,"aria-label":"P√°gina anterior",children:e.jsx(ee,{size:20})}),c().map(d=>e.jsx("button",{onClick:()=>l(d),className:`flex items-center justify-center w-10 h-10 rounded-lg text-sm ${t===d?"bg-primary-600 text-white font-medium shadow-sm":"border border-gray-300 text-gray-700 hover:bg-gray-50"}`,"aria-label":`P√°gina ${d}`,"aria-current":t===d?"page":void 0,children:d},d)),e.jsx("button",{onClick:()=>l(t+1),disabled:t===i,className:`flex items-center justify-center w-10 h-10 rounded-lg border ${t<i?"border-gray-300 text-gray-700 hover:bg-gray-50":"border-gray-200 text-gray-400 cursor-not-allowed"}`,"aria-label":"P√°gina siguiente",children:e.jsx(W,{size:20})})]})]})},Ye=(t,i)=>{const l={};return t.forEach(c=>{l[c.name]=c.product_count||0}),i&&i.length>0&&i.forEach(c=>{const d=c.categoryId,n=t.find(o=>o.id===d);n&&(l[n.name]=(l[n.name]||0)+1)}),l},Je=[{id:"0-100",label:"Menos de $100"},{id:"100-300",label:"$100 - $300"},{id:"300-500",label:"$300 - $500"},{id:"500-1000",label:"$500 - $1000"},{id:"1000-2000",label:"$1000 - $2000"},{id:"2000-999999",label:"M√°s de $2000"}],et=[{id:"featured",label:"Destacados"},{id:"price-asc",label:"Precio: Menor a Mayor"},{id:"price-desc",label:"Precio: Mayor a Menor"},{id:"name-asc",label:"Nombre: A-Z"},{id:"name-desc",label:"Nombre: Z-A"},{id:"newest",label:"M√°s recientes"},{id:"rating",label:"Mejor valorados"}],ut=()=>{const[t,i]=m.useState(!1),[l,c]=m.useState(!1),[d,n]=m.useState(!1),{loading:o,error:x,categories:a,fetchCategories:p}=Re(),{searchTerm:j,isSearching:b,handleSearchChange:v,handleSearchSubmit:N,clearSearch:g,setSearchTermExternal:h}=Ee(),{filters:s,buildFilterParams:f,setCategories:k,setPriceRange:r,setRating:y,setDiscount:C,setSortBy:F,setPage:S,setSearchTerm:A,clearFilters:R,toggleCategory:$}=Te(a),{loading:P,error:I,products:z,meta:T,fetchProducts:K}=Pe(),{addToCart:se}=Ae(),{toggleFavorite:re,checkIsFavorite:ae}=ze(),{optimisticCartAdd:oe,optimisticFavoriteAdd:ne,optimisticFavoriteRemove:ie}=Ie(),L=m.useCallback(()=>{q.removeItem("cart_user_data"),q.removeItem("cart_guest_data"),q.removeItem("header_counters");for(let u=1;u<=10;u++)q.removeItem(`user_favorites_${u}_10`);console.log("üîÑ Cache de p√°ginas relacionadas invalidado desde ProductPage")},[]);m.useEffect(()=>{h(s.searchTerm)},[s.searchTerm,h]);const le=m.useMemo(()=>Ye(a,z),[a,z]);m.useEffect(()=>{const u=()=>{c(window.innerWidth<768)};return u(),window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]),m.useEffect(()=>{console.log("Cargando categor√≠as..."),p(!0,!1)},[p]),m.useEffect(()=>{console.log("üéÜ ProductPage: Cargando productos iniciales como respaldo...");const u={limit:V.pagination.defaultPageSize,offset:0,published:!0,status:"active",sortBy:"featured",sortDir:"desc"};console.log("üöÄ ProductPage: Cargando productos con par√°metros iniciales:",u),K(u).then(w=>{console.log("üéÜ ProductPage: Productos iniciales cargados:",w)}).catch(w=>{console.error("‚ùå ProductPage: Error cargando productos iniciales:",w)})},[]),m.useEffect(()=>{if(console.log("üîÑ ProductPage: useEffect triggered",{categoriesCount:a.length,filters:s,component:"ProductPage"}),a.length>0){console.log("‚úÖ ProductPage: Categor√≠as disponibles, construyendo par√°metros...");const u=f();console.log("üì§ ProductPage: Par√°metros construidos:",u),console.log("üöÄ ProductPage: Llamando fetchProducts..."),K(u).then(w=>{console.log("üì• ProductPage: Resultado de fetchProducts:",w)}).catch(w=>{console.error("‚ùå ProductPage: Error en fetchProducts:",w)})}else console.log("‚è≥ ProductPage: Esperando categor√≠as...",a.length)},[a.length,s.categories.join(","),s.priceRange?`${s.priceRange.min}-${s.priceRange.max}`:"",s.rating,s.discount,s.sortBy,s.page,s.searchTerm]);const ce=m.useCallback(u=>{r(u)},[r]),pe=m.useCallback(u=>{console.log("Manejando b√∫squeda:",u),A(u)},[A]),de=m.useCallback(()=>{console.log("Limpiando b√∫squeda"),A("")},[A]),be=m.useCallback(u=>{console.log("Clic en categor√≠a:",u.name),$(u.name)},[$]),fe=m.useCallback(async u=>{if(console.log("üè™ ProductPage.handleAddToCart INICIADO",{productId:u,isUpdating:d,component:"ProductPage"}),d){console.log("‚ùå ProductPage: Click ignorado - ya se est√° procesando");return}try{n(!0),console.log("üîí ProductPage: Estado isUpdating = true"),console.log("üìà ProductPage: Aplicando optimisticCartAdd..."),oe(),console.log("üìû ProductPage: Llamando addToCart API..."),await se({productId:u,quantity:1}),console.log("üîÑ ProductPage: Invalidando cache..."),L(),console.log(`‚úÖ ProductPage: Producto ${u} a√±adido al carrito correctamente`)}catch(w){console.error("‚ùå ProductPage: Error al a√±adir al carrito:",w)}finally{console.log("üîö ProductPage: Limpiando estado isUpdating..."),setTimeout(()=>{n(!1),console.log("‚úÖ ProductPage: Estado limpio")},1e3)}},[se,oe,L,d]),ye=m.useCallback(async u=>{const w=ae(u);if(console.log("üíñ ProductPage.handleAddToWishlist INICIADO",{productId:u,isCurrentlyFavorite:w,isUpdating:d,component:"ProductPage"}),d){console.log("‚ùå ProductPage: Click ignorado - ya se est√° procesando");return}try{n(!0),console.log("üîí ProductPage: Estado isUpdating = true"),console.log(`üìà ProductPage: Aplicando optimistic${w?"Remove":"Add"}...`),w?ie():ne(),console.log("üìû ProductPage: Llamando toggleFavorite API..."),await re(u),console.log("üîÑ ProductPage: Invalidando cache..."),L(),console.log(`‚úÖ ProductPage: Favorito ${u} gestionado correctamente`)}catch(Z){console.error("‚ùå ProductPage: Error al a√±adir a favoritos:",Z)}finally{console.log("üîö ProductPage: Limpiando estado isUpdating..."),setTimeout(()=>{n(!1),console.log("‚úÖ ProductPage: Estado limpio")},1e3)}},[re,ae,ne,ie,L,d]),je=m.useCallback(u=>Se(u),[]),me=T?Math.ceil(T.total/(T.limit||V.pagination.defaultPageSize)):0,H=s.categories.length>0||s.priceRange!==null||s.rating!==null||s.discount||s.sortBy!=="featured"||s.searchTerm!=="",U=P||o||b,ge=m.useMemo(()=>a.filter(u=>u.is_active).slice(0,24),[a]);return console.log("Estado actual:",{categoriesData:a.length,productsData:z.length,filters:s,isLoading:U,hasActiveFilters:H,isUpdating:d}),e.jsxs("div",{className:"container mx-auto px-9 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Productos"}),e.jsx(Me,{searchTerm:j,onSearchChange:v,onSearch:N(pe),onClear:()=>g(de),isLoading:b}),e.jsxs("section",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Categor√≠as"}),o?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})}):x?e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-lg",children:[e.jsxs("p",{children:["Error al cargar categor√≠as: ",x]}),e.jsx("button",{onClick:()=>p(!0,!0),className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"Reintentar"})]}):ge.length>0?e.jsx(Be,{categories:ge,onCategoryClick:be}):e.jsx("div",{className:"p-4 bg-gray-50 text-gray-500 rounded-lg text-center",children:"No hay categor√≠as disponibles"})]}),e.jsxs("div",{className:"flex md:justify-end justify-between mb-6 space-x-4",children:[e.jsx(Ze,{selectedCategories:s.categories,selectedPriceRange:s.priceRange,selectedRating:s.rating,searchTerm:s.searchTerm,showingDiscounted:s.discount,onRemoveCategory:u=>{k(s.categories.filter(w=>w!==u))},onClearPriceRange:()=>r(null),onClearRating:()=>y(null),onClearSearch:de,onToggleDiscount:()=>C(!s.discount),onClearAllFilters:R,onToggleFilters:()=>i(!0)}),e.jsx("div",{className:"",children:e.jsx(Ge,{options:et,selectedOption:s.sortBy,onSortChange:F})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"hidden md:block md:w-72 flex-shrink-0",children:e.jsx(qe,{categories:a.map(u=>u.name),priceRange:{min:0,max:3e3},onCategoryChange:k,onPriceRangeChange:ce,onRatingChange:y,onDiscountChange:u=>C(u),onClearFilters:R,selectedCategories:s.categories,selectedPriceRange:s.priceRange,selectedRating:s.rating,selectedDiscount:s.discount,productCountByCategory:le})}),e.jsx(He,{isOpen:t,onClose:()=>i(!1),categories:a,selectedCategories:s.categories,priceRanges:Je,selectedRangeId:s.priceRange?`${s.priceRange.min}-${s.priceRange.max}`:null,selectedRating:s.rating,showingDiscounted:s.discount,onCategoryChange:(u,w)=>{k(w?[...s.categories,u]:s.categories.filter(Z=>Z!==u))},onPriceRangeChange:(u,w)=>{ce({min:u,max:w})},onRatingChange:y,onDiscountToggle:()=>C(!s.discount),onClearFilters:R,productCountByCategory:le}),e.jsxs("div",{className:"flex-1",children:[e.jsx(We,{products:z,categories:a,isLoading:U,error:I||null,onRetry:()=>{const u=f();K(u)},onAddToCart:fe,onAddToWishlist:ye,getImageUrl:je,selectedCategories:s.categories,totalItems:T?.total||0,currentPage:s.page,itemsPerPage:T?.limit||V.pagination.defaultPageSize,onResetFilters:R}),T&&e.jsxs(e.Fragment,{children:[l&&e.jsx(Xe,{currentPage:s.page,totalPages:me||1,onPageChange:S}),!l&&e.jsx(Qe,{currentPage:s.page,totalPages:me||1,onPageChange:S})]}),!U&&!I&&z.length===0&&H&&e.jsxs("div",{className:"mt-8 p-6 bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No se encontraron productos"}),e.jsx("p",{className:"mb-4",children:"No hay productos que coincidan con los filtros seleccionados."}),e.jsx("button",{onClick:R,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"Limpiar todos los filtros"})]}),!U&&!I&&z.length===0&&!H&&e.jsxs("div",{className:"mt-8 p-6 bg-gray-50 border border-gray-200 text-gray-600 rounded-lg text-center",children:[e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No hay productos disponibles"}),e.jsx("p",{children:"Actualmente no hay productos en el cat√°logo. Por favor, int√©ntalo m√°s tarde."})]})]})]})]})};export{ut as default};
//# sourceMappingURL=ProductPage-CvkGVAau.js.map
